import{a as T_}from"./chunk-YCDSEQ2I.js";import{a as E_}from"./chunk-ITAS4PYU.js";import{d as vg,e as Gt,f as Xr,g as Ur,h as ss,i as Md,j as $u,k as _g,l as Wu,m as wg,n as Cg,o as Dd,p as Hu,q as M_,x as Sg}from"./chunk-7QOS4MOO.js";import{A as c_,C as h_,Fa as w_,J as d_,M as sg,Ma as P_,N as lg,Na as O_,O as os,P as as,Pa as Od,Q as ug,Qa as xg,R as f_,S as cg,T as hg,U as wl,V as p_,W as m_,X as g_,Y as y_,Z as v_,_ as dg,aa as fg,b as tg,fa as b_,ga as pg,h as Ti,ha as Pd,i as i_,ia as mg,j as is,l as xd,m as Uu,n as _d,o as Sd,oa as x_,p as _l,q as a_,r as ng,s as Td,t as Ed,u as s_,v as ig,w as og,xa as __,ya as gg,z as ag}from"./chunk-DEAOBGB4.js";import{d as yg,f as C_,g as S_}from"./chunk-ILWOP6EW.js";import{$ as e_,D as J2,N as q2,Q as Q2,aa as t_,b as Wr,ba as r_,c as zr,ha as n_,ja as wd,k as vd,ka as Cd,l as bd,la as rg,o as Qn,p as K2,pa as o_,q as eg,r as Un,s as Z2,t as Y2,u as X2,ua as l_,wa as u_,ya as bg}from"./chunk-IJIU7GDE.js";import{a as Nu,g as Xt,i as br}from"./chunk-VV54FNKQ.js";var Eg=Xt((cE,Tg)=>{var D_=u_(),A_=__(),I_=l_();function z_(s,i,n){for(var l=-1,c=i.length,a={};++l<c;){var b=i[l],w=D_(s,b);n(w,b)&&A_(a,I_(b,s),w)}return a}Tg.exports=z_});var Og=Xt((hE,Pg)=>{var k_=Eg(),L_=c_();function R_(s,i){return k_(s,i,function(n,l){return L_(s,l)})}Pg.exports=R_});var Ad=Xt((dE,Mg)=>{var j_=Og(),F_=C_(),V_=F_(function(s,i){return s==null?{}:j_(s,i)});Mg.exports=V_});var zg=Xt(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.normalizeBoolean=N_;function N_(s){var i=typeof s=="string"?s.toLowerCase():s;switch(i){case!0:case 1:case"1":case"yes":case"on":case"true":return!0;case!1:case 0:case"0":case"no":case"off":case"false":return!1;default:return}}});var $g=Xt(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.strictParseFloat=iw;Ta.roundToDecimal=ow;Ta.floorPowerOfTen=aw;Ta.isLessThanMinSafeInt=sw;Ta.isGreaterThanMaxSafeInt=lw;var Fd=zr(),tw=/(^[-+]?[0-9]*[.]?[0-9]*$)|(^[-+]?[0-9][.]?[0-9]*e[-+]?[0-9][0-9]*$)/i,rw=-9007199254740991,nw=9007199254740991;function iw(s){return tw.test(s)?parseFloat(s):NaN}function ow(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,Fd.round)(s,i*-1)}function aw(s){return Math.pow(10,Math.floor(Math.log(s)/Math.LN10))}function sw(s){return(0,Fd.isNumber)(s)?s<=rw:!1}function lw(s){return(0,Fd.isNumber)(s)?s>=nw:!1}});var Zg=Xt(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.sprintfFormat=Gg;Qu.sprintfParse=Kg;var Wg=zr();function qu(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qu=function(n){return typeof n}:qu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qu(s)}var mi={notType:/[^T]/,notPrimitive:/[^v]/,number:/[diefg]/,numericArg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,keyAccess:/^\.([a-z_][a-z_\d]*)/i,indexAccess:/^\[(\d+)\]/,sign:/^[+-]/};function Hg(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),l=1;l<i;l++)n[l-1]=arguments[l];return Gg(Kg(s),[s].concat(n))}function Gg(s,i){var n=s.length,l=1,c,a="",b,w,_,T,x,M,A,D;for(b=0;b<n;b+=1)if(typeof s[b]=="string")a+=s[b];else if(qu(s[b])==="object"){if(_=s[b],_.keys)for(c=i[l],w=0;w<_.keys.length;w+=1){if(!(0,Wg.has)(c,_.keys[w]))throw new Error(Hg('[sprintf] property "%s" does not exist',_.keys[w]));c=c[_.keys[w]]}else _.paramNo?c=i[_.paramNo]:(c=i[l],l+=1);if(mi.notType.test(_.type)&&mi.notPrimitive.test(_.type)&&c instanceof Function&&(c=c()),mi.numericArg.test(_.type)&&typeof c!="number"&&Number.isNaN(Number(c)))throw new TypeError(Hg("[sprintf] expecting number but found %T",c));switch(mi.number.test(_.type)&&(A=c>=0),_.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,_.width?parseInt(_.width,10):0);break;case"e":c=_.precision?parseFloat(c).toExponential(_.precision):parseFloat(c).toExponential();break;case"f":c=_.precision?parseFloat(c).toFixed(_.precision):parseFloat(c);break;case"g":c=_.precision?String(Number(c.toPrecision(_.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=_.precision?c.substring(0,_.precision):c;break;case"t":c=String(!!c),c=_.precision?c.substring(0,_.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=_.precision?c.substring(0,_.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=_.precision?c.substring(0,_.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase();break}mi.json.test(_.type)?a+=c:(mi.number.test(_.type)&&(!A||_.sign)?(D=A?"+":"-",c=c.toString().replace(mi.sign,"")):D="",x=_.padChar?_.padChar==="0"?"0":_.padChar.charAt(1):" ",M=_.width-(D+c).length,T=_.width&&M>0?(0,Wg.repeat)(x,M):"",a+=_.align?D+c+T:x==="0"?D+T+c:T+D+c)}return a}var Ju=Object.create(null);function Kg(s){if(Ju[s])return Ju[s];for(var i=s,n,l=0,c=[];i;){if((n=mi.text.exec(i))!==null)c.push(n[0]);else if((n=mi.modulo.exec(i))!==null)c.push("%");else if((n=mi.placeholder.exec(i))!==null){if(n[2]){l|=1;var a=n[2],b=[],w=[];if((b=mi.key.exec(a))!==null)for(w.push(b[1]);(a=a.substring(b[0].length))!=="";)if((b=mi.keyAccess.exec(a))!==null)w.push(b[1]);else if((b=mi.indexAccess.exec(a))!==null)w.push(b[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");n[2]=w}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:n[0],paramNo:n[1],keys:n[2],sign:n[3],padChar:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");i=i.substring(n[0].length)}return Ju[s]=c,Ju[s]}});var Vd=Xt(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.sprintf=ei;us.abbreviateNumber=cw;us.bytesToFileSize=hw;us.smartTrim=dw;var uw=zr(),si=Md(),gi=$g(),Yg=Zg();function ei(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),l=1;l<i;l++)n[l-1]=arguments[l];return(0,Yg.sprintfFormat)((0,Yg.sprintfParse)(s),[s].concat(n))}function cw(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-us",n=(0,uw.toNumber)(s);return n<=1e3?n.toLocaleString(i):n<1e4?ei((0,si._)("%sK"),(0,gi.roundToDecimal)(n/1e3,-2).toLocaleString(i)):n<1e5?ei((0,si._)("%sK"),(0,gi.roundToDecimal)(n/1e3,-1).toLocaleString(i)):n<999500?ei((0,si._)("%sK"),(0,gi.roundToDecimal)(n/1e3,0).toLocaleString(i)):n<1e7?ei((0,si._)("%sM"),(0,gi.roundToDecimal)(n/1e6,-2).toLocaleString(i)):n<1e8?ei((0,si._)("%sM"),(0,gi.roundToDecimal)(n/1e6,-1).toLocaleString(i)):n<9995e5?ei((0,si._)("%sM"),(0,gi.roundToDecimal)(n/1e6,0).toLocaleString(i)):n<1e10?ei((0,si._)("%sB"),(0,gi.roundToDecimal)(n/1e9,-2).toLocaleString(i)):n<1e11?ei((0,si._)("%sB"),(0,gi.roundToDecimal)(n/1e9,-1).toLocaleString(i)):ei((0,si._)("%sB"),(0,gi.roundToDecimal)(n/1e9,0).toLocaleString(i))}function hw(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-us",n=(s||0)/1024;if(n<0)throw new RangeError("bytes must be >= 0");if(Math.floor(n)===0)return ei((0,si._)("%s B"),s.toLocaleString(i));var l=n/1024;if(Math.floor(l)===0)return ei((0,si._)("%s KB"),(0,gi.roundToDecimal)(n,-2).toLocaleString(i));var c=l/1024;if(Math.floor(c)===0)return ei((0,si._)("%s MB"),(0,gi.roundToDecimal)(l,-2).toLocaleString(i));var a=c/1024;return Math.floor(a)===0?ei((0,si._)("%s GB"),(0,gi.roundToDecimal)(c,-2).toLocaleString(i)):ei((0,si._)("%s TB"),(0,gi.roundToDecimal)(a,-2).toLocaleString(i))}function dw(s,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=n.precomposed,c=l===void 0?!1:l;if(!s||i<1||s.length<=i)return s;var a=c?"\u2026":"...";if(i===1)return"".concat(s[0]).concat(a);var b=Math.ceil(s.length/2),w=s.length-i,_=Math.ceil(w/2),T=w-_;return"".concat(s.substring(0,b-_)).concat(a).concat(s.substring(b+T))}});var hc=Xt(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.default=void 0;function v0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function Rn(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?v0(Object(n),!0).forEach(function(l){jw(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function jw(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var Fw="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA2SURBVHgB7dKhEQAgDAPAhDnxDMAcDIBnT1pZV1FRk3e53EWFc+2P4N3DmLN+oKh/QADqB+IMUKEQD/CeueAAAAAASUVORK5CYII=",Vw={brandColorL50:"#f5fbf5",brandColorL40:"#dff2df",brandColorL30:"#bee6be",brandColorL20:"#9ed99e",brandColorL10:"#7ecd7e",brandColor:"#5cc05c",brandColorD10:"#49b849",brandColorD20:"#40a540",brandColorD30:"#389038",brandColorD40:"#307b30",brandColorD50:"#286728"},Go={white:"#ffffff",gray98:"#f7f8fa",gray96:"#f2f4f5",gray92:"#e1e6eb",gray80:"#c3cbd4",gray60:"#818d99",gray45:"#5c6773",gray30:"#3c444d",gray25:"#31373e",gray22:"#2b3033",gray20:"#171d21",black:"#000000"},lc={accentColorL50:"#ecf8ff",accentColorL40:"#bfe9ff",accentColorL30:"#7ed2ff",accentColorL20:"#3ebcff",accentColorL10:"#00a4fd",accentColor:"#007abd",accentColorD10:"#006eaa",accentColorD20:"#006297",accentColorD30:"#005684",accentColorD40:"#004a71",accentColorD50:"#003d5e"},Bw={errorColorL50:"#fcedec",errorColorL40:"#f8dcd9",errorColorL30:"#f1b9b3",errorColorL20:"#ea958d",errorColorL10:"#e37267",errorColor:"#dc4e41",errorColorD10:"#c84535",errorColorD20:"#b23d30",errorColorD30:"#9c3529",errorColorD40:"#852d24",errorColorD50:"#6f261d"},Nw={alertColorL50:"#fef3ec",alertColorL40:"#fde6d9",alertColorL30:"#facdb3",alertColorL20:"#f7b48c",alertColorL10:"#f49b66",alertColor:"#f1813f",alertColorD10:"#da742e",alertColorD20:"#c2672a",alertColorD30:"#aa5a25",alertColorD40:"#914d1f",alertColorD50:"#79401a"},Uw={warningColorL50:"#fff9eb",warningColorL40:"#fef2d7",warningColorL30:"#fde5ae",warningColorL20:"#fbd886",warningColorL10:"#facb5d",warningColor:"#f8be34",warningColorD10:"#e0ac16",warningColorD20:"#c79915",warningColorD30:"#ae8613",warningColorD40:"#957312",warningColorD50:"#7d600f"},$w={successColorL50:"#eef6ee",successColorL40:"#ddecdd",successColorL30:"#bbd9ba",successColorL20:"#98c697",successColorL10:"#76b374",successColor:"#53a051",successColorD10:"#479144",successColorD20:"#40813d",successColorD30:"#387135",successColorD40:"#2f612e",successColorD50:"#275126"},Ww={infoColorL50:"#e5f0f5",infoColorL40:"#cce2eb",infoColorL30:"#99c5d7",infoColorL20:"#66a7c4",infoColorL10:"#338ab0",infoColor:"#006d9c",infoColorD10:"#00577c",infoColorD20:"#004c6c",infoColorD30:"#00415d",infoColorD40:"#00364d",infoColorD50:"#002b3e"},Hw={diverging1ColorA:"#006d9c",diverging1ColorB:"#ec9960",diverging2ColorA:"#af575a",diverging2ColorB:"#62b3b2",diverging3ColorA:"#4fa484",diverging3ColorB:"#f8be34",diverging4ColorA:"#5a4575",diverging4ColorB:"#708794",diverging5ColorA:"#294e70",diverging5ColorB:"#b6c75a"},Gw={cat1Color:"#297ba5",cat1ColorL:"#78b9d6",cat2Color:"#4fa484",cat2ColorL:"#74d5c2",cat3Color:"#b6c75a",cat3ColorL:"#dce6a5",cat4Color:"#3c6188",cat4ColorL:"#a0b2ca",cat5Color:"#ec9960",cat5ColorL:"#fac9a7",cat6Color:"#a65c7d",cat6ColorL:"#d3a7ba",cat7Color:"#708794",cat7ColorL:"#b2c0c8",cat8Color:"#38b8bf",cat8ColorL:"#92dde2",cat9Color:"#ffde63",cat9ColorL:"#ffeeae",cat10Color:"#c19975",cat10ColorL:"#d7bfab",cat11Color:"#5a4575",cat11ColorL:"#b7acca",cat12Color:"#7ea77b",cat12ColorL:"#b2cab0",cat13Color:"#576d83",cat13ColorL:"#a5b2bf",cat14Color:"#d7c6b7",cat14ColorL:"#e9ddd4",cat15Color:"#339bb2",cat15ColorL:"#66c3d0",cat16Color:"#236d9b",cat16ColorL:"#66a7c2",cat17Color:"#e5dc80",cat17ColorL:"#f1eab7",cat18Color:"#96907f",cat18ColorL:"#c1bcb3",cat19Color:"#87bc65",cat19ColorL:"#b6d7a3",cat20Color:"#cf7e60",cat20ColorL:"#e1b2a1",cat21Color:"#7b5547",cat21ColorL:"#dec4ba",cat22Color:"#77d6d8",cat22ColorL:"#abe6e8",cat23Color:"#4a7f2c",cat23ColorL:"#91b282",cat24Color:"#f589ad",cat24ColorL:"#f8b7ce",cat25Color:"#6a2c5d",cat25ColorL:"#cba3c2",cat26Color:"#aaabae",cat26ColorL:"#cccdce",cat27Color:"#9a7438",cat27ColorL:"#c3ab89",cat28Color:"#a4d563",cat28ColorL:"#c7e6a3",cat29Color:"#7672a4",cat29ColorL:"#ada9c8",cat30Color:"#184b81",cat30ColorL:"#a4bbe0"},uc={textColor:Go.gray30,textGray:"#6b7785",textDisabledColor:Go.gray80,linkColor:lc.accentColorD10,linkColorHover:lc.accentColor,borderLightColor:Go.gray92,borderColor:Go.gray80,focusColor:lc.accentColorD10,backgroundColorHover:Go.gray96,backgroundColor:Go.white,transparent:"transparent"},Kw={syntaxBlue:"#2662fc",syntaxBlueLight:"#006d9c",syntaxBrown:"#a67f59",syntaxGray:"#8293a7",syntaxGreen:"#5ca300",syntaxGreenLight:"#5ba383",syntaxOrange:"#f58220",syntaxPink:"#cf00cf",syntaxPurple:"#7738ff",syntaxPurpleLight:"#b19cd9",syntaxRed:"#d90700",syntaxRedLight:"#af575a",syntaxTeal:"#00a8ab"},Zw={focusShadow:"0 0 1px 3px ".concat(uc.focusColor),focusShadowInset:"inset 0 0 1px 1px ".concat(Go.white,", inset 0 0 0 3px ").concat(uc.focusColor),overlayShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},Yw={draggableBackground:"url('data:image/png;base64,".concat(Fw,"') 0 0 / 8px 8px repeat")},Xw={borderRadius:"3px",border:"1px solid ".concat(uc.borderColor)},b0="'Splunk Platform Sans', 'Proxima Nova', Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif",Jw={sansFontFamily:b0,serifFontFamily:"Georgia, 'Times New Roman', Times, serif",monoFontFamily:"'Splunk Platform Mono', Inconsolata, Consolas, 'Droid Sans Mono', Monaco, 'Courier New', Courier, monospace",fontFamily:b0,fontWeightBold:"700",fontWeightSemiBold:"500"},qw={zindexFixedNavbar:1030,zindexModalBackdrop:1040,zindexModal:1050,zindexPopover:1060,zindexToastMessages:2e3},Qw=Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn(Rn({},Vw),Go),lc),Bw),Nw),Uw),$w),Ww),Gw),Hw),Kw),Jw),uc),Yw),Zw),Xw),qw),e5=Qw;cc.default=e5});var lf=Xt(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.default=void 0;var $n=t5(hc());function t5(s){return s&&s.__esModule?s:{default:s}}function x0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function _0(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?x0(Object(n),!0).forEach(function(l){r5(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):x0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function r5(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var n5="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA1SURBVHgB7dKhEQAgDAPAhHmwSKZHYtmHVtZVVNTkXS53UeG57yPYazLmrB8o6h8QgPqBOAOboRAPJUGIOAAAAABJRU5ErkJggg==",i5={backgroundColor:$n.default.gray20,backgroundColorHover:$n.default.gray30,borderColor:$n.default.gray22,borderDarkColor:$n.default.black,borderLightColor:$n.default.gray60,textColor:$n.default.white,textGray:$n.default.gray92,textDisabledColor:$n.default.gray45,linkColor:$n.default.accentColorL10,linkColorHover:$n.default.accentColorL20,border:"1px solid ".concat($n.default.gray22),borderDark:"1px solid ".concat($n.default.black),borderLight:"1px solid ".concat($n.default.gray60),focusShadowInset:"inset 0 0 1px 1px ".concat($n.default.gray25,", inset 0 0 0 3px ").concat($n.default.focusColor),draggableBackground:"url('data:image/png;base64,".concat(n5,"') 0 0 / 8px 8px repeat")},o5=_0(_0({},$n.default),i5),a5=o5;dc.default=a5});var uf=Xt(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.default=void 0;var s5={spacingQuarter:"5px",spacingHalf:"10px",spacing:"20px",fontSizeSmall:"12px",fontSize:"12px",fontSizeLarge:"16px",fontSizeXLarge:"18px",fontSizeXXLarge:"24px",lineHeight:"20px",inputHeight:"28px",borderRadius:"3px"},l5=s5;fc.default=l5});var cf=Xt(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.default=void 0;var u5={spacingQuarter:"5px",spacingHalf:"10px",spacing:"20px",fontSizeSmall:"12px",fontSize:"14px",fontSizeLarge:"16px",fontSizeXLarge:"18px",fontSizeXXLarge:"24px",lineHeight:"20px",inputHeight:"32px",borderRadius:"3px"},c5=u5;pc.default=c5});var C0=Xt(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.default=void 0;var w0=Tl(bd()),h5=Tl(hc()),d5=Tl(lf()),f5=Tl(uf()),p5=Tl(cf());function Tl(s){return s&&s.__esModule?s:{default:s}}function m5(s){var i=s.colorScheme,n=s.density,l={light:h5.default,dark:d5.default}[i],c={compact:f5.default,comfortable:p5.default}[n],a={accentColorPositive:l.successColor,accentColorWarning:l.warningColor,accentColorAlert:l.alertColor,accentColorNegative:l.errorColor,statusColorInfo:l.infoColorL10,statusColorNormal:l.successColorL10,statusColorLow:l.warningColorL10,statusColorMedium:l.alertColorL10,statusColorHigh:l.errorColorL10,statusColorCritical:l.errorColorD20,embossShadow:l.overlayShadow,dragShadow:l.overlayShadow,modalShadow:l.overlayShadow,backgroundColorPopup:l.backgroundColor,backgroundColorSection:l.backgroundColor,backgroundColorSidebar:l.backgroundColor,backgroundColorPage:l.backgroundColor,backgroundColorNavigation:l.backgroundColor,backgroundColorFloating:l.backgroundColor,backgroundColorDialog:l.backgroundColor,backgroundColorScrim:(0,w0.default)(l.gray30).setAlpha(.8).toRgbString(),contentColorActive:l.textColor,contentColorDefault:l.textColor,contentColorMuted:l.textGray,contentColorDisabled:l.textDisabledColor,contentColorInverted:l.gray30,neutral100:i==="dark"?l.gray25:l.gray98,neutral200:i==="dark"?l.gray30:l.gray96,neutral300:i==="dark"?l.gray45:l.gray92,neutral400:i==="dark"?l.gray60:w0.default.mix(l.gray92,l.gray80).toRgbString(),neutral500:l.gray80,interactiveColorPrimary:l.brandColor,interactiveColorBorder:l.borderColor,spacingXSmall:c.spacingQuarter,spacingSmall:c.spacingHalf,spacingMedium:"calc(".concat(c.spacing," * 0.75)"),spacingLarge:c.spacing,spacingXLarge:"calc(".concat(c.spacing," * 1.5)"),spacingXXLarge:"calc(".concat(c.spacing," * 2)"),spacingXXXLarge:"calc(".concat(c.spacing," * 2.5)")};return a}var g5=m5;mc.default=g5});var T0=Xt(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.default=void 0;var y5=El(hc()),v5=El(lf()),b5=El(uf()),x5=El(cf()),_5=El(C0());function El(s){return s&&s.__esModule?s:{default:s}}function S0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function hf(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?S0(Object(n),!0).forEach(function(l){w5(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):S0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function w5(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function C5(s){var i=s.colorScheme,n=s.density,l={light:y5.default,dark:v5.default}[i],c={compact:b5.default,comfortable:x5.default}[n],a=(0,_5.default)({colorScheme:i,density:n});return hf(hf(hf({},l),c),a)}var S5=C5;gc.default=S5});var df=Xt(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.default=void 0;function E0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function Ko(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?E0(Object(n),!0).forEach(function(l){T5(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):E0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function T5(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var E5={backgroundColorPopup:"#ffffff",backgroundColorSection:"#ffffff",backgroundColorSidebar:"#f8f8f8",backgroundColorPage:"#f9f9f9",backgroundColorNavigation:"#f7f7f7",backgroundColorFloating:"#000000",backgroundColorDialog:"#ffffff",backgroundColorScrim:"rgba(255, 255, 255, 0.75)"},P5={contentColorActive:"#2c2c2c",contentColorDefault:"#4d4d4d",contentColorDisabled:"#878787",contentColorInverted:"#ffffff",contentColorMuted:"#6b6b6b"},O5={interactiveColorPrimary:"#0264d7",interactiveColorBorder:"rgba(0, 0, 0, 0.4)",interactiveColorBorderHover:"rgba(0, 0, 0, 0.6)",interactiveColorBorderDisabled:"rgba(0, 0, 0, 0.3)",interactiveColorOverlaySelected:"rgba(0, 0, 0, 0.04)",interactiveColorOverlayHover:"rgba(0, 0, 0, 0.03)",interactiveColorOverlayActive:"rgba(0, 0, 0, 0.07)",interactiveColorOverlayDrag:"rgba(2, 100, 215, 0.16)",interactiveColorBackground:"#eeeeee",interactiveColorBackgroundDisabled:"rgba(0, 0, 0, 0.1)"},M5={white:"#ffffff",neutral100:"#f0f0f0",neutral200:"#e6e6e6",neutral300:"#dddddd",neutral400:"#cacaca",neutral500:"#b8b8b8",black:"#000000"},D5={accentColorPositive:"#118832",accentColorWarning:"#cca700",accentColorAlert:"#cf750c",accentColorNegative:"#d41f1f"},A5={statusColorInfo:"#61cafa",statusColorNormal:"#85eb48",statusColorLow:"#fae75f",statusColorMedium:"#f5b53f",statusColorHigh:"#ec4B43",statusColorCritical:"#9c0300"},I5={embossShadow:" 0px 1px 5px rgba(0, 0, 0, 0.07), 0px 0px 1px rgba(0, 0, 0, 0.07)",overlayShadow:"0px 26px 103px rgba(0, 0, 0, 0.13), 0px 11px 18px rgba(0, 0, 0, 0.06), 0px 3px 6px rgba(0, 0, 0, 0.06)",dragShadow:"0px 26px 103px rgba(0, 0, 0, 0.13), 0px 11px 18px rgba(0, 0, 0, 0.06), 0px 3px 6px rgba(0, 0, 0, 0.06)",modalShadow:"0px 50px 200px rgba(0, 0, 0, 0.3), 0px 29px 66px rgba(0, 0, 0, 0.08), 0px 29px 47px rgba(0, 0, 0, 0.08), 0px 5px 10px rgba(0, 0, 0, 0.03)"},z5={syntaxBlue:"#107d9f",syntaxBrown:"#a26604",syntaxGray:"#737373",syntaxGreen:"#607d0d",syntaxOrange:"#b75808",syntaxPink:"#d015b2",syntaxPurple:"#7f52f5",syntaxRed:"#df1f48",syntaxTeal:"#1e816f"},k5=Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko({},D5),A5),I5),E5),P5),M5),O5),z5),L5=k5;yc.default=L5});var ff=Xt(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.default=void 0;function P0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function Zo(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?P0(Object(n),!0).forEach(function(l){R5(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):P0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function R5(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var j5={backgroundColorPopup:"#27292e",backgroundColorSection:"#1a1c20",backgroundColorSidebar:"#0b0c0e",backgroundColorPage:"#111215",backgroundColorNavigation:"#08090a",backgroundColorFloating:"#ffffff",backgroundColorDialog:"#1e2024",backgroundColorScrim:"rgba(0, 0, 0, 0.8)"},F5={contentColorActive:"#fafafa",contentColorDefault:"#b5b5b5",contentColorDisabled:"#6b6b6b",contentColorInverted:"#000000",contentColorMuted:"#909090"},V5={interactiveColorPrimary:"#3993FF",interactiveColorBorder:"rgba(255, 255, 255, 0.5)",interactiveColorBorderHover:"rgba(255, 255, 255, 0.7)",interactiveColorBorderDisabled:"rgba(255, 255, 255, 0.30)",interactiveColorOverlaySelected:"rgba(255, 255, 255, 0.1)",interactiveColorOverlayHover:"rgba(255, 255, 255, 0.05)",interactiveColorOverlayActive:"rgba(0, 0, 0, 0.2)",interactiveColorOverlayDrag:"rgba(57, 147, 255, 0.16)",interactiveColorBackground:"#272a2f",interactiveColorBackgroundDisabled:"rgba(255, 255, 255, 0.15)"},B5={black:"#000000",neutral100:"#33343b",neutral200:"#43454b",neutral300:"#505158",neutral400:"#818285",neutral500:"#acacad",white:"#ffffff"},N5={accentColorPositive:"#27f561",accentColorWarning:"#ffd442",accentColorAlert:"#ff9750",accentColorNegative:"#ff5c5c"},U5={statusColorInfo:"#61cafa",statusColorNormal:"#85eb48",statusColorLow:"#fae75f",statusColorMedium:"#f5b53f",statusColorHigh:"#ec4B43",statusColorCritical:"#a81916"},$5={embossShadow:"0px 1px 5px rgba(0, 0, 0, 0.35), 0px 0px 1px rgba(0, 0, 0, 0.35)",overlayShadow:"0px 26px 103px rgba(0, 0, 0, 0.64), 0px 11px 18px rgba(0, 0, 0, 0.32), 0px 3px 6px rgba(0, 0, 0, 0.3)",dragShadow:"0px 26px 103px rgba(0, 0, 0, 0.64), 0px 11px 18px rgba(0, 0, 0, 0.32), 0px 3px 6px rgba(0, 0, 0, 0.3)",modalShadow:"0px 50px 200px #000000, 0px 29px 66px rgba(0, 0, 0, 0.41), 0px 14px 47px rgba(0, 0, 0, 0.17), 0px 5px 10px rgba(0, 0, 0, 0.15)"},W5={syntaxBlue:"#6cd0f0",syntaxBrown:"#fccf87",syntaxGray:"#7d7d7d",syntaxGreen:"#cef06c",syntaxOrange:"#f7933f",syntaxPink:"#f494e5",syntaxPurple:"#a870ef",syntaxRed:"#e85b79",syntaxTeal:"#45d4ba"},H5=Zo(Zo(Zo(Zo(Zo(Zo(Zo(Zo({},N5),U5),$5),j5),F5),B5),V5),W5),G5=H5;vc.default=G5});var O0=Xt(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.default=void 0;var K5={spacingXSmall:"4px",spacingSmall:"8px",spacingMedium:"12px",spacingLarge:"16px",spacingXLarge:"24px",spacingXXLarge:"32px",spacingXXXLarge:"40px",fontSizeSmall:"12px",fontSize:"14px",fontSizeLarge:"16px",fontSizeXLarge:"18px",fontSizeXXLarge:"24px",lineHeight:"20px",inputHeight:"32px",borderRadius:"4px"},Z5=K5;bc.default=Z5});var M0=Xt(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.default=void 0;var Y5={spacingXSmall:"4px",spacingSmall:"8px",spacingMedium:"12px",spacingLarge:"16px",spacingXLarge:"24px",spacingXXLarge:"32px",spacingXXXLarge:"40px",fontSizeSmall:"12px",fontSize:"14px",fontSizeLarge:"16px",fontSizeXLarge:"18px",fontSizeXXLarge:"24px",lineHeight:"20px",inputHeight:"40px",borderRadius:"4px"},X5=Y5;xc.default=X5});var A0=Xt(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.default=void 0;var J5=pf(bd()),q5=pf(df()),Q5=pf(ff());function pf(s){return s&&s.__esModule?s:{default:s}}function D0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function Pl(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?D0(Object(n),!0).forEach(function(l){eC(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):D0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function eC(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function tC(s){var i=s.colorScheme,n={light:q5.default,dark:Q5.default}[i],l={focusColor:(0,J5.default)(n.interactiveColorPrimary).setAlpha(.7).toRgbString(),transparent:"transparent",linkColor:n.interactiveColorPrimary},c={hoverShadow:"0 0 0 2px ".concat(n.backgroundColorPage,", 0 0 0 5px ").concat(n.interactiveColorOverlayHover),focusShadow:"0 0 0 2px ".concat(n.backgroundColorPage,", 0 0 0 5px ").concat(l.focusColor),focusShadowInset:"inset 0 0 0 3px ".concat(l.focusColor)},a={draggableBackground:"radial-gradient(circle at 1px 1px, ".concat(n.contentColorMuted,", ").concat(n.contentColorMuted," 1px, transparent 1px) 0 0 / 4px 6px")},b="'Splunk Platform Sans', 'Splunk Data Sans', Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif",w={sansFontFamily:b,serifFontFamily:"Georgia, 'Times New Roman', Times, serif",monoFontFamily:"'Splunk Platform Mono', 'Roboto Mono', Consolas, 'Droid Sans Mono', Monaco, 'Courier New', Courier, monospace",fontFamily:b,fontWeightBold:"700",fontWeightSemiBold:"500"},_={zindexFixedNavbar:1030,zindexModalBackdrop:1040,zindexModal:1050,zindexPopover:1060,zindexToastMessages:2e3};return Pl(Pl(Pl(Pl(Pl({},w),l),c),a),_)}var rC=tC;_c.default=rC});var z0=Xt(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.default=void 0;var nC=Ol(df()),iC=Ol(ff()),oC=Ol(O0()),aC=Ol(M0()),sC=Ol(A0());function Ol(s){return s&&s.__esModule?s:{default:s}}function I0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function mf(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?I0(Object(n),!0).forEach(function(l){lC(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):I0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function lC(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function uC(s){var i=s.colorScheme,n=s.density,l={light:nC.default,dark:iC.default}[i],c={compact:oC.default,comfortable:aC.default}[n],a=(0,sC.default)({colorScheme:i});return mf(mf(mf({},a),l),c)}var cC=uC;wc.default=cC});var Cc=Xt(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.clearGetThemeCache=fs.default=void 0;var hC=gf(vd()),dC=gf(T0()),fC=gf(z0()),pC=Yo();function gf(s){return s&&s.__esModule?s:{default:s}}function k0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function mC(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?k0(Object(n),!0).forEach(function(l){gC(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):k0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function gC(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function yC(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=(0,pC.addThemeDefaults)(s),n=i.family,l=i.colorScheme,c=i.density,a=n==="prisma",b=n==="enterprise",w=c==="comfortable",_=c==="compact",T=l==="dark",x=l==="light";return Object.freeze(mC({colorScheme:l,density:c,family:n,isPrisma:a,isEnterprise:b,isComfortable:w,isCompact:_,isDark:T,isLight:x},n==="enterprise"?(0,dC.default)({colorScheme:l,density:c}):(0,fC.default)({colorScheme:l,density:c})))}var L0=(0,hC.default)(yC,function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=s.family,n=s.colorScheme,l=s.density;return"".concat(i).concat(n).concat(l)}),vC=function(){var i,n;return(i=(n=L0.cache).clear)===null||i===void 0?void 0:i.call(n)};fs.clearGetThemeCache=vC;var bC=L0;fs.default=bC});var Yo=Xt(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.getCustomizedTheme=ps.addThemeDefaults=void 0;var xC=zr(),_C=wC(Cc());function wC(s){return s&&s.__esModule?s:{default:s}}var CC=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=i.family,l=n===void 0?"prisma":n,c=i.colorScheme,a=c===void 0?"dark":c,b=i.density,w=b===void 0?"comfortable":b,_=i.isPrisma,T=_===void 0?!0:_,x=i.isEnterprise,M=x===void 0?!1:x,A=i.isComfortable,D=A===void 0?!0:A,E=i.isCompact,$=E===void 0?!1:E,Y=i.isDark,G=Y===void 0?!0:Y,le=i.isLight,K=le===void 0?!1:le;return{family:l,colorScheme:a,density:w,isPrisma:T,isEnterprise:M,isComfortable:D,isCompact:$,isDark:G,isLight:K}};ps.addThemeDefaults=CC;function SC(s,i){var n=(0,_C.default)(s);return i?i(n):n}var TC=(0,xC.memoize)(SC,function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=s.family,n=s.colorScheme,l=s.density,c=arguments.length>1?arguments[1]:void 0;return"".concat(i,"-").concat(n,"-").concat(l,"-").concat(!!c)});ps.getCustomizedTheme=TC});var R0=Xt(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=void 0;var EC=Yo();function PC(s){var i,n=((i=s.theme)===null||i===void 0?void 0:i.splunkThemeV1)||{},l=n.family,c=n.colorScheme,a=n.density;return(0,EC.addThemeDefaults)({family:l,colorScheme:c,density:a})}var OC=PC;Sc.default=OC});var yf=Xt(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.clearVariablesCache=ms.default=void 0;var MC=B0(vd()),j0=B0(Cc()),DC=Yo();function B0(s){return s&&s.__esModule?s:{default:s}}function F0(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function V0(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?F0(Object(n),!0).forEach(function(l){AC(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function AC(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}var IC=function(i,n,l){var c=(0,DC.getCustomizedTheme)(n,l),a=c[i];return a},N0=(0,MC.default)(IC,function(s,i,n){var l=i.family,c=i.colorScheme,a=i.density;return"".concat(s,"-").concat(l,"-").concat(c,"-").concat(a,"-").concat(!!n)}),zC=function(){var i,n;return(i=(n=N0.cache).clear)===null||i===void 0?void 0:i.call(n)};ms.clearVariablesCache=zC;var kC=function(i){return function(n){var l=n.theme;l=l===void 0?{}:l;var c=l.splunkThemeV1,a=c||{},b=a.family,w=a.colorScheme,_=a.density,T=a.customizer;return N0(i,{family:b,colorScheme:w,density:_},T)}},LC=Object.keys(V0(V0({},(0,j0.default)({family:"prisma"})),(0,j0.default)({family:"enterprise"}))),RC=LC.reduce(function(s,i){return Object.defineProperty(s,i,{value:kC(i)}),s},{}),jC=RC;ms.default=jC});var Ec=Xt(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.isInterpolationResult=U0;Pa.default=Pa.getThemeVariant=void 0;var FC=Yo();function Tc(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tc=function(n){return typeof n}:Tc=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tc(s)}var VC={enterprise:"family",prisma:"family",light:"colorScheme",dark:"colorScheme",compact:"density",comfortable:"density"};function U0(s){return Tc(s)!=="object"||Array.isArray(s)||s===null}var $0=function s(i,n){var l=Object.keys(i).shift();if(!l)throw new Error("A pick tree cannot be empty.");var c=VC[l];if(!c)throw new Error("Invalid pick tree key: ".concat(l));var a=n[c],b=i[a];return U0(b)?b:s(b,n)};Pa.getThemeVariant=$0;var BC=function(i){return function(n){var l=n.theme,c=(0,FC.addThemeDefaults)(l==null?void 0:l.splunkThemeV1);return $0(i,c)}},NC=BC;Pa.default=NC});var ty=Xt(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.clearfix=G0;ti.ellipsis=K0;ti.printWidth100Percent=Z0;ti.printHide=Y0;ti.printNoBackground=X0;ti.printWrapAll=J0;ti.screenReaderContent=q0;ti.overlayColors=Q0;ti.colorWithAlpha=ey;ti.default=ti.reset=void 0;var Pc=vf(bd()),UC=Qn(),$C=K2(),gs=vf(yf()),WC=vf(Ec());function vf(s){return s&&s.__esModule?s:{default:s}}function W0(){var s=HC([`
        /* Generic resets */
        animation: none 0s ease 0s 1 normal none running;
        backface-visibility: visible;
        background: transparent none repeat 0 0 / auto auto padding-box border-box scroll;
        border: medium none currentColor;
        border-collapse: separate;
        border-image: none;
        border-radius: 0;
        border-spacing: 0;
        bottom: auto;
        box-shadow: none;
        caption-side: top;
        clear: none;
        clip: auto;
        columns: auto;
        column-count: auto;
        column-fill: balance;
        column-gap: normal;
        column-rule: medium none currentColor;
        column-span: 1;
        column-width: auto;
        content: normal;
        counter-increment: none;
        counter-reset: none;
        empty-cells: show;
        float: none;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        font-stretch: normal;
        height: auto;
        hyphens: none;
        left: auto;
        letter-spacing: normal;
        list-style: disc outside none;
        margin: 0;
        max-height: none;
        max-width: none;
        min-height: 0;
        min-width: 0;
        opacity: 1;
        orphans: 2;
        overflow: visible;
        overflow-x: visible;
        overflow-y: visible;
        padding: 0;
        page-break-after: auto;
        page-break-before: auto;
        page-break-inside: auto;
        perspective: none;
        perspective-origin: 50% 50%;
        pointer-events: auto;
        position: static;
        right: auto;
        tab-size: 8;
        table-layout: auto;
        text-align: left;
        text-align-last: auto;
        text-decoration: none;
        text-indent: 0;
        text-shadow: none;
        text-transform: none;
        top: auto;
        transform: none;
        transform-origin: 50% 50% 0;
        transform-style: flat;
        transition: none 0s ease 0s;
        user-select: auto;
        vertical-align: baseline;
        white-space: normal;
        widows: 2;
        width: auto;
        word-spacing: normal;
        z-index: auto;
        /* Splunk-specific resets */
        border-width: 1px;
        box-sizing: border-box;
        color: `,`;
        cursor: inherit;
        display: `,`;
        font-family: `,`;
        font-size: `,`;
        line-height: `,`;
        outline: medium none `,`;
        visibility: inherit;
    `]);return W0=function(){return s},s}function HC(s,i){return i||(i=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(i)}}))}var H0=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"inline";return function(){return(0,UC.css)(W0(),(0,WC.default)({enterprise:gs.default.textColor,prisma:gs.default.contentColorDefault}),i,gs.default.fontFamily,gs.default.fontSize,gs.default.lineHeight,gs.default.focusColor)}};ti.reset=H0;function G0(){return{"&::after":{display:"table",content:'""',clear:"both"}}}function K0(){return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}function Z0(){return{maxWidth:"100% !important",width:"100% !important",overflow:"hidden !important"}}function Y0(){return{display:"none !important"}}function X0(){return{background:"none !important"}}function J0(){return{wordBreak:"break-all !important",wordWrap:"break-word !important",overflowWrap:"break-word !important",whiteSpace:"normal !important"}}function q0(){return{position:"absolute",overflow:"hidden",clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",padding:0,border:0}}function Q0(s,i){return function(n){var l=typeof s=="function"?s(n):s,c=typeof i=="function"?i(n):i,a=(0,$C.normal)((0,Pc.default)(l).toRgb(),(0,Pc.default)(c).toRgb());return(0,Pc.default)(a).toRgbString()}}function ey(s,i){return function(n){var l=typeof s=="function"?s(n):s;return(0,Pc.default)(l).setAlpha(i).toRgbString()}}var GC={reset:H0,clearfix:G0,ellipsis:K0,printWidth100Percent:Z0,printHide:Y0,printNoBackground:X0,printWrapAll:J0,screenReaderContent:q0,colorWithAlpha:ey,overlayColors:Q0};ti.default=GC});var ny=Xt(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.default=void 0;var ry=Ec(),KC=Yo(),ZC=function(i,n){return function(l){var c,a=l[i],b=n[a];if((0,ry.isInterpolationResult)(b))return b;var w=(0,KC.addThemeDefaults)((c=l.theme)===null||c===void 0?void 0:c.splunkThemeV1);return(0,ry.getThemeVariant)(b,w)}},YC=ZC;Oc.default=YC});var uy=Xt(xf=>{"use strict";function Mc(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mc=function(n){return typeof n}:Mc=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mc(s)}Object.defineProperty(xf,"__esModule",{value:!0});xf.default=eS;var iy=XC(Wr()),oy=Qn();function ly(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return ly=function(){return s},s}function XC(s){if(s&&s.__esModule)return s;if(s===null||Mc(s)!=="object"&&typeof s!="function")return{default:s};var i=ly();if(i&&i.has(s))return i.get(s);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var a=l?Object.getOwnPropertyDescriptor(s,c):null;a&&(a.get||a.set)?Object.defineProperty(n,c,a):n[c]=s[c]}return n.default=s,i&&i.set(s,n),n}function bf(){return bf=Object.assign||function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},bf.apply(this,arguments)}function ay(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function sy(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?ay(Object(n),!0).forEach(function(l){JC(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function JC(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function qC(s,i){if(s==null)return{};var n=QC(s,i),l,c;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(c=0;c<a.length;c++)l=a[c],!(i.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,l)||(n[l]=s[l]))}return n}function QC(s,i){if(s==null)return{};var n={},l=Object.keys(s),c,a;for(a=0;a<l.length;a++)c=l[a],!(i.indexOf(c)>=0)&&(n[c]=s[c]);return n}function eS(s){var i=s.family,n=s.colorScheme,l=s.density,c=s.additionalThemeProperties,a=s.customizeTheme,b=qC(s,["family","colorScheme","density","additionalThemeProperties","customizeTheme"]),w=(0,iy.useContext)(oy.ThemeContext)||{},_=w.splunkThemeV1,T=_===void 0?{}:_,x=sy(sy({},c),{},{splunkThemeV1:{family:i||T.family||"prisma",colorScheme:n||T.colorScheme||"dark",density:l||T.density||"comfortable",customizer:a||T.customizer}});return iy.default.createElement(oy.ThemeProvider,bf({theme:x},b))}});var dy=Xt(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.default=void 0;var tS=Wr(),rS=Qn(),nS=Yo();function cy(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function hy(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?cy(Object(n),!0).forEach(function(l){iS(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function iS(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function oS(s,i){if(s==null)return{};var n=aS(s,i),l,c;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(c=0;c<a.length;c++)l=a[c],!(i.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,l)||(n[l]=s[l]))}return n}function aS(s,i){if(s==null)return{};var n={},l=Object.keys(s),c,a;for(a=0;a<l.length;a++)c=l[a],!(i.indexOf(c)>=0)&&(n[c]=s[c]);return n}var sS=function(){var i=(0,tS.useContext)(rS.ThemeContext)||{},n=i.splunkThemeV1,l=n===void 0?{}:n,c=oS(i,["splunkThemeV1"]),a=l.family,b=l.colorScheme,w=l.density,_=l.customizer;return hy(hy({},c),(0,nS.getCustomizedTheme)({family:a,colorScheme:b,density:w},_))},lS=sS;Dc.default=lS});var yy=Xt(Ic=>{"use strict";function Ac(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ac=function(n){return typeof n}:Ac=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ac(s)}Object.defineProperty(Ic,"__esModule",{value:!0});Ic.default=void 0;var _f=cS(Wr()),uS=Qn(),fy=Yo();function gy(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return gy=function(){return s},s}function cS(s){if(s&&s.__esModule)return s;if(s===null||Ac(s)!=="object"&&typeof s!="function")return{default:s};var i=gy();if(i&&i.has(s))return i.get(s);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var a=l?Object.getOwnPropertyDescriptor(s,c):null;a&&(a.get||a.set)?Object.defineProperty(n,c,a):n[c]=s[c]}return n.default=s,i&&i.set(s,n),n}function wf(){return wf=Object.assign||function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},wf.apply(this,arguments)}function py(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function my(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?py(Object(n),!0).forEach(function(l){hS(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):py(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function hS(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function dS(s,i){if(s==null)return{};var n=fS(s,i),l,c;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(c=0;c<a.length;c++)l=a[c],!(i.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,l)||(n[l]=s[l]))}return n}function fS(s,i){if(s==null)return{};var n={},l=Object.keys(s),c,a;for(a=0;a<l.length;a++)c=l[a],!(i.indexOf(c)>=0)&&(n[c]=s[c]);return n}function pS(s){var i=_f.default.forwardRef(function(l,c){var a=(0,_f.useContext)(uS.ThemeContext)||{},b=a.splunkThemeV1,w=dS(a,["splunkThemeV1"]),_=b||{},T=_.family,x=_.colorScheme,M=_.density,A=_.customizer,D=(0,fy.addThemeDefaults)({family:T,colorScheme:x,density:M}),E=my(my({},w),(0,fy.getCustomizedTheme)(D,A));return _f.default.createElement(s,wf({},l,{ref:c,splunkTheme:E}))}),n=s.displayName||s.name||"Component";return i.displayName="withSplunkTheme(".concat(n,")"),i}var mS=pS;Ic.default=mS});var vy=Xt(()=>{"use strict"});var ys=Xt(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var gS={getSettingsFromThemedProps:!0,getTheme:!0,mixins:!0,pick:!0,pickVariant:!0,SplunkThemeProvider:!0,useSplunkTheme:!0,withSplunkTheme:!0,variables:!0};Object.defineProperty(Oi,"getSettingsFromThemedProps",{enumerable:!0,get:function(){return yS.default}});Object.defineProperty(Oi,"getTheme",{enumerable:!0,get:function(){return vS.default}});Object.defineProperty(Oi,"mixins",{enumerable:!0,get:function(){return bS.default}});Object.defineProperty(Oi,"pick",{enumerable:!0,get:function(){return xS.default}});Object.defineProperty(Oi,"pickVariant",{enumerable:!0,get:function(){return _S.default}});Object.defineProperty(Oi,"SplunkThemeProvider",{enumerable:!0,get:function(){return wS.default}});Object.defineProperty(Oi,"useSplunkTheme",{enumerable:!0,get:function(){return CS.default}});Object.defineProperty(Oi,"withSplunkTheme",{enumerable:!0,get:function(){return SS.default}});Object.defineProperty(Oi,"variables",{enumerable:!0,get:function(){return TS.default}});var yS=wo(R0()),vS=wo(Cc()),bS=wo(ty()),xS=wo(Ec()),_S=wo(ny()),wS=wo(uy()),CS=wo(dy()),SS=wo(yy()),TS=wo(yf()),by=vy();Object.keys(by).forEach(function(s){s==="default"||s==="__esModule"||Object.prototype.hasOwnProperty.call(gS,s)||Object.defineProperty(Oi,s,{enumerable:!0,get:function(){return by[s]}})});function wo(s){return s&&s.__esModule?s:{default:s}}});var Cf=Xt((JP,xy)=>{xy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=171)}({1:function(s,i){s.exports=Un()},171:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return M});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(78),_=n.n(w),T={children:b.a.node,target:b.a.oneOfType([b.a.object,b.a.string]),eventType:b.a.any,listener:b.a.func,options:b.a.oneOfType([b.a.object,b.a.bool])};function x(A){var D=A.children,E=A.target,$=A.eventType,Y=A.listener,G=A.options;return _()(E,$,Y,G),c.a.createElement(c.a.Fragment,null,D||null)}x.propTypes=T;var M=x},2:function(s,i){s.exports=Wr()},78:function(s,i){s.exports=Z2()}})});var Sf=Xt(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.isNumber=_y;Co.isDecimal=wy;Co.isMinus=Cy;Co.isNumeric=MS;Co.addsCharacter=DS;Co.keycode=void 0;var ES=OS(Y2()),PS=zr();function OS(s){return s&&s.__esModule?s:{default:s}}var Ml=ES.default;Co.keycode=Ml;function zc(s){return(0,PS.isUndefined)(s)?!1:s!=="Unidentified"}function _y(s){var i=s.key,n=s.keyCode;if(zc(i)){var l=["1","2","3","4","5","6","7","8","9","0"];return l.indexOf(i)>=0}return n>=48&&n<=57||n>=96&&n<=105}function wy(s){var i=s.key,n=s.keyCode,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.locale,a=c===void 0?"en-US":c,b=new Intl.NumberFormat(a.replace("_","-")).format(1.2),w=b.indexOf(",")>-1?",":".";return zc(i)?i===w||i==="Decimal":w==="."&&n===Ml("numpad .")?!0:n===Ml(w)}function Cy(s){var i=s.key,n=s.keyCode;return zc(i)?i==="-"||i==="Subtract":n===Ml("numpad -")||n===Ml("-")}function MS(s,i){return _y(s)||wy(s,i)||Cy(s)}function DS(s){var i=s.key;if(zc(i)){var n=["Add","Decimal","Divide","Multiply","Spacebar","Subtract"];return i.length===1||n.indexOf(i)>=0}}});var Ty=Xt(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.getSortedTabbableElements=Tf;vs.isTabKey=Sy;vs.handleTab=kS;vs.takeFocus=LS;var AS=Sf(),kc=zr(),IS=`a[href], input:not([disabled]), select:not([disabled]),
     textarea:not([disabled]), button:not([disabled]), [tabindex], [contenteditable]`,zS=function(i){return!(i.offsetWidth||i.offsetHeight||i.getClientRects().length>0)||getComputedStyle(i).visibility==="hidden"};function Tf(s){var i=s.querySelectorAll(IS),n=(0,kc.filter)(i,function(c){return!zS(c)&&c.tabIndex>=0||c===document.activeElement}),l=n.reduce(function(c,a){var b=c[c.length-1],w=(b==null?void 0:b.getAttribute("type"))==="radio",_=a.getAttribute("type")==="radio",T=a.getAttribute("name")===(b==null?void 0:b.getAttribute("name"));return w&&_&&T?a.checked&&(c.pop(),c.push(a)):c.push(a),c},[]);return(0,kc.sortBy)(l,function(c){return c.tabIndex>0?-1/c.tabIndex:0})}function Sy(s){return!((0,AS.keycode)(s)!=="tab"||s.metaKey||s.altKey||s.controlKey)}function kS(s,i){if(!s.contains(document.activeElement)||!Sy(i))return null;var n=Tf(s);if(n.length===0)return document.activeElement===s?(i.preventDefault(),s):null;var l=i&&i.target||s.querySelector(":focus"),c=n.indexOf(l);return c===-1&&(c=i.shiftKey?0:n.length-1),i.shiftKey?n.unshift(n.pop()):n.push(n.shift()),i.preventDefault(),n[c].focus(),n[c]}function LS(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"first",n=s.querySelector(":focus");if(n)return n;if(i==="first"){var l=Tf(s)[0];if(l)return(0,kc.defer)(function(){return l.focus()}),l}return s.hasAttribute("tabIndex")?((0,kc.defer)(function(){return s.focus()}),s):null}});var Py=Xt((eO,Ey)=>{Ey.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=127)}({1:function(s,i){s.exports=Un()},127:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return le}),n.d(i,"AnimationToggleContext",function(){return w}),n.d(i,"AnimationToggleProvider",function(){return F}),n.d(i,"useAnimationToggle",function(){return E});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=c.a.createContext(!0);function _(Q,L){return D(Q)||A(Q,L)||x(Q,L)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(Q,L){if(!!Q){if(typeof Q=="string")return M(Q,L);var k=Object.prototype.toString.call(Q).slice(8,-1);if(k==="Object"&&Q.constructor&&(k=Q.constructor.name),k==="Map"||k==="Set")return Array.from(Q);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return M(Q,L)}}function M(Q,L){(L==null||L>Q.length)&&(L=Q.length);for(var k=0,re=new Array(L);k<L;k++)re[k]=Q[k];return re}function A(Q,L){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Q)))){var k=[],re=!0,de=!1,Ie=void 0;try{for(var et=Q[Symbol.iterator](),lt;!(re=(lt=et.next()).done)&&(k.push(lt.value),!(L&&k.length===L));re=!0);}catch(tt){de=!0,Ie=tt}finally{try{!re&&et.return!=null&&et.return()}finally{if(de)throw Ie}}return k}}function D(Q){if(Array.isArray(Q))return Q}var E=function(){var L=Object(l.useContext)(w),k="screen and (prefers-reduced-motion: reduce)",re=typeof window!="undefined"&&!!window.matchMedia,de=Object(l.useState)(re&&window.matchMedia(k).matches),Ie=_(de,2),et=Ie[0],lt=Ie[1];return Object(l.useEffect)(function(){if(re){var tt=window.matchMedia(k),je=function(){lt(tt.matches)};return tt.addListener(je),function(){tt.removeListener(je)}}},[re,k]),L?et?"reduced":"on":"off"},$=function(L){return typeof L=="function"?L():L},Y={on:b.a.oneOfType([b.a.node,b.a.func]).isRequired,off:b.a.oneOfType([b.a.node,b.a.func]).isRequired,reduced:b.a.oneOfType([b.a.node,b.a.func])};function G(Q){var L=Q.on,k=Q.off,re=Q.reduced,de=E();return $(de==="on"?L:de==="reduced"&&re?re:k)}G.propTypes=Y;var le=G,K={children:b.a.node,enabled:b.a.bool},F=function(L){var k=L.children,re=L.enabled,de=re===void 0?!1:re;return c.a.createElement(w.Provider,{value:de},k)};F.propTypes=K},2:function(s,i){s.exports=Wr()}})});var My=Xt((tO,Oy)=>{Oy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=169)}({169:function(s,i,n){"use strict";n.r(i),n.d(i,"Spring",function(){return x}),n.d(i,"Transition",function(){return M});var l=n(18),c=n(34);function a(A,D){var E=Object.keys(A);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(A);D&&($=$.filter(function(Y){return Object.getOwnPropertyDescriptor(A,Y).enumerable})),E.push.apply(E,$)}return E}function b(A){for(var D=1;D<arguments.length;D++){var E=arguments[D]!=null?arguments[D]:{};D%2?a(Object(E),!0).forEach(function($){w(A,$,E[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(E)):a(Object(E)).forEach(function($){Object.defineProperty(A,$,Object.getOwnPropertyDescriptor(E,$))})}return A}function w(A,D,E){return D in A?Object.defineProperty(A,D,{value:E,enumerable:!0,configurable:!0,writable:!0}):A[D]=E,A}function _(A,D){if(A==null)return{};var E=T(A,D),$,Y;if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(A);for(Y=0;Y<G.length;Y++)$=G[Y],!(D.indexOf($)>=0)&&(!Object.prototype.propertyIsEnumerable.call(A,$)||(E[$]=A[$]))}return E}function T(A,D){if(A==null)return{};var E={},$=Object.keys(A),Y,G;for(G=0;G<$.length;G++)Y=$[G],!(D.indexOf(Y)>=0)&&(E[Y]=A[Y]);return E}function x(A){var D=A.children,E=A.immediate,$=_(A,["children","immediate"]),Y=Object(c.useAnimationToggle)();return D(Object(l.useSpring)(b({immediate:E||Y!=="on"},$)))}function M(A){var D=A.items,E=A.children,$=A.immediate,Y=_(A,["items","children","immediate"]),G=Object(c.useAnimationToggle)();return Object(l.useTransition)(D,b({immediate:$||G!=="on"},Y))(E)}},18:function(s,i){s.exports=bg()},34:function(s,i){s.exports=Py()}})});var Ay=Xt((rO,Dy)=>{Dy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=174)}({174:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return w}),n.d(i,"ScrollContainerContext",function(){return a}),n.d(i,"ScrollContainerProvider",function(){return b});var l=n(2),c=n.n(l),a=c.a.createContext(window),b=a.Provider,w=a},2:function(s,i){s.exports=Wr()}})});var zy=Xt((nO,Iy)=>{Iy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=173)}({1:function(s,i){s.exports=Un()},106:function(s,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(l){typeof window=="object"&&(n=window)}s.exports=n},14:function(s,i){s.exports=Cf()},173:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return tt}),n.d(i,"LayerStackContext",function(){return A.a}),n.d(i,"LayerStackGlobalProvider",function(){return A.b});var l=n(2),c=n.n(l),a=n(63),b=n(1),w=n.n(b),_=n(4),T=n(9),x=n(14),M=n.n(x),A=n(70);function D(je){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(_e){return typeof _e}:D=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},D(je)}function E(je,Ee){if(!(je instanceof Ee))throw new TypeError("Cannot call a class as a function")}function $(je,Ee){for(var _e=0;_e<Ee.length;_e++){var te=Ee[_e];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(je,te.key,te)}}function Y(je,Ee,_e){return Ee&&$(je.prototype,Ee),_e&&$(je,_e),je}function G(je,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");je.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:je,writable:!0,configurable:!0}}),Ee&&le(je,Ee)}function le(je,Ee){return le=Object.setPrototypeOf||function(te,ce){return te.__proto__=ce,te},le(je,Ee)}function K(je){var Ee=L();return function(){var te=k(je),ce;if(Ee){var Ae=k(this).constructor;ce=Reflect.construct(te,arguments,Ae)}else ce=te.apply(this,arguments);return F(this,ce)}}function F(je,Ee){return Ee&&(D(Ee)==="object"||typeof Ee=="function")?Ee:Q(je)}function Q(je){if(je===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(je){return!1}}function k(je){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},k(je)}function re(je,Ee,_e){return Ee in je?Object.defineProperty(je,Ee,{value:_e,enumerable:!0,configurable:!0,writable:!0}):je[Ee]=_e,je}var de=["clickAway","escapeKey"],Ie={children:w.a.node,closeReasons:w.a.arrayOf(w.a.oneOf(de)),onRequestClose:w.a.func,open:w.a.bool},et={closeReasons:de,open:!1},lt=function(je){G(_e,je);var Ee=K(_e);function _e(te){var ce;return E(this,_e),ce=Ee.call(this,te),re(Q(ce),"layerClickEvent",null),re(Q(ce),"handleClickOnLayer",function(Ae){var ke=Ae.nativeEvent;ce.layerClickEvent=ke}),re(Q(ce),"handleClickOnWindow",function(Ae){var ke,Ce;!ce.props.open||!Object(_.includes)(ce.props.closeReasons,"clickAway")||ce.layerClickEvent===Ae||(ke=(Ce=ce.props).onRequestClose)===null||ke===void 0||ke.call(Ce,{event:Ae,reason:"clickAway"})}),re(Q(ce),"handleKeyDownOnWindow",function(Ae){if(ce.props.open&&Object(T.keycode)(Ae)==="esc"&&Object(_.last)(ce.getLayerStack())===Q(ce)&&Object(_.includes)(ce.props.closeReasons,"escapeKey")){var ke,Ce;(ke=(Ce=ce.props).onRequestClose)===null||ke===void 0||ke.call(Ce,{event:Ae,reason:"escapeKey"})}}),_e.layerContainer||(_e.layerContainer=document.createElement("div"),_e.layerContainer.setAttribute("data-test","layer-container"),document.body.appendChild(_e.layerContainer)),ce}return Y(_e,[{key:"componentDidMount",value:function(){this.props.open&&this.getLayerStack().push(this)}},{key:"componentDidUpdate",value:function(ce){!ce.open&&this.props.open?this.getLayerStack().push(this):ce.open&&!this.props.open&&Object(_.pull)(this.getLayerStack(),this)}},{key:"componentWillUnmount",value:function(){Object(_.pull)(this.getLayerStack(),this)}},{key:"getLayerStack",value:function(){return this.context}},{key:"render",value:function(){var ce=this.props,Ae=ce.children,ke=ce.open;if(ke){var Ce=Object(a.createPortal)(c.a.createElement("div",{"data-test":"layer",onMouseDown:this.handleClickOnLayer,onTouchStart:this.handleClickOnLayer},Ae),_e.layerContainer);return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{target:window,eventType:"keydown",listener:this.handleKeyDownOnWindow,key:"eventListenerKeydown"}),c.a.createElement(M.a,{target:window,eventType:"mousedown",listener:this.handleClickOnWindow,key:"eventListenerMouseDown"}),c.a.createElement(M.a,{target:window,eventType:"touchstart",listener:this.handleClickOnWindow,key:"eventListenerTouchStart",options:{passive:!0}}),Ce)}return null}}]),_e}(l.Component);re(lt,"layerContainer",null),re(lt,"possibleCloseReasons",de),re(lt,"propTypes",Ie),re(lt,"defaultProps",et),re(lt,"contextType",A.a);var tt=lt},2:function(s,i){s.exports=Wr()},4:function(s,i){s.exports=zr()},63:function(s,i){s.exports=eg()},70:function(s,i,n){"use strict";(function(l){n.d(i,"a",function(){return _}),n.d(i,"b",function(){return x});var c=n(2),a=n.n(c),b=n(1),w=n.n(b),_=a.a.createContext([]),T={children:w.a.node,name:w.a.string,scope:w.a.object};function x(M){var A=M.children,D=M.name,E=D===void 0?"__splunkui_layer_instances__":D,$=M.scope,Y=$===void 0?typeof window!="undefined"?window:l:$;return Y[E]||(Y[E]=[]),a.a.createElement(_.Provider,{value:Y[E]},A)}x.propTypes=T}).call(this,n(106))},9:function(s,i){s.exports=Sf()}})});var Lc=Xt((iO,ky)=>{ky.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=131)}({0:function(s,i){s.exports=ys()},1:function(s,i){s.exports=Un()},11:function(s,i,n){"use strict";n.d(i,"a",function(){return l});function l(c,a){c&&(typeof c=="function"?c(a):c.current=a)}},131:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return Rt}),n.d(i,"PopoverContext",function(){return k});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(63),_=n(4),T=n(0),x=n(30),M=n(14),A=n.n(M),D=n(50),E=n.n(D),$=n(35),Y=n.n($),G=n(25);function le(Oe,qe){var H=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(Oe);qe&&(ae=ae.filter(function(ve){return Object.getOwnPropertyDescriptor(Oe,ve).enumerable})),H.push.apply(H,ae)}return H}function K(Oe){for(var qe=1;qe<arguments.length;qe++){var H=arguments[qe]!=null?arguments[qe]:{};qe%2?le(Object(H),!0).forEach(function(ae){F(Oe,ae,H[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(H)):le(Object(H)).forEach(function(ae){Object.defineProperty(Oe,ae,Object.getOwnPropertyDescriptor(H,ae))})}return Oe}function F(Oe,qe,H){return qe in Oe?Object.defineProperty(Oe,qe,{value:H,enumerable:!0,configurable:!0,writable:!0}):Oe[qe]=H,Oe}function Q(Oe){var qe=Oe.align,H=Oe.anchorPos,ae=Oe.outerContainerEl,ve=Oe.padding,N=Oe.placement;switch(N){case"above":return{top:H.top-ae.offsetHeight,left:qe==="edge"?H.left-ve:H.middle-ae.offsetWidth/2};case"below":return{top:H.bottom,left:qe==="edge"?H.left-ve:H.middle-ae.offsetWidth/2};case"left":return{top:qe==="edge"?H.top-ve:H.center-ae.offsetHeight/2,left:H.left-ae.offsetWidth};case"right":return{top:qe==="edge"?H.top-ve:H.center-ae.offsetHeight/2,left:H.right};default:throw new Error("".concat(N," is not a valid placement value. Valid options are: 'above', 'below', 'left', or 'right'"))}}function L(Oe){var qe=Oe.align,H=Oe.anchorPos,ae=Oe.scrollContainerPos,ve=Oe.canCoverAnchor,N=Oe.defaultPlacement,ie=Oe.outerContainerEl,Ze=Oe.padding,X=Oe.repositionMode,Le=Oe.windowHeight,ze=Oe.windowWidth,Je=X==="flip",ot=X==="any",gt=Je||ot,yt=Oe.placement||N;N==="vertical"?yt=H.top>Le-H.bottom?"above":"below":N==="horizontal"&&(yt=H.left>ze-H.right?"left":"right");var Lt=yt,Vt=Q({align:qe,anchorPos:H,outerContainerEl:ie,padding:Ze,placement:Lt}),zt=Vt.top,Se=Vt.left,Xe="auto",at=ze,Et=Le,pr=Lt,pe=H.top-ie.offsetHeight>0,R=H.bottom+ie.offsetHeight<Le,Z=H.left-ie.offsetWidth>0,he=H.right+ie.offsetWidth<ze,xe=H.top*.7>Le-H.bottom,Fe=(qe==="edge"?H.left+ie.offsetWidth-Ze:H.middle+ie.offsetWidth/2)>ze,B=(qe==="edge"?H.left-Ze:H.middle-ie.offsetWidth/2)<0,V=(qe==="edge"?H.top-Ze:H.top-ie.offsetHeight/2)<0,U=(qe==="edge"?H.top+ie.offsetHeight-Ze:H.bottom+ie.offsetHeight/2)>Le;if(pr==="above"){if(!pe&&gt){if(R)return L(K(K({},Oe),{},{placement:"below"}));if(ot&&he)return L(K(K({},Oe),{},{placement:"right"}));if(ot&&Z)return L(K(K({},Oe),{},{placement:"left"}));ve&&(pr="misaligned",zt=0)}pr!=="misaligned"&&(Xe=Le-zt-ie.offsetHeight,ae&&(Xe=Math.min(Xe,Le-ae.top)),zt="auto"),Fe?Se=Math.max(ze-ie.offsetWidth,0):B&&(Se=0),ve||(Et=H.top)}if(pr==="below"){if(!R&&gt){if(pe&&xe)return L(K(K({},Oe),{},{placement:"above"}));if(ot&&he)return L(K(K({},Oe),{},{placement:"right"}));if(ot&&Z)return L(K(K({},Oe),{},{placement:"left"}));ve&&(pr="misaligned",zt=0)}ae&&(zt=Math.min(zt,ae.bottom)),Fe?Se=Math.max(ze-ie.offsetWidth,0):B&&(Se=0),ve||(Et=Le-H.bottom)}if(pr==="left"){if(!Z&&gt){if(he)return L(K(K({},Oe),{},{placement:"right"}));if(ot&&R)return L(K(K({},Oe),{},{placement:"below"}));if(ot&&pe)return L(K(K({},Oe),{},{placement:"above"}));ve&&(pr="misaligned",zt=0)}V?zt=0:U&&(zt=Math.max(Le-ie.offsetHeight,0)),ve||(at=H.left)}if(pr==="right"){if(!he&&gt){if(Z)return L(K(K({},Oe),{},{placement:"left"}));if(ot&&R)return L(K(K({},Oe),{},{placement:"below"}));if(ot&&pe)return L(K(K({},Oe),{},{placement:"above"}));ve&&(pr="misaligned",zt=0)}V?zt=0:U&&(zt=Math.max(Le-ie.offsetHeight,0)),ve||(at=ze-H.left)}return{placement:pr,maxHeight:Et,maxWidth:at,outerContainerStyle:{top:zt,left:Se,bottom:Xe}}}var k=Object(l.createContext)({}),re=n(18),de=n(3),Ie=n.n(de),et=Object(T.pick)({enterprise:"8px",prisma:0}),lt=Ie()(re.animated.div).withConfig({displayName:"PopoverStyles__Styled",componentId:"sc-1nahsvw-0"})(["position:fixed;z-index:",";left:-300%;top:-300%;"],T.variables.zindexPopover),tt=Ie.a.div.withConfig({displayName:"PopoverStyles__StyledBox",componentId:"sc-1nahsvw-1"})(["",";",";"],T.mixins.reset("block"),function(Oe){var qe=Oe.$appearance;return qe!=="none"&&Object(de.css)(["padding:8px;"])}),je=Ie.a.div.withConfig({displayName:"PopoverStyles__StyledContent",componentId:"sc-1nahsvw-2"})(["",""],Object(T.pickVariant)("$appearance",{normal:Object(de.css)(["background-color:",";color:",";border:",";box-shadow:",";border-radius:",";"],T.variables.backgroundColorPopup,T.variables.contentColorDefault,Object(T.pick)({enterprise:{light:T.variables.border,dark:T.variables.border},prisma:"none"}),Object(T.pick)({enterprise:{light:Object(de.css)(["0 2px 2px ",""],T.mixins.colorWithAlpha(T.variables.gray20,.1)),dark:"0 1px 2px #000"},prisma:T.variables.overlayShadow}),T.variables.borderRadius),inverted:Object(de.css)(["background-color:",";color:",";"],Object(T.pick)({light:T.variables.gray20,dark:T.variables.white}),Object(T.pick)({light:T.variables.white,dark:T.variables.gray30}))})),Ee=Ie.a.div.withConfig({displayName:"PopoverStyles__StyledArrow",componentId:"sc-1nahsvw-3"})(["width:0;height:0;border-left:"," solid transparent;border-right:"," solid transparent;position:absolute;border-bottom-width:",";border-bottom-style:solid;",""],et,et,et,Object(T.pickVariant)("$appearance",{normal:Object(de.css)(["border-bottom-color:",";&::before{content:'';display:block;width:0;height:0;border-left:"," solid transparent;border-right:"," solid transparent;border-bottom:"," solid ",";position:absolute;top:1px;left:0;margin-left:-",";}"],Object(T.pick)({light:T.variables.borderColor,dark:T.variables.black}),et,et,et,T.variables.backgroundColor,et),inverted:Object(de.css)(["border-bottom-color:",";"],Object(T.pick)({light:T.variables.gray20,dark:T.variables.white}))})),_e=Ie.a.div.withConfig({displayName:"PopoverStyles__StyledLowerRightCorner",componentId:"sc-1nahsvw-4"})(["position:fixed;right:0;bottom:0;"]),te=n(11);function ce(Oe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ce=function(H){return typeof H}:ce=function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},ce(Oe)}function Ae(){return Ae=Object.assign||function(Oe){for(var qe=1;qe<arguments.length;qe++){var H=arguments[qe];for(var ae in H)Object.prototype.hasOwnProperty.call(H,ae)&&(Oe[ae]=H[ae])}return Oe},Ae.apply(this,arguments)}function ke(Oe){return Ke(Oe)||$e(Oe)||bt(Oe)||Ce()}function Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(Oe){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(Oe))return Array.from(Oe)}function Ke(Oe){if(Array.isArray(Oe))return Wt(Oe)}function Ve(Oe,qe){var H=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(Oe);qe&&(ae=ae.filter(function(ve){return Object.getOwnPropertyDescriptor(Oe,ve).enumerable})),H.push.apply(H,ae)}return H}function rt(Oe){for(var qe=1;qe<arguments.length;qe++){var H=arguments[qe]!=null?arguments[qe]:{};qe%2?Ve(Object(H),!0).forEach(function(ae){me(Oe,ae,H[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(H)):Ve(Object(H)).forEach(function(ae){Object.defineProperty(Oe,ae,Object.getOwnPropertyDescriptor(H,ae))})}return Oe}function it(Oe,qe){return Jt(Oe)||Ht(Oe,qe)||bt(Oe,qe)||dt()}function dt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(Oe,qe){if(!!Oe){if(typeof Oe=="string")return Wt(Oe,qe);var H=Object.prototype.toString.call(Oe).slice(8,-1);if(H==="Object"&&Oe.constructor&&(H=Oe.constructor.name),H==="Map"||H==="Set")return Array.from(Oe);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return Wt(Oe,qe)}}function Wt(Oe,qe){(qe==null||qe>Oe.length)&&(qe=Oe.length);for(var H=0,ae=new Array(qe);H<qe;H++)ae[H]=Oe[H];return ae}function Ht(Oe,qe){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Oe)))){var H=[],ae=!0,ve=!1,N=void 0;try{for(var ie=Oe[Symbol.iterator](),Ze;!(ae=(Ze=ie.next()).done)&&(H.push(Ze.value),!(qe&&H.length===qe));ae=!0);}catch(X){ve=!0,N=X}finally{try{!ae&&ie.return!=null&&ie.return()}finally{if(ve)throw N}}return H}}function Jt(Oe){if(Array.isArray(Oe))return Oe}function Mt(Oe,qe){if(!(Oe instanceof qe))throw new TypeError("Cannot call a class as a function")}function oe(Oe,qe){for(var H=0;H<qe.length;H++){var ae=qe[H];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Oe,ae.key,ae)}}function Ye(Oe,qe,H){return qe&&oe(Oe.prototype,qe),H&&oe(Oe,H),Oe}function st(Oe,qe){if(typeof qe!="function"&&qe!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(qe&&qe.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),qe&&_t(Oe,qe)}function _t(Oe,qe){return _t=Object.setPrototypeOf||function(ae,ve){return ae.__proto__=ve,ae},_t(Oe,qe)}function Ct(Oe){var qe=mt();return function(){var ae=we(Oe),ve;if(qe){var N=we(this).constructor;ve=Reflect.construct(ae,arguments,N)}else ve=ae.apply(this,arguments);return kt(this,ve)}}function kt(Oe,qe){return qe&&(ce(qe)==="object"||typeof qe=="function")?qe:ct(Oe)}function ct(Oe){if(Oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Oe}function mt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Oe){return!1}}function we(Oe){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)},we(Oe)}function me(Oe,qe,H){return qe in Oe?Object.defineProperty(Oe,qe,{value:H,enumerable:!0,configurable:!0,writable:!0}):Oe[qe]=H,Oe}var We=["clickAway","escapeKey","offScreen","tabKey"],Qe={align:b.a.oneOf(["center","edge","theme"]),anchor:b.a.object,animation:b.a.bool,appearance:b.a.oneOf(["normal","inverted","none"]),autoCloseWhenOffScreen:b.a.bool,canCoverAnchor:b.a.bool,children:b.a.oneOfType([b.a.node,b.a.func]),closeReasons:b.a.arrayOf(b.a.oneOf(We)),defaultPlacement:b.a.oneOf(["above","below","left","right","vertical","horizontal"]),elementRef:b.a.oneOfType([b.a.func,b.a.object]),id:b.a.string,onRequestClose:b.a.func,open:b.a.bool,pointTo:b.a.shape({x:b.a.number,y:b.a.number}),repositionMode:b.a.oneOf(["none","flip","any"]),retainFocus:b.a.bool,takeFocus:b.a.bool,splunkTheme:b.a.object},He={align:"theme",animation:!0,appearance:"normal",autoCloseWhenOffScreen:!0,canCoverAnchor:!1,closeReasons:We,defaultPlacement:"below",open:!1,repositionMode:"flip",retainFocus:!0,takeFocus:!1};function fe(Oe,qe){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return!!Oe&&!!qe&&Object(_.every)(Oe,function(ae,ve){return Object(_.isFinite)(ae)?Math.abs(qe[ve]-ae)<=H:qe[ve]===ae})}var De=function(Oe){st(H,Oe);var qe=Ct(H);Ye(H,null,[{key:"getArrowStyle",value:function(ve){var N=ve.anchorPos,ie=ve.arrowHeight,Ze=ve.placement,X=ve.outerContainerStyle,Le=ve.outerContainerEl;if(Ze==="misaligned")return[{display:"none"}];var ze={display:"block"},Je=Le.offsetHeight/2-22,ot=-(Le.offsetHeight/2-15),gt=N.center-(X.top+Le.offsetHeight/2)-ie/2,yt=Object(_.clamp)(gt,ot,Je),Lt=N.middle-(X.left+Le.offsetWidth/2)-ie,Vt={left:{translateX:ie/2,translateY:yt,rotate:90},right:{translateX:-ie/2,translateY:yt,rotate:-90},above:{translateX:Lt,translateY:0,rotate:180},below:{translateX:Lt,translateY:0,rotate:0}},zt=Vt[Ze];ze.transform="translate(".concat(zt.translateX,"px, ").concat(zt.translateY,"px) rotate(").concat(zt.rotate,"deg)");var Se={left:"right",right:"left",above:"bottom",below:"top"};ze[Se[Ze]]="1px";var Xe={left:"top",right:"top",above:"left",below:"left"};return ze[Xe[Ze]]="50%",[ze,zt]}}]);function H(ae){var ve;return Mt(this,H),ve=qe.call(this,ae),me(ct(ve),"outerContainerEl",null),me(ct(ve),"innerContainerEl",null),me(ct(ve),"arrow",null),me(ct(ve),"windowSizeMeasurementEl",null),me(ct(ve),"handleScroll",void 0),me(ct(ve),"handleWindowScroll",void 0),me(ct(ve),"getElPosition",function(N){var ie=N.getBoundingClientRect(),Ze={width:N.offsetWidth,height:N.offsetHeight},X=ve.props.pointTo,Le=X&&Object(_.has)(X,"x"),ze=X&&Object(_.has)(X,"y");return Ze.left=Le?ie.left+((X==null?void 0:X.x)||0):ie.left,Ze.top=ze?ie.top+((X==null?void 0:X.y)||0):ie.top,Ze.right=Le?Ze.left+Ze.width:ie.left+Ze.width||ie.right,Ze.bottom=ze?Ze.top+Ze.height:ie.top+Ze.height||ie.bottom,Ze.middle=Le?Ze.left:ie.left+(Ze.right-ie.left)/2,Ze.center=ze?Ze.top:ie.top+(Ze.bottom-ie.top)/2,Ze}),me(ct(ve),"setPlacement",function(N){ve.setState(function(ie){var Ze,X=ve.props,Le=X.align,ze=X.anchor,Je=X.autoCloseWhenOffScreen,ot=X.canCoverAnchor,gt=X.defaultPlacement,yt=X.open,Lt=X.repositionMode,Vt=X.splunkTheme,zt=ve.context||window,Se=Vt.isPrisma;if(!yt||!ve.outerContainerEl||!ze||!ie.anchorEl||!ve.windowSizeMeasurementEl)return null;var Xe=ve.getElPosition(ie.anchorEl),at=zt!==window?ve.getElPosition(zt):void 0;if(N&&Je&&ve.autoCloseWhenOffScreen(Xe,at))return null;var Et=Se?0:8,pr=8,pe=Se?"edge":"center",R=L({align:Le==="theme"?pe:Le,anchorPos:Xe,scrollContainerPos:at,canCoverAnchor:ot,defaultPlacement:gt,repositionMode:Lt,outerContainerEl:ve.outerContainerEl,padding:pr,windowWidth:ve.windowSizeMeasurementEl.offsetLeft,windowHeight:ve.windowSizeMeasurementEl.offsetTop}),Z=R.placement,he=R.outerContainerStyle,xe=R.maxHeight,Fe=R.maxWidth,B=ve.arrow?H.getArrowStyle({anchorPos:Xe,arrowHeight:Et,outerContainerStyle:he,placement:Z,outerContainerEl:ve.outerContainerEl}):[],V=it(B,2),U=V[0],ee=V[1],ue=ve.props.appearance!=="none"&&!Se,Te=fe(Xe,ie.anchorPos)&&fe(he,ie.outerContainerStyle)&&Z===ie.placement&&xe===ie.maxHeight&&Fe===ie.maxWidth,Ne=fe(Object(_.omit)(U,"transform"),Object(_.omit)(ie.arrowStyle,"transform"))&&fe(ee!=null?ee:{},(Ze=ie.arrowStyleTransformMeta)!==null&&Ze!==void 0?Ze:{});return Te&&(!ue||ue&&Ne)?null:{anchorPos:Xe,arrowStyle:U,arrowStyleTransformMeta:ee,outerContainerStyle:he,placement:Z,maxHeight:xe,maxWidth:Fe}})}),me(ct(ve),"handleNewAnchor",function(N){var ie;N&&!(N instanceof HTMLElement)?ie=Object(w.findDOMNode)(N):ie=N!=null?N:void 0;var Ze=ie?ve.getElPosition(ie):void 0;ve.setState({anchorEl:ie,anchorPos:Ze})}),me(ct(ve),"handleInnerContainerMount",function(N){ve.innerContainerEl=N,N&&ve.props.takeFocus&&Object(_.defer)(G.takeFocus,N),Object(te.a)(ve.props.elementRef,N)}),me(ct(ve),"handleTab",function(N){if(ve.innerContainerEl){if(ve.props.retainFocus)Object(G.handleTab)(ve.innerContainerEl,N);else if(Object(G.isTabKey)(N)){var ie=Object(G.getSortedTabbableElements)(ve.innerContainerEl);if(ie.length>0){var Ze=N.shiftKey?ie[0]:ie[ie.length-1];Ze===N.target&&ve.handleRequestClose({event:N,reason:"tabKey"})}}}}),me(ct(ve),"handleRequestClose",function(N){ve.props.open&&ve.requestClose(N)}),me(ct(ve),"handleAnimationEnd",function(){ve.setState({animating:!1})}),me(ct(ve),"renderLayer",function(){var N=ve.props,ie=N.animation,Ze=N.appearance,X=N.children,Le=N.id,ze=N.open,Je=N.retainFocus,ot=N.splunkTheme,gt=ve.state,yt=gt.anchorPos,Lt=gt.arrowStyle,Vt=gt.outerContainerStyle,zt=gt.placement,Se=ot.isPrisma,Xe=Se&&Ze==="inverted"?"normal":Ze,at=ve.state,Et=at.maxHeight,pr=at.maxWidth;Ze!=="none"&&(Object(_.isFinite)(Et)&&(Et-=20),Object(_.isFinite)(pr)&&(pr-=20));var pe={anchorHeight:yt?yt.height:null,anchorWidth:yt?yt.width:null,placement:zt||null,maxHeight:Et||null,maxWidth:pr||null},R=ie?{opacity:ze?1:0}:{opacity:1};return c.a.createElement(x.Spring,{from:{opacity:ie?0:1},to:R,config:{tension:300,friction:40},onRest:ve.handleAnimationEnd},function(Z){return c.a.createElement(lt,{"data-test":"outer-popover",style:rt(rt({},Vt),Z),ref:function(xe){ve.outerContainerEl=xe}},(ze||ve.state.animating)&&c.a.createElement(tt,Ae({$appearance:Xe,"data-test":"popover",ref:ve.handleInnerContainerMount,tabIndex:-1,id:Le,onKeyDown:ve.handleTab},Object(_.omit)(ve.props,["anchor"].concat(ke(Object(_.keys)(H.propTypes))))),c.a.createElement(k.Provider,{value:{retainFocus:Je}},Ze==="none"&&X,Ze!=="none"&&!Se&&c.a.createElement(Ee,{$appearance:Xe,ref:function(xe){ve.arrow=xe},style:Lt}),Ze!=="none"&&c.a.createElement(je,{$appearance:Xe},Object(_.isFunction)(X)?X(pe):X))),c.a.createElement(_e,{ref:function(xe){ve.windowSizeMeasurementEl=xe}}))})}),ve.handleScroll=Object(_.throttle)(ve.setPlacement.bind(ct(ve),!0),0),ve.handleWindowScroll=Object(_.throttle)(ve.setPlacement.bind(ct(ve),!0),0),ve.setPlacement=Object(_.throttle)(ve.setPlacement,0,{leading:!1}),ve.state={animating:!1,prevOpen:ae.open},ve}return Ye(H,[{key:"componentDidMount",value:function(){this.handleNewAnchor(this.props.anchor)}},{key:"componentDidUpdate",value:function(ve){ve.anchor!==this.props.anchor&&this.handleNewAnchor(this.props.anchor),!!this.innerContainerEl&&(this.props.open||this.state.animating)&&(this.setPlacement(),!ve.open&&this.props.open&&this.props.takeFocus&&Object(G.takeFocus)(this.innerContainerEl))}},{key:"componentWillUnmount",value:function(){this.setPlacement.cancel(),this.handleScroll.cancel()}},{key:"autoCloseWhenOffScreen",value:function(ve,N){return ve.top<0||ve.top>window.innerHeight||ve.left<0||ve.left>window.innerWidth?(this.requestClose({reason:"offScreen"}),!0):N&&(ve.height+ve.top<N.top||ve.top>N.bottom||ve.width+ve.left<N.left||ve.left>N.right)?(this.requestClose({reason:"offScreen"}),!0):!1}},{key:"requestClose",value:function(ve){if(Object(_.includes)(this.props.closeReasons,ve.reason)){var N,ie;(N=(ie=this.props).onRequestClose)===null||N===void 0||N.call(ie,ve)}}},{key:"render",value:function(){var ve=this.props.open||this.state.animating,N=this.context||window,ie=N!==window;return[ie&&c.a.createElement(A.a,{target:N,eventType:"scroll",listener:this.handleScroll,options:{passive:!1,capture:!0},key:"eventListener"}),c.a.createElement(A.a,{target:window,eventType:"resize",listener:this.setPlacement,key:"eventListenerOnWindowResize"}),c.a.createElement(A.a,{target:window,eventType:"scroll",listener:this.handleWindowScroll,options:{passive:!1,capture:!0},key:"eventListenerOnWindowScroll"}),c.a.createElement(E.a,{closeReasons:Object(_.intersection)(this.props.closeReasons.filter(function(Ze){return Ze!=="offScreen"}),E.a.possibleCloseReasons),open:ve,onRequestClose:this.handleRequestClose,key:"Layer"},ve&&this.renderLayer())]}}]),H}(l.Component);me(De,"contextType",Y.a),me(De,"defaultProps",He),me(De,"propTypes",Qe),me(De,"getDerivedStateFromProps",function(Oe,qe){return Oe.open!==qe.prevOpen?{animating:Oe.animation,prevOpen:Oe.open}:null});var ft=Object(T.withSplunkTheme)(De);ft.propTypes=De.propTypes;var Rt=ft},14:function(s,i){s.exports=Cf()},18:function(s,i){s.exports=bg()},2:function(s,i){s.exports=Wr()},25:function(s,i){s.exports=Ty()},3:function(s,i){s.exports=Qn()},30:function(s,i){s.exports=My()},35:function(s,i){s.exports=Ay()},4:function(s,i){s.exports=zr()},50:function(s,i){s.exports=zy()},63:function(s,i){s.exports=eg()}})});var Ef=Xt((oO,Ly)=>{Ly.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=170)}({1:function(s,i){s.exports=Un()},10:function(s,i){s.exports=i_()},11:function(s,i,n){"use strict";n.d(i,"a",function(){return l});function l(c,a){c&&(typeof c=="function"?c(a):c.current=a)}},16:function(s,i){s.exports=Lc()},170:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return Ee}),n.d(i,"legacyRefMode",function(){return tt});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(4),_=n(10),T=n(16),x=n.n(T),M=n(11);function A(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(ce){return typeof ce}:A=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},A(_e)}function D(_e,te){var ce=Object.keys(_e);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(_e);te&&(Ae=Ae.filter(function(ke){return Object.getOwnPropertyDescriptor(_e,ke).enumerable})),ce.push.apply(ce,Ae)}return ce}function E(_e){for(var te=1;te<arguments.length;te++){var ce=arguments[te]!=null?arguments[te]:{};te%2?D(Object(ce),!0).forEach(function(Ae){de(_e,Ae,ce[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(ce)):D(Object(ce)).forEach(function(Ae){Object.defineProperty(_e,Ae,Object.getOwnPropertyDescriptor(ce,Ae))})}return _e}function $(_e,te){if(!(_e instanceof te))throw new TypeError("Cannot call a class as a function")}function Y(_e,te){for(var ce=0;ce<te.length;ce++){var Ae=te[ce];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(_e,Ae.key,Ae)}}function G(_e,te,ce){return te&&Y(_e.prototype,te),ce&&Y(_e,ce),_e}function le(_e,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(te&&te.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),te&&K(_e,te)}function K(_e,te){return K=Object.setPrototypeOf||function(Ae,ke){return Ae.__proto__=ke,Ae},K(_e,te)}function F(_e){var te=k();return function(){var Ae=re(_e),ke;if(te){var Ce=re(this).constructor;ke=Reflect.construct(Ae,arguments,Ce)}else ke=Ae.apply(this,arguments);return Q(this,ke)}}function Q(_e,te){return te&&(A(te)==="object"||typeof te=="function")?te:L(_e)}function L(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_e){return!1}}function re(_e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},re(_e)}function de(_e,te,ce){return te in _e?Object.defineProperty(_e,te,{value:ce,enumerable:!0,configurable:!0,writable:!0}):_e[te]=ce,_e}var Ie=["clickAway","contentClick","escapeKey","offScreen","tabKey","toggleClick"],et={canCoverAnchor:b.a.bool,children:b.a.oneOfType([b.a.node,b.a.func]),closeReasons:b.a.arrayOf(b.a.oneOf(Ie)),defaultPlacement:b.a.oneOf(["above","below","left","right","vertical","horizontal"]),elementRef:b.a.oneOfType([b.a.func,b.a.object]),focusToggleReasons:b.a.arrayOf(b.a.oneOf(Ie)),inputId:b.a.string,onRequestClose:b.a.func,onRequestOpen:b.a.func,open:b.a.bool,repositionMode:b.a.oneOf(["none","flip","any"]),retainFocus:b.a.bool,takeFocus:b.a.bool,toggle:b.a.element.isRequired},lt={canCoverAnchor:!0,closeReasons:Ie,defaultPlacement:"below",focusToggleReasons:["contentClick","escapeKey","tabKey","toggleClick"],repositionMode:"flip",retainFocus:!1,takeFocus:!0},tt=Symbol("Dropdown legacy ref mode marker"),je=function(_e){le(ce,_e);var te=F(ce);function ce(Ae){var ke;return $(this,ce),ke=te.call(this,Ae),de(L(ke),"controlledExternally",void 0),de(L(ke),"popoverId",void 0),de(L(ke),"toggleRef",null),de(L(ke),"toggleId",void 0),de(L(ke),"handleToggleMount",function(Ce){ke.toggleRef=Ce,ke.setState({anchor:Ce}),ke.props.toggle.type[tt]?Object(M.a)(ke.props.toggle.props.elementRef,Ce):Object(M.a)(ke.props.toggle.ref,Ce)}),de(L(ke),"handleToggleClick",function(Ce){var $e,Ke;if(($e=(Ke=ke.props.toggle.props).onClick)===null||$e===void 0||$e.call(Ke,Ce),ke.isOpen())ke.handleRequestClose({reason:"toggleClick",event:Ce});else{var Ve,rt;(Ve=(rt=ke.props).onRequestOpen)===null||Ve===void 0||Ve.call(rt,Ce,{reason:"toggleClick"}),ke.isControlled()||ke.setState({open:!0})}}),de(L(ke),"handleRequestClose",function(Ce){var $e=Ce.event,Ke=Ce.reason,Ve=ke.props,rt=Ve.closeReasons,it=Ve.focusToggleReasons,dt=Ve.onRequestClose;if($e&&Ke==="clickAway")for(var bt=$e.target,Wt=ke.props.inputId||ke.props.toggle.props.id||ke.toggleId;bt;){if(bt.id===Wt)return;bt=bt.parentNode}ke.isOpen()&&Object(w.includes)(rt,Ke)&&(Object(w.includes)(it,Ke)&&ke.focus(),ke.isControlled()||ke.setState({open:!1}),dt==null||dt(Ce))}),de(L(ke),"handleContentClick",function(Ce){ke.handleRequestClose({reason:"contentClick",event:Ce})}),ke.state={anchor:null,open:!1},ke.controlledExternally=Object(w.has)(Ae,"open"),ke.popoverId=Object(_.createDOMID)("popover"),ke.toggleId=Object(_.createDOMID)("toggle"),ke}return G(ce,[{key:"componentDidUpdate",value:function(){var ke=E({},Object(w.omit)(this.props,Object(w.keys)(ce.propTypes),"value","id"))}},{key:"isOpen",value:function(){return this.isControlled()?this.props.open:this.state.open}},{key:"focus",value:function(){var ke;(ke=this.toggleRef)===null||ke===void 0||ke.focus()}},{key:"isControlled",value:function(){return this.controlledExternally}},{key:"renderToggle",value:function(){var ke;return Object(l.cloneElement)(this.props.toggle,(ke={onClick:this.handleToggleClick},de(ke,this.props.toggle.type[tt]?"elementRef":"ref",this.handleToggleMount),de(ke,"aria-controls",this.isOpen()?this.popoverId:void 0),de(ke,"aria-haspopup",!0),de(ke,"aria-expanded",this.isOpen()),de(ke,"data-test",this.props.toggle.props["data-test"]||"dropdown"),de(ke,"data-test-popover-id",this.popoverId),de(ke,"id",this.props.inputId||this.props.toggle.props.id||this.toggleId),ke))}},{key:"render",value:function(){var ke=this.props,Ce=ke.canCoverAnchor,$e=ke.children,Ke=ke.closeReasons,Ve=ke.defaultPlacement,rt=ke.elementRef,it=ke.repositionMode,dt=ke.retainFocus,bt=ke.takeFocus,Wt=this.state.anchor,Ht=this.handleRequestClose,Jt=this.handleContentClick,Mt=this.renderToggle();return c.a.createElement(c.a.Fragment,null,Mt,c.a.createElement(x.a,{open:!!Wt&&this.isOpen(),autoCloseWhenOffScreen:Object(w.includes)(Ke,"offScreen"),anchor:Wt,canCoverAnchor:Ce,elementRef:rt,retainFocus:dt,defaultPlacement:Ve,onRequestClose:Ht,repositionMode:it,id:this.popoverId,"aria-labelledby":this.props.inputId||this.props.toggle.props.id||this.toggleId,takeFocus:bt},Object(w.isFunction)($e)?function(){return c.a.createElement("div",{onClick:Jt},$e.apply(void 0,arguments))}:c.a.createElement("div",{onClick:Jt},$e)))}}]),ce}(l.Component);de(je,"possibleCloseReasons",Ie),de(je,"propTypes",et),de(je,"defaultProps",lt);var Ee=je},2:function(s,i){s.exports=Wr()},4:function(s,i){s.exports=zr()}})});var Pf=Xt((aO,Ry)=>{Ry.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=133)}({0:function(s,i){s.exports=ys()},1:function(s,i){s.exports=Un()},11:function(s,i,n){"use strict";n.d(i,"a",function(){return l});function l(c,a){c&&(typeof c=="function"?c(a):c.current=a)}},133:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return Ke}),n.d(i,"isInternalLink",function(){return ce}),n.d(i,"NavigationContext",function(){return E}),n.d(i,"NavigationProvider",function(){return $});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(4),_=n(19),T=n(3),x=n.n(T),M=n(0),A=x.a.a.withConfig({displayName:"ClickableStyles__StyledA",componentId:"sc-7al1vw-0"})([""," cursor:pointer;&[disabled]{cursor:not-allowed;color:",";}&::-moz-focus-inner{border:0;padding:0;}"],M.mixins.reset("inline"),M.variables.contentColorDisabled),D={children:b.a.node,onClick:b.a.func},E=c.a.createContext(void 0);function $(Ve){var rt=Ve.children,it=Ve.onClick;return c.a.createElement(E.Provider,{value:it},rt)}$.propTypes=D;var Y=n(11);function G(Ve){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(it){return typeof it}:G=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},G(Ve)}function le(){return le=Object.assign||function(Ve){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var dt in it)Object.prototype.hasOwnProperty.call(it,dt)&&(Ve[dt]=it[dt])}return Ve},le.apply(this,arguments)}function K(Ve,rt){if(Ve==null)return{};var it=F(Ve,rt),dt,bt;if(Object.getOwnPropertySymbols){var Wt=Object.getOwnPropertySymbols(Ve);for(bt=0;bt<Wt.length;bt++)dt=Wt[bt],!(rt.indexOf(dt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Ve,dt)||(it[dt]=Ve[dt]))}return it}function F(Ve,rt){if(Ve==null)return{};var it={},dt=Object.keys(Ve),bt,Wt;for(Wt=0;Wt<dt.length;Wt++)bt=dt[Wt],!(rt.indexOf(bt)>=0)&&(it[bt]=Ve[bt]);return it}function Q(Ve,rt){if(!(Ve instanceof rt))throw new TypeError("Cannot call a class as a function")}function L(Ve,rt){for(var it=0;it<rt.length;it++){var dt=rt[it];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(Ve,dt.key,dt)}}function k(Ve,rt,it){return rt&&L(Ve.prototype,rt),it&&L(Ve,it),Ve}function re(Ve,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");Ve.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Ve,writable:!0,configurable:!0}}),rt&&de(Ve,rt)}function de(Ve,rt){return de=Object.setPrototypeOf||function(dt,bt){return dt.__proto__=bt,dt},de(Ve,rt)}function Ie(Ve){var rt=tt();return function(){var dt=je(Ve),bt;if(rt){var Wt=je(this).constructor;bt=Reflect.construct(dt,arguments,Wt)}else bt=dt.apply(this,arguments);return et(this,bt)}}function et(Ve,rt){return rt&&(G(rt)==="object"||typeof rt=="function")?rt:lt(Ve)}function lt(Ve){if(Ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve}function tt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Ve){return!1}}function je(Ve){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(it){return it.__proto__||Object.getPrototypeOf(it)},je(Ve)}function Ee(Ve,rt,it){return rt in Ve?Object.defineProperty(Ve,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):Ve[rt]=it,Ve}var _e=/^[a-z0-9]+:/,te=/^\/\//,ce=function(rt){return!_e.test(rt)&&!te.test(rt)},Ae={children:b.a.node,disabled:b.a.bool,elementRef:b.a.oneOfType([b.a.func,b.a.object]),onClick:b.a.func,openInNewContext:b.a.bool,to:b.a.string},ke={disabled:!1,openInNewContext:!1};function Ce(Ve){return!!Ve.to&&!Ve.disabled}var $e=function(Ve){re(it,Ve);var rt=Ie(it);function it(dt){var bt;return Q(this,it),bt=rt.call(this,dt),Ee(lt(bt),"el",null),Ee(lt(bt),"handleMount",function(Wt){bt.el=Wt,Object(Y.a)(bt.props.elementRef,Wt)}),Ee(lt(bt),"createHandleOnClick",function(Wt){return function(Ht){Ce(bt.props)&&(Ht.metaKey||Ht.ctrlKey)&&bt.props.to||(bt.props.onClick?bt.props.onClick(Ht):Ce(bt.props)&&Wt&&Wt(Ht,{to:bt.props.to,openInNewContext:bt.props.openInNewContext}))}}),bt}return k(it,[{key:"focus",value:function(){var bt;(bt=this.el)===null||bt===void 0||bt.focus()}},{key:"render",value:function(){var bt=this.createHandleOnClick(this.context);if(Ce(this.props)){var Wt=this.props,Ht=Wt.children,Jt=Wt.openInNewContext,Mt=Wt.to,oe=K(Wt,["children","openInNewContext","to"]),Ye=Jt?"_blank":void 0,st=Jt&&ce(Mt)?"noopener noreferrer":void 0;return c.a.createElement(A,le({"data-test":"clickable",ref:this.handleMount,href:Mt,target:Ye,rel:st,onClick:bt},Object(w.omit)(oe,"disabled","elementRef","onClick")),Ht)}var _t=this.props,Ct=_t.children,kt=_t.type,ct=K(_t,["children","type"]);return c.a.createElement(A,le({as:"button","data-test":"clickable",ref:this.handleMount,type:kt||"button",onClick:bt},Object(w.omit)(ct,"elementRef","onClick","openInNewContext","to")),Ct)}}]),it}(l.Component);Ee($e,"contextType",E),Ee($e,"propTypes",Ae),Ee($e,"defaultProps",ke),Ee($e,_.legacyRefMode,!0);var Ke=$e},19:function(s,i){s.exports=Ef()},2:function(s,i){s.exports=Wr()},3:function(s,i){s.exports=Qn()},4:function(s,i){s.exports=zr()}})});var Oa=Xt((sO,jy)=>{jy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=138)}({0:function(s,i){s.exports=Wr()},13:function(s,i){s.exports=a_()},138:function(s,i,n){"use strict";n.r(i);var l=n(0),c=n.n(l),a=n(3),b=n.n(a),w=n(5),_=n.n(w),T=n(13),x=n.n(T);function M(){return M=Object.assign||function(G){for(var le=1;le<arguments.length;le++){var K=arguments[le];for(var F in K)Object.prototype.hasOwnProperty.call(K,F)&&(G[F]=K[F])}return G},M.apply(this,arguments)}function A(G,le){if(G==null)return{};var K=D(G,le),F,Q;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(G);for(Q=0;Q<L.length;Q++)F=L[Q],!(le.indexOf(F)>=0)&&(!Object.prototype.propertyIsEnumerable.call(G,F)||(K[F]=G[F]))}return K}function D(G,le){if(G==null)return{};var K={},F=Object.keys(G),Q,L;for(L=0;L<F.length;L++)Q=F[L],!(le.indexOf(Q)>=0)&&(K[Q]=G[Q]);return K}var E=_()(x.a).withConfig({displayName:"SVGInternal__StyledSVG",componentId:"ksy9g7-0"})(["circle,ellipse,path,polygon,rect{fill:currentColor;}"]),$={viewBox:b.a.string};function Y(G){var le=G.viewBox,K=le===void 0?"0 0 1500 1500":le,F=A(G,["viewBox"]);return c.a.createElement(E,M({viewBox:K},F))}Y.propTypes=$,i.default=Y},3:function(s,i){s.exports=Un()},5:function(s,i){s.exports=Qn()}})});var Vy=Xt((lO,Fy)=>{Fy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=50)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},2:function(s,i){s.exports=Oa()},50:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Clear")},M),c.a.createElement("path",{d:"M918.315 750.645L1500 1332.33 1332.33 1500 750.645 918.315 167.67 1500 0 1332.33l581.685-582.975L0 167.67 167.67 0l582.975 581.685L1332.33 0 1500 167.67"}))}}})});var Ny=Xt((uO,By)=>{By.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=54)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},4:function(s,i){s.exports=Vy()},54:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(4),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Close")},M))}}})});var $y=Xt((cO,Uy)=>{Uy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=67)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},2:function(s,i){s.exports=Oa()},67:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("External"),viewBox:"0 0 1500 1499"},M),c.a.createElement("path",{d:"M1500 1125h-189.04v185.96H189.04V189.04H375V0H0v1500h1500v-375zm0-1125H723.288v190.068h469.52l-666.78 648.288 133.56 134.59 650.344-665.754v469.52l189.04 1.028L1500 0z"}))}}})});var Hy=Xt((hO,Wy)=>{Wy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=154)}({0:function(s,i){s.exports=ys()},1:function(s,i){s.exports=Un()},12:function(s,i){s.exports=Pf()},154:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return ke});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(19),_=n(5),T=n(3),x=n.n(T),M=n(52),A=n.n(M),D=n(12),E=n.n(D),$=n(0),Y=x()(E.a).withConfig({displayName:"LinkStyles__StyledClickable",componentId:"sc-1hhltcf-0"})(["",";color:",";text-decoration:none;font-size:inherit;font-weight:inherit;line-height:inherit;border-radius:",";&:not([disabled]){cursor:pointer;",";&:focus{box-shadow:",";outline:0;&:active{box-shadow:none;}}}&[disabled]{color:",";}&::-moz-focus-inner{border:0;padding:0;}"],$.mixins.reset("inline"),Object($.pick)({enterprise:$.variables.linkColor,prisma:$.variables.interactiveColorPrimary}),Object($.pick)({enterprise:0,prisma:"1px"}),Object($.pick)({enterprise:Object(T.css)(["&:hover{text-decoration:underline;}"]),prisma:Object(T.css)(["&:hover:not(:focus),&:active{text-decoration:underline;text-underline-position:under;}"])}),$.variables.focusShadow,$.variables.contentColorDisabled),G=x()(A.a).withConfig({displayName:"LinkStyles__StyledExternal",componentId:"sc-1hhltcf-1"})(["vertical-align:baseline;margin:",";"],Object($.pick)({enterprise:"0 0 0 3px",prisma:"0 0 0 4px"}));function le(Ce){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?le=function(Ke){return typeof Ke}:le=function(Ke){return Ke&&typeof Symbol=="function"&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke},le(Ce)}function K(){return K=Object.assign||function(Ce){for(var $e=1;$e<arguments.length;$e++){var Ke=arguments[$e];for(var Ve in Ke)Object.prototype.hasOwnProperty.call(Ke,Ve)&&(Ce[Ve]=Ke[Ve])}return Ce},K.apply(this,arguments)}function F(Ce,$e){if(Ce==null)return{};var Ke=Q(Ce,$e),Ve,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Ce);for(rt=0;rt<it.length;rt++)Ve=it[rt],!($e.indexOf(Ve)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Ce,Ve)||(Ke[Ve]=Ce[Ve]))}return Ke}function Q(Ce,$e){if(Ce==null)return{};var Ke={},Ve=Object.keys(Ce),rt,it;for(it=0;it<Ve.length;it++)rt=Ve[it],!($e.indexOf(rt)>=0)&&(Ke[rt]=Ce[rt]);return Ke}function L(Ce,$e){if(!(Ce instanceof $e))throw new TypeError("Cannot call a class as a function")}function k(Ce,$e){for(var Ke=0;Ke<$e.length;Ke++){var Ve=$e[Ke];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(Ce,Ve.key,Ve)}}function re(Ce,$e,Ke){return $e&&k(Ce.prototype,$e),Ke&&k(Ce,Ke),Ce}function de(Ce,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function");Ce.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ce,writable:!0,configurable:!0}}),$e&&Ie(Ce,$e)}function Ie(Ce,$e){return Ie=Object.setPrototypeOf||function(Ve,rt){return Ve.__proto__=rt,Ve},Ie(Ce,$e)}function et(Ce){var $e=je();return function(){var Ve=Ee(Ce),rt;if($e){var it=Ee(this).constructor;rt=Reflect.construct(Ve,arguments,it)}else rt=Ve.apply(this,arguments);return lt(this,rt)}}function lt(Ce,$e){return $e&&(le($e)==="object"||typeof $e=="function")?$e:tt(Ce)}function tt(Ce){if(Ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ce}function je(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Ce){return!1}}function Ee(Ce){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(Ke){return Ke.__proto__||Object.getPrototypeOf(Ke)},Ee(Ce)}function _e(Ce,$e,Ke){return $e in Ce?Object.defineProperty(Ce,$e,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Ce[$e]=Ke,Ce}var te={disabled:!1,openInNewContext:!1},ce={children:b.a.node,disabled:b.a.bool,elementRef:b.a.oneOfType([b.a.func,b.a.object]),openInNewContext:b.a.bool,to:b.a.string},Ae=function(Ce){de(Ke,Ce);var $e=et(Ke);function Ke(){var Ve;L(this,Ke);for(var rt=arguments.length,it=new Array(rt),dt=0;dt<rt;dt++)it[dt]=arguments[dt];return Ve=$e.call.apply($e,[this].concat(it)),_e(tt(Ve),"component",null),_e(tt(Ve),"handleMount",function(bt){Ve.component=bt}),Ve}return re(Ke,[{key:"focus",value:function(){var rt;(rt=this.component)===null||rt===void 0||rt.focus()}},{key:"render",value:function(){var rt=this.props,it=rt.children,dt=rt.openInNewContext,bt=F(rt,["children","openInNewContext"]);return c.a.createElement(Y,K({"data-test":"link",ref:this.handleMount,openInNewContext:dt},bt),it,dt&&c.a.createElement(G,{screenReaderText:Object(_._)("Open externally"),size:.8}))}}]),Ke}(l.Component);_e(Ae,"propTypes",ce),_e(Ae,"defaultProps",te),_e(Ae,w.legacyRefMode,!0);var ke=Ae},19:function(s,i){s.exports=Ef()},2:function(s,i){s.exports=Wr()},3:function(s,i){s.exports=Qn()},5:function(s,i){s.exports=Ti()},52:function(s,i){s.exports=$y()}})});var Ky=Xt((dO,Gy)=>{Gy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=65)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},2:function(s,i){s.exports=Oa()},65:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Error")},M,{viewBox:"0 0 1375 1500"}),c.a.createElement("path",{d:"M187.5 61.5h1000c103.553 0 187.5 83.947 187.5 187.5v1000c0 103.553-83.947 187.5-187.5 187.5h-1000C83.947 1436.5 0 1352.553 0 1249V249C0 145.447 83.947 61.5 187.5 61.5zm400.79 413.083l32.145 257.167c4.908 39.264 34.086 74.685 69.815 91.187 36.612-16.018 64.87-50.826 69.914-91.187l32.146-257.167C799.18 419.623 759.582 374 703.7 374h-26.8c-55.908 0-95.555 45.033-88.61 100.583zm101.293 644.209c63.283 0 114.584-51.301 114.584-114.584 0-63.282-51.301-114.583-114.584-114.583-63.282 0-114.583 51.3-114.583 114.583s51.3 114.584 114.583 114.584z"}))}}})});var Yy=Xt((fO,Zy)=>{Zy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=154)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},154:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Success")},M),c.a.createElement("path",{d:"M750 1500C335.786 1500 0 1164.214 0 750S335.786 0 750 0s750 335.786 750 750-335.786 750-750 750zm-138.327-414.388l511.677-511.677-105.185-105.185L611.53 875.385 453.004 716.573 347.819 821.76l263.854 263.853z"}))}},2:function(s,i){s.exports=Oa()}})});var Jy=Xt((pO,Xy)=>{Xy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=144)}({0:function(s,i){s.exports=ys()},1:function(s,i){s.exports=Un()},144:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return Y});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(3),_=n.n(w),T=n(0),x=_.a.div.withConfig({displayName:"BoxStyles__Styled",componentId:"sc-1h4b5f6-0"})(["",";align-items:stretch;align-content:stretch;flex-flow:row nowrap;flex-grow:0;flex-shrink:0;justify-content:flex-start;width:auto;max-width:100%;@media all and (-ms-high-contrast:none){max-width:calc(100% - 0.01px);}&[data-inline]{display:inline-block;vertical-align:middle;}&[data-flex]{display:flex;}&[data-flex][data-inline]{display:inline-flex;}"],T.mixins.reset("block"));function M(){return M=Object.assign||function(G){for(var le=1;le<arguments.length;le++){var K=arguments[le];for(var F in K)Object.prototype.hasOwnProperty.call(K,F)&&(G[F]=K[F])}return G},M.apply(this,arguments)}function A(G,le){if(G==null)return{};var K=D(G,le),F,Q;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(G);for(Q=0;Q<L.length;Q++)F=L[Q],!(le.indexOf(F)>=0)&&(!Object.prototype.propertyIsEnumerable.call(G,F)||(K[F]=G[F]))}return K}function D(G,le){if(G==null)return{};var K={},F=Object.keys(G),Q,L;for(L=0;L<F.length;L++)Q=F[L],!(le.indexOf(Q)>=0)&&(K[Q]=G[Q]);return K}var E={children:b.a.node,elementRef:b.a.oneOfType([b.a.func,b.a.object]),flex:b.a.bool,inline:b.a.bool};function $(G){var le=G.children,K=G.elementRef,F=G.flex,Q=F===void 0?!1:F,L=G.inline,k=L===void 0?!1:L,re=A(G,["children","elementRef","flex","inline"]);return c.a.createElement(x,M({ref:K},re,{"data-inline":k||void 0,"data-flex":Q||void 0}),le)}$.propTypes=E;var Y=$},2:function(s,i){s.exports=Wr()},3:function(s,i){s.exports=Qn()}})});var Qy=Xt((mO,qy)=>{qy.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=87)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},2:function(s,i){s.exports=Oa()},87:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Info Circle")},M),c.a.createElement("path",{d:"M843.75 750v-93.75H562.5V750h93.75v281.25H562.5V1125h375v-93.75h-93.75V750zM750 1500C335.786 1500 0 1164.214 0 750S335.786 0 750 0s750 335.786 750 750-335.786 750-750 750zm0-937.5c51.777 0 93.75-41.973 93.75-93.75S801.777 375 750 375s-93.75 41.973-93.75 93.75S698.223 562.5 750 562.5z"}))}}})});var t1=Xt((gO,e1)=>{e1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=172)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Ti()},172:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Warning"),viewBox:"0 0 1500 1313"},M),c.a.createElement("path",{d:"M.956 1196.326l668.58-1144.89C689.395 17.736 718.71 0 749.916 0c31.207 0 59.577 15.963 80.382 51.436l668.58 1144.89c7.565 12.416-23.642 116.174-77.544 116.174H85.474c-53.902 0-92.083-102.872-84.518-116.174zm643.333-684.743l32.146 257.167c4.908 39.264 34.086 74.685 69.815 91.187 36.612-16.018 64.87-50.826 69.914-91.187l32.146-257.167C855.18 456.623 815.582 411 759.7 411h-26.8c-55.908 0-95.555 45.033-88.61 100.583zm101.294 644.209c63.283 0 114.584-51.301 114.584-114.584 0-63.282-51.301-114.583-114.584-114.583-63.282 0-114.583 51.3-114.583 114.583s51.3 114.584 114.583 114.584z"}))}},2:function(s,i){s.exports=Oa()}})});var n1=Xt((yO,r1)=>{r1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=109)}({0:function(s,i){s.exports=ys()},1:function(s,i){s.exports=Un()},109:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return H}),n.d(i,"Link",function(){return je});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(22),_=n(3),T=n.n(_),x=n(8),M=n.n(x),A=n(12),D=n.n(A),E=n(0),$=T.a.div.withConfig({displayName:"BannerStyles__BannerContent",componentId:"sc-12z0t1m-0"})(["",";padding:0 8px;text-align:center;margin-left:auto;",""],E.mixins.reset("inline"),Object(E.pick)({prisma:Object(_.css)(["color:",";"],E.variables.contentColorInverted)})),Y=T()(D.a).withConfig({displayName:"BannerStyles__BannerRemoveWrapper",componentId:"sc-12z0t1m-1"})(["",";border:1px solid transparent;border-radius:",";color:",";cursor:pointer;margin-left:auto;padding:",";"," &:hover,&:focus{background:",";border:",";color:",";}&:active{",";}",""],E.mixins.reset("flex"),Object(E.pick)({prisma:"50%",enterprise:E.variables.borderRadius}),Object(E.pick)({prisma:E.variables.contentColorInverted,enterprise:{dark:E.variables.gray96,light:E.variables.gray45}}),Object(E.pick)({prisma:"10px",enterprise:"8px"}),Object(E.pick)({enterprise:Object(_.css)(["margin-top:1px;"])}),Object(E.pick)({prisma:E.variables.interactiveColorOverlayHover,enterprise:{dark:E.variables.gray30,light:E.variables.gray92}}),Object(E.pick)({prisma:Object(_.css)(["1px solid inherit"]),enterprise:Object(_.css)(["1px solid ",""],E.variables.gray80)}),Object(E.pick)({enterprise:{dark:E.variables.gray96,light:E.variables.linkColor}}),Object(E.pick)({prisma:Object(_.css)(["background:",";"],E.variables.interactiveColorOverlayActive),enterprise:Object(_.css)(["box-shadow:",";"],E.variables.focusShadow)}),Object(E.pick)({prisma:Object(_.css)(["&:focus{box-shadow:0 0 0 3px ",";}"],E.variables.focusColor)})),G=T()(M.a).withConfig({displayName:"BannerStyles__BannerWrapper",componentId:"sc-12z0t1m-2"})(["",";display:flex;align-items:center;justify-content:center;min-height:40px;margin-bottom:",";padding:",";word-wrap:break-word;",""],E.mixins.reset("block"),E.variables.spacingSmall,Object(E.pick)({prisma:"0 8px 0 32px",enterprise:"0 8px 0 38px"}),Object(E.pickVariant)("$type",{info:Object(_.css)(["background-color:",";"],Object(E.pick)({prisma:E.variables.contentColorActive,enterprise:{dark:E.mixins.colorWithAlpha(E.variables.infoColor,.5),light:E.variables.infoColorL50}})),success:Object(_.css)(["background-color:",";"],Object(E.pick)({prisma:E.variables.accentColorPositive,enterprise:{dark:E.mixins.colorWithAlpha(E.variables.successColor,.5),light:E.variables.successColorL50}})),warning:Object(_.css)(["background-color:",";"],Object(E.pick)({prisma:E.variables.accentColorWarning,enterprise:{dark:E.mixins.colorWithAlpha(E.variables.warningColor,.5),light:E.variables.warningColorL50}})),error:Object(_.css)(["background-color:",";"],Object(E.pick)({prisma:E.variables.accentColorNegative,enterprise:{dark:E.mixins.colorWithAlpha(E.variables.errorColor,.5),light:E.variables.errorColorL50}}))}));function le(){return le=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},le.apply(this,arguments)}function K(ae,ve){if(ae==null)return{};var N=F(ae,ve),ie,Ze;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(ae);for(Ze=0;Ze<X.length;Ze++)ie=X[Ze],!(ve.indexOf(ie)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,ie)||(N[ie]=ae[ie]))}return N}function F(ae,ve){if(ae==null)return{};var N={},ie=Object.keys(ae),Ze,X;for(X=0;X<ie.length;X++)Ze=ie[X],!(ve.indexOf(Ze)>=0)&&(N[Ze]=ae[Ze]);return N}var Q=function(ve){var N=ve.children,ie=ve.type,Ze=ve.onRequestRemove,X=K(ve,["children","type","onRequestRemove"]);return c.a.createElement(G,le({$type:ie,"data-test-type":ie,"data-test":"message"},X),c.a.createElement($,{"data-test":"content"},N),c.a.createElement(Y,{"data-test":"remove",onClick:Ze},c.a.createElement(w.a,{prismaSize:"small",enterpriseSize:"12px"})))},L=Q,k=n(29),re=n.n(k),de=T()(re.a).withConfig({displayName:"LinkStyles__StyledLink",componentId:"w06zjv-0"})(["margin:0 3px;text-decoration:underline;color:inherit;&:not([disabled]){cursor:pointer;&:focus{"," text-decoration:underline;&:active{box-shadow:none;text-decoration:underline;}}}"],Object(E.pick)({prisma:Object(_.css)(["box-shadow:",";"],E.variables.focusShadow)}));function Ie(ae,ve){if(ae==null)return{};var N=et(ae,ve),ie,Ze;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(ae);for(Ze=0;Ze<X.length;Ze++)ie=X[Ze],!(ve.indexOf(ie)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,ie)||(N[ie]=ae[ie]))}return N}function et(ae,ve){if(ae==null)return{};var N={},ie=Object.keys(ae),Ze,X;for(X=0;X<ie.length;X++)Ze=ie[X],!(ve.indexOf(Ze)>=0)&&(N[Ze]=ae[Ze]);return N}var lt={children:b.a.node,elementRef:b.a.oneOfType([b.a.func,b.a.object]),openInNewContext:b.a.bool,to:b.a.string};function tt(ae){var ve=ae.children,N=Ie(ae,["children"]);return c.a.createElement(de,N,ve)}tt.propTypes=lt;var je=tt,Ee=T.a.p.withConfig({displayName:"TitleStyles__StyledTitle",componentId:"sc-6gbjha-0"})([""," ",""],E.mixins.reset("block"),Object(E.pick)({prisma:Object(_.css)(["font-size:14px;line-height:20px;"])}));function _e(ae,ve){if(ae==null)return{};var N=te(ae,ve),ie,Ze;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(ae);for(Ze=0;Ze<X.length;Ze++)ie=X[Ze],!(ve.indexOf(ie)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,ie)||(N[ie]=ae[ie]))}return N}function te(ae,ve){if(ae==null)return{};var N={},ie=Object.keys(ae),Ze,X;for(X=0;X<ie.length;X++)Ze=ie[X],!(ve.indexOf(Ze)>=0)&&(N[Ze]=ae[Ze]);return N}var ce={children:b.a.node};function Ae(ae){var ve=ae.children,N=_e(ae,["children"]);return c.a.createElement(Ee,N,ve)}Ae.propTypes=ce;var ke=Ae,Ce=T.a.div.withConfig({displayName:"MessageStyles__StyledContent",componentId:"eg66af-0"})(["",";",""],E.mixins.reset("inline"),Object(E.pick)({prisma:Object(_.css)(["color:",";"],E.variables.contentColorActive)})),$e=T()(D.a).withConfig({displayName:"MessageStyles__StyledRemove",componentId:"eg66af-1"})(["",";border:1px solid transparent;border-radius:",";color:",";",";cursor:pointer;position:absolute;"," padding:",";&:hover,&:focus{background:",";border:",";color:",";}&:active{",";}",""],E.mixins.reset("flex"),Object(E.pick)({prisma:"50%",enterprise:E.variables.borderRadius}),Object(E.pick)({prisma:E.variables.contentColorMuted,enterprise:{dark:E.variables.gray96,light:E.variables.gray45}}),function(ae){var ve=ae.$appearance;return ve==="banner"&&Object(E.pick)({prisma:Object(_.css)(["color:",";"],E.variables.contentColorInverted)})},Object(E.pick)({prisma:Object(_.css)(["top:1px;right:2px;"]),enterprise:Object(_.css)(["top:6px;right:8px;"])}),Object(E.pick)({prisma:"10px",enterprise:"8px"}),Object(E.pick)({prisma:E.variables.interactiveColorOverlayHover,enterprise:{dark:E.variables.gray30,light:E.variables.gray92}}),Object(E.pick)({prisma:Object(_.css)(["1px solid inherit"]),enterprise:Object(_.css)(["1px solid ",""],E.variables.gray80)}),Object(E.pick)({enterprise:{dark:E.variables.gray96,light:E.variables.linkColor},prisma:E.variables.contentColorActive}),Object(E.pick)({prisma:Object(_.css)(["background:",";"],E.variables.interactiveColorOverlayActive),enterprise:Object(_.css)(["box-shadow:",";"],E.variables.focusShadow)}),Object(E.pick)({prisma:Object(_.css)(["&:focus{box-shadow:0 0 0 3px ",";}"],E.variables.focusColor)})),Ke=T.a.span.withConfig({displayName:"MessageStyles__StyledIconWrapper",componentId:"eg66af-2"})(["position:absolute;top:",";left:0;width:",";height:calc(100% - 8px);text-align:center;color:",";"," border-top-left-radius:inherit;border-bottom-left-radius:inherit;"," ",";"],Object(E.pick)({prisma:"0px",enterprise:"7px"}),Object(E.pick)({prisma:"24px",enterprise:"25px"}),E.variables.white,Object(E.pick)({prisma:Object(_.css)(["padding-top:8px;"])}),Object(E.pickVariant)("$type",{info:Object(_.css)(["color:",";"],Object(E.pick)({prisma:E.variables.contentColorMuted,enterprise:E.variables.infoColor})),success:Object(_.css)(["color:",";"],E.variables.accentColorPositive),warning:Object(_.css)(["color:",";"],E.variables.accentColorWarning),error:Object(_.css)(["color:",";"],E.variables.accentColorNegative)}),function(ae){var ve=ae.$fillStyle;return ve&&Object(E.pick)({prisma:Object(_.css)(["background-color:",";"],Object(E.pickVariant)("$type",{info:E.variables.contentColorActive,success:E.variables.accentColorPositive,warning:E.variables.accentColorWarning,error:E.variables.accentColorNegative}))})}),Ve=T()(M.a).withConfig({displayName:"MessageStyles__StyledBox",componentId:"eg66af-3"})(["",";position:relative;border-radius:",";margin-bottom:",";padding:",";word-wrap:break-word;"," ",""],E.mixins.reset("block"),Object(E.pick)({prisma:E.variables.borderRadius,enterprise:"5px"}),E.variables.spacingSmall,Object(E.pickVariant)("$hasRemoveIcon",{true:{prisma:"10px 40px 10px 36px",enterprise:"10px 40px 10px 40px"},false:{prisma:"10px 8px 10px 36px",enterprise:"10px 10px 10px 40px"}}),function(ae){var ve=ae.$fillStyle;return ve&&Object(E.pick)({enterprise:Object(_.css)(["& > ","{left:",";}",""],Ke,E.variables.spacingXSmall,Object(E.pickVariant)("$type",{info:Object(_.css)(["",""],Object(E.pick)({light:Object(_.css)(["background-color:",";border:1px solid ",";"],E.variables.infoColorL50,E.variables.infoColor),dark:Object(_.css)(["background-color:",";"],E.mixins.colorWithAlpha(E.variables.infoColor,.5))})),success:Object(_.css)(["",""],Object(E.pick)({light:Object(_.css)(["background-color:",";border:1px solid ",";"],E.variables.successColorL50,E.variables.successColor),dark:Object(_.css)(["background-color:",";"],E.mixins.colorWithAlpha(E.variables.successColor,.5))})),warning:Object(_.css)(["",""],Object(E.pick)({light:Object(_.css)(["background-color:",";border:1px solid ",";"],E.variables.warningColorL50,E.variables.warningColor),dark:Object(_.css)(["background-color:",";"],E.mixins.colorWithAlpha(E.variables.warningColor,.5))})),error:Object(_.css)(["",""],Object(E.pick)({light:Object(_.css)(["background-color:",";border:1px solid ",";"],E.variables.errorColorL50,E.variables.errorColor),dark:Object(_.css)(["background-color:",";"],E.mixins.colorWithAlpha(E.variables.errorColor,.5))}))})),prisma:Object(_.css)(["border:1px solid transparent;background-color:",";box-shadow:",";& > ","{color:",";}"],E.variables.backgroundColorPopup,E.variables.embossShadow,Ke,E.variables.backgroundColorPopup)})},Object(E.pick)({prisma:Object(_.css)(["& ","{color:",";}"],Ee,Object(E.pickVariant)("$type",{info:E.variables.contentColorActive,warning:E.variables.accentColorWarning,error:E.variables.accentColorNegative,success:E.variables.accentColorPositive}))})),rt=n(66),it=n.n(rt),dt=n(7),bt=n(6);function Wt(){return Wt=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},Wt.apply(this,arguments)}function Ht(ae){var ve=Wt({},ae);return c.a.createElement(bt.a,Wt({viewBox:"0 0 24 24"},ve),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12ZM11.0001 7.9906V12.0001C11.0001 12.5524 11.4478 13.0001 12.0001 13.0001C12.5524 13.0001 13.0001 12.5524 13.0001 12.0001V7.9906C13.0001 7.43832 12.5524 6.9906 12.0001 6.9906C11.4478 6.9906 11.0001 7.43832 11.0001 7.9906ZM12.0001 17.0001C12.6628 17.0001 13.2001 16.4628 13.2001 15.8001C13.2001 15.1374 12.6628 14.6001 12.0001 14.6001C11.3373 14.6001 10.8001 15.1374 10.8001 15.8001C10.8001 16.4628 11.3373 17.0001 12.0001 17.0001Z",fill:"currentColor"}))}function Jt(ae){return c.a.createElement(dt.a,Wt({Enterprise:it.a,Prisma24:Ht},ae))}var Mt=n(90),oe=n.n(Mt);function Ye(){return Ye=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},Ye.apply(this,arguments)}function st(ae){var ve=Ye({},ae);return c.a.createElement(bt.a,Ye({viewBox:"0 0 24 24"},ve),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM11.0001 16.0094V11.9999C11.0001 11.4476 11.4478 10.9999 12.0001 10.9999C12.5524 10.9999 13.0001 11.4476 13.0001 11.9999V16.0094C13.0001 16.5617 12.5524 17.0094 12.0001 17.0094C11.4478 17.0094 11.0001 16.5617 11.0001 16.0094ZM12 6.9999C12.6628 6.9999 13.2 7.53716 13.2 8.1999C13.2 8.86264 12.6628 9.3999 12 9.3999C11.3373 9.3999 10.8 8.86264 10.8 8.1999C10.8 7.53716 11.3373 6.9999 12 6.9999Z",fill:"currentColor"}))}function _t(ae){return c.a.createElement(dt.a,Ye({Enterprise:oe.a,Prisma24:st},ae))}var Ct=n(67),kt=n.n(Ct);function ct(){return ct=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},ct.apply(this,arguments)}function mt(ae){var ve=ct({},ae);return c.a.createElement(bt.a,ct({viewBox:"0 0 24 24"},ve),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM16.8738 8.62627C17.2643 9.01679 17.2643 9.64996 16.8738 10.0405L11.5853 15.329C10.9996 15.9147 10.0499 15.9148 9.46414 15.3291L7.12637 12.9921C6.73579 12.6016 6.7357 11.9684 7.12616 11.5779C7.51663 11.1873 8.1498 11.1872 8.54038 11.5776L10.5246 13.5613L15.4596 8.62627C15.8501 8.23574 16.4833 8.23574 16.8738 8.62627Z",fill:"currentColor"}))}function we(ae){return c.a.createElement(dt.a,ct({Enterprise:kt.a,Prisma24:mt},ae))}var me=n(91),We=n.n(me);function Qe(){return Qe=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},Qe.apply(this,arguments)}function He(ae){var ve=Qe({},ae);return c.a.createElement(bt.a,Qe({viewBox:"0 0 24 24"},ve),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6827 2.82369C11.2341 1.72544 12.7659 1.72544 13.3173 2.82369L21.8338 19.7867C22.3412 20.7973 21.6254 22 20.5165 22H3.48349C2.37462 22 1.65878 20.7973 2.16616 19.7867L10.6827 2.82369ZM11.0002 13.6618V11.0133C11.0002 10.461 11.4479 10.0133 12.0002 10.0133C12.5525 10.0133 13.0002 10.461 13.0002 11.0133V13.6618C13.0002 14.2141 12.5525 14.6618 12.0002 14.6618C11.4479 14.6618 11.0002 14.2141 11.0002 13.6618ZM13.2002 16.9347C13.2002 17.5975 12.6629 18.1347 12.0002 18.1347C11.3374 18.1347 10.8002 17.5975 10.8002 16.9347C10.8002 16.272 11.3374 15.7347 12.0002 15.7347C12.6629 15.7347 13.2002 16.272 13.2002 16.9347Z",fill:"currentColor"}))}function fe(ae){return c.a.createElement(dt.a,Qe({Enterprise:We.a,Prisma24:He},ae))}function De(){return De=Object.assign||function(ae){for(var ve=1;ve<arguments.length;ve++){var N=arguments[ve];for(var ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&(ae[ie]=N[ie])}return ae},De.apply(this,arguments)}function ft(ae,ve){if(ae==null)return{};var N=Rt(ae,ve),ie,Ze;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(ae);for(Ze=0;Ze<X.length;Ze++)ie=X[Ze],!(ve.indexOf(ie)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ae,ie)||(N[ie]=ae[ie]))}return N}function Rt(ae,ve){if(ae==null)return{};var N={},ie=Object.keys(ae),Ze,X;for(X=0;X<ie.length;X++)Ze=ie[X],!(ve.indexOf(Ze)>=0)&&(N[Ze]=ae[Ze]);return N}var Oe={appearance:b.a.oneOf(["default","fill","banner"]),children:b.a.node,elementRef:b.a.oneOfType([b.a.func,b.a.object]),onRequestRemove:b.a.func,type:b.a.oneOf(["info","success","warning","error"])};function qe(ae){var ve=ae.appearance,N=ve===void 0?"default":ve,ie=ae.children,Ze=ae.type,X=Ze===void 0?"warning":Ze,Le=ae.onRequestRemove,ze=ft(ae,["appearance","children","type","onRequestRemove"]),Je=Object(l.useCallback)(function(Lt){Le==null||Le(Lt)},[Le]);if(N==="banner")return c.a.createElement(L,De({type:X,onRequestRemove:Je},ze),ie);var ot={info:_t,success:we,warning:fe,error:Jt}[X],gt=N==="fill",yt=N==="default"||N==="fill";return c.a.createElement(Ve,De({$appearance:N,$fillStyle:gt,$hasRemoveIcon:!!Le,$type:X,"data-test-type":X,"data-test":"message"},ze),yt&&c.a.createElement(Ke,{$fillStyle:gt,$type:X},c.a.createElement(ot,{prismaSize:"small",enterpriseWidth:"24px",enterpriseHeight:"24px"})),c.a.createElement(Ce,{"data-test":"content",$fillStyle:gt},ie),Le&&c.a.createElement($e,{"data-test":"remove",onClick:Je,$appearance:N},c.a.createElement(w.a,{prismaSize:"small",enterpriseHeight:"12px",enterpriseWidth:"12px"})))}qe.propTypes=Oe,qe.Title=ke,qe.Link=je;var H=qe},12:function(s,i){s.exports=Pf()},2:function(s,i){s.exports=Wr()},22:function(s,i,n){"use strict";n.d(i,"a",function(){return A});var l=n(2),c=n.n(l),a=n(26),b=n.n(a),w=n(7),_=n(6);function T(){return T=Object.assign||function(D){for(var E=1;E<arguments.length;E++){var $=arguments[E];for(var Y in $)Object.prototype.hasOwnProperty.call($,Y)&&(D[Y]=$[Y])}return D},T.apply(this,arguments)}function x(D){var E=T({},D);return c.a.createElement(_.a,T({viewBox:"0 0 24 24"},E),c.a.createElement("path",{d:"M6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.2929 17.2929C4.90238 17.6834 4.90238 18.3166 5.2929 18.7071C5.68342 19.0976 6.31659 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289Z",fill:"currentColor"}))}function M(D){var E=T({},D);return c.a.createElement(_.a,T({viewBox:"0 0 16 16"},E),c.a.createElement("path",{d:"M12.2024 2.69009C12.5092 2.38325 13.0067 2.38325 13.3136 2.69009C13.6204 2.99693 13.6204 3.49442 13.3136 3.80126L9.11721 7.99762L13.3114 12.1918C13.6206 12.501 13.6206 13.0023 13.3114 13.3114C13.0023 13.6206 12.501 13.6206 12.1918 13.3114L7.99762 9.11721L3.885 13.2298C3.57816 13.5367 3.08067 13.5367 2.77383 13.2298C2.46699 12.923 2.46699 12.4255 2.77383 12.1187L6.88645 8.00604L2.69183 3.81142C2.38267 3.50226 2.38267 3.001 2.69183 2.69183C3.001 2.38267 3.50226 2.38267 3.81142 2.69183L8.00604 6.88646L12.2024 2.69009Z",fill:"currentColor"}))}function A(D){return c.a.createElement(w.a,T({Enterprise:b.a,Prisma16:M,Prisma24:x},D))}},26:function(s,i){s.exports=Ny()},29:function(s,i){s.exports=Hy()},3:function(s,i){s.exports=Qn()},6:function(s,i,n){"use strict";n.d(i,"a",function(){return T});var l=n(2),c=n.n(l),a=n(3),b=n.n(a);function w(){return w=Object.assign||function(x){for(var M=1;M<arguments.length;M++){var A=arguments[M];for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(x[D]=A[D])}return x},w.apply(this,arguments)}var _=b.a.svg.withConfig({displayName:"SVG__Styled",componentId:"sc-1bz0ryh-0"})(["flex:0 0 auto;"]);function T(x){return c.a.createElement(_,w({xmlns:"http://www.w3.org/2000/svg"},x))}},66:function(s,i){s.exports=Ky()},67:function(s,i){s.exports=Yy()},7:function(s,i,n){"use strict";n.d(i,"a",function(){return K});var l=n(2),c=n.n(l),a=n(1),b=n.n(a),w=n(0),_=n.n(w);function T(F,Q){var L=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);Q&&(k=k.filter(function(re){return Object.getOwnPropertyDescriptor(F,re).enumerable})),L.push.apply(L,k)}return L}function x(F){for(var Q=1;Q<arguments.length;Q++){var L=arguments[Q]!=null?arguments[Q]:{};Q%2?T(Object(L),!0).forEach(function(k){M(F,k,L[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(L)):T(Object(L)).forEach(function(k){Object.defineProperty(F,k,Object.getOwnPropertyDescriptor(L,k))})}return F}function M(F,Q,L){return Q in F?Object.defineProperty(F,Q,{value:L,enumerable:!0,configurable:!0,writable:!0}):F[Q]=L,F}function A(){return A=Object.assign||function(F){for(var Q=1;Q<arguments.length;Q++){var L=arguments[Q];for(var k in L)Object.prototype.hasOwnProperty.call(L,k)&&(F[k]=L[k])}return F},A.apply(this,arguments)}function D(F,Q){if(F==null)return{};var L=E(F,Q),k,re;if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(F);for(re=0;re<de.length;re++)k=de[re],!(Q.indexOf(k)>=0)&&(!Object.prototype.propertyIsEnumerable.call(F,k)||(L[k]=F[k]))}return L}function E(F,Q){if(F==null)return{};var L={},k=Object.keys(F),re,de;for(de=0;de<k.length;de++)re=k[de],!(Q.indexOf(re)>=0)&&(L[re]=F[re]);return L}var $={display:"inline-block",flex:"0 0 auto",overflow:"visible",verticalAlign:"middle"},Y={display:"block",flex:"0 0 auto",margin:"0 auto",overflow:"visible"},G={Enterprise:b.a.func,enterpriseSize:b.a.oneOfType([b.a.number,b.a.string]),enterpriseWidth:b.a.oneOfType([b.a.number,b.a.string]),enterpriseHeight:b.a.oneOfType([b.a.number,b.a.string]),Prisma24:b.a.func.isRequired,Prisma20:b.a.func,Prisma16:b.a.func,prismaSize:b.a.oneOf(["medium","small"]),inline:b.a.bool,screenReaderText:b.a.string},le={inline:!0,prismaSize:"medium"};function K(F){var Q=F.Enterprise,L=F.Prisma24,k=F.Prisma20,re=F.Prisma16,de=F.prismaSize,Ie=F.inline,et=F.enterpriseSize,lt=F.enterpriseWidth,tt=F.enterpriseHeight,je=F.screenReaderText,Ee=D(F,["Enterprise","Prisma24","Prisma20","Prisma16","prismaSize","inline","enterpriseSize","enterpriseWidth","enterpriseHeight","screenReaderText"]),_e=Object(w.useSplunkTheme)(),te=_e.family,ce=_e.density;if(te==="enterprise")return c.a.createElement(Q,A({size:et,width:lt,height:tt,screenReaderText:je||null,hideDefaultTooltip:!0,inline:Ie},Ee));var Ae=x({"aria-label":je,style:Ie?$:Y},Ee);if(de==="small"){var ke=re||L;return c.a.createElement(ke,A({width:"16",height:"16"},Ae))}if(ce==="compact"){var Ce=k||L;return c.a.createElement(Ce,A({width:"20",height:"20"},Ae))}return c.a.createElement(L,A({width:"24",height:"24"},Ae))}K.propTypes=G,K.defaultProps=le},8:function(s,i){s.exports=Jy()},90:function(s,i){s.exports=Qy()},91:function(s,i){s.exports=t1()}})});var Rc=Xt((vO,i1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */i1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=49)}({0:function(s,i){s.exports=Un()},1:function(s,i){s.exports=Wr()},12:function(s,i){s.exports=T_()},13:function(s,i){s.exports=Qn()},15:function(s,i,n){"use strict";n.r(i),n.d(i,"toPx",function(){return a}),n.d(i,"toDimension",function(){return b}),n.d(i,"arrayToCSSProp",function(){return w}),n.d(i,"toMargin",function(){return _}),n.d(i,"toPadding",function(){return T});var l=n(16),c=n.n(l),a=function x(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return c()(M)?"".concat(M,"px"):M||x(A)},b=function(M){var A=M.width,D=M.height,E="";return A&&(E="width: ".concat(a(A),";")),D&&(E="".concat(E).concat(A?`
`:"","height: ").concat(a(D),";")),E},w=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0];return Array.isArray(A)?`
            `.concat(M,": ").concat(a(A[0])," ").concat(a(A[1])," ").concat(a(A[2])," ").concat(a(A[3]),`;
        `):"".concat(M,": ").concat(a(A),";")},_=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0];return w("margin",M)},T=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0];return w("padding",M)}},16:function(s,i){s.exports=ig()},31:function(s,i){s.exports=n1()},49:function(s,i,n){"use strict";n.r(i);var l=n(12),c=n.n(l),a=n(1),b=n.n(a),w=n(0),_=n.n(w),T=n(13),x=n.n(T),M=n(31),A=n.n(M),D=n(15),E,$=x.a.div(E||(E=c()([`
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    `,`;
`])),function(G){return Object(D.toDimension)({width:G.width,height:G.height})}),Y=function(le){var K=le.width,F=le.height,Q=le.level,L=le.message;return b.a.createElement($,{width:K,height:F,"data-test":"visualization-message"},b.a.createElement(A.a,{type:Q,style:{maxWidth:"100%"}},L))};Y.propTypes={width:_.a.oneOfType([_.a.string,_.a.number]),height:_.a.oneOfType([_.a.string,_.a.number]),message:_.a.string,level:_.a.oneOf(["info","warning","error"])},Y.defaultProps={level:"info",message:""},i.default=b.a.memo(Y)}})});var a1=Xt((Of,Mf)=>{var RS={filename:"/builds/devplat/dashboard-enterprise/node_modules/maplibre-gl/dist/maplibre-gl.js",dirname:"/builds/devplat/dashboard-enterprise/node_modules/maplibre-gl/dist",relativefilename:"../../../../node_modules/maplibre-gl/dist/maplibre-gl.js",relativedirname:"../../../../node_modules/maplibre-gl/dist",line:0};(function(s,i){typeof Of=="object"&&typeof Mf!="undefined"?Mf.exports=i():typeof define=="function"&&define.amd?define(i):(s=typeof globalThis!="undefined"?globalThis:s||self,s.maplibregl=i())})(Of,function(){"use strict";var s,i,n;function l(a,b){if(!s)s=b;else if(!i)i=b;else{var w="var sharedChunk = {}; ("+s+")(sharedChunk); ("+i+")(sharedChunk);",_={};s(_),n=b(_),typeof window!="undefined"&&(n.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}RS.line=31,l(["exports"],function(a){"use strict";var b=w;function w(r,e,o,h){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(h-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=o,this.p2y=h}function _(r,e,o,h){let p=new b(r,e,o,h);return function(g){return p.solve(g)}}w.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(e===void 0&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var o=r,h=0;h<8;h++){var p=this.sampleCurveX(o)-r;if(Math.abs(p)<e)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=p/g}var v=0,S=1;for(o=r,h=0;h<20&&(p=this.sampleCurveX(o),!(Math.abs(p-r)<e));h++)r>p?v=o:S=o,o=.5*(S-v)+v;return o},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};let T=_(.25,.1,.25,1);function x(r,e,o){return Math.min(o,Math.max(e,r))}function M(r,e,o){let h=o-e,p=((r-e)%h+h)%h+e;return p===e?o:p}function A(r,...e){for(let o of e)for(let h in o)r[h]=o[h];return r}let D=1;function E(r,e){r.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function $(r,e,o){let h={};for(let p in r)h[p]=e.call(o||this,r[p],p,r);return h}function Y(r,e,o){let h={};for(let p in r)e.call(o||this,r[p],p,r)&&(h[p]=r[p]);return h}function G(r){return Array.isArray(r)?r.map(G):typeof r=="object"&&r?$(r,G):r}let le={};function K(r){le[r]||(typeof console!="undefined"&&console.warn(r),le[r]=!0)}function F(r,e,o){return(o.y-r.y)*(e.x-r.x)>(e.y-r.y)*(o.x-r.x)}function Q(r){let e=0;for(let o,h,p=0,g=r.length,v=g-1;p<g;v=p++)o=r[p],h=r[v],e+=(h.x-o.x)*(o.y+h.y);return e}function L(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function k(r){let e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,p,g)=>{let v=p||g;return e[h]=!v||v.toLowerCase(),""}),e["max-age"]){let o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let re,de,Ie=null;function et(r){if(Ie==null){let e=r.navigator?r.navigator.userAgent:null;Ie=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ie}function lt(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}let tt={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){let e=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(r,e=0){let o=window.document.createElement("canvas"),h=o.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return o.width=r.width,o.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-e,-e,r.width+2*e,r.height+2*e)},resolveURL:r=>(re||(re=document.createElement("a")),re.href=r,re.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(de==null&&(de=matchMedia("(prefers-reduced-motion: reduce)")),de.matches)}};var je=Ee;function Ee(r,e){this.x=r,this.y=e}Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,o=r.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),o=Math.sin(r),h=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=h,this},_rotateAround:function(r,e){var o=Math.cos(r),h=Math.sin(r),p=e.y+h*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-h*(this.y-e.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ee.convert=function(r){return r instanceof Ee?r:Array.isArray(r)?new Ee(r[0],r[1]):r};let _e={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},te="mapbox-tiles",ce,Ae,ke=500,Ce=50;function $e(){typeof caches=="undefined"||ce||(ce=caches.open(te))}let Ke=1/0,Ve={supported:!1,testSupport:function(r){!dt&&it&&(bt?Wt(r):rt=r)}},rt,it,dt=!1,bt=!1;function Wt(r){let e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,it),r.isContextLost())return;Ve.supported=!0}catch(o){}r.deleteTexture(e),dt=!0}typeof document!="undefined"&&(it=document.createElement("img"),it.onload=function(){rt&&Wt(rt),rt=null,bt=!0},it.onerror=function(){dt=!0,rt=null},it.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");let Ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ht);class Jt extends Error{constructor(e,o,h,p){super(`AJAXError: ${o} (${e}): ${h}`),this.status=e,this.statusText=o,this.url=h,this.body=p}}let Mt=L()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function oe(r,e){let o=new AbortController,h=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Mt(),signal:o.signal}),p=!1,g=!1;return r.type==="json"&&h.headers.set("Accept","application/json"),((v,S,P)=>{if(g)return;let z=Date.now();fetch(h).then(W=>W.ok?((q,se,ye)=>{(r.type==="arrayBuffer"?q.arrayBuffer():r.type==="json"?q.json():q.text()).then(be=>{g||(se&&ye&&function(Ge,Ue,pt){if($e(),!ce)return;let Tt={status:Ue.status,statusText:Ue.statusText,headers:new Headers};Ue.headers.forEach((wt,Bt)=>Tt.headers.set(Bt,wt));let ht=k(Ue.headers.get("Cache-Control")||"");ht["no-store"]||(ht["max-age"]&&Tt.headers.set("Expires",new Date(pt+1e3*ht["max-age"]).toUTCString()),new Date(Tt.headers.get("Expires")).getTime()-pt<42e4||function(wt,Bt){if(Ae===void 0)try{new Response(new ReadableStream),Ae=!0}catch(Ft){Ae=!1}Ae?Bt(wt.body):wt.blob().then(Bt)}(Ue,wt=>{let Bt=new Response(wt,Tt);$e(),ce&&ce.then(Ft=>Ft.put(function(ar){let cr=ar.indexOf("?");return cr<0?ar:ar.slice(0,cr)}(Ge.url),Bt)).catch(Ft=>K(Ft.message))}))}(h,se,ye),p=!0,e(null,be,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch(be=>{g||e(new Error(be.message))})})(W,null,z):W.blob().then(q=>e(new Jt(W.status,W.statusText,r.url,q)))).catch(W=>{W.code!==20&&e(new Error(W.message))})})(),{cancel:()=>{g=!0,p||o.abort()}}}let Ye=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e);if(!L()){let h=r.url.substring(0,r.url.indexOf("://"));return(_e.REGISTERED_PROTOCOLS[h]||oe)(r,e)}}if(!(/^file:/.test(o=r.url)||/^file:/.test(Mt())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return oe(r,e);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var o;return function(h,p){let g=new XMLHttpRequest;g.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(let v in h.headers)g.setRequestHeader(v,h.headers[v]);return h.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=h.credentials==="include",g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let v=g.response;if(h.type==="json")try{v=JSON.parse(g.response)}catch(S){return p(S)}p(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{let v=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});p(new Jt(g.status,g.statusText,h.url,v))}},g.send(h.body),{cancel:()=>g.abort()}}(r,e)},st=function(r,e){return Ye(A(r,{type:"arrayBuffer"}),e)};function _t(r){let e=window.document.createElement("a");return e.href=r,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}let Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",kt,ct;kt=[],ct=0;let mt=function(r,e){if(Ve.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),ct>=_e.MAX_PARALLEL_IMAGE_REQUESTS){let g={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return kt.push(g),g}ct++;let o=!1,h=()=>{if(!o)for(o=!0,ct--;kt.length&&ct<_e.MAX_PARALLEL_IMAGE_REQUESTS;){let g=kt.shift(),{requestParameters:v,callback:S,cancelled:P}=g;P||(g.cancel=mt(v,S).cancel)}},p=st(r,(g,v,S,P)=>{h(),g?e(g):v&&function(z,W){typeof createImageBitmap=="function"?function(q,se){let ye=new Blob([new Uint8Array(q)],{type:"image/png"});createImageBitmap(ye).then(be=>{se(null,be)}).catch(be=>{se(new Error(`Could not load image because of ${be.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(z,W):function(q,se){let ye=new Image;ye.onload=()=>{se(null,ye),URL.revokeObjectURL(ye.src),ye.onload=null,window.requestAnimationFrame(()=>{ye.src=Ct})},ye.onerror=()=>se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let be=new Blob([new Uint8Array(q)],{type:"image/png"});ye.src=q.byteLength?URL.createObjectURL(be):Ct}(z,W)}(v,(z,W)=>{z!=null?e(z):W!=null&&e(null,W,{cacheControl:S,expires:P})})});return{cancel:()=>{p.cancel(),h()}}};function we(r,e,o){o[r]&&o[r].indexOf(e)!==-1||(o[r]=o[r]||[],o[r].push(e))}function me(r,e,o){if(o&&o[r]){let h=o[r].indexOf(e);h!==-1&&o[r].splice(h,1)}}class We{constructor(e,o={}){A(this,o),this.type=e}}class Qe extends We{constructor(e,o={}){super("error",A({error:e},o))}}class He{on(e,o){return this._listeners=this._listeners||{},we(e,o,this._listeners),this}off(e,o){return me(e,o,this._listeners),me(e,o,this._oneTimeListeners),this}once(e,o){return this._oneTimeListeners=this._oneTimeListeners||{},we(e,o,this._oneTimeListeners),this}fire(e,o){typeof e=="string"&&(e=new We(e,o||{}));let h=e.type;if(this.listens(h)){e.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let S of p)S.call(this,e);let g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let S of g)me(h,S,this._oneTimeListeners),S.call(this,e);let v=this._eventedParent;v&&(A(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(e))}else e instanceof Qe&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var fe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class De{constructor(e,o,h,p){this.message=(e?`${e}: `:"")+h,p&&(this.identifier=p),o!=null&&o.__fileloc.line__&&(this.line=o.__fileloc.line__)}}function ft(r){let e=r.value;return e?[new De(r.key,e,"constants have been deprecated as of v8")]:[]}function Rt(r,...e){for(let o of e)for(let h in o)r[h]=o[h];return r}function Oe(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function qe(r){if(Array.isArray(r))return r.map(qe);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let e={};for(let o in r)e[o]=qe(r[o]);return e}return Oe(r)}class H extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class ae{constructor(e,o=[]){this.parent=e,this.bindings={};for(let[h,p]of o)this.bindings[h]=p}concat(e){return new ae(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let ve={kind:"null"},N={kind:"number"},ie={kind:"string"},Ze={kind:"boolean"},X={kind:"color"},Le={kind:"object"},ze={kind:"value"},Je={kind:"collator"},ot={kind:"formatted"},gt={kind:"padding"},yt={kind:"resolvedImage"};function Lt(r,e){return{kind:"array",itemType:r,N:e}}function Vt(r){if(r.kind==="array"){let e=Vt(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}let zt=[ve,N,ie,Ze,X,ot,Le,Lt(ze),gt,yt];function Se(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Se(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(let o of zt)if(!Se(o,e))return null}}return`Expected ${Vt(r)} but found ${Vt(e)} instead.`}function Xe(r,e){return e.some(o=>o.kind===r.kind)}function at(r,e){return e.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}var Et,pr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function pe(r){return(r=Math.round(r))<0?0:r>255?255:r}function R(r){return pe(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function Z(r){return(e=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:e>1?1:e;var e}function he(r,e,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?r+(e-r)*o*6:2*o<1?e:3*o<2?r+(e-r)*(2/3-o)*6:r}try{Et={}.parseCSSColor=function(r){var e,o=r.replace(/ /g,"").toLowerCase();if(o in pr)return pr[o].slice();if(o[0]==="#")return o.length===4?(e=parseInt(o.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:o.length===7&&(e=parseInt(o.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var h=o.indexOf("("),p=o.indexOf(")");if(h!==-1&&p+1===o.length){var g=o.substr(0,h),v=o.substr(h+1,p-(h+1)).split(","),S=1;switch(g){case"rgba":if(v.length!==4)return null;S=Z(v.pop());case"rgb":return v.length!==3?null:[R(v[0]),R(v[1]),R(v[2]),S];case"hsla":if(v.length!==4)return null;S=Z(v.pop());case"hsl":if(v.length!==3)return null;var P=(parseFloat(v[0])%360+360)%360/360,z=Z(v[1]),W=Z(v[2]),q=W<=.5?W*(z+1):W+z-W*z,se=2*W-q;return[pe(255*he(se,q,P+1/3)),pe(255*he(se,q,P)),pe(255*he(se,q,P-1/3)),S];default:return null}}return null}}catch(r){}class xe{constructor(e,o,h,p=1){this.r=e,this.g=o,this.b=h,this.a=p}static parse(e){if(!e)return;if(e instanceof xe)return e;if(typeof e!="string")return;let o=Et(e);return o?new xe(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){let[e,o,h,p]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(h)},${p})`}toArray(){let{r:e,g:o,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*e/p,255*o/p,255*h/p,p]}}xe.black=new xe(0,0,0,1),xe.white=new xe(1,1,1,1),xe.transparent=new xe(0,0,0,0),xe.red=new xe(1,0,0,1);class Fe{constructor(e,o,h){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class B{constructor(e,o,h,p,g){this.text=e,this.image=o,this.scale=h,this.fontStack=p,this.textColor=g}}class V{constructor(e){this.sections=e}static fromString(e){return new V([new B(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof V?e:V.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class U{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof U)return e;if(typeof e=="number")return new U([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(let o of e)if(typeof o!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new U(e)}}toString(){return JSON.stringify(this.values)}}class ee{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ee({name:e,available:!1}):null}}function ue(r,e,o,h){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[r,e,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[r,e,o,h]:[r,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Te(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof xe||r instanceof Fe||r instanceof V||r instanceof U||r instanceof ee)return!0;if(Array.isArray(r)){for(let e of r)if(!Te(e))return!1;return!0}if(typeof r=="object"){for(let e in r)if(!Te(r[e]))return!1;return!0}return!1}function Ne(r){if(r===null)return ve;if(typeof r=="string")return ie;if(typeof r=="boolean")return Ze;if(typeof r=="number")return N;if(r instanceof xe)return X;if(r instanceof Fe)return Je;if(r instanceof V)return ot;if(r instanceof U)return gt;if(r instanceof ee)return yt;if(Array.isArray(r)){let e=r.length,o;for(let h of r){let p=Ne(h);if(o){if(o===p)continue;o=ze;break}o=p}return Lt(o||ze,e)}return Le}function Pt(r){let e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof xe||r instanceof V||r instanceof U||r instanceof ee?r.toString():JSON.stringify(r)}class At{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Te(e[1]))return o.error("invalid value");let h=e[1],p=Ne(h),g=o.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new At(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class jt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}let $t={string:ie,number:N,boolean:Ze,object:Le};class Zt{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let h,p=1,g=e[0];if(g==="array"){let S,P;if(e.length>2){let z=e[1];if(typeof z!="string"||!(z in $t)||z==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);S=$t[z],p++}else S=ze;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);P=e[2],p++}h=Lt(S,P)}else{if(!$t[g])throw new Error(`Types doesn't contain name = ${g}`);h=$t[g]}let v=[];for(;p<e.length;p++){let S=o.parse(e[p],p,ze);if(!S)return null;v.push(S)}return new Zt(h,v)}evaluate(e){for(let o=0;o<this.args.length;o++){let h=this.args[o].evaluate(e);if(!Se(this.type,Ne(h)))return h;if(o===this.args.length-1)throw new jt(`Expected value to be of type ${Vt(this.type)}, but found ${Vt(Ne(h))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let dr={"to-boolean":Ze,"to-color":X,"to-number":N,"to-string":ie};class lr{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let h=e[0];if(!dr[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&e.length!==2)return o.error("Expected one argument.");let p=dr[h],g=[];for(let v=1;v<e.length;v++){let S=o.parse(e[v],v,ze);if(!S)return null;g.push(S)}return new lr(p,g)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let o,h;for(let p of this.args){if(o=p.evaluate(e),h=null,o instanceof xe)return o;if(typeof o=="string"){let g=e.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ue(o[0],o[1],o[2],o[3]),!h))return new xe(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new jt(h||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="padding"){let o;for(let h of this.args){o=h.evaluate(e);let p=U.parse(o);if(p)return p}throw new jt(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="number"){let o=null;for(let h of this.args){if(o=h.evaluate(e),o===null)return 0;let p=Number(o);if(!isNaN(p))return p}throw new jt(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?V.fromString(Pt(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ee.fromString(Pt(this.args[0].evaluate(e))):Pt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let yr=["Unknown","Point","LineString","Polygon"];class xr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=xe.parse(e)),o}}class Tr{constructor(e,o,h,p){this.name=e,this.type=o,this._evaluate=h,this.args=p}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,o){let h=e[0],p=Tr.definitions[h];if(!p)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=v.filter(([z])=>!Array.isArray(z)||z.length===e.length-1),P=null;for(let[z,W]of S){P=new Rr(o.registry,o.path,null,o.scope);let q=[],se=!1;for(let ye=1;ye<e.length;ye++){let be=e[ye],Ge=Array.isArray(z)?z[ye-1]:z.type,Ue=P.parse(be,1+q.length,Ge);if(!Ue){se=!0;break}q.push(Ue)}if(!se)if(Array.isArray(z)&&z.length!==q.length)P.error(`Expected ${z.length} arguments, but found ${q.length} instead.`);else{for(let ye=0;ye<q.length;ye++){let be=Array.isArray(z)?z[ye]:z.type,Ge=q[ye];P.concat(ye+1).checkSubtype(be,Ge.type)}if(P.errors.length===0)return new Tr(h,g,W,q)}}if(S.length===1)o.errors.push(...P.errors);else{let z=(S.length?S:v).map(([q])=>{return se=q,Array.isArray(se)?`(${se.map(Vt).join(", ")})`:`(${Vt(se.type)}...)`;var se}).join(" | "),W=[];for(let q=1;q<e.length;q++){let se=o.parse(e[q],1+W.length);if(!se)return null;W.push(Vt(se.type))}o.error(`Expected arguments of type ${z}, but found (${W.join(", ")}) instead.`)}return null}static register(e,o){Tr.definitions=o;for(let h in o)e[h]=Tr}}class Zr{constructor(e,o,h){this.type=Je,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");let h=e[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");let p=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ze);if(!p)return null;let g=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ze);if(!g)return null;let v=null;return h.locale&&(v=o.parse(h.locale,1,ie),!v)?null:new Zr(p,g,v)}evaluate(e){return new Fe(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}let Ar=8192;function cn(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function In(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Ai(r,e){let o=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,p=Math.pow(2,e.z);return[Math.round(o*p*Ar),Math.round(h*p*Ar)]}function Lr(r,e,o){let h=r[0]-e[0],p=r[1]-e[1],g=r[0]-o[0],v=r[1]-o[1];return h*v-g*p==0&&h*g<=0&&p*v<=0}function Vi(r,e){let o=!1;for(let v=0,S=e.length;v<S;v++){let P=e[v];for(let z=0,W=P.length;z<W-1;z++){if(Lr(r,P[z],P[z+1]))return!1;(p=P[z])[1]>(h=r)[1]!=(g=P[z+1])[1]>h[1]&&h[0]<(g[0]-p[0])*(h[1]-p[1])/(g[1]-p[1])+p[0]&&(o=!o)}}var h,p,g;return o}function io(r,e){for(let o=0;o<e.length;o++)if(Vi(r,e[o]))return!0;return!1}function To(r,e,o,h){let p=h[0]-o[0],g=h[1]-o[1],v=(r[0]-o[0])*g-p*(r[1]-o[1]),S=(e[0]-o[0])*g-p*(e[1]-o[1]);return v>0&&S<0||v<0&&S>0}function vi(r,e,o){for(let z of o)for(let W=0;W<z.length-1;++W)if((S=[(v=z[W+1])[0]-(g=z[W])[0],v[1]-g[1]])[0]*(P=[(p=e)[0]-(h=r)[0],p[1]-h[1]])[1]-S[1]*P[0]!=0&&To(h,p,g,v)&&To(g,v,h,p))return!0;var h,p,g,v,S,P;return!1}function Bi(r,e){for(let o=0;o<r.length;++o)if(!Vi(r[o],e))return!1;for(let o=0;o<r.length-1;++o)if(vi(r[o],r[o+1],e))return!1;return!0}function Ni(r,e){for(let o=0;o<e.length;o++)if(Bi(r,e[o]))return!0;return!1}function Ui(r,e,o){let h=[];for(let p=0;p<r.length;p++){let g=[];for(let v=0;v<r[p].length;v++){let S=Ai(r[p][v],o);cn(e,S),g.push(S)}h.push(g)}return h}function oo(r,e,o){let h=[];for(let p=0;p<r.length;p++){let g=Ui(r[p],e,o);h.push(g)}return h}function Eo(r,e,o,h){if(r[0]<o[0]||r[0]>o[2]){let p=.5*h,g=r[0]-o[0]>p?-h:o[0]-r[0]>p?h:0;g===0&&(g=r[0]-o[2]>p?-h:o[2]-r[0]>p?h:0),r[0]+=g}cn(e,r)}function Po(r,e,o,h){let p=Math.pow(2,h.z)*Ar,g=[h.x*Ar,h.y*Ar],v=[];for(let S of r)for(let P of S){let z=[P.x+g[0],P.y+g[1]];Eo(z,e,o,p),v.push(z)}return v}function Aa(r,e,o,h){let p=Math.pow(2,h.z)*Ar,g=[h.x*Ar,h.y*Ar],v=[];for(let P of r){let z=[];for(let W of P){let q=[W.x+g[0],W.y+g[1]];cn(e,q),z.push(q)}v.push(z)}if(e[2]-e[0]<=p/2){(S=e)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(let P of v)for(let z of P)Eo(z,e,o,p)}var S;return v}class ur{constructor(e,o){this.type=Ze,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Te(e[1])){let h=e[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){let g=h.features[p].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ur(h,h.features[p].geometry)}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ur(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ur(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(h.type==="Polygon"){let S=Ui(h.coordinates,g,v),P=Po(o.geometry(),p,g,v);if(!In(p,g))return!1;for(let z of P)if(!Vi(z,S))return!1}if(h.type==="MultiPolygon"){let S=oo(h.coordinates,g,v),P=Po(o.geometry(),p,g,v);if(!In(p,g))return!1;for(let z of P)if(!io(z,S))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(h.type==="Polygon"){let S=Ui(h.coordinates,g,v),P=Aa(o.geometry(),p,g,v);if(!In(p,g))return!1;for(let z of P)if(!Bi(z,S))return!1}if(h.type==="MultiPolygon"){let S=oo(h.coordinates,g,v),P=Aa(o.geometry(),p,g,v);if(!In(p,g))return!1;for(let z of P)if(!Ni(z,S))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Sr(r){if(r instanceof Tr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ur)return!1;let e=!0;return r.eachChild(o=>{e&&!Sr(o)&&(e=!1)}),e}function Or(r){if(r instanceof Tr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(o=>{e&&!Or(o)&&(e=!1)}),e}function Kt(r,e){if(r instanceof Tr&&e.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(h=>{o&&!Kt(h,e)&&(o=!1)}),o}class pn{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");let h=e[1];return o.scope.has(h)?new pn(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Rr{constructor(e,o=[],h,p=new ae,g=[]){this.registry=e,this.path=o,this.key=o.map(v=>`[${v}]`).join(""),this.scope=p,this.errors=g,this.expectedType=h}parse(e,o,h,p,g={}){return o?this.concat(o,h,p)._parse(e,g):this._parse(e,g)}_parse(e,o){function h(p,g,v){return v==="assert"?new Zt(g,[p]):v==="coerce"?new lr(g,[p]):p}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let p=e[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[p];if(g){let v=g.parse(e,this);if(!v)return null;if(this.expectedType){let S=this.expectedType,P=v.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else v=h(v,S,o.typeAnnotation||"coerce");else v=h(v,S,o.typeAnnotation||"coerce");else v=h(v,S,o.typeAnnotation||"assert")}if(!(v instanceof At)&&v.type.kind!=="resolvedImage"&&Sn(v)){let S=new xr;try{v=new At(v.type,v.evaluate(S))}catch(P){return this.error(P.message),null}}return v}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,h){let p=typeof e=="number"?this.path.concat(e):this.path,g=h?this.scope.concat(h):this.scope;return new Rr(this.registry,p,o||null,g,this.errors)}error(e,...o){let h=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new H(h,e))}checkSubtype(e,o){let h=Se(e,o);return h&&this.error(h),h}}function Sn(r){if(r instanceof pn)return Sn(r.boundExpression);if(r instanceof Tr&&r.name==="error"||r instanceof Zr||r instanceof ur)return!1;let e=r instanceof lr||r instanceof Zt,o=!0;return r.eachChild(h=>{o=e?o&&Sn(h):o&&h instanceof At}),!!o&&Sr(r)&&Kt(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vn(r,e){let o=r.length-1,h,p,g=0,v=o,S=0;for(;g<=v;)if(S=Math.floor((g+v)/2),h=r[S],p=r[S+1],h<=e){if(S===o||e<p)return S;g=S+1}else{if(!(h>e))throw new jt("Input is not a number.");v=S-1}return 0}class Wn{constructor(e,o,h){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(let[p,g]of h)this.labels.push(p),this.outputs.push(g)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");let h=o.parse(e[1],1,N);if(!h)return null;let p=[],g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let v=1;v<e.length;v+=2){let S=v===1?-1/0:e[v],P=e[v+1],z=v,W=v+1;if(typeof S!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(p.length&&p[p.length-1][0]>=S)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);let q=o.parse(P,W,g);if(!q)return null;g=g||q.type,p.push([S,q])}return new Wn(g,h,p)}evaluate(e){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(e);let p=this.input.evaluate(e);if(p<=o[0])return h[0].evaluate(e);let g=o.length;return p>=o[g-1]?h[g-1].evaluate(e):h[vn(o,p)].evaluate(e)}eachChild(e){e(this.input);for(let o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Yr(r,e,o){return r*(1-o)+e*o}var Jo=Object.freeze({__proto__:null,number:Yr,color:function(r,e,o){return new xe(Yr(r.r,e.r,o),Yr(r.g,e.g,o),Yr(r.b,e.b,o),Yr(r.a,e.a,o))},array:function(r,e,o){return r.map((h,p)=>Yr(h,e[p],o))},padding:function(r,e,o){let h=r.values,p=e.values;return new U([Yr(h[0],p[0],o),Yr(h[1],p[1],o),Yr(h[2],p[2],o),Yr(h[3],p[3],o)])}});let Vl=.95047,Bl=1.08883,Ms=4/29,Ia=6/29,Nl=3*Ia*Ia,mh=Math.PI/180,gh=180/Math.PI;function Ds(r){return r>.008856451679035631?Math.pow(r,1/3):r/Nl+Ms}function As(r){return r>Ia?r*r*r:Nl*(r-Ms)}function Is(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function zs(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function jr(r){let e=zs(r.r),o=zs(r.g),h=zs(r.b),p=Ds((.4124564*e+.3575761*o+.1804375*h)/Vl),g=Ds((.2126729*e+.7151522*o+.072175*h)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-Ds((.0193339*e+.119192*o+.9503041*h)/Bl)),alpha:r.a}}function Ul(r){let e=(r.l+16)/116,o=isNaN(r.a)?e:e+r.a/500,h=isNaN(r.b)?e:e-r.b/200;return e=1*As(e),o=Vl*As(o),h=Bl*As(h),new xe(Is(3.2404542*o-1.5371385*e-.4985314*h),Is(-.969266*o+1.8760108*e+.041556*h),Is(.0556434*o-.2040259*e+1.0572252*h),r.alpha)}function yh(r,e,o){let h=e-r;return r+o*(h>180||h<-180?h-360*Math.round(h/360):h)}let qo={forward:jr,reverse:Ul,interpolate:function(r,e,o){return{l:Yr(r.l,e.l,o),a:Yr(r.a,e.a,o),b:Yr(r.b,e.b,o),alpha:Yr(r.alpha,e.alpha,o)}}},Qo={forward:function(r){let{l:e,a:o,b:h}=jr(r),p=Math.atan2(h,o)*gh;return{h:p<0?p+360:p,c:Math.sqrt(o*o+h*h),l:e,alpha:r.a}},reverse:function(r){let e=r.h*mh,o=r.c;return Ul({l:r.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:r.alpha})},interpolate:function(r,e,o){return{h:yh(r.h,e.h,o),c:Yr(r.c,e.c,o),l:Yr(r.l,e.l,o),alpha:Yr(r.alpha,e.alpha,o)}}};var $l=Object.freeze({__proto__:null,lab:qo,hcl:Qo});class Hn{constructor(e,o,h,p,g){this.type=e,this.operator=o,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[v,S]of g)this.labels.push(v),this.outputs.push(S)}static interpolationFactor(e,o,h,p){let g=0;if(e.name==="exponential")g=ks(o,e.base,h,p);else if(e.name==="linear")g=ks(o,1,h,p);else if(e.name==="cubic-bezier"){let v=e.controlPoints;g=new b(v[0],v[1],v[2],v[3]).solve(ks(o,1,h,p))}return g}static parse(e,o){let[h,p,g,...v]=e;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let z=p[1];if(typeof z!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:z}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let z=p.slice(1);if(z.length!==4||z.some(W=>typeof W!="number"||W<0||W>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:z}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,N),!g)return null;let S=[],P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=X:o.expectedType&&o.expectedType.kind!=="value"&&(P=o.expectedType);for(let z=0;z<v.length;z+=2){let W=v[z],q=v[z+1],se=z+3,ye=z+4;if(typeof W!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(S.length&&S[S.length-1][0]>=W)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);let be=o.parse(q,ye,P);if(!be)return null;P=P||be.type,S.push([W,be])}return P.kind==="number"||P.kind==="color"||P.kind==="padding"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Hn(P,h,p,g,S):o.error(`Type ${Vt(P)} is not interpolatable.`)}evaluate(e){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(e);let p=this.input.evaluate(e);if(p<=o[0])return h[0].evaluate(e);let g=o.length;if(p>=o[g-1])return h[g-1].evaluate(e);let v=vn(o,p),S=Hn.interpolationFactor(this.interpolation,p,o[v],o[v+1]),P=h[v].evaluate(e),z=h[v+1].evaluate(e);return this.operator==="interpolate"?Jo[this.type.kind.toLowerCase()](P,z,S):this.operator==="interpolate-hcl"?Qo.reverse(Qo.interpolate(Qo.forward(P),Qo.forward(z),S)):qo.reverse(qo.interpolate(qo.forward(P),qo.forward(z),S))}eachChild(e){e(this.input);for(let o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ks(r,e,o,h){let p=h-o,g=r-o;return p===0?0:e===1?g/p:(Math.pow(e,g)-1)/(Math.pow(e,p)-1)}class za{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let h=null,p=o.expectedType;p&&p.kind!=="value"&&(h=p);let g=[];for(let S of e.slice(1)){let P=o.parse(S,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,g.push(P)}if(!h)throw new Error("No output type");let v=p&&g.some(S=>Se(p,S.type));return new za(v?ze:h,g)}evaluate(e){let o,h=null,p=0;for(let g of this.args)if(p++,h=g.evaluate(e),h&&h instanceof ee&&!h.available&&(o||(o=h.name),h=null,p===this.args.length&&(h=o)),h!==null)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class ka{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let h=[];for(let g=1;g<e.length-1;g+=2){let v=e[g];if(typeof v!="string")return o.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);let S=o.parse(e[g+1],g+1);if(!S)return null;h.push([v,S])}let p=o.parse(e[e.length-1],e.length-1,o.expectedType,h);return p?new ka(h,p):null}outputDefined(){return this.result.outputDefined()}}class Ls{constructor(e,o,h){this.type=e,this.index=o,this.input=h}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let h=o.parse(e[1],1,N),p=o.parse(e[2],2,Lt(o.expectedType||ze));return h&&p?new Ls(p.type.itemType,h,p):null}evaluate(e){let o=this.index.evaluate(e),h=this.input.evaluate(e);if(o<0)throw new jt(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new jt(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new jt(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Rs{constructor(e,o){this.type=Ze,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let h=o.parse(e[1],1,ze),p=o.parse(e[2],2,ze);return h&&p?Xe(h.type,[Ze,ie,N,ve,ze])?new Rs(h,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(h.type)} instead`):null}evaluate(e){let o=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!at(o,["boolean","string","number","null"]))throw new jt(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(Ne(o))} instead.`);if(!at(h,["string","array"]))throw new jt(`Expected second argument to be of type array or string, but found ${Vt(Ne(h))} instead.`);return h.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class La{constructor(e,o,h){this.type=N,this.needle=e,this.haystack=o,this.fromIndex=h}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let h=o.parse(e[1],1,ze),p=o.parse(e[2],2,ze);if(!h||!p)return null;if(!Xe(h.type,[Ze,ie,N,ve,ze]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(h.type)} instead`);if(e.length===4){let g=o.parse(e[3],3,N);return g?new La(h,p,g):null}return new La(h,p)}evaluate(e){let o=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!at(o,["boolean","string","number","null"]))throw new jt(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(Ne(o))} instead.`);if(!at(h,["string","array"]))throw new jt(`Expected second argument to be of type array or string, but found ${Vt(Ne(h))} instead.`);if(this.fromIndex){let p=this.fromIndex.evaluate(e);return h.indexOf(o,p)}return h.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class js{constructor(e,o,h,p,g,v){this.inputType=e,this.type=o,this.input=h,this.cases=p,this.outputs=g,this.otherwise=v}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let h,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);let g={},v=[];for(let z=2;z<e.length-1;z+=2){let W=e[z],q=e[z+1];Array.isArray(W)||(W=[W]);let se=o.concat(z);if(W.length===0)return se.error("Expected at least one branch label.");for(let be of W){if(typeof be!="number"&&typeof be!="string")return se.error("Branch labels must be numbers or strings.");if(typeof be=="number"&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof be=="number"&&Math.floor(be)!==be)return se.error("Numeric branch labels must be integer values.");if(h){if(se.checkSubtype(h,Ne(be)))return null}else h=Ne(be);if(g[String(be)]!==void 0)return se.error("Branch labels must be unique.");g[String(be)]=v.length}let ye=o.parse(q,z,p);if(!ye)return null;p=p||ye.type,v.push(ye)}let S=o.parse(e[1],1,ze);if(!S)return null;let P=o.parse(e[e.length-1],e.length-1,p);return P?S.type.kind!=="value"&&o.concat(1).checkSubtype(h,S.type)?null:new js(h,p,S,g,v,P):null}evaluate(e){let o=this.input.evaluate(e);return(Ne(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Fs{constructor(e,o,h){this.type=e,this.branches=o,this.otherwise=h}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);let p=[];for(let v=1;v<e.length-1;v+=2){let S=o.parse(e[v],v,Ze);if(!S)return null;let P=o.parse(e[v+1],v+1,h);if(!P)return null;p.push([S,P]),h=h||P.type}let g=o.parse(e[e.length-1],e.length-1,h);if(!g)return null;if(!h)throw new Error("Can't infer output type");return new Fs(h,p,g)}evaluate(e){for(let[o,h]of this.branches)if(o.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[o,h]of this.branches)e(o),e(h);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ra{constructor(e,o,h,p){this.type=e,this.input=o,this.beginIndex=h,this.endIndex=p}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let h=o.parse(e[1],1,ze),p=o.parse(e[2],2,N);if(!h||!p)return null;if(!Xe(h.type,[Lt(ze),ie,ze]))return o.error(`Expected first argument to be of type array or string, but found ${Vt(h.type)} instead`);if(e.length===4){let g=o.parse(e[3],3,N);return g?new Ra(h.type,h,p,g):null}return new Ra(h.type,h,p)}evaluate(e){let o=this.input.evaluate(e),h=this.beginIndex.evaluate(e);if(!at(o,["string","array"]))throw new jt(`Expected first argument to be of type array or string, but found ${Vt(Ne(o))} instead.`);if(this.endIndex){let p=this.endIndex.evaluate(e);return o.slice(h,p)}return o.slice(h)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Wl(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Hl(r,e,o,h){return h.compare(e,o)===0}function Oo(r,e,o){let h=r!=="=="&&r!=="!=";return class o1{constructor(g,v,S){this.type=Ze,this.lhs=g,this.rhs=v,this.collator=S,this.hasUntypedArgument=g.type.kind==="value"||v.type.kind==="value"}static parse(g,v){if(g.length!==3&&g.length!==4)return v.error("Expected two or three arguments.");let S=g[0],P=v.parse(g[1],1,ze);if(!P)return null;if(!Wl(S,P.type))return v.concat(1).error(`"${S}" comparisons are not supported for type '${Vt(P.type)}'.`);let z=v.parse(g[2],2,ze);if(!z)return null;if(!Wl(S,z.type))return v.concat(2).error(`"${S}" comparisons are not supported for type '${Vt(z.type)}'.`);if(P.type.kind!==z.type.kind&&P.type.kind!=="value"&&z.type.kind!=="value")return v.error(`Cannot compare types '${Vt(P.type)}' and '${Vt(z.type)}'.`);h&&(P.type.kind==="value"&&z.type.kind!=="value"?P=new Zt(z.type,[P]):P.type.kind!=="value"&&z.type.kind==="value"&&(z=new Zt(P.type,[z])));let W=null;if(g.length===4){if(P.type.kind!=="string"&&z.type.kind!=="string"&&P.type.kind!=="value"&&z.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(W=v.parse(g[3],3,Je),!W)return null}return new o1(P,z,W)}evaluate(g){let v=this.lhs.evaluate(g),S=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){let P=Ne(v),z=Ne(S);if(P.kind!==z.kind||P.kind!=="string"&&P.kind!=="number")throw new jt(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${P.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let P=Ne(v),z=Ne(S);if(P.kind!=="string"||z.kind!=="string")return e(g,v,S)}return this.collator?o(g,v,S,this.collator.evaluate(g)):e(g,v,S)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let vh=Oo("==",function(r,e,o){return e===o},Hl),bh=Oo("!=",function(r,e,o){return e!==o},function(r,e,o,h){return!Hl(0,e,o,h)}),xh=Oo("<",function(r,e,o){return e<o},function(r,e,o,h){return h.compare(e,o)<0}),_h=Oo(">",function(r,e,o){return e>o},function(r,e,o,h){return h.compare(e,o)>0}),wh=Oo("<=",function(r,e,o){return e<=o},function(r,e,o,h){return h.compare(e,o)<=0}),Ch=Oo(">=",function(r,e,o){return e>=o},function(r,e,o,h){return h.compare(e,o)>=0});class Vs{constructor(e,o,h,p,g){this.type=ie,this.number=e,this.locale=o,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");let h=o.parse(e[1],1,N);if(!h)return null;let p=e[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=o.parse(p.locale,1,ie),!g))return null;let v=null;if(p.currency&&(v=o.parse(p.currency,1,ie),!v))return null;let S=null;if(p["min-fraction-digits"]&&(S=o.parse(p["min-fraction-digits"],1,N),!S))return null;let P=null;return p["max-fraction-digits"]&&(P=o.parse(p["max-fraction-digits"],1,N),!P)?null:new Vs(h,g,v,S,P)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ja{constructor(e){this.type=ot,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let h=e[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");let p=[],g=!1;for(let v=1;v<=e.length-1;++v){let S=e[v];if(g&&typeof S=="object"&&!Array.isArray(S)){g=!1;let P=null;if(S["font-scale"]&&(P=o.parse(S["font-scale"],1,N),!P))return null;let z=null;if(S["text-font"]&&(z=o.parse(S["text-font"],1,Lt(ie)),!z))return null;let W=null;if(S["text-color"]&&(W=o.parse(S["text-color"],1,X),!W))return null;let q=p[p.length-1];q.scale=P,q.font=z,q.textColor=W}else{let P=o.parse(e[v],1,ze);if(!P)return null;let z=P.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new ja(p)}evaluate(e){return new V(this.sections.map(o=>{let h=o.content.evaluate(e);return Ne(h)===yt?new B("",h,null,null,null):new B(Pt(h),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(let o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}}class Bs{constructor(e){this.type=yt,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");let h=o.parse(e[1],1,ie);return h?new Bs(h):o.error("No image name provided.")}evaluate(e){let o=this.input.evaluate(e),h=ee.fromString(o);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(o)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}}class Ns{constructor(e){this.type=N,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);let h=o.parse(e[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Vt(h.type)} instead.`):new Ns(h):null}evaluate(e){let o=this.input.evaluate(e);if(typeof o=="string"||Array.isArray(o))return o.length;throw new jt(`Expected value to be of type string or array, but found ${Vt(Ne(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}let Mo={"==":vh,"!=":bh,">":_h,"<":xh,">=":Ch,"<=":wh,array:Zt,at:Ls,boolean:Zt,case:Fs,coalesce:za,collator:Zr,format:ja,image:Bs,in:Rs,"index-of":La,interpolate:Hn,"interpolate-hcl":Hn,"interpolate-lab":Hn,length:Ns,let:ka,literal:At,match:js,number:Zt,"number-format":Vs,object:Zt,slice:Ra,step:Wn,string:Zt,"to-boolean":lr,"to-color":lr,"to-number":lr,"to-string":lr,var:pn,within:ur};function Gl(r,[e,o,h,p]){e=e.evaluate(r),o=o.evaluate(r),h=h.evaluate(r);let g=p?p.evaluate(r):1,v=ue(e,o,h,g);if(v)throw new jt(v);return new xe(e/255*g,o/255*g,h/255*g,g)}function Kl(r,e){return r in e}function Fa(r,e){let o=e[r];return o===void 0?null:o}function ao(r){return{type:r}}function Zl(r){return{result:"success",value:r}}function Do(r){return{result:"error",value:r}}function qr(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Yl(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Mr(r){return!!r.expression&&r.expression.interpolated}function Fr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Jr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function en(r){return r}function ea(r,e){let o=e.type==="color",h=r.stops&&typeof r.stops[0][0]=="object",p=h||!(h||r.property!==void 0),g=r.type||(Mr(e)?"exponential":"interval");if(o||e.type==="padding"){let z=o?xe.parse:U.parse;(r=Rt({},r)).stops&&(r.stops=r.stops.map(W=>[W[0],z(W[1])])),r.default=z(r.default?r.default:e.default)}if(r.colorSpace&&r.colorSpace!=="rgb"&&!$l[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let v,S,P;if(g==="exponential")v=Xl;else if(g==="interval")v=Th;else if(g==="categorical"){v=Sh,S=Object.create(null);for(let z of r.stops)S[z[0]]=z[1];P=typeof r.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=Eh}if(h){let z={},W=[];for(let ye=0;ye<r.stops.length;ye++){let be=r.stops[ye],Ge=be[0].zoom;z[Ge]===void 0&&(z[Ge]={zoom:Ge,type:r.type,property:r.property,default:r.default,stops:[]},W.push(Ge)),z[Ge].stops.push([be[0].value,be[1]])}let q=[];for(let ye of W)q.push([z[ye].zoom,ea(z[ye],e)]);let se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:Hn.interpolationFactor.bind(void 0,se),zoomStops:q.map(ye=>ye[0]),evaluate:({zoom:ye},be)=>Xl({stops:q,base:r.base},e,ye).evaluate(ye,be)}}if(p){let z=g==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Hn.interpolationFactor.bind(void 0,z),zoomStops:r.stops.map(W=>W[0]),evaluate:({zoom:W})=>v(r,e,W,S,P)}}return{kind:"source",evaluate(z,W){let q=W&&W.properties?W.properties[r.property]:void 0;return q===void 0?Ao(r.default,e.default):v(r,e,q,S,P)}}}function Ao(r,e,o){return r!==void 0?r:e!==void 0?e:o!==void 0?o:void 0}function Sh(r,e,o,h,p){return Ao(typeof o===p?h[o]:void 0,r.default,e.default)}function Th(r,e,o){if(Fr(o)!=="number")return Ao(r.default,e.default);let h=r.stops.length;if(h===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[h-1][0])return r.stops[h-1][1];let p=vn(r.stops.map(g=>g[0]),o);return r.stops[p][1]}function Xl(r,e,o){let h=r.base!==void 0?r.base:1;if(Fr(o)!=="number")return Ao(r.default,e.default);let p=r.stops.length;if(p===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[p-1][0])return r.stops[p-1][1];let g=vn(r.stops.map(W=>W[0]),o),v=function(W,q,se,ye){let be=ye-se,Ge=W-se;return be===0?0:q===1?Ge/be:(Math.pow(q,Ge)-1)/(Math.pow(q,be)-1)}(o,h,r.stops[g][0],r.stops[g+1][0]),S=r.stops[g][1],P=r.stops[g+1][1],z=Jo[e.type]||en;if(r.colorSpace&&r.colorSpace!=="rgb"){let W=$l[r.colorSpace];z=(q,se)=>W.reverse(W.interpolate(W.forward(q),W.forward(se),v))}return typeof S.evaluate=="function"?{evaluate(...W){let q=S.evaluate.apply(void 0,W),se=P.evaluate.apply(void 0,W);if(q!==void 0&&se!==void 0)return z(q,se,v)}}:z(S,P,v)}function Eh(r,e,o){switch(e.type){case"color":o=xe.parse(o);break;case"formatted":o=V.fromString(o.toString());break;case"resolvedImage":o=ee.fromString(o.toString());break;case"padding":o=U.parse(o);break;default:Fr(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0)}return Ao(o,r.default,e.default)}Tr.register(Mo,{error:[{kind:"error"},[ie],(r,[e])=>{throw new jt(e.evaluate(r))}],typeof:[ie,[ze],(r,[e])=>Vt(Ne(e.evaluate(r)))],"to-rgba":[Lt(N,4),[X],(r,[e])=>e.evaluate(r).toArray()],rgb:[X,[N,N,N],Gl],rgba:[X,[N,N,N,N],Gl],has:{type:Ze,overloads:[[[ie],(r,[e])=>Kl(e.evaluate(r),r.properties())],[[ie,Le],(r,[e,o])=>Kl(e.evaluate(r),o.evaluate(r))]]},get:{type:ze,overloads:[[[ie],(r,[e])=>Fa(e.evaluate(r),r.properties())],[[ie,Le],(r,[e,o])=>Fa(e.evaluate(r),o.evaluate(r))]]},"feature-state":[ze,[ie],(r,[e])=>Fa(e.evaluate(r),r.featureState||{})],properties:[Le,[],r=>r.properties()],"geometry-type":[ie,[],r=>r.geometryType()],id:[ze,[],r=>r.id()],zoom:[N,[],r=>r.globals.zoom],"heatmap-density":[N,[],r=>r.globals.heatmapDensity||0],"line-progress":[N,[],r=>r.globals.lineProgress||0],accumulated:[ze,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[N,ao(N),(r,e)=>{let o=0;for(let h of e)o+=h.evaluate(r);return o}],"*":[N,ao(N),(r,e)=>{let o=1;for(let h of e)o*=h.evaluate(r);return o}],"-":{type:N,overloads:[[[N,N],(r,[e,o])=>e.evaluate(r)-o.evaluate(r)],[[N],(r,[e])=>-e.evaluate(r)]]},"/":[N,[N,N],(r,[e,o])=>e.evaluate(r)/o.evaluate(r)],"%":[N,[N,N],(r,[e,o])=>e.evaluate(r)%o.evaluate(r)],ln2:[N,[],()=>Math.LN2],pi:[N,[],()=>Math.PI],e:[N,[],()=>Math.E],"^":[N,[N,N],(r,[e,o])=>Math.pow(e.evaluate(r),o.evaluate(r))],sqrt:[N,[N],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[N,[N],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[N,[N],(r,[e])=>Math.log(e.evaluate(r))],log2:[N,[N],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[N,[N],(r,[e])=>Math.sin(e.evaluate(r))],cos:[N,[N],(r,[e])=>Math.cos(e.evaluate(r))],tan:[N,[N],(r,[e])=>Math.tan(e.evaluate(r))],asin:[N,[N],(r,[e])=>Math.asin(e.evaluate(r))],acos:[N,[N],(r,[e])=>Math.acos(e.evaluate(r))],atan:[N,[N],(r,[e])=>Math.atan(e.evaluate(r))],min:[N,ao(N),(r,e)=>Math.min(...e.map(o=>o.evaluate(r)))],max:[N,ao(N),(r,e)=>Math.max(...e.map(o=>o.evaluate(r)))],abs:[N,[N],(r,[e])=>Math.abs(e.evaluate(r))],round:[N,[N],(r,[e])=>{let o=e.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[N,[N],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[N,[N],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[Ze,[ie,ze],(r,[e,o])=>r.properties()[e.value]===o.value],"filter-id-==":[Ze,[ze],(r,[e])=>r.id()===e.value],"filter-type-==":[Ze,[ie],(r,[e])=>r.geometryType()===e.value],"filter-<":[Ze,[ie,ze],(r,[e,o])=>{let h=r.properties()[e.value],p=o.value;return typeof h==typeof p&&h<p}],"filter-id-<":[Ze,[ze],(r,[e])=>{let o=r.id(),h=e.value;return typeof o==typeof h&&o<h}],"filter->":[Ze,[ie,ze],(r,[e,o])=>{let h=r.properties()[e.value],p=o.value;return typeof h==typeof p&&h>p}],"filter-id->":[Ze,[ze],(r,[e])=>{let o=r.id(),h=e.value;return typeof o==typeof h&&o>h}],"filter-<=":[Ze,[ie,ze],(r,[e,o])=>{let h=r.properties()[e.value],p=o.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[Ze,[ze],(r,[e])=>{let o=r.id(),h=e.value;return typeof o==typeof h&&o<=h}],"filter->=":[Ze,[ie,ze],(r,[e,o])=>{let h=r.properties()[e.value],p=o.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[Ze,[ze],(r,[e])=>{let o=r.id(),h=e.value;return typeof o==typeof h&&o>=h}],"filter-has":[Ze,[ze],(r,[e])=>e.value in r.properties()],"filter-has-id":[Ze,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ze,[Lt(ie)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ze,[Lt(ze)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[Ze,[ie,Lt(ze)],(r,[e,o])=>o.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[Ze,[ie,Lt(ze)],(r,[e,o])=>function(h,p,g,v){for(;g<=v;){let S=g+v>>1;if(p[S]===h)return!0;p[S]>h?v=S-1:g=S+1}return!1}(r.properties()[e.value],o.value,0,o.value.length-1)],all:{type:Ze,overloads:[[[Ze,Ze],(r,[e,o])=>e.evaluate(r)&&o.evaluate(r)],[ao(Ze),(r,e)=>{for(let o of e)if(!o.evaluate(r))return!1;return!0}]]},any:{type:Ze,overloads:[[[Ze,Ze],(r,[e,o])=>e.evaluate(r)||o.evaluate(r)],[ao(Ze),(r,e)=>{for(let o of e)if(o.evaluate(r))return!0;return!1}]]},"!":[Ze,[Ze],(r,[e])=>!e.evaluate(r)],"is-supported-script":[Ze,[ie],(r,[e])=>{let o=r.globals&&r.globals.isSupportedScript;return!o||o(e.evaluate(r))}],upcase:[ie,[ie],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[ie,[ie],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[ie,ao(ze),(r,e)=>e.map(o=>Pt(o.evaluate(r))).join("")],"resolved-locale":[ie,[Je],(r,[e])=>e.evaluate(r).resolvedLocale()]});class Va{constructor(e,o){this.expression=e,this._warningHistory={},this._evaluator=new xr,this._defaultValue=o?function(h){return h.type==="color"&&Jr(h.default)?new xe(0,0,0,0):h.type==="color"?xe.parse(h.default)||null:h.type==="padding"?U.parse(h.default)||null:h.default===void 0?null:h.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,h,p,g,v){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(e,o,h,p,g,v){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null;try{let S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new jt(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console!="undefined"&&console.warn(S.message)),this._defaultValue}}}function ta(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Mo}function ra(r,e){let o=new Rr(Mo,[],e?function(p){let g={color:X,string:ie,number:N,enum:ie,boolean:Ze,formatted:ot,padding:gt,resolvedImage:yt};return p.type==="array"?Lt(g[p.value]||ze,p.length):g[p.type]}(e):void 0),h=o.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Zl(new Va(h,e)):Do(o.errors)}class na{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!Or(o.expression)}evaluateWithoutErrorHandling(e,o,h,p,g,v){return this._styleExpression.evaluateWithoutErrorHandling(e,o,h,p,g,v)}evaluate(e,o,h,p,g,v){return this._styleExpression.evaluate(e,o,h,p,g,v)}}class Us{constructor(e,o,h,p){this.kind=e,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!Or(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(e,o,h,p,g,v){return this._styleExpression.evaluateWithoutErrorHandling(e,o,h,p,g,v)}evaluate(e,o,h,p,g,v){return this._styleExpression.evaluate(e,o,h,p,g,v)}interpolationFactor(e,o,h){return this.interpolationType?Hn.interpolationFactor(this.interpolationType,e,o,h):0}}function Jl(r,e){let o=ra(r,e);if(o.result==="error")return o;let h=o.value.expression,p=Sr(h);if(!p&&!qr(e))return Do([new H("","data expressions not supported")]);let g=Kt(h,["zoom"]);if(!g&&!Yl(e))return Do([new H("","zoom expressions not supported")]);let v=Na(h);return v||g?v instanceof H?Do([v]):v instanceof Hn&&!Mr(e)?Do([new H("",'"interpolate" expressions cannot be used with this property')]):Zl(v?new Us(p?"camera":"composite",o.value,v.labels,v instanceof Hn?v.interpolation:void 0):new na(p?"constant":"source",o.value)):Do([new H("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ba{constructor(e,o){this._parameters=e,this._specification=o,Rt(this,ea(this._parameters,this._specification))}static deserialize(e){return new Ba(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Na(r){let e=null;if(r instanceof ka)e=Na(r.result);else if(r instanceof za){for(let o of r.args)if(e=Na(o),e)break}else(r instanceof Wn||r instanceof Hn)&&r.input instanceof Tr&&r.input.name==="zoom"&&(e=r);return e instanceof H||r.eachChild(o=>{let h=Na(o);h instanceof H?e=h:!e&&h?e=new H("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new H("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function li(r){let e=r.key,o=r.value,h=r.valueSpec||{},p=r.objectElementValidators||{},g=r.style,v=r.styleSpec,S=[],P=Fr(o);if(P!=="object")return[new De(e,o,`object expected, ${P} found`)];for(let z in o){let W=z.split(".")[0],q=h[W]||h["*"],se;if(p[W])se=p[W];else if(h[W])se=Kn;else if(p["*"])se=p["*"];else{if(!h["*"]){S.push(new De(e,o[z],`unknown property "${z}"`));continue}se=Kn}S=S.concat(se({key:(e&&`${e}.`)+z,value:o[z],valueSpec:q,style:g,styleSpec:v,object:o,objectKey:z},o))}for(let z in h)p[z]||h[z].required&&h[z].default===void 0&&o[z]===void 0&&S.push(new De(e,o,`missing required property "${z}"`));return S}function ql(r){let e=r.value,o=r.valueSpec,h=r.style,p=r.styleSpec,g=r.key,v=r.arrayElementValidator||Kn;if(Fr(e)!=="array")return[new De(g,e,`array expected, ${Fr(e)} found`)];if(o.length&&e.length!==o.length)return[new De(g,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new De(g,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let S={type:o.value,values:o.values};p.$version<7&&(S.function=o.function),Fr(o.value)==="object"&&(S=o.value);let P=[];for(let z=0;z<e.length;z++)P=P.concat(v({array:e,arrayIndex:z,value:e[z],valueSpec:S,style:h,styleSpec:p,key:`${g}[${z}]`}));return P}function $s(r){let e=r.key,o=r.value,h=r.valueSpec,p=Fr(o);return p==="number"&&o!=o&&(p="NaN"),p!=="number"?[new De(e,o,`number expected, ${p} found`)]:"minimum"in h&&o<h.minimum?[new De(e,o,`${o} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&o>h.maximum?[new De(e,o,`${o} is greater than the maximum value ${h.maximum}`)]:[]}function Ql(r){let e=r.valueSpec,o=Oe(r.value.type),h,p,g,v={},S=o!=="categorical"&&r.value.property===void 0,P=!S,z=Fr(r.value.stops)==="array"&&Fr(r.value.stops[0])==="array"&&Fr(r.value.stops[0][0])==="object",W=li({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(ye){if(o==="identity")return[new De(ye.key,ye.value,'identity function may not have a "stops" property')];let be=[],Ge=ye.value;return be=be.concat(ql({key:ye.key,value:Ge,valueSpec:ye.valueSpec,style:ye.style,styleSpec:ye.styleSpec,arrayElementValidator:q})),Fr(Ge)==="array"&&Ge.length===0&&be.push(new De(ye.key,Ge,"array must have at least one stop")),be},default:function(ye){return Kn({key:ye.key,value:ye.value,valueSpec:e,style:ye.style,styleSpec:ye.styleSpec})}}});return o==="identity"&&S&&W.push(new De(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||W.push(new De(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!Mr(r.valueSpec)&&W.push(new De(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(P&&!qr(r.valueSpec)?W.push(new De(r.key,r.value,"property functions not supported")):S&&!Yl(r.valueSpec)&&W.push(new De(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!z||r.value.property!==void 0||W.push(new De(r.key,r.value,'"property" property is required')),W;function q(ye){let be=[],Ge=ye.value,Ue=ye.key;if(Fr(Ge)!=="array")return[new De(Ue,Ge,`array expected, ${Fr(Ge)} found`)];if(Ge.length!==2)return[new De(Ue,Ge,`array length 2 expected, length ${Ge.length} found`)];if(z){if(Fr(Ge[0])!=="object")return[new De(Ue,Ge,`object expected, ${Fr(Ge[0])} found`)];if(Ge[0].zoom===void 0)return[new De(Ue,Ge,"object stop key must have zoom")];if(Ge[0].value===void 0)return[new De(Ue,Ge,"object stop key must have value")];if(g&&g>Oe(Ge[0].zoom))return[new De(Ue,Ge[0].zoom,"stop zoom values must appear in ascending order")];Oe(Ge[0].zoom)!==g&&(g=Oe(Ge[0].zoom),p=void 0,v={}),be=be.concat(li({key:`${Ue}[0]`,value:Ge[0],valueSpec:{zoom:{}},style:ye.style,styleSpec:ye.styleSpec,objectElementValidators:{zoom:$s,value:se}}))}else be=be.concat(se({key:`${Ue}[0]`,value:Ge[0],valueSpec:{},style:ye.style,styleSpec:ye.styleSpec},Ge));return ta(qe(Ge[1]))?be.concat([new De(`${Ue}[1]`,Ge[1],"expressions are not allowed in function stops.")]):be.concat(Kn({key:`${Ue}[1]`,value:Ge[1],valueSpec:e,style:ye.style,styleSpec:ye.styleSpec}))}function se(ye,be){let Ge=Fr(ye.value),Ue=Oe(ye.value),pt=ye.value!==null?ye.value:be;if(h){if(Ge!==h)return[new De(ye.key,pt,`${Ge} stop domain type must match previous stop domain type ${h}`)]}else h=Ge;if(Ge!=="number"&&Ge!=="string"&&Ge!=="boolean")return[new De(ye.key,pt,"stop domain value must be a number, string, or boolean")];if(Ge!=="number"&&o!=="categorical"){let Tt=`number expected, ${Ge} found`;return qr(e)&&o===void 0&&(Tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new De(ye.key,pt,Tt)]}return o!=="categorical"||Ge!=="number"||isFinite(Ue)&&Math.floor(Ue)===Ue?o!=="categorical"&&Ge==="number"&&p!==void 0&&Ue<p?[new De(ye.key,pt,"stop domain values must appear in ascending order")]:(p=Ue,o==="categorical"&&Ue in v?[new De(ye.key,pt,"stop domain values must be unique")]:(v[Ue]=!0,[])):[new De(ye.key,pt,`integer expected, found ${Ue}`)]}}function so(r){let e=(r.expressionContext==="property"?Jl:ra)(qe(r.value),r.valueSpec);if(e.result==="error")return e.value.map(h=>new De(`${r.key}${h.key}`,r.value,h.message));let o=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new De(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Or(o))return[new De(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Or(o))return[new De(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Kt(o,["zoom","feature-state"]))return[new De(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Sr(o))return[new De(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ia(r){let e=r.key,o=r.value,h=r.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Oe(o))===-1&&p.push(new De(e,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(Oe(o))===-1&&p.push(new De(e,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function Io(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let e of r.slice(1))if(!Io(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}let Ph={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ua(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Io(r)||(r=oa(r));let e=ra(r,Ph);if(e.result==="error")throw new Error(e.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,h,p)=>e.value.evaluate(o,h,{},p),needGeometry:tu(r)}}function eu(r,e){return r<e?-1:r>e?1:0}function tu(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(tu(r[e]))return!0;return!1}function oa(r){if(!r)return!0;let e=r[0];return r.length<=1?e!=="any":e==="=="?Ws(r[1],r[2],"=="):e==="!="?zo(Ws(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Ws(r[1],r[2],e):e==="any"?(o=r.slice(1),["any"].concat(o.map(oa))):e==="all"?["all"].concat(r.slice(1).map(oa)):e==="none"?["all"].concat(r.slice(1).map(oa).map(zo)):e==="in"?$a(r[1],r.slice(2)):e==="!in"?zo($a(r[1],r.slice(2))):e==="has"?aa(r[1]):e==="!has"?zo(aa(r[1])):e!=="within"||r;var o}function Ws(r,e,o){switch(r){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,r,e]}}function $a(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",r,["literal",e.sort(eu)]]:["filter-in-small",r,["literal",e]]}}function aa(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function zo(r){return["!",r]}function sa(r){return Io(qe(r.value))?so(Rt({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ru(r)}function ru(r){let e=r.value,o=r.key;if(Fr(e)!=="array")return[new De(o,e,`array expected, ${Fr(e)} found`)];let h=r.styleSpec,p,g=[];if(e.length<1)return[new De(o,e,"filter array must have at least 1 element")];switch(g=g.concat(ia({key:`${o}[0]`,value:e[0],valueSpec:h.filter_operator,style:r.style,styleSpec:r.styleSpec})),Oe(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Oe(e[1])==="$type"&&g.push(new De(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&g.push(new De(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(p=Fr(e[1]),p!=="string"&&g.push(new De(`${o}[1]`,e[1],`string expected, ${p} found`)));for(let v=2;v<e.length;v++)p=Fr(e[v]),Oe(e[1])==="$type"?g=g.concat(ia({key:`${o}[${v}]`,value:e[v],valueSpec:h.geometry_type,style:r.style,styleSpec:r.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new De(`${o}[${v}]`,e[v],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let v=1;v<e.length;v++)g=g.concat(ru({key:`${o}[${v}]`,value:e[v],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":p=Fr(e[1]),e.length!==2?g.push(new De(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new De(`${o}[1]`,e[1],`string expected, ${p} found`));break;case"within":p=Fr(e[1]),e.length!==2?g.push(new De(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):p!=="object"&&g.push(new De(`${o}[1]`,e[1],`object expected, ${p} found`))}return g}function la(r,e){let o=r.key,h=r.style,p=r.styleSpec,g=r.value,v=r.objectKey,S=p[`${e}_${r.layerType}`];if(!S)return[];let P=v.match(/^(.*)-transition$/);if(e==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return Kn({key:o,value:g,valueSpec:p.transition,style:h,styleSpec:p});let z=r.valueSpec||S[v];if(!z)return[new De(o,g,`unknown property "${v}"`)];let W;if(Fr(g)==="string"&&qr(z)&&!z.tokens&&(W=/^{([^}]+)}$/.exec(g)))return[new De(o,g,`"${v}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];let q=[];return r.layerType==="symbol"&&(v==="text-field"&&h&&!h.glyphs&&q.push(new De(o,g,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Jr(qe(g))&&Oe(g.type)==="identity"&&q.push(new De(o,g,'"text-font" does not support identity functions'))),q.concat(Kn({key:r.key,value:g,valueSpec:z,style:h,styleSpec:p,expressionContext:"property",propertyType:e,propertyKey:v}))}function nu(r){return la(r,"paint")}function iu(r){return la(r,"layout")}function ou(r){let e=[],o=r.value,h=r.key,p=r.style,g=r.styleSpec;o.type||o.ref||e.push(new De(h,o,'either "type" or "ref" is required'));let v=Oe(o.type),S=Oe(o.ref);if(o.id){let P=Oe(o.id);for(let z=0;z<r.arrayIndex;z++){let W=p.layers[z];Oe(W.id)===P&&e.push(new De(h,o.id,`duplicate layer id "${o.id}", previously used at line ${W.id.__fileloc.line__}`))}}if("ref"in o){let P;["type","source","source-layer","filter","layout"].forEach(z=>{z in o&&e.push(new De(h,o[z],`"${z}" is prohibited for ref layers`))}),p.layers.forEach(z=>{Oe(z.id)===S&&(P=z)}),P?P.ref?e.push(new De(h,o.ref,"ref cannot reference another ref layer")):v=Oe(P.type):e.push(new De(h,o.ref,`ref layer "${S}" not found`))}else if(v!=="background")if(o.source){let P=p.sources&&p.sources[o.source],z=P&&Oe(P.type);P?z==="vector"&&v==="raster"?e.push(new De(h,o.source,`layer "${o.id}" requires a raster source`)):z==="raster"&&v!=="raster"?e.push(new De(h,o.source,`layer "${o.id}" requires a vector source`)):z!=="vector"||o["source-layer"]?z==="raster-dem"&&v!=="hillshade"?e.push(new De(h,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!o.paint||!o.paint["line-gradient"]||z==="geojson"&&P.lineMetrics||e.push(new De(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new De(h,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new De(h,o.source,`source "${o.source}" not found`))}else e.push(new De(h,o,'missing required property "source"'));return e=e.concat(li({key:h,value:o,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Kn({key:`${h}.type`,value:o.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:sa,layout:P=>li({layer:o,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":z=>iu(Rt({layerType:v},z))}}),paint:P=>li({layer:o,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":z=>nu(Rt({layerType:v},z))}})}})),e}function ko(r){let e=r.value,o=r.key,h=Fr(e);return h!=="string"?[new De(o,e,`string expected, ${h} found`)]:[]}let au={promoteId:function({key:r,value:e}){if(Fr(e)==="string")return ko({key:r,value:e});{let o=[];for(let h in e)o.push(...ko({key:`${r}.${h}`,value:e[h]}));return o}}};function ua(r){let e=r.value,o=r.key,h=r.styleSpec,p=r.style;if(!e.type)return[new De(o,e,'"type" is required')];let g=Oe(e.type),v;switch(g){case"vector":case"raster":case"raster-dem":return v=li({key:o,value:e,valueSpec:h[`source_${g.replace("-","_")}`],style:r.style,styleSpec:h,objectElementValidators:au}),v;case"geojson":if(v=li({key:o,value:e,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:au}),e.cluster)for(let S in e.clusterProperties){let[P,z]=e.clusterProperties[S],W=typeof P=="string"?[P,["accumulated"],["get",S]]:P;v.push(...so({key:`${o}.${S}.map`,value:z,expressionContext:"cluster-map"})),v.push(...so({key:`${o}.${S}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return v;case"video":return li({key:o,value:e,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return li({key:o,value:e,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new De(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ia({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function ca(r){let e=r.value,o=r.styleSpec,h=o.light,p=r.style,g=[],v=Fr(e);if(e===void 0)return g;if(v!=="object")return g=g.concat([new De("light",e,`object expected, ${v} found`)]),g;for(let S in e){let P=S.match(/^(.*)-transition$/);g=g.concat(P&&h[P[1]]&&h[P[1]].transition?Kn({key:S,value:e[S],valueSpec:o.transition,style:p,styleSpec:o}):h[S]?Kn({key:S,value:e[S],valueSpec:h[S],style:p,styleSpec:o}):[new De(S,e[S],`unknown property "${S}"`)])}return g}function Gn(r){let e=r.value,o=r.styleSpec,h=o.terrain,p=r.style,g=[],v=Fr(e);if(e===void 0)return g;if(v!=="object")return g=g.concat([new De("terrain",e,`object expected, ${v} found`)]),g;for(let S in e)g=g.concat(h[S]?Kn({key:S,value:e[S],valueSpec:h[S],style:p,styleSpec:o}):[new De(S,e[S],`unknown property "${S}"`)]);return g}let ha={"*":()=>[],array:ql,boolean:function(r){let e=r.value,o=r.key,h=Fr(e);return h!=="boolean"?[new De(o,e,`boolean expected, ${h} found`)]:[]},number:$s,color:function(r){let e=r.key,o=r.value,h=Fr(o);return h!=="string"?[new De(e,o,`color expected, ${h} found`)]:Et(o)===null?[new De(e,o,`color expected, "${o}" found`)]:[]},constants:ft,enum:ia,filter:sa,function:Ql,layer:ou,object:li,source:ua,light:ca,terrain:Gn,string:ko,formatted:function(r){return ko(r).length===0?[]:so(r)},resolvedImage:function(r){return ko(r).length===0?[]:so(r)},padding:function(r){let e=r.key,o=r.value;if(Fr(o)==="array"){if(o.length<1||o.length>4)return[new De(e,o,`padding requires 1 to 4 values; ${o.length} values found`)];let h={type:"number"},p=[];for(let g=0;g<o.length;g++)p=p.concat(Kn({key:`${e}[${g}]`,value:o[g],valueSpec:h}));return p}return $s({key:e,value:o,valueSpec:{}})}};function Kn(r){let e=r.value,o=r.valueSpec,h=r.styleSpec;return o.expression&&Jr(Oe(e))?Ql(r):o.expression&&ta(qe(e))?so(r):o.type&&ha[o.type]?ha[o.type](r):li(Rt({},r,{valueSpec:o.type?h[o.type]:o}))}function Oh(r){let e=r.value,o=r.key,h=ko(r);return h.length||(e.indexOf("{fontstack}")===-1&&h.push(new De(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&h.push(new De(o,e,'"glyphs" url must include a "{range}" token'))),h}function $i(r,e=fe){let o=[];return o=o.concat(Kn({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Oh,"*":()=>[]}})),r.constants&&(o=o.concat(ft({key:"constants",value:r.constants,style:r,styleSpec:e}))),su(o)}function su(r){return[].concat(r).sort((e,o)=>e.line-o.line)}function Ii(r){return function(...e){return su(r.apply(this,e))}}$i.source=Ii(ua),$i.light=Ii(ca),$i.terrain=Ii(Gn),$i.layer=Ii(ou),$i.filter=Ii(sa),$i.paintProperty=Ii(nu),$i.layoutProperty=Ii(iu);let da=$i,Hs=da.light,Mh=da.paintProperty,Dh=da.layoutProperty;function Wa(r,e){let o=!1;if(e&&e.length)for(let h of e)r.fire(new Qe(new Error(h.message))),o=!0;return o}class fa{constructor(e,o,h){let p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;let v=new Int32Array(this.arrayBuffer);e=v[0],this.d=(o=v[1])+2*(h=v[2]);for(let P=0;P<this.d*this.d;P++){let z=v[3+P],W=v[3+P+1];p.push(z===W?null:v.subarray(z,W))}let S=v[3+p.length+1];this.keys=v.subarray(v[3+p.length],S),this.bboxes=v.subarray(S),this.insert=this._insertReadonly}else{this.d=o+2*h;for(let v=0;v<this.d*this.d;v++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=e,this.padding=h,this.scale=o/e,this.uid=0;let g=h/o*e;this.min=-g,this.max=e+g}insert(e,o,h,p,g){this._forEachCell(o,h,p,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,o,h,p,g,v){this.cells[g].push(v)}query(e,o,h,p,g){let v=this.min,S=this.max;if(e<=v&&o<=v&&S<=h&&S<=p&&!g)return Array.prototype.slice.call(this.keys);{let P=[];return this._forEachCell(e,o,h,p,this._queryCell,P,{},g),P}}_queryCell(e,o,h,p,g,v,S,P){let z=this.cells[g];if(z!==null){let W=this.keys,q=this.bboxes;for(let se=0;se<z.length;se++){let ye=z[se];if(S[ye]===void 0){let be=4*ye;(P?P(q[be+0],q[be+1],q[be+2],q[be+3]):e<=q[be+2]&&o<=q[be+3]&&h>=q[be+0]&&p>=q[be+1])?(S[ye]=!0,v.push(W[ye])):S[ye]=!1}}}}_forEachCell(e,o,h,p,g,v,S,P){let z=this._convertToCellCoord(e),W=this._convertToCellCoord(o),q=this._convertToCellCoord(h),se=this._convertToCellCoord(p);for(let ye=z;ye<=q;ye++)for(let be=W;be<=se;be++){let Ge=this.d*be+ye;if((!P||P(this._convertFromCellCoord(ye),this._convertFromCellCoord(be),this._convertFromCellCoord(ye+1),this._convertFromCellCoord(be+1)))&&g.call(this,e,o,h,p,Ge,v,S,P))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let e=this.cells,o=3+this.cells.length+1+1,h=0;for(let v=0;v<this.cells.length;v++)h+=this.cells[v].length;let p=new Int32Array(o+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let g=o;for(let v=0;v<e.length;v++){let S=e[v];p[3+v]=g,p.set(S,g),g+=S.length}return p[3+e.length]=g,p.set(this.keys,g),g+=this.keys.length,p[3+e.length+1]=g,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer}static serialize(e,o){let h=e.toArrayBuffer();return o&&o.push(h),{buffer:h}}static deserialize(e){return new fa(e.buffer)}}let zi={};function sr(r,e,o={}){if(zi[r])throw new Error(`${r} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),zi[r]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}sr("Object",Object),sr("TransferableGridIndex",fa),sr("Color",xe),sr("Error",Error),sr("AJAXError",Jt),sr("ResolvedImage",ee),sr("StylePropertyFunction",Ba),sr("StyleExpression",Va,{omit:["_evaluator"]}),sr("ZoomDependentExpression",Us),sr("ZoomConstantExpression",na),sr("CompoundExpression",Tr,{omit:["_evaluate"]});for(let r in Mo)Mo[r]._classRegistryKey||sr(`Expression_${r}`,Mo[r]);function lu(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function lo(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(lu(r)||lt(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){let o=r;return e&&e.push(o.buffer),o}if(r instanceof ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){let o=[];for(let h of r)o.push(lo(h,e));return o}if(typeof r=="object"){let o=r.constructor,h=o._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!zi[h])throw new Error(`${h} is not registered.`);let p=o.serialize?o.serialize(r,e):{};if(o.serialize){if(e&&p===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in r){if(!r.hasOwnProperty(g)||zi[h].omit.indexOf(g)>=0)continue;let v=r[g];p[g]=zi[h].shallow.indexOf(g)>=0?v:lo(v,e)}r instanceof Error&&(p.message=r.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof r)}function Wi(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||lu(r)||lt(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(Wi);if(typeof r=="object"){let e=r.$name||"Object";if(!zi[e])throw new Error(`can't deserialize unregistered class ${e}`);let{klass:o}=zi[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(r);let h=Object.create(o.prototype);for(let p of Object.keys(r)){if(p==="$name")continue;let g=r[p];h[p]=zi[e].shallow.indexOf(p)>=0?g:Wi(g)}return h}throw new Error("can't deserialize object of type "+typeof r)}class Gs{constructor(){this.first=!0}update(e,o){let h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}let tr={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Ha(r){for(let e of r)if(Zs(e.charCodeAt(0)))return!0;return!1}function Ah(r){for(let e of r)if(!Ks(e.charCodeAt(0)))return!1;return!0}function Ks(r){return!(tr.Arabic(r)||tr["Arabic Supplement"](r)||tr["Arabic Extended-A"](r)||tr["Arabic Presentation Forms-A"](r)||tr["Arabic Presentation Forms-B"](r))}function Zs(r){return!(r!==746&&r!==747&&(r<4352||!(tr["Bopomofo Extended"](r)||tr.Bopomofo(r)||tr["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||tr["CJK Compatibility Ideographs"](r)||tr["CJK Compatibility"](r)||tr["CJK Radicals Supplement"](r)||tr["CJK Strokes"](r)||!(!tr["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||tr["CJK Unified Ideographs Extension A"](r)||tr["CJK Unified Ideographs"](r)||tr["Enclosed CJK Letters and Months"](r)||tr["Hangul Compatibility Jamo"](r)||tr["Hangul Jamo Extended-A"](r)||tr["Hangul Jamo Extended-B"](r)||tr["Hangul Jamo"](r)||tr["Hangul Syllables"](r)||tr.Hiragana(r)||tr["Ideographic Description Characters"](r)||tr.Kanbun(r)||tr["Kangxi Radicals"](r)||tr["Katakana Phonetic Extensions"](r)||tr.Katakana(r)&&r!==12540||!(!tr["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!tr["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||tr["Unified Canadian Aboriginal Syllabics"](r)||tr["Unified Canadian Aboriginal Syllabics Extended"](r)||tr["Vertical Forms"](r)||tr["Yijing Hexagram Symbols"](r)||tr["Yi Syllables"](r)||tr["Yi Radicals"](r))))}function uu(r){return!(Zs(r)||function(e){return!!(tr["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||tr["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||tr["Letterlike Symbols"](e)||tr["Number Forms"](e)||tr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||tr["Control Pictures"](e)&&e!==9251||tr["Optical Character Recognition"](e)||tr["Enclosed Alphanumerics"](e)||tr["Geometric Shapes"](e)||tr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||tr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||tr["CJK Symbols and Punctuation"](e)||tr.Katakana(e)||tr["Private Use Area"](e)||tr["CJK Compatibility Forms"](e)||tr["Small Form Variants"](e)||tr["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function cu(r){return r>=1424&&r<=2303||tr["Arabic Presentation Forms-A"](r)||tr["Arabic Presentation Forms-B"](r)}function Ih(r,e){return!(!e&&cu(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||tr.Khmer(r))}function hu(r){for(let e of r)if(cu(e.charCodeAt(0)))return!0;return!1}let Ys="deferred",Xs="loading",Js="loaded",qs=null,jn="unavailable",Hi=null,du=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(jn="error"),qs&&qs(r)};function Lo(){Qs.fire(new We("pluginStateChange",{pluginStatus:jn,pluginURL:Hi}))}let Qs=new He,pa=function(){return jn},fu=function(){if(jn!==Ys||!Hi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");jn=Xs,Lo(),Hi&&st({url:Hi},r=>{r?du(r):(jn=Js,Lo())})},ni={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>jn===Js||ni.applyArabicShaping!=null,isLoading:()=>jn===Xs,setState(r){if(!L())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");jn=r.pluginStatus,Hi=r.pluginURL},isParsed(){if(!L())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ni.applyArabicShaping!=null&&ni.processBidirectionalText!=null&&ni.processStyledBidirectionalText!=null},getPluginURL(){if(!L())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Hi}};class tn{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gs,this.transition={})}isSupportedScript(e){return function(o,h){for(let p of o)if(!Ih(p.charCodeAt(0),h))return!1;return!0}(e,ni.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let e=this.zoom,o=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*o}}}class ma{constructor(e,o){this.property=e,this.value=o,this.expression=function(h,p){if(Jr(h))return new Ba(h,p);if(ta(h)){let g=Jl(h,p);if(g.result==="error")throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=h;return p.type==="color"&&typeof h=="string"?g=xe.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(g=U.parse(h)),{kind:"constant",evaluate:()=>g}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,h){return this.property.possiblyEvaluate(this,e,o,h)}}class Ga{constructor(e){this.property=e,this.value=new ma(e,void 0)}transitioned(e,o){return new mu(this.property,this.value,o,A({},e.transition,this.transition),e.now)}untransitioned(){return new mu(this.property,this.value,null,{},0)}}class pu{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return G(this._values[e].value.value)}setValue(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ga(this._values[e].property)),this._values[e].value=new ma(this._values[e].property,o===null?void 0:G(o))}getTransition(e){return G(this._values[e].transition)}setTransition(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ga(this._values[e].property)),this._values[e].transition=G(o)||void 0}serialize(){let e={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(e[o]=h);let p=this.getTransition(o);p!==void 0&&(e[`${o}-transition`]=p)}return e}transitioned(e,o){let h=new gu(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(e,o._values[p]);return h}untransitioned(){let e=new gu(this._properties);for(let o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class mu{constructor(e,o,h,p,g){this.property=e,this.value=o,this.begin=g+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(e,o,h){let p=e.now||0,g=this.value.possiblyEvaluate(e,o,h),v=this.prior;if(v){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return v.possiblyEvaluate(e,o,h);{let S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(e,o,h),g,function(P){if(P<=0)return 0;if(P>=1)return 1;let z=P*P,W=z*P;return 4*(P<.5?W:3*(P-z)+W-.75)}(S))}}return g}}class gu{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,h){let p=new ga(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(e,o,h);return p}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class zh{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return G(this._values[e].value)}setValue(e,o){this._values[e]=new ma(this._values[e].property,o===null?void 0:G(o))}serialize(){let e={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(e[o]=h)}return e}possiblyEvaluate(e,o,h){let p=new ga(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(e,o,h);return p}}class bi{constructor(e,o,h){this.property=e,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,h,p){return this.property.evaluate(this.value,this.parameters,e,o,h,p)}}class ga{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class hr{constructor(e){this.specification=e}possiblyEvaluate(e,o){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(o)}interpolate(e,o,h){let p=Jo[this.specification.type];return p?p(e,o,h):e}}class vr{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,h,p){return new bi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},h,p)}:e.expression,o)}interpolate(e,o,h){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new bi(this,{kind:"constant",value:void 0},e.parameters);let p=Jo[this.specification.type];return p?new bi(this,{kind:"constant",value:p(e.value.value,o.value.value,h)},e.parameters):e}evaluate(e,o,h,p,g,v){return e.kind==="constant"?e.value:e.evaluate(o,h,p,g,v)}}class Ro extends vr{possiblyEvaluate(e,o,h,p){if(e.value===void 0)return new bi(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){let g=e.expression.evaluate(o,null,{},h,p),v=e.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,S=this._calculate(v,v,v,o);return new bi(this,{kind:"constant",value:S},o)}if(e.expression.kind==="camera"){let g=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new bi(this,{kind:"constant",value:g},o)}return new bi(this,e.expression,o)}evaluate(e,o,h,p,g,v){if(e.kind==="source"){let S=e.evaluate(o,h,p,g,v);return this._calculate(S,S,S,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},h,p),e.evaluate({zoom:Math.floor(o.zoom)},h,p),e.evaluate({zoom:Math.floor(o.zoom)+1},h,p),o):e.value}_calculate(e,o,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:h,to:o}}interpolate(e){return e}}class el{constructor(e){this.specification=e}possiblyEvaluate(e,o,h,p){if(e.value!==void 0){if(e.expression.kind==="constant"){let g=e.expression.evaluate(o,null,{},h,p);return this._calculate(g,g,g,o)}return this._calculate(e.expression.evaluate(new tn(Math.floor(o.zoom-1),o)),e.expression.evaluate(new tn(Math.floor(o.zoom),o)),e.expression.evaluate(new tn(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:h,to:o}}interpolate(e){return e}}class Gi{constructor(e){this.specification=e}possiblyEvaluate(e,o,h,p){return!!e.expression.evaluate(o,null,{},h,p)}interpolate(){return!1}}class Tn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let o in e){let h=e[o];h.specification.overridable&&this.overridableProperties.push(o);let p=this.defaultPropertyValues[o]=new ma(h,void 0),g=this.defaultTransitionablePropertyValues[o]=new Ga(h);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=p.possiblyEvaluate({})}}}sr("DataDrivenProperty",vr),sr("DataConstantProperty",hr),sr("CrossFadedDataDrivenProperty",Ro),sr("CrossFadedProperty",el),sr("ColorRampProperty",Gi);let Ki="-transition";class xi extends He{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new zh(o.layout)),o.paint)){this._transitionablePaint=new pu(o.paint);for(let h in e.paint)this.setPaintProperty(h,e.paint[h],{validate:!1});for(let h in e.layout)this.setLayoutProperty(h,e.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ga(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,h={}){o!=null&&this._validate(Dh,`layers.${this.id}.layout.${e}`,e,o,h)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return e.endsWith(Ki)?this._transitionablePaint.getTransition(e.slice(0,-Ki.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,h={}){if(o!=null&&this._validate(Mh,`layers.${this.id}.paint.${e}`,e,o,h))return!1;if(e.endsWith(Ki))return this._transitionablePaint.setTransition(e.slice(0,-Ki.length),o||void 0),!1;{let p=this._transitionablePaint._values[e],g=p.property.specification["property-type"]==="cross-faded-data-driven",v=p.value.isDataDriven(),S=p.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);let P=this._transitionablePaint._values[e].value;return P.isDataDriven()||v||g||this._handleOverridablePaintPropertyUpdate(e,S,P)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,o,h){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){let e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Y(e,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(e,o,h,p,g={}){return(!g||g.validate!==!1)&&Wa(this,e.call(da,{key:o,layerType:this.type,objectKey:h,value:p,styleSpec:fe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let e in this.paint._values){let o=this.paint.get(e);if(o instanceof bi&&qr(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let yu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zi{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function hn(r,e=1){let o=0,h=0;return{members:r.map(p=>{let g=yu[p.type].BYTES_PER_ELEMENT,v=o=tl(o,Math.max(e,g)),S=p.components||1;return h=Math.max(h,g),o+=g*S,{name:p.name,type:p.type,components:S,offset:v}}),size:tl(o,Math.max(h,e)),alignment:e}}function tl(r,e){return Math.ceil(r/e)*e}class uo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){let h=this.length;return this.resize(h+1),this.emplace(h,e,o)}emplace(e,o,h){let p=2*e;return this.int16[p+0]=o,this.int16[p+1]=h,e}}uo.prototype.bytesPerElement=4,sr("StructArrayLayout2i4",uo);class f extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,e,o,h,p)}emplace(e,o,h,p,g){let v=4*e;return this.int16[v+0]=o,this.int16[v+1]=h,this.int16[v+2]=p,this.int16[v+3]=g,e}}f.prototype.bytesPerElement=8,sr("StructArrayLayout4i8",f);class t extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v){let S=this.length;return this.resize(S+1),this.emplace(S,e,o,h,p,g,v)}emplace(e,o,h,p,g,v,S){let P=6*e;return this.int16[P+0]=o,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=g,this.int16[P+4]=v,this.int16[P+5]=S,e}}t.prototype.bytesPerElement=12,sr("StructArrayLayout2i4i12",t);class u extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v){let S=this.length;return this.resize(S+1),this.emplace(S,e,o,h,p,g,v)}emplace(e,o,h,p,g,v,S){let P=4*e,z=8*e;return this.int16[P+0]=o,this.int16[P+1]=h,this.uint8[z+4]=p,this.uint8[z+5]=g,this.uint8[z+6]=v,this.uint8[z+7]=S,e}}u.prototype.bytesPerElement=8,sr("StructArrayLayout2i4ub8",u);class d extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){let h=this.length;return this.resize(h+1),this.emplace(h,e,o)}emplace(e,o,h){let p=2*e;return this.float32[p+0]=o,this.float32[p+1]=h,e}}d.prototype.bytesPerElement=8,sr("StructArrayLayout2f8",d);class m extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v,S,P,z,W){let q=this.length;return this.resize(q+1),this.emplace(q,e,o,h,p,g,v,S,P,z,W)}emplace(e,o,h,p,g,v,S,P,z,W,q){let se=10*e;return this.uint16[se+0]=o,this.uint16[se+1]=h,this.uint16[se+2]=p,this.uint16[se+3]=g,this.uint16[se+4]=v,this.uint16[se+5]=S,this.uint16[se+6]=P,this.uint16[se+7]=z,this.uint16[se+8]=W,this.uint16[se+9]=q,e}}m.prototype.bytesPerElement=20,sr("StructArrayLayout10ui20",m);class y extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v,S,P,z,W,q,se){let ye=this.length;return this.resize(ye+1),this.emplace(ye,e,o,h,p,g,v,S,P,z,W,q,se)}emplace(e,o,h,p,g,v,S,P,z,W,q,se,ye){let be=12*e;return this.int16[be+0]=o,this.int16[be+1]=h,this.int16[be+2]=p,this.int16[be+3]=g,this.uint16[be+4]=v,this.uint16[be+5]=S,this.uint16[be+6]=P,this.uint16[be+7]=z,this.int16[be+8]=W,this.int16[be+9]=q,this.int16[be+10]=se,this.int16[be+11]=ye,e}}y.prototype.bytesPerElement=24,sr("StructArrayLayout4i4ui4i24",y);class C extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,e,o,h)}emplace(e,o,h,p){let g=3*e;return this.float32[g+0]=o,this.float32[g+1]=h,this.float32[g+2]=p,e}}C.prototype.bytesPerElement=12,sr("StructArrayLayout3f12",C);class O extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}O.prototype.bytesPerElement=4,sr("StructArrayLayout1ul4",O);class I extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v,S,P,z){let W=this.length;return this.resize(W+1),this.emplace(W,e,o,h,p,g,v,S,P,z)}emplace(e,o,h,p,g,v,S,P,z,W){let q=10*e,se=5*e;return this.int16[q+0]=o,this.int16[q+1]=h,this.int16[q+2]=p,this.int16[q+3]=g,this.int16[q+4]=v,this.int16[q+5]=S,this.uint32[se+3]=P,this.uint16[q+8]=z,this.uint16[q+9]=W,e}}I.prototype.bytesPerElement=20,sr("StructArrayLayout6i1ul2ui20",I);class j extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v){let S=this.length;return this.resize(S+1),this.emplace(S,e,o,h,p,g,v)}emplace(e,o,h,p,g,v,S){let P=6*e;return this.int16[P+0]=o,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=g,this.int16[P+4]=v,this.int16[P+5]=S,e}}j.prototype.bytesPerElement=12,sr("StructArrayLayout2i2i2i12",j);class J extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g){let v=this.length;return this.resize(v+1),this.emplace(v,e,o,h,p,g)}emplace(e,o,h,p,g,v){let S=4*e,P=8*e;return this.float32[S+0]=o,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[P+6]=g,this.int16[P+7]=v,e}}J.prototype.bytesPerElement=16,sr("StructArrayLayout2f1f2i16",J);class ne extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,e,o,h,p)}emplace(e,o,h,p,g){let v=12*e,S=3*e;return this.uint8[v+0]=o,this.uint8[v+1]=h,this.float32[S+1]=p,this.float32[S+2]=g,e}}ne.prototype.bytesPerElement=12,sr("StructArrayLayout2ub2f12",ne);class ge extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,e,o,h)}emplace(e,o,h,p){let g=3*e;return this.uint16[g+0]=o,this.uint16[g+1]=h,this.uint16[g+2]=p,e}}ge.prototype.bytesPerElement=6,sr("StructArrayLayout3ui6",ge);class Re extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt){let Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt)}emplace(e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt,Tt){let ht=24*e,wt=12*e,Bt=48*e;return this.int16[ht+0]=o,this.int16[ht+1]=h,this.uint16[ht+2]=p,this.uint16[ht+3]=g,this.uint32[wt+2]=v,this.uint32[wt+3]=S,this.uint32[wt+4]=P,this.uint16[ht+10]=z,this.uint16[ht+11]=W,this.uint16[ht+12]=q,this.float32[wt+7]=se,this.float32[wt+8]=ye,this.uint8[Bt+36]=be,this.uint8[Bt+37]=Ge,this.uint8[Bt+38]=Ue,this.uint32[wt+10]=pt,this.int16[ht+22]=Tt,e}}Re.prototype.bytesPerElement=48,sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Re);class Pe extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt,Tt,ht,wt,Bt,Ft,ar,cr,rr,Qt,Yt,nr){let er=this.length;return this.resize(er+1),this.emplace(er,e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt,Tt,ht,wt,Bt,Ft,ar,cr,rr,Qt,Yt,nr)}emplace(e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge,Ue,pt,Tt,ht,wt,Bt,Ft,ar,cr,rr,Qt,Yt,nr,er){let Ut=34*e,gr=17*e;return this.int16[Ut+0]=o,this.int16[Ut+1]=h,this.int16[Ut+2]=p,this.int16[Ut+3]=g,this.int16[Ut+4]=v,this.int16[Ut+5]=S,this.int16[Ut+6]=P,this.int16[Ut+7]=z,this.uint16[Ut+8]=W,this.uint16[Ut+9]=q,this.uint16[Ut+10]=se,this.uint16[Ut+11]=ye,this.uint16[Ut+12]=be,this.uint16[Ut+13]=Ge,this.uint16[Ut+14]=Ue,this.uint16[Ut+15]=pt,this.uint16[Ut+16]=Tt,this.uint16[Ut+17]=ht,this.uint16[Ut+18]=wt,this.uint16[Ut+19]=Bt,this.uint16[Ut+20]=Ft,this.uint16[Ut+21]=ar,this.uint16[Ut+22]=cr,this.uint32[gr+12]=rr,this.float32[gr+13]=Qt,this.float32[gr+14]=Yt,this.float32[gr+15]=nr,this.float32[gr+16]=er,e}}Pe.prototype.bytesPerElement=68,sr("StructArrayLayout8i15ui1ul4f68",Pe);class Me extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}Me.prototype.bytesPerElement=4,sr("StructArrayLayout1f4",Me);class nt extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,e,o,h)}emplace(e,o,h,p){let g=3*e;return this.int16[g+0]=o,this.int16[g+1]=h,this.int16[g+2]=p,e}}nt.prototype.bytesPerElement=6,sr("StructArrayLayout3i6",nt);class ut extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,e,o,h)}emplace(e,o,h,p){let g=4*e;return this.uint32[2*e+0]=o,this.uint16[g+2]=h,this.uint16[g+3]=p,e}}ut.prototype.bytesPerElement=8,sr("StructArrayLayout1ul2ui8",ut);class vt extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){let h=this.length;return this.resize(h+1),this.emplace(h,e,o)}emplace(e,o,h){let p=2*e;return this.uint16[p+0]=o,this.uint16[p+1]=h,e}}vt.prototype.bytesPerElement=4,sr("StructArrayLayout2ui4",vt);class Be extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}Be.prototype.bytesPerElement=2,sr("StructArrayLayout1ui2",Be);class St extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,e,o,h,p)}emplace(e,o,h,p,g){let v=4*e;return this.float32[v+0]=o,this.float32[v+1]=h,this.float32[v+2]=p,this.float32[v+3]=g,e}}St.prototype.bytesPerElement=16,sr("StructArrayLayout4f16",St);class xt extends Zi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new je(this.anchorPointX,this.anchorPointY)}}xt.prototype.size=20;class Dt extends I{get(e){return new xt(this,e)}}sr("CollisionBoxArray",Dt);class It extends Zi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}It.prototype.size=48;class Nt extends Re{get(e){return new It(this,e)}}sr("PlacedSymbolArray",Nt);class Ot extends Zi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ot.prototype.size=68;class ir extends Pe{get(e){return new Ot(this,e)}}sr("SymbolInstanceArray",ir);class qt extends Me{getoffsetX(e){return this.float32[1*e+0]}}sr("GlyphOffsetArray",qt);class or extends nt{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}sr("SymbolLineVertexArray",or);class _r extends Zi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}_r.prototype.size=8;class wr extends ut{get(e){return new _r(this,e)}}sr("FeatureIndexArray",wr);class mr extends uo{}class Br extends uo{}class Nr extends uo{}class Ir extends t{}class kr extends u{}class $r extends d{}class bn extends m{}class _i extends y{}class ui extends C{}class wi extends O{}class Yi extends j{}class ii extends ne{}class Fn extends ge{}class ki extends vt{}let Ka=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:mn}=Ka;class Er{constructor(e=[]){this.segments=e}prepareSegment(e,o,h,p){let g=this.segments[this.segments.length-1];return e>Er.MAX_VERTEX_ARRAY_LENGTH&&K(`Max vertices per segment is ${Er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!g||g.vertexLength+e>Er.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:o.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(let e of this.segments)for(let o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,h,p){return new Er([{vertexOffset:e,primitiveOffset:o,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Vr(r,e){return 256*(r=x(Math.floor(r),0,255))+x(Math.floor(e),0,255)}Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sr("SegmentVector",Er);let xn=hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _n={exports:{}},rn={exports:{}};rn.exports=function(r,e){var o,h,p,g,v,S,P,z;for(h=r.length-(o=3&r.length),p=e,v=3432918353,S=461845907,z=0;z<h;)P=255&r.charCodeAt(z)|(255&r.charCodeAt(++z))<<8|(255&r.charCodeAt(++z))<<16|(255&r.charCodeAt(++z))<<24,++z,p=27492+(65535&(g=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*v+(((P>>>16)*v&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(P=0,o){case 3:P^=(255&r.charCodeAt(z+2))<<16;case 2:P^=(255&r.charCodeAt(z+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&r.charCodeAt(z)))*v+(((P>>>16)*v&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return p^=r.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var oi={exports:{}};oi.exports=function(r,e){for(var o,h=r.length,p=e^h,g=0;h>=4;)o=1540483477*(65535&(o=255&r.charCodeAt(g)|(255&r.charCodeAt(++g))<<8|(255&r.charCodeAt(++g))<<16|(255&r.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),h-=4,++g;switch(h){case 3:p^=(255&r.charCodeAt(g+2))<<16;case 2:p^=(255&r.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&r.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var co=rn.exports,rl=oi.exports;_n.exports=co,_n.exports.murmur3=co,_n.exports.murmur2=rl;class jo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,h,p){this.ids.push(vu(e)),this.positions.push(o,h,p)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let o=vu(e),h=0,p=this.ids.length-1;for(;h<p;){let v=h+p>>1;this.ids[v]>=o?p=v:h=v+1}let g=[];for(;this.ids[h]===o;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(e,o){let h=new Float64Array(e.ids),p=new Uint32Array(e.positions);return nl(h,p,0,h.length-1),o&&o.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(e){let o=new jo;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function vu(r){let e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:_n.exports(String(r))}function nl(r,e,o,h){for(;o<h;){let p=r[o+h>>1],g=o-1,v=h+1;for(;;){do g++;while(r[g]<p);do v--;while(r[v]>p);if(g>=v)break;Xi(r,g,v),Xi(e,3*g,3*v),Xi(e,3*g+1,3*v+1),Xi(e,3*g+2,3*v+2)}v-o<h-v?(nl(r,e,o,v),o=v+1):(nl(r,e,v+1,h),h=v)}}function Xi(r,e,o){let h=r[e];r[e]=r[o],r[o]=h}sr("FeaturePositionMap",jo);class ho{constructor(e,o){this.gl=e.gl,this.location=o}}class fo extends ho{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Za extends ho{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Ip extends ho{constructor(e,o){super(e,o),this.current=xe.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}let ox=new Float32Array(16);function kh(r){return[Vr(255*r.r,255*r.g),Vr(255*r.b,255*r.a)]}class il{constructor(e,o,h){this.value=e,this.uniformNames=o.map(p=>`u_${p}`),this.type=h}setUniform(e,o,h){e.set(h.constantOr(this.value))}getBinding(e,o,h){return this.type==="color"?new Ip(e,o):new fo(e,o)}}class Ya{constructor(e,o){this.uniformNames=o.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=e.tlbr}setUniform(e,o,h,p){let g=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&e.set(g)}getBinding(e,o,h){return h.substr(0,9)==="u_pattern"?new Za(e,o):new fo(e,o)}}class po{constructor(e,o,h,p){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(e,o,h,p,g){let v=this.paintVertexArray.length,S=this.expression.evaluate(new tn(0),o,{},p,[],g);this.paintVertexArray.resize(e),this._setPaintValue(v,e,S)}updatePaintArray(e,o,h,p){let g=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(e,o,g)}_setPaintValue(e,o,h){if(this.type==="color"){let p=kh(h);for(let g=e;g<o;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=e;p<o;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Li{constructor(e,o,h,p,g,v){this.expression=e,this.uniformNames=o.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(e,o,h,p,g){let v=this.expression.evaluate(new tn(this.zoom),o,{},p,[],g),S=this.expression.evaluate(new tn(this.zoom+1),o,{},p,[],g),P=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(P,e,v,S)}updatePaintArray(e,o,h,p){let g=this.expression.evaluate({zoom:this.zoom},h,p),v=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(e,o,g,v)}_setPaintValue(e,o,h,p){if(this.type==="color"){let g=kh(h),v=kh(p);for(let S=e;S<o;S++)this.paintVertexArray.emplace(S,g[0],g[1],v[0],v[1])}else{for(let g=e;g<o;g++)this.paintVertexArray.emplace(g,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){let h=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,p=x(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(p)}getBinding(e,o,h){return new fo(e,o)}}class Fo{constructor(e,o,h,p,g,v){this.expression=e,this.type=o,this.useIntegerZoom=h,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,o,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,o.patterns&&o.patterns[this.layerId],h)}updatePaintArray(e,o,h,p,g){this._setPaintValues(e,o,h.patterns&&h.patterns[this.layerId],g)}_setPaintValues(e,o,h,p){if(!p||!h)return;let{min:g,mid:v,max:S}=h,P=p[g],z=p[v],W=p[S];if(P&&z&&W)for(let q=e;q<o;q++)this.zoomInPaintVertexArray.emplace(q,z.tl[0],z.tl[1],z.br[0],z.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],z.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,z.tl[0],z.tl[1],z.br[0],z.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],z.pixelRatio,W.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,xn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,xn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zp{constructor(e,o,h){this.binders={},this._buffers=[];let p=[];for(let g in e.paint._values){if(!h(g))continue;let v=e.paint.get(g);if(!(v instanceof bi&&qr(v.property.specification)))continue;let S=ax(g,e.type),P=v.value,z=v.property.specification.type,W=v.property.useIntegerZoom,q=v.property.specification["property-type"],se=q==="cross-faded"||q==="cross-faded-data-driven";if(P.kind==="constant")this.binders[g]=se?new Ya(P.value,S):new il(P.value,S,z),p.push(`/u_${g}`);else if(P.kind==="source"||se){let ye=kp(g,z,"source");this.binders[g]=se?new Fo(P,z,W,o,ye,e.id):new po(P,S,z,ye),p.push(`/a_${g}`)}else{let ye=kp(g,z,"composite");this.binders[g]=new Li(P,S,z,W,o,ye),p.push(`/z_${g}`)}}this.cacheKey=p.sort().join("")}getMaxValue(e){let o=this.binders[e];return o instanceof po||o instanceof Li?o.maxValue:0}populatePaintArrays(e,o,h,p,g){for(let v in this.binders){let S=this.binders[v];(S instanceof po||S instanceof Li||S instanceof Fo)&&S.populatePaintArray(e,o,h,p,g)}}setConstantPatternPositions(e,o){for(let h in this.binders){let p=this.binders[h];p instanceof Ya&&p.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,h,p,g){let v=!1;for(let S in e){let P=o.getPositions(S);for(let z of P){let W=h.feature(z.index);for(let q in this.binders){let se=this.binders[q];if((se instanceof po||se instanceof Li||se instanceof Fo)&&se.expression.isStateDependent===!0){let ye=p.paint.get(q);se.expression=ye.value,se.updatePaintArray(z.start,z.end,W,e[S],g),v=!0}}}}return v}defines(){let e=[];for(let o in this.binders){let h=this.binders[o];(h instanceof il||h instanceof Ya)&&e.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return e}getBinderAttributes(){let e=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof po||h instanceof Li)for(let p=0;p<h.paintVertexAttributes.length;p++)e.push(h.paintVertexAttributes[p].name);else if(h instanceof Fo)for(let p=0;p<xn.members.length;p++)e.push(xn.members[p].name)}return e}getBinderUniforms(){let e=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof il||h instanceof Ya||h instanceof Li)for(let p of h.uniformNames)e.push(p)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){let h=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof il||g instanceof Ya||g instanceof Li){for(let v of g.uniformNames)if(o[v]){let S=g.getBinding(e,o[v],v);h.push({name:v,property:p,binding:S})}}}return h}setUniforms(e,o,h,p){for(let{name:g,property:v,binding:S}of o)this.binders[v].setUniform(S,p,h.get(v),g)}updatePaintBuffers(e){this._buffers=[];for(let o in this.binders){let h=this.binders[o];if(e&&h instanceof Fo){let p=e.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof po||h instanceof Li)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(let o in this.binders){let h=this.binders[o];(h instanceof po||h instanceof Li||h instanceof Fo)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let o=this.binders[e];(o instanceof po||o instanceof Li||o instanceof Fo)&&o.destroy()}}}class ya{constructor(e,o,h=()=>!0){this.programConfigurations={};for(let p of e)this.programConfigurations[p.id]=new zp(p,o,h);this.needsUpload=!1,this._featureMap=new jo,this._bufferOffset=0}populatePaintArrays(e,o,h,p,g,v){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(e,o,p,g,v);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,h,p){for(let g of h)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,o,g,p)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}}function ax(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function kp(r,e,o){let h={color:{source:d,composite:St},number:{source:Me,composite:d}},p=function(g){return{"line-pattern":{source:bn,composite:bn},"fill-pattern":{source:bn,composite:bn},"fill-extrusion-pattern":{source:bn,composite:bn}}[g]}(r);return p&&p[o]||h[e][o]}sr("ConstantBinder",il),sr("CrossFadedConstantBinder",Ya),sr("SourceExpressionBinder",po),sr("CrossFadedCompositeBinder",Fo),sr("CompositeExpressionBinder",Li),sr("ProgramConfiguration",zp,{omit:["_buffers"]}),sr("ProgramConfigurationSet",ya);var gn=8192;let Lh=Math.pow(2,14)-1,Lp=-Lh-1;function va(r){let e=gn/r.extent,o=r.loadGeometry();for(let h=0;h<o.length;h++){let p=o[h];for(let g=0;g<p.length;g++){let v=p[g],S=Math.round(v.x*e),P=Math.round(v.y*e);v.x=x(S,Lp,Lh),v.y=x(P,Lp,Lh),(S<v.x||S>v.x+1||P<v.y||P>v.y+1)&&K("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function ba(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?va(r):[]}}function bu(r,e,o,h,p){r.emplaceBack(2*e+(h+1)/2,2*o+(p+1)/2)}class Rh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new Fn,this.segments=new Er,this.programConfigurations=new ya(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,h){let p=this.layers[0],g=[],v=null,S=!1;p.type==="circle"&&(v=p.layout.get("circle-sort-key"),S=!v.isConstant());for(let{feature:P,id:z,index:W,sourceLayerIndex:q}of e){let se=this.layers[0]._featureFilter.needGeometry,ye=ba(P,se);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),ye,h))continue;let be=S?v.evaluate(ye,{},h):void 0,Ge={id:z,properties:P.properties,type:P.type,sourceLayerIndex:q,index:W,geometry:se?ye.geometry:va(P),patterns:{},sortKey:be};g.push(Ge)}S&&g.sort((P,z)=>P.sortKey-z.sortKey);for(let P of g){let{geometry:z,index:W,sourceLayerIndex:q}=P,se=e[W].feature;this.addFeature(P,z,W,h),o.featureIndex.insert(se,z,W,q,this.index)}}update(e,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,mn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,h,p){for(let g of o)for(let v of g){let S=v.x,P=v.y;if(S<0||S>=gn||P<0||P>=gn)continue;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),W=z.vertexLength;bu(this.layoutVertexArray,S,P,-1,-1),bu(this.layoutVertexArray,S,P,1,-1),bu(this.layoutVertexArray,S,P,1,1),bu(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{},p)}}function Rp(r,e){for(let o=0;o<r.length;o++)if(Xa(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(Xa(r,e[o]))return!0;return!!jh(r,e)}function sx(r,e,o){return!!Xa(r,e)||!!Fh(e,r,o)}function jp(r,e){if(r.length===1)return Vp(e,r[0]);for(let o=0;o<e.length;o++){let h=e[o];for(let p=0;p<h.length;p++)if(Xa(r,h[p]))return!0}for(let o=0;o<r.length;o++)if(Vp(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(jh(r,e[o]))return!0;return!1}function lx(r,e,o){if(r.length>1){if(jh(r,e))return!0;for(let h=0;h<e.length;h++)if(Fh(e[h],r,o))return!0}for(let h=0;h<r.length;h++)if(Fh(r[h],e,o))return!0;return!1}function jh(r,e){if(r.length===0||e.length===0)return!1;for(let o=0;o<r.length-1;o++){let h=r[o],p=r[o+1];for(let g=0;g<e.length-1;g++)if(ux(h,p,e[g],e[g+1]))return!0}return!1}function ux(r,e,o,h){return F(r,o,h)!==F(e,o,h)&&F(r,e,o)!==F(r,e,h)}function Fh(r,e,o){let h=o*o;if(e.length===1)return r.distSqr(e[0])<h;for(let p=1;p<e.length;p++)if(Fp(r,e[p-1],e[p])<h)return!0;return!1}function Fp(r,e,o){let h=e.distSqr(o);if(h===0)return r.distSqr(e);let p=((r.x-e.x)*(o.x-e.x)+(r.y-e.y)*(o.y-e.y))/h;return r.distSqr(p<0?e:p>1?o:o.sub(e)._mult(p)._add(e))}function Vp(r,e){let o,h,p,g=!1;for(let v=0;v<r.length;v++){o=r[v];for(let S=0,P=o.length-1;S<o.length;P=S++)h=o[S],p=o[P],h.y>e.y!=p.y>e.y&&e.x<(p.x-h.x)*(e.y-h.y)/(p.y-h.y)+h.x&&(g=!g)}return g}function Xa(r,e){let o=!1;for(let h=0,p=r.length-1;h<r.length;p=h++){let g=r[h],v=r[p];g.y>e.y!=v.y>e.y&&e.x<(v.x-g.x)*(e.y-g.y)/(v.y-g.y)+g.x&&(o=!o)}return o}function cx(r,e,o){let h=o[0],p=o[2];if(r.x<h.x&&e.x<h.x||r.x>p.x&&e.x>p.x||r.y<h.y&&e.y<h.y||r.y>p.y&&e.y>p.y)return!1;let g=F(r,e,o[0]);return g!==F(r,e,o[1])||g!==F(r,e,o[2])||g!==F(r,e,o[3])}function ol(r,e,o){let h=e.paint.get(r).value;return h.kind==="constant"?h.value:o.programConfigurations.get(e.id).getMaxValue(r)}function xu(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function _u(r,e,o,h,p){if(!e[0]&&!e[1])return r;let g=je.convert(e)._mult(p);o==="viewport"&&g._rotate(-h);let v=[];for(let S=0;S<r.length;S++)v.push(r[S].sub(g));return v}sr("CircleBucket",Rh,{omit:["layers"]});let hx=new Tn({"circle-sort-key":new vr(fe.layout_circle["circle-sort-key"])});var dx={paint:new Tn({"circle-radius":new vr(fe.paint_circle["circle-radius"]),"circle-color":new vr(fe.paint_circle["circle-color"]),"circle-blur":new vr(fe.paint_circle["circle-blur"]),"circle-opacity":new vr(fe.paint_circle["circle-opacity"]),"circle-translate":new hr(fe.paint_circle["circle-translate"]),"circle-translate-anchor":new hr(fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hr(fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hr(fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vr(fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vr(fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vr(fe.paint_circle["circle-stroke-opacity"])}),layout:hx},Vn=1e-6,Bn=typeof Float32Array!="undefined"?Float32Array:Array;function Bp(){var r=new Bn(9);return Bn!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Vh(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Np(r,e,o){var h=e[0],p=e[1],g=e[2],v=e[3],S=e[4],P=e[5],z=e[6],W=e[7],q=e[8],se=e[9],ye=e[10],be=e[11],Ge=e[12],Ue=e[13],pt=e[14],Tt=e[15],ht=o[0],wt=o[1],Bt=o[2],Ft=o[3];return r[0]=ht*h+wt*S+Bt*q+Ft*Ge,r[1]=ht*p+wt*P+Bt*se+Ft*Ue,r[2]=ht*g+wt*z+Bt*ye+Ft*pt,r[3]=ht*v+wt*W+Bt*be+Ft*Tt,r[4]=(ht=o[4])*h+(wt=o[5])*S+(Bt=o[6])*q+(Ft=o[7])*Ge,r[5]=ht*p+wt*P+Bt*se+Ft*Ue,r[6]=ht*g+wt*z+Bt*ye+Ft*pt,r[7]=ht*v+wt*W+Bt*be+Ft*Tt,r[8]=(ht=o[8])*h+(wt=o[9])*S+(Bt=o[10])*q+(Ft=o[11])*Ge,r[9]=ht*p+wt*P+Bt*se+Ft*Ue,r[10]=ht*g+wt*z+Bt*ye+Ft*pt,r[11]=ht*v+wt*W+Bt*be+Ft*Tt,r[12]=(ht=o[12])*h+(wt=o[13])*S+(Bt=o[14])*q+(Ft=o[15])*Ge,r[13]=ht*p+wt*P+Bt*se+Ft*Ue,r[14]=ht*g+wt*z+Bt*ye+Ft*pt,r[15]=ht*v+wt*W+Bt*be+Ft*Tt,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var al,fx=Np;function Up(){var r=new Bn(3);return Bn!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function $p(r,e,o){var h=new Bn(3);return h[0]=r,h[1]=e,h[2]=o,h}function wu(r,e,o){var h=e[0],p=e[1],g=e[2],v=e[3];return r[0]=o[0]*h+o[4]*p+o[8]*g+o[12]*v,r[1]=o[1]*h+o[5]*p+o[9]*g+o[13]*v,r[2]=o[2]*h+o[6]*p+o[10]*g+o[14]*v,r[3]=o[3]*h+o[7]*p+o[11]*g+o[15]*v,r}function Wp(){var r=new Bn(4);return Bn!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Hp(r,e){let o=wu([],[r.x,r.y,0,1],e);return new je(o[0]/o[3],o[1]/o[3])}Up(),al=new Bn(4),Bn!=Float32Array&&(al[0]=0,al[1]=0,al[2]=0,al[3]=0),Up(),$p(1,0,0),$p(0,1,0),Wp(),Wp(),Bp(),function(){var r;r=new Bn(2),Bn!=Float32Array&&(r[0]=0,r[1]=0)}();class Gp extends Rh{}sr("HeatmapBucket",Gp,{omit:["layers"]});var px={paint:new Tn({"heatmap-radius":new vr(fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vr(fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hr(fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gi(fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hr(fe.paint_heatmap["heatmap-opacity"])})};function Bh(r,{width:e,height:o},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==e*o*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${e*o*h}`)}else p=new Uint8Array(e*o*h);return r.width=e,r.height=o,r.data=p,r}function Kp(r,{width:e,height:o},h){if(e===r.width&&o===r.height)return;let p=Bh({},{width:e,height:o},h);Nh(r,p,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,o)},h),r.width=e,r.height=o,r.data=p.data}function Nh(r,e,o,h,p,g){if(p.width===0||p.height===0)return e;if(p.width>r.width||p.height>r.height||o.x>r.width-p.width||o.y>r.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>e.width||p.height>e.height||h.x>e.width-p.width||h.y>e.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let v=r.data,S=e.data;if(v===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){let z=((o.y+P)*r.width+o.x)*g,W=((h.y+P)*e.width+h.x)*g;for(let q=0;q<p.width*g;q++)S[W+q]=v[z+q]}return e}class sl{constructor(e,o){Bh(this,e,1,o)}resize(e){Kp(this,e,1)}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,h,p,g){Nh(e,o,h,p,g,1)}}class ci{constructor(e,o){Bh(this,e,4,o)}resize(e){Kp(this,e,4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ci({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,h,p,g){Nh(e,o,h,p,g,4)}}function Zp(r){let e={},o=r.resolution||256,h=r.clips?r.clips.length:1,p=r.image||new ci({width:o,height:h});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);let g=(v,S,P)=>{e[r.evaluationKey]=P;let z=r.expression.evaluate(e);p.data[v+S+0]=Math.floor(255*z.r/z.a),p.data[v+S+1]=Math.floor(255*z.g/z.a),p.data[v+S+2]=Math.floor(255*z.b/z.a),p.data[v+S+3]=Math.floor(255*z.a)};if(r.clips)for(let v=0,S=0;v<h;++v,S+=4*o)for(let P=0,z=0;P<o;P++,z+=4){let W=P/(o-1),{start:q,end:se}=r.clips[v];g(S,z,q*(1-W)+se*W)}else for(let v=0,S=0;v<o;v++,S+=4)g(0,S,v/(o-1));return p}sr("AlphaImage",sl),sr("RGBAImage",ci);var mx={paint:new Tn({"hillshade-illumination-direction":new hr(fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new hr(fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hr(fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hr(fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hr(fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hr(fe.paint_hillshade["hillshade-accent-color"])})};let gx=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:yx}=gx;var Cu={exports:{}};function Su(r,e,o){o=o||2;var h,p,g,v,S,P,z,W=e&&e.length,q=W?e[0]*o:r.length,se=Yp(r,0,q,o,!0),ye=[];if(!se||se.next===se.prev)return ye;if(W&&(se=function(Ge,Ue,pt,Tt){var ht,wt,Bt,Ft=[];for(ht=0,wt=Ue.length;ht<wt;ht++)(Bt=Yp(Ge,Ue[ht]*Tt,ht<wt-1?Ue[ht+1]*Tt:Ge.length,Tt,!1))===Bt.next&&(Bt.steiner=!0),Ft.push(Tx(Bt));for(Ft.sort(wx),ht=0;ht<Ft.length;ht++)pt=Cx(Ft[ht],pt);return pt}(r,e,se,o)),r.length>80*o){h=g=r[0],p=v=r[1];for(var be=o;be<q;be+=o)(S=r[be])<h&&(h=S),(P=r[be+1])<p&&(p=P),S>g&&(g=S),P>v&&(v=P);z=(z=Math.max(g-h,v-p))!==0?32767/z:0}return ll(se,ye,o,h,p,z,0),ye}function Yp(r,e,o,h,p){var g,v;if(p===Wh(r,e,o,h)>0)for(g=e;g<o;g+=h)v=qp(g,r[g],r[g+1],v);else for(g=o-h;g>=e;g-=h)v=qp(g,r[g],r[g+1],v);return v&&Tu(v,v.next)&&(cl(v),v=v.next),v}function xa(r,e){if(!r)return r;e||(e=r);var o,h=r;do if(o=!1,h.steiner||!Tu(h,h.next)&&un(h.prev,h,h.next)!==0)h=h.next;else{if(cl(h),(h=e=h.prev)===h.next)break;o=!0}while(o||h!==e);return e}function ll(r,e,o,h,p,g,v){if(r){!v&&g&&function(W,q,se,ye){var be=W;do be.z===0&&(be.z=Uh(be.x,be.y,q,se,ye)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next;while(be!==W);be.prevZ.nextZ=null,be.prevZ=null,function(Ge){var Ue,pt,Tt,ht,wt,Bt,Ft,ar,cr=1;do{for(pt=Ge,Ge=null,wt=null,Bt=0;pt;){for(Bt++,Tt=pt,Ft=0,Ue=0;Ue<cr&&(Ft++,Tt=Tt.nextZ);Ue++);for(ar=cr;Ft>0||ar>0&&Tt;)Ft!==0&&(ar===0||!Tt||pt.z<=Tt.z)?(ht=pt,pt=pt.nextZ,Ft--):(ht=Tt,Tt=Tt.nextZ,ar--),wt?wt.nextZ=ht:Ge=ht,ht.prevZ=wt,wt=ht;pt=Tt}wt.nextZ=null,cr*=2}while(Bt>1)}(be)}(r,h,p,g);for(var S,P,z=r;r.prev!==r.next;)if(S=r.prev,P=r.next,g?bx(r,h,p,g):vx(r))e.push(S.i/o|0),e.push(r.i/o|0),e.push(P.i/o|0),cl(r),r=P.next,z=P.next;else if((r=P)===z){v?v===1?ll(r=xx(xa(r),e,o),e,o,h,p,g,2):v===2&&_x(r,e,o,h,p,g):ll(xa(r),e,o,h,p,g,1);break}}}function vx(r){var e=r.prev,o=r,h=r.next;if(un(e,o,h)>=0)return!1;for(var p=e.x,g=o.x,v=h.x,S=e.y,P=o.y,z=h.y,W=p<g?p<v?p:v:g<v?g:v,q=S<P?S<z?S:z:P<z?P:z,se=p>g?p>v?p:v:g>v?g:v,ye=S>P?S>z?S:z:P>z?P:z,be=h.next;be!==e;){if(be.x>=W&&be.x<=se&&be.y>=q&&be.y<=ye&&Ja(p,S,g,P,v,z,be.x,be.y)&&un(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function bx(r,e,o,h){var p=r.prev,g=r,v=r.next;if(un(p,g,v)>=0)return!1;for(var S=p.x,P=g.x,z=v.x,W=p.y,q=g.y,se=v.y,ye=S<P?S<z?S:z:P<z?P:z,be=W<q?W<se?W:se:q<se?q:se,Ge=S>P?S>z?S:z:P>z?P:z,Ue=W>q?W>se?W:se:q>se?q:se,pt=Uh(ye,be,e,o,h),Tt=Uh(Ge,Ue,e,o,h),ht=r.prevZ,wt=r.nextZ;ht&&ht.z>=pt&&wt&&wt.z<=Tt;){if(ht.x>=ye&&ht.x<=Ge&&ht.y>=be&&ht.y<=Ue&&ht!==p&&ht!==v&&Ja(S,W,P,q,z,se,ht.x,ht.y)&&un(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,wt.x>=ye&&wt.x<=Ge&&wt.y>=be&&wt.y<=Ue&&wt!==p&&wt!==v&&Ja(S,W,P,q,z,se,wt.x,wt.y)&&un(wt.prev,wt,wt.next)>=0))return!1;wt=wt.nextZ}for(;ht&&ht.z>=pt;){if(ht.x>=ye&&ht.x<=Ge&&ht.y>=be&&ht.y<=Ue&&ht!==p&&ht!==v&&Ja(S,W,P,q,z,se,ht.x,ht.y)&&un(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;wt&&wt.z<=Tt;){if(wt.x>=ye&&wt.x<=Ge&&wt.y>=be&&wt.y<=Ue&&wt!==p&&wt!==v&&Ja(S,W,P,q,z,se,wt.x,wt.y)&&un(wt.prev,wt,wt.next)>=0)return!1;wt=wt.nextZ}return!0}function xx(r,e,o){var h=r;do{var p=h.prev,g=h.next.next;!Tu(p,g)&&Xp(p,h,h.next,g)&&ul(p,g)&&ul(g,p)&&(e.push(p.i/o|0),e.push(h.i/o|0),e.push(g.i/o|0),cl(h),cl(h.next),h=r=g),h=h.next}while(h!==r);return xa(h)}function _x(r,e,o,h,p,g){var v=r;do{for(var S=v.next.next;S!==v.prev;){if(v.i!==S.i&&Ex(v,S)){var P=Jp(v,S);return v=xa(v,v.next),P=xa(P,P.next),ll(v,e,o,h,p,g,0),void ll(P,e,o,h,p,g,0)}S=S.next}v=v.next}while(v!==r)}function wx(r,e){return r.x-e.x}function Cx(r,e){var o=function(p,g){var v,S=g,P=p.x,z=p.y,W=-1/0;do{if(z<=S.y&&z>=S.next.y&&S.next.y!==S.y){var q=S.x+(z-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(q<=P&&q>W&&(W=q,v=S.x<S.next.x?S:S.next,q===P))return v}S=S.next}while(S!==g);if(!v)return null;var se,ye=v,be=v.x,Ge=v.y,Ue=1/0;S=v;do P>=S.x&&S.x>=be&&P!==S.x&&Ja(z<Ge?P:W,z,be,Ge,z<Ge?W:P,z,S.x,S.y)&&(se=Math.abs(z-S.y)/(P-S.x),ul(S,p)&&(se<Ue||se===Ue&&(S.x>v.x||S.x===v.x&&Sx(v,S)))&&(v=S,Ue=se)),S=S.next;while(S!==ye);return v}(r,e);if(!o)return e;var h=Jp(o,r);return xa(h,h.next),xa(o,o.next)}function Sx(r,e){return un(r.prev,r,e.prev)<0&&un(e.next,r,r.next)<0}function Uh(r,e,o,h,p){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-o)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-h)*p|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Tx(r){var e=r,o=r;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==r);return o}function Ja(r,e,o,h,p,g,v,S){return(p-v)*(e-S)>=(r-v)*(g-S)&&(r-v)*(h-S)>=(o-v)*(e-S)&&(o-v)*(g-S)>=(p-v)*(h-S)}function Ex(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(o,h){var p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==h.i&&p.next.i!==h.i&&Xp(p,p.next,o,h))return!0;p=p.next}while(p!==o);return!1}(r,e)&&(ul(r,e)&&ul(e,r)&&function(o,h){var p=o,g=!1,v=(o.x+h.x)/2,S=(o.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&v<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==o);return g}(r,e)&&(un(r.prev,r,e.prev)||un(r,e.prev,e))||Tu(r,e)&&un(r.prev,r,r.next)>0&&un(e.prev,e,e.next)>0)}function un(r,e,o){return(e.y-r.y)*(o.x-e.x)-(e.x-r.x)*(o.y-e.y)}function Tu(r,e){return r.x===e.x&&r.y===e.y}function Xp(r,e,o,h){var p=Pu(un(r,e,o)),g=Pu(un(r,e,h)),v=Pu(un(o,h,r)),S=Pu(un(o,h,e));return p!==g&&v!==S||!(p!==0||!Eu(r,o,e))||!(g!==0||!Eu(r,h,e))||!(v!==0||!Eu(o,r,h))||!(S!==0||!Eu(o,e,h))}function Eu(r,e,o){return e.x<=Math.max(r.x,o.x)&&e.x>=Math.min(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&e.y>=Math.min(r.y,o.y)}function Pu(r){return r>0?1:r<0?-1:0}function ul(r,e){return un(r.prev,r,r.next)<0?un(r,e,r.next)>=0&&un(r,r.prev,e)>=0:un(r,e,r.prev)<0||un(r,r.next,e)<0}function Jp(r,e){var o=new $h(r.i,r.x,r.y),h=new $h(e.i,e.x,e.y),p=r.next,g=e.prev;return r.next=e,e.prev=r,o.next=p,p.prev=o,h.next=o,o.prev=h,g.next=h,h.prev=g,h}function qp(r,e,o,h){var p=new $h(r,e,o);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function cl(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function $h(r,e,o){this.i=r,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wh(r,e,o,h){for(var p=0,g=e,v=o-h;g<o;g+=h)p+=(r[v]-r[g])*(r[g+1]+r[v+1]),v=g;return p}function Px(r,e,o,h,p){Qp(r,e,o||0,h||r.length-1,p||Ox)}function Qp(r,e,o,h,p){for(;h>o;){if(h-o>600){var g=h-o+1,v=e-o+1,S=Math.log(g),P=.5*Math.exp(2*S/3),z=.5*Math.sqrt(S*P*(g-P)/g)*(v-g/2<0?-1:1);Qp(r,e,Math.max(o,Math.floor(e-v*P/g+z)),Math.min(h,Math.floor(e+(g-v)*P/g+z)),p)}var W=r[e],q=o,se=h;for(hl(r,o,e),p(r[h],W)>0&&hl(r,o,h);q<se;){for(hl(r,q,se),q++,se--;p(r[q],W)<0;)q++;for(;p(r[se],W)>0;)se--}p(r[o],W)===0?hl(r,o,se):hl(r,++se,h),se<=e&&(o=se+1),e<=se&&(h=se-1)}}function hl(r,e,o){var h=r[e];r[e]=r[o],r[o]=h}function Ox(r,e){return r<e?-1:r>e?1:0}function Hh(r,e){let o=r.length;if(o<=1)return[r];let h=[],p,g;for(let v=0;v<o;v++){let S=Q(r[v]);S!==0&&(r[v].area=Math.abs(S),g===void 0&&(g=S<0),g===S<0?(p&&h.push(p),p=[r[v]]):p.push(r[v]))}if(p&&h.push(p),e>1)for(let v=0;v<h.length;v++)h[v].length<=e||(Px(h[v],e,1,h[v].length-1,Mx),h[v]=h[v].slice(0,e));return h}function Mx(r,e){return e.area-r.area}function Gh(r,e,o){let h=o.patternDependencies,p=!1;for(let g of e){let v=g.paint.get(`${r}-pattern`);v.isConstant()||(p=!0);let S=v.constantOr(null);S&&(p=!0,h[S.to]=!0,h[S.from]=!0)}return p}function Kh(r,e,o,h,p){let g=p.patternDependencies;for(let v of e){let S=v.paint.get(`${r}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},o,{},p.availableImages),z=S.evaluate({zoom:h},o,{},p.availableImages),W=S.evaluate({zoom:h+1},o,{},p.availableImages);P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,W=W&&W.name?W.name:W,g[P]=!0,g[z]=!0,g[W]=!0,o.patterns[v.id]={min:P,mid:z,max:W}}}return o}Cu.exports=Su,Cu.exports.default=Su,Su.deviation=function(r,e,o,h){var p=e&&e.length,g=Math.abs(Wh(r,0,p?e[0]*o:r.length,o));if(p)for(var v=0,S=e.length;v<S;v++)g-=Math.abs(Wh(r,e[v]*o,v<S-1?e[v+1]*o:r.length,o));var P=0;for(v=0;v<h.length;v+=3){var z=h[v]*o,W=h[v+1]*o,q=h[v+2]*o;P+=Math.abs((r[z]-r[q])*(r[W+1]-r[z+1])-(r[z]-r[W])*(r[q+1]-r[z+1]))}return g===0&&P===0?0:Math.abs((P-g)/g)},Su.flatten=function(r){for(var e=r[0][0].length,o={vertices:[],holes:[],dimensions:e},h=0,p=0;p<r.length;p++){for(var g=0;g<r[p].length;g++)for(var v=0;v<e;v++)o.vertices.push(r[p][g][v]);p>0&&o.holes.push(h+=r[p-1].length)}return o};class Zh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nr,this.indexArray=new Fn,this.indexArray2=new ki,this.programConfigurations=new ya(e.layers,e.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,h){this.hasPattern=Gh("fill",this.layers,o);let p=this.layers[0].layout.get("fill-sort-key"),g=!p.isConstant(),v=[];for(let{feature:S,id:P,index:z,sourceLayerIndex:W}of e){let q=this.layers[0]._featureFilter.needGeometry,se=ba(S,q);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),se,h))continue;let ye=g?p.evaluate(se,{},h,o.availableImages):void 0,be={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:z,geometry:q?se.geometry:va(S),patterns:{},sortKey:ye};v.push(be)}g&&v.sort((S,P)=>S.sortKey-P.sortKey);for(let S of v){let{geometry:P,index:z,sourceLayerIndex:W}=S;if(this.hasPattern){let q=Kh("fill",this.layers,S,this.zoom,o);this.patternFeatures.push(q)}else this.addFeature(S,P,z,h,{});o.featureIndex.insert(e[z].feature,P,z,W,this.index)}}update(e,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,h)}addFeatures(e,o,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yx),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,h,p,g){for(let v of Hh(o,500)){let S=0;for(let ye of v)S+=ye.length;let P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),z=P.vertexLength,W=[],q=[];for(let ye of v){if(ye.length===0)continue;ye!==v[0]&&q.push(W.length/2);let be=this.segments2.prepareSegment(ye.length,this.layoutVertexArray,this.indexArray2),Ge=be.vertexLength;this.layoutVertexArray.emplaceBack(ye[0].x,ye[0].y),this.indexArray2.emplaceBack(Ge+ye.length-1,Ge),W.push(ye[0].x),W.push(ye[0].y);for(let Ue=1;Ue<ye.length;Ue++)this.layoutVertexArray.emplaceBack(ye[Ue].x,ye[Ue].y),this.indexArray2.emplaceBack(Ge+Ue-1,Ge+Ue),W.push(ye[Ue].x),W.push(ye[Ue].y);be.vertexLength+=ye.length,be.primitiveLength+=ye.length}let se=Cu.exports(W,q);for(let ye=0;ye<se.length;ye+=3)this.indexArray.emplaceBack(z+se[ye],z+se[ye+1],z+se[ye+2]);P.vertexLength+=S,P.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,g,p)}}sr("FillBucket",Zh,{omit:["layers","patternFeatures"]});let Dx=new Tn({"fill-sort-key":new vr(fe.layout_fill["fill-sort-key"])});var Ax={paint:new Tn({"fill-antialias":new hr(fe.paint_fill["fill-antialias"]),"fill-opacity":new vr(fe.paint_fill["fill-opacity"]),"fill-color":new vr(fe.paint_fill["fill-color"]),"fill-outline-color":new vr(fe.paint_fill["fill-outline-color"]),"fill-translate":new hr(fe.paint_fill["fill-translate"]),"fill-translate-anchor":new hr(fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ro(fe.paint_fill["fill-pattern"])}),layout:Dx};let Ix=hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zx=hn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:kx}=Ix;var Vo={},Lx=je,em=qa;function qa(r,e,o,h,p){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=p,r.readFields(Rx,this,e)}function Rx(r,e,o){r==1?e.id=o.readVarint():r==2?function(h,p){for(var g=h.readVarint()+h.pos;h.pos<g;){var v=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[v]=S}}(o,e):r==3?e.type=o.readVarint():r==4&&(e._geometry=o.pos)}function jx(r){for(var e,o,h=0,p=0,g=r.length,v=g-1;p<g;v=p++)h+=((o=r[v]).x-(e=r[p]).x)*(e.y+o.y);return h}qa.types=["Unknown","Point","LineString","Polygon"],qa.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,o=r.readVarint()+r.pos,h=1,p=0,g=0,v=0,S=[];r.pos<o;){if(p<=0){var P=r.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)g+=r.readSVarint(),v+=r.readSVarint(),h===1&&(e&&S.push(e),e=[]),e.push(new Lx(g,v));else{if(h!==7)throw new Error("unknown command "+h);e&&e.push(e[0].clone())}}return e&&S.push(e),S},qa.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,o=1,h=0,p=0,g=0,v=1/0,S=-1/0,P=1/0,z=-1/0;r.pos<e;){if(h<=0){var W=r.readVarint();o=7&W,h=W>>3}if(h--,o===1||o===2)(p+=r.readSVarint())<v&&(v=p),p>S&&(S=p),(g+=r.readSVarint())<P&&(P=g),g>z&&(z=g);else if(o!==7)throw new Error("unknown command "+o)}return[v,P,S,z]},qa.prototype.toGeoJSON=function(r,e,o){var h,p,g=this.extent*Math.pow(2,o),v=this.extent*r,S=this.extent*e,P=this.loadGeometry(),z=qa.types[this.type];function W(ye){for(var be=0;be<ye.length;be++){var Ge=ye[be];ye[be]=[360*(Ge.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ge.y+S)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(h=0;h<P.length;h++)q[h]=P[h][0];W(P=q);break;case 2:for(h=0;h<P.length;h++)W(P[h]);break;case 3:for(P=function(ye){var be=ye.length;if(be<=1)return[ye];for(var Ge,Ue,pt=[],Tt=0;Tt<be;Tt++){var ht=jx(ye[Tt]);ht!==0&&(Ue===void 0&&(Ue=ht<0),Ue===ht<0?(Ge&&pt.push(Ge),Ge=[ye[Tt]]):Ge.push(ye[Tt]))}return Ge&&pt.push(Ge),pt}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)W(P[h][p])}P.length===1?P=P[0]:z="Multi"+z;var se={type:"Feature",geometry:{type:z,coordinates:P},properties:this.properties};return"id"in this&&(se.id=this.id),se};var Fx=em,tm=rm;function rm(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Vx,this,e),this.length=this._features.length}function Vx(r,e,o){r===15?e.version=o.readVarint():r===1?e.name=o.readString():r===5?e.extent=o.readVarint():r===2?e._features.push(o.pos):r===3?e._keys.push(o.readString()):r===4&&e._values.push(function(h){for(var p=null,g=h.readVarint()+h.pos;h.pos<g;){var v=h.readVarint()>>3;p=v===1?h.readString():v===2?h.readFloat():v===3?h.readDouble():v===4?h.readVarint64():v===5?h.readVarint():v===6?h.readSVarint():v===7?h.readBoolean():null}return p}(o))}rm.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new Fx(this._pbf,e,this.extent,this._keys,this._values)};var Bx=tm;function Nx(r,e,o){if(r===3){var h=new Bx(o,o.readVarint()+o.pos);h.length&&(e[h.name]=h)}}Vo.VectorTile=function(r,e){this.layers=r.readFields(Nx,{},e)},Vo.VectorTileFeature=em,Vo.VectorTileLayer=tm;let Ux=Vo.VectorTileFeature.types,Yh=Math.pow(2,13);function dl(r,e,o,h,p,g,v,S){r.emplaceBack(e,o,2*Math.floor(h*Yh)+v,p*Yh*2,g*Yh*2,Math.round(S))}class Xh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ir,this.centroidVertexArray=new mr,this.indexArray=new Fn,this.programConfigurations=new ya(e.layers,e.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,h){this.features=[],this.hasPattern=Gh("fill-extrusion",this.layers,o);for(let{feature:p,id:g,index:v,sourceLayerIndex:S}of e){let P=this.layers[0]._featureFilter.needGeometry,z=ba(p,P);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),z,h))continue;let W={id:g,sourceLayerIndex:S,index:v,geometry:P?z.geometry:va(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Kh("fill-extrusion",this.layers,W,this.zoom,o)):this.addFeature(W,W.geometry,v,h,{}),o.featureIndex.insert(p,W.geometry,v,S,this.index,!0)}}addFeatures(e,o,h){for(let p of this.features){let{geometry:g}=p;this.addFeature(p,g,p.index,o,h)}}update(e,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kx),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,zx.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,o,h,p,g){let v={x:0,y:0,vertexCount:0};for(let S of Hh(o,500)){let P=0;for(let be of S)P+=be.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let be of S){if(be.length===0||Wx(be))continue;let Ge=0;for(let Ue=0;Ue<be.length;Ue++){let pt=be[Ue];if(Ue>=1){let Tt=be[Ue-1];if(!$x(pt,Tt)){z.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ht=pt.sub(Tt)._perp()._unit(),wt=Tt.dist(pt);Ge+wt>32768&&(Ge=0),dl(this.layoutVertexArray,pt.x,pt.y,ht.x,ht.y,0,0,Ge),dl(this.layoutVertexArray,pt.x,pt.y,ht.x,ht.y,0,1,Ge),v.x+=2*pt.x,v.y+=2*pt.y,v.vertexCount+=2,Ge+=wt,dl(this.layoutVertexArray,Tt.x,Tt.y,ht.x,ht.y,0,0,Ge),dl(this.layoutVertexArray,Tt.x,Tt.y,ht.x,ht.y,0,1,Ge),v.x+=2*Tt.x,v.y+=2*Tt.y,v.vertexCount+=2;let Bt=z.vertexLength;this.indexArray.emplaceBack(Bt,Bt+2,Bt+1),this.indexArray.emplaceBack(Bt+1,Bt+2,Bt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+P>Er.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),Ux[e.type]!=="Polygon")continue;let W=[],q=[],se=z.vertexLength;for(let be of S)if(be.length!==0){be!==S[0]&&q.push(W.length/2);for(let Ge=0;Ge<be.length;Ge++){let Ue=be[Ge];dl(this.layoutVertexArray,Ue.x,Ue.y,0,0,1,1,0),v.x+=Ue.x,v.y+=Ue.y,v.vertexCount+=1,W.push(Ue.x),W.push(Ue.y)}}let ye=Cu.exports(W,q);for(let be=0;be<ye.length;be+=3)this.indexArray.emplaceBack(se+ye[be],se+ye[be+2],se+ye[be+1]);z.primitiveLength+=ye.length/3,z.vertexLength+=P}for(let S=0;S<v.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(v.x/v.vertexCount),Math.floor(v.y/v.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,g,p)}}function $x(r,e){return r.x===e.x&&(r.x<0||r.x>gn)||r.y===e.y&&(r.y<0||r.y>gn)}function Wx(r){return r.every(e=>e.x<0)||r.every(e=>e.x>gn)||r.every(e=>e.y<0)||r.every(e=>e.y>gn)}sr("FillExtrusionBucket",Xh,{omit:["layers","features"]});var Hx={paint:new Tn({"fill-extrusion-opacity":new hr(fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vr(fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hr(fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hr(fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ro(fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vr(fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vr(fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hr(fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function fl(r,e){return r.x*e.x+r.y*e.y}function nm(r,e){if(r.length===1){let o=0,h=e[o++],p;for(;!p||h.equals(p);)if(p=e[o++],!p)return 1/0;for(;o<e.length;o++){let g=e[o],v=r[0],S=p.sub(h),P=g.sub(h),z=v.sub(h),W=fl(S,S),q=fl(S,P),se=fl(P,P),ye=fl(z,S),be=fl(z,P),Ge=W*se-q*q,Ue=(se*ye-q*be)/Ge,pt=(W*be-q*ye)/Ge,Tt=h.z*(1-Ue-pt)+p.z*Ue+g.z*pt;if(isFinite(Tt))return Tt}return 1/0}{let o=1/0;for(let h of e)o=Math.min(o,h.z);return o}}let Gx=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Kx}=Gx,Zx=hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yx}=Zx,Xx=Vo.VectorTileFeature.types,Jx=Math.cos(Math.PI/180*37.5),im=Math.pow(2,14)/.5;class Jh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new kr,this.layoutVertexArray2=new $r,this.indexArray=new Fn,this.programConfigurations=new ya(e.layers,e.zoom),this.segments=new Er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,h){this.hasPattern=Gh("line",this.layers,o);let p=this.layers[0].layout.get("line-sort-key"),g=!p.isConstant(),v=[];for(let{feature:S,id:P,index:z,sourceLayerIndex:W}of e){let q=this.layers[0]._featureFilter.needGeometry,se=ba(S,q);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),se,h))continue;let ye=g?p.evaluate(se,{},h):void 0,be={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:z,geometry:q?se.geometry:va(S),patterns:{},sortKey:ye};v.push(be)}g&&v.sort((S,P)=>S.sortKey-P.sortKey);for(let S of v){let{geometry:P,index:z,sourceLayerIndex:W}=S;if(this.hasPattern){let q=Kh("line",this.layers,S,this.zoom,o);this.patternFeatures.push(q)}else this.addFeature(S,P,z,h,{});o.featureIndex.insert(e[z].feature,P,z,W,this.index)}}update(e,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,h)}addFeatures(e,o,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Yx)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kx),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,h,p,g){let v=this.layers[0].layout,S=v.get("line-join").evaluate(e,{}),P=v.get("line-cap"),z=v.get("line-miter-limit"),W=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(let q of o)this.addLine(q,e,S,P,z,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,g,p)}addLine(e,o,h,p,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pt=0;pt<e.length-1;pt++)this.totalDistance+=e[pt].dist(e[pt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let S=Xx[o.type]==="Polygon",P=e.length;for(;P>=2&&e[P-1].equals(e[P-2]);)P--;let z=0;for(;z<P-1&&e[z].equals(e[z+1]);)z++;if(P<(S?3:2))return;h==="bevel"&&(g=1.05);let W=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray),se,ye,be,Ge,Ue;this.e1=this.e2=-1,S&&(se=e[P-2],Ue=e[z].sub(se)._unit()._perp());for(let pt=z;pt<P;pt++){if(be=pt===P-1?S?e[z+1]:void 0:e[pt+1],be&&e[pt].equals(be))continue;Ue&&(Ge=Ue),se&&(ye=se),se=e[pt],Ue=be?be.sub(se)._unit()._perp():Ge,Ge=Ge||Ue;let Tt=Ge.add(Ue);Tt.x===0&&Tt.y===0||Tt._unit();let ht=Ge.x*Ue.x+Ge.y*Ue.y,wt=Tt.x*Ue.x+Tt.y*Ue.y,Bt=wt!==0?1/wt:1/0,Ft=2*Math.sqrt(2-2*wt),ar=wt<Jx&&ye&&be,cr=Ge.x*Ue.y-Ge.y*Ue.x>0;if(ar&&pt>z){let Yt=se.dist(ye);if(Yt>2*W){let nr=se.sub(se.sub(ye)._mult(W/Yt)._round());this.updateDistance(ye,nr),this.addCurrentVertex(nr,Ge,0,0,q),ye=nr}}let rr=ye&&be,Qt=rr?h:S?"butt":p;if(rr&&Qt==="round"&&(Bt<v?Qt="miter":Bt<=2&&(Qt="fakeround")),Qt==="miter"&&Bt>g&&(Qt="bevel"),Qt==="bevel"&&(Bt>2&&(Qt="flipbevel"),Bt<g&&(Qt="miter")),ye&&this.updateDistance(ye,se),Qt==="miter")Tt._mult(Bt),this.addCurrentVertex(se,Tt,0,0,q);else if(Qt==="flipbevel"){if(Bt>100)Tt=Ue.mult(-1);else{let Yt=Bt*Ge.add(Ue).mag()/Ge.sub(Ue).mag();Tt._perp()._mult(Yt*(cr?-1:1))}this.addCurrentVertex(se,Tt,0,0,q),this.addCurrentVertex(se,Tt.mult(-1),0,0,q)}else if(Qt==="bevel"||Qt==="fakeround"){let Yt=-Math.sqrt(Bt*Bt-1),nr=cr?Yt:0,er=cr?0:Yt;if(ye&&this.addCurrentVertex(se,Ge,nr,er,q),Qt==="fakeround"){let Ut=Math.round(180*Ft/Math.PI/20);for(let gr=1;gr<Ut;gr++){let fr=gr/Ut;if(fr!==.5){let Qr=fr-.5;fr+=fr*Qr*(fr-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Qr*Qr+(.848013+ht*(.215638*ht-1.06021)))}let Cr=Ue.sub(Ge)._mult(fr)._add(Ge)._unit()._mult(cr?-1:1);this.addHalfVertex(se,Cr.x,Cr.y,!1,cr,0,q)}}be&&this.addCurrentVertex(se,Ue,-nr,-er,q)}else if(Qt==="butt")this.addCurrentVertex(se,Tt,0,0,q);else if(Qt==="square"){let Yt=ye?1:-1;this.addCurrentVertex(se,Tt,Yt,Yt,q)}else Qt==="round"&&(ye&&(this.addCurrentVertex(se,Ge,0,0,q),this.addCurrentVertex(se,Ge,1,1,q,!0)),be&&(this.addCurrentVertex(se,Ue,-1,-1,q,!0),this.addCurrentVertex(se,Ue,0,0,q)));if(ar&&pt<P-1){let Yt=se.dist(be);if(Yt>2*W){let nr=se.add(be.sub(se)._mult(W/Yt)._round());this.updateDistance(se,nr),this.addCurrentVertex(nr,Ue,0,0,q),se=nr}}}}addCurrentVertex(e,o,h,p,g,v=!1){let S=o.y*p-o.x,P=-o.y-o.x*p;this.addHalfVertex(e,o.x+o.y*h,o.y-o.x*h,v,!1,h,g),this.addHalfVertex(e,S,P,v,!0,-p,g),this.distance>im/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,o,h,p,g,v))}addHalfVertex({x:e,y:o},h,p,g,v,S,P){let z=.5*(this.lineClips?this.scaledDistance*(im-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(g?1:0),(o<<1)+(v?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let W=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),P.primitiveLength++),v?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}sr("LineBucket",Jh,{omit:["layers","patternFeatures"]});let qx=new Tn({"line-cap":new hr(fe.layout_line["line-cap"]),"line-join":new vr(fe.layout_line["line-join"]),"line-miter-limit":new hr(fe.layout_line["line-miter-limit"]),"line-round-limit":new hr(fe.layout_line["line-round-limit"]),"line-sort-key":new vr(fe.layout_line["line-sort-key"])});var om={paint:new Tn({"line-opacity":new vr(fe.paint_line["line-opacity"]),"line-color":new vr(fe.paint_line["line-color"]),"line-translate":new hr(fe.paint_line["line-translate"]),"line-translate-anchor":new hr(fe.paint_line["line-translate-anchor"]),"line-width":new vr(fe.paint_line["line-width"]),"line-gap-width":new vr(fe.paint_line["line-gap-width"]),"line-offset":new vr(fe.paint_line["line-offset"]),"line-blur":new vr(fe.paint_line["line-blur"]),"line-dasharray":new el(fe.paint_line["line-dasharray"]),"line-pattern":new Ro(fe.paint_line["line-pattern"]),"line-gradient":new Gi(fe.paint_line["line-gradient"])}),layout:qx};let am=new class extends vr{possiblyEvaluate(r,e){return e=new tn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,o,h){return e=A({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,o,h)}}(om.paint.properties["line-width"].specification);function sm(r,e){return e>0?e+2*r:r}am.useIntegerZoom=!0;let Qx=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),e2=hn([{name:"a_projected_pos",components:3,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let t2=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let lm=hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),r2=hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function n2(r,e,o){return r.sections.forEach(h=>{h.text=function(p,g,v){let S=g.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),ni.applyArabicShaping&&(p=ni.applyArabicShaping(p)),p}(h.text,e,o)}),r}hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);let pl={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var En=24,qh=Gr,um=function(r,e,o,h,p){var g,v,S=8*p-h-1,P=(1<<S)-1,z=P>>1,W=-7,q=o?p-1:0,se=o?-1:1,ye=r[e+q];for(q+=se,g=ye&(1<<-W)-1,ye>>=-W,W+=S;W>0;g=256*g+r[e+q],q+=se,W-=8);for(v=g&(1<<-W)-1,g>>=-W,W+=h;W>0;v=256*v+r[e+q],q+=se,W-=8);if(g===0)g=1-z;else{if(g===P)return v?NaN:1/0*(ye?-1:1);v+=Math.pow(2,h),g-=z}return(ye?-1:1)*v*Math.pow(2,g-h)},cm=function(r,e,o,h,p,g){var v,S,P,z=8*g-p-1,W=(1<<z)-1,q=W>>1,se=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,ye=h?0:g-1,be=h?1:-1,Ge=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(S=isNaN(e)?1:0,v=W):(v=Math.floor(Math.log(e)/Math.LN2),e*(P=Math.pow(2,-v))<1&&(v--,P*=2),(e+=v+q>=1?se/P:se*Math.pow(2,1-q))*P>=2&&(v++,P/=2),v+q>=W?(S=0,v=W):v+q>=1?(S=(e*P-1)*Math.pow(2,p),v+=q):(S=e*Math.pow(2,q-1)*Math.pow(2,p),v=0));p>=8;r[o+ye]=255&S,ye+=be,S/=256,p-=8);for(v=v<<p|S,z+=p;z>0;r[o+ye]=255&v,ye+=be,v/=256,z-=8);r[o+ye-be]|=128*Ge};function Gr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Gr.Varint=0,Gr.Fixed64=1,Gr.Bytes=2,Gr.Fixed32=5;var Bo,Qh=4294967296,hm=1/Qh,dm=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function mo(r){return r.type===Gr.Bytes?r.readVarint()+r.pos:r.pos+1}function Qa(r,e,o){return o?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function fm(r,e,o){var h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(h);for(var p=o.pos-1;p>=r;p--)o.buf[p+h]=o.buf[p]}function i2(r,e){for(var o=0;o<r.length;o++)e.writeVarint(r[o])}function o2(r,e){for(var o=0;o<r.length;o++)e.writeSVarint(r[o])}function a2(r,e){for(var o=0;o<r.length;o++)e.writeFloat(r[o])}function s2(r,e){for(var o=0;o<r.length;o++)e.writeDouble(r[o])}function l2(r,e){for(var o=0;o<r.length;o++)e.writeBoolean(r[o])}function u2(r,e){for(var o=0;o<r.length;o++)e.writeFixed32(r[o])}function c2(r,e){for(var o=0;o<r.length;o++)e.writeSFixed32(r[o])}function h2(r,e){for(var o=0;o<r.length;o++)e.writeFixed64(r[o])}function d2(r,e){for(var o=0;o<r.length;o++)e.writeSFixed64(r[o])}function Ou(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function es(r,e,o){r[o]=e,r[o+1]=e>>>8,r[o+2]=e>>>16,r[o+3]=e>>>24}function pm(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function f2(r,e,o){r===1&&o.readMessage(p2,e)}function p2(r,e,o){if(r===3){let{id:h,bitmap:p,width:g,height:v,left:S,top:P,advance:z}=o.readMessage(m2,{});e.push({id:h,bitmap:new sl({width:g+6,height:v+6},p),metrics:{width:g,height:v,left:S,top:P,advance:z}})}}function m2(r,e,o){r===1?e.id=o.readVarint():r===2?e.bitmap=o.readBytes():r===3?e.width=o.readVarint():r===4?e.height=o.readVarint():r===5?e.left=o.readSVarint():r===6?e.top=o.readSVarint():r===7&&(e.advance=o.readVarint())}function mm(r){let e=0,o=0;for(let v of r)e+=v.w*v.h,o=Math.max(o,v.w);r.sort((v,S)=>S.h-v.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}],p=0,g=0;for(let v of r)for(let S=h.length-1;S>=0;S--){let P=h[S];if(!(v.w>P.w||v.h>P.h)){if(v.x=P.x,v.y=P.y,g=Math.max(g,v.y+v.h),p=Math.max(p,v.x+v.w),v.w===P.w&&v.h===P.h){let z=h.pop();S<h.length&&(h[S]=z)}else v.h===P.h?(P.x+=v.w,P.w-=v.w):v.w===P.w?(P.y+=v.h,P.h-=v.h):(h.push({x:P.x+v.w,y:P.y,w:P.w-v.w,h:v.h}),P.y+=v.h,P.h-=v.h);break}}return{w:p,h:g,fill:e/(p*g)||0}}Gr.prototype={destroy:function(){this.buf=null},readFields:function(r,e,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),p=h>>3,g=this.pos;this.type=7&h,r(p,e,this),this.pos===g&&this.skip(h)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=Ou(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=pm(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Ou(this.buf,this.pos)+Ou(this.buf,this.pos+4)*Qh;return this.pos+=8,r},readSFixed64:function(){var r=Ou(this.buf,this.pos)+pm(this.buf,this.pos+4)*Qh;return this.pos+=8,r},readFloat:function(){var r=um(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=um(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,o,h=this.buf;return e=127&(o=h[this.pos++]),o<128?e:(e|=(127&(o=h[this.pos++]))<<7,o<128?e:(e|=(127&(o=h[this.pos++]))<<14,o<128?e:(e|=(127&(o=h[this.pos++]))<<21,o<128?e:function(p,g,v){var S,P,z=v.buf;if(S=(112&(P=z[v.pos++]))>>4,P<128||(S|=(127&(P=z[v.pos++]))<<3,P<128)||(S|=(127&(P=z[v.pos++]))<<10,P<128)||(S|=(127&(P=z[v.pos++]))<<17,P<128)||(S|=(127&(P=z[v.pos++]))<<24,P<128)||(S|=(1&(P=z[v.pos++]))<<31,P<128))return Qa(p,S,g);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&dm?function(o,h,p){return dm.decode(o.subarray(h,p))}(this.buf,e,r):function(o,h,p){for(var g="",v=h;v<p;){var S,P,z,W=o[v],q=null,se=W>239?4:W>223?3:W>191?2:1;if(v+se>p)break;se===1?W<128&&(q=W):se===2?(192&(S=o[v+1]))==128&&(q=(31&W)<<6|63&S)<=127&&(q=null):se===3?(P=o[v+2],(192&(S=o[v+1]))==128&&(192&P)==128&&((q=(15&W)<<12|(63&S)<<6|63&P)<=2047||q>=55296&&q<=57343)&&(q=null)):se===4&&(P=o[v+2],z=o[v+3],(192&(S=o[v+1]))==128&&(192&P)==128&&(192&z)==128&&((q=(15&W)<<18|(63&S)<<12|(63&P)<<6|63&z)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,se=1):q>65535&&(q-=65536,g+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),g+=String.fromCharCode(q),v+=se}return g}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Gr.Bytes)return r.push(this.readVarint(e));var o=mo(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Gr.Bytes)return r.push(this.readSVarint());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Gr.Bytes)return r.push(this.readBoolean());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Gr.Bytes)return r.push(this.readFloat());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Gr.Bytes)return r.push(this.readDouble());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Gr.Bytes)return r.push(this.readFixed32());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Gr.Bytes)return r.push(this.readSFixed32());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Gr.Bytes)return r.push(this.readFixed64());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Gr.Bytes)return r.push(this.readSFixed64());var e=mo(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===Gr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Gr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Gr.Fixed32)this.pos+=4;else{if(e!==Gr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),es(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),es(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),es(this.buf,-1&r,this.pos),es(this.buf,Math.floor(r*hm),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),es(this.buf,-1&r,this.pos),es(this.buf,Math.floor(r*hm),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,o){var h,p;if(e>=0?(h=e%4294967296|0,p=e/4294967296|0):(p=~(-e/4294967296),4294967295^(h=~(-e%4294967296))?h=h+1|0:(h=0,p=p+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,v,S){S.buf[S.pos++]=127&g|128,g>>>=7,S.buf[S.pos++]=127&g|128,g>>>=7,S.buf[S.pos++]=127&g|128,g>>>=7,S.buf[S.pos++]=127&g|128,S.buf[S.pos]=127&(g>>>=7)}(h,0,o),function(g,v){var S=(7&g)<<4;v.buf[v.pos++]|=S|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(p,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(h,p,g){for(var v,S,P=0;P<p.length;P++){if((v=p.charCodeAt(P))>55295&&v<57344){if(!S){v>56319||P+1===p.length?(h[g++]=239,h[g++]=191,h[g++]=189):S=v;continue}if(v<56320){h[g++]=239,h[g++]=191,h[g++]=189,S=v;continue}v=S-55296<<10|v-56320|65536,S=null}else S&&(h[g++]=239,h[g++]=191,h[g++]=189,S=null);v<128?h[g++]=v:(v<2048?h[g++]=v>>6|192:(v<65536?h[g++]=v>>12|224:(h[g++]=v>>18|240,h[g++]=v>>12&63|128),h[g++]=v>>6&63|128),h[g++]=63&v|128)}return g}(this.buf,r,this.pos);var o=this.pos-e;o>=128&&fm(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),cm(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),cm(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,e){this.pos++;var o=this.pos;r(e,this);var h=this.pos-o;h>=128&&fm(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,e,o){this.writeTag(r,Gr.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,i2,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,o2,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,l2,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,a2,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,s2,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,u2,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,c2,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,h2,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,d2,e)},writeBytesField:function(r,e){this.writeTag(r,Gr.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Gr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Gr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Gr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Gr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Gr.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Gr.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Gr.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Gr.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Gr.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class ed{constructor(e,{pixelRatio:o,version:h,stretchX:p,stretchY:g,content:v}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=p,this.stretchY=g,this.content=v,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gm{constructor(e,o){let h={},p={};this.haveRenderCallbacks=[];let g=[];this.addImages(e,h,g),this.addImages(o,p,g);let{w:v,h:S}=mm(g),P=new ci({width:v||1,height:S||1});for(let z in e){let W=e[z],q=h[z].paddedRect;ci.copy(W.data,P,{x:0,y:0},{x:q.x+1,y:q.y+1},W.data)}for(let z in o){let W=o[z],q=p[z].paddedRect,se=q.x+1,ye=q.y+1,be=W.data.width,Ge=W.data.height;ci.copy(W.data,P,{x:0,y:0},{x:se,y:ye},W.data),ci.copy(W.data,P,{x:0,y:Ge-1},{x:se,y:ye-1},{width:be,height:1}),ci.copy(W.data,P,{x:0,y:0},{x:se,y:ye+Ge},{width:be,height:1}),ci.copy(W.data,P,{x:be-1,y:0},{x:se-1,y:ye},{width:1,height:Ge}),ci.copy(W.data,P,{x:0,y:0},{x:se+be,y:ye},{width:1,height:Ge})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(e,o,h){for(let p in e){let g=e[p],v={x:0,y:0,w:g.data.width+2,h:g.data.height+2};h.push(v),o[p]=new ed(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(e,o){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),o)}patchUpdatedImage(e,o,h){if(!e||!o||e.version===o.version)return;e.version=o.version;let[p,g]=e.tl;h.update(o.data,void 0,{x:p,y:g})}}sr("ImagePosition",ed),sr("ImageAtlas",gm),a.WritingMode=void 0,(Bo=a.WritingMode||(a.WritingMode={}))[Bo.none=0]="none",Bo[Bo.horizontal=1]="horizontal",Bo[Bo.vertical=2]="vertical",Bo[Bo.horizontalOnly=3]="horizontalOnly";let Mu=-17;class ml{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){let h=new ml;return h.scale=e||1,h.fontStack=o,h}static forImage(e){let o=new ml;return o.imageName=e,o}}class ts{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){let h=new ts;for(let p=0;p<e.sections.length;p++){let g=e.sections[p];g.image?h.addImageSection(g):h.addTextSection(g,o)}return h}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let o="";for(let h=0;h<e.length;h++){let p=e.charCodeAt(h+1)||null,g=e.charCodeAt(h-1)||null;o+=p&&uu(p)&&!pl[e[h+1]]||g&&uu(g)&&!pl[e[h-1]]||!pl[e[h]]?e[h]:pl[e[h]]}return o}(this.text)}trim(){let e=0;for(let h=0;h<this.text.length&&Au[this.text.charCodeAt(h)];h++)e++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=e&&Au[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){let h=new ts;return h.text=this.text.substring(e,o),h.sectionIndex=this.sectionIndex.slice(e,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(ml.forText(e.scale,e.fontStack||o));let h=this.sections.length-1;for(let p=0;p<e.text.length;++p)this.sectionIndex.push(h)}addImageSection(e){let o=e.image?e.image.name:"";if(o.length===0)return void K("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ml.forImage(o)),this.sectionIndex.push(this.sections.length-1)):K("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Du(r,e,o,h,p,g,v,S,P,z,W,q,se,ye,be,Ge){let Ue=ts.fromFeature(r,p),pt;q===a.WritingMode.vertical&&Ue.verticalizePunctuation();let{processBidirectionalText:Tt,processStyledBidirectionalText:ht}=ni;if(Tt&&Ue.sections.length===1){pt=[];let Ft=Tt(Ue.toString(),td(Ue,z,g,e,h,ye,be));for(let ar of Ft){let cr=new ts;cr.text=ar,cr.sections=Ue.sections;for(let rr=0;rr<ar.length;rr++)cr.sectionIndex.push(0);pt.push(cr)}}else if(ht){pt=[];let Ft=ht(Ue.text,Ue.sectionIndex,td(Ue,z,g,e,h,ye,be));for(let ar of Ft){let cr=new ts;cr.text=ar[0],cr.sectionIndex=ar[1],cr.sections=Ue.sections,pt.push(cr)}}else pt=function(Ft,ar){let cr=[],rr=Ft.text,Qt=0;for(let Yt of ar)cr.push(Ft.substring(Qt,Yt)),Qt=Yt;return Qt<rr.length&&cr.push(Ft.substring(Qt,rr.length)),cr}(Ue,td(Ue,z,g,e,h,ye,be));let wt=[],Bt={positionedLines:wt,text:Ue.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(Ft,ar,cr,rr,Qt,Yt,nr,er,Ut,gr,fr,Cr){let Qr=0,nn=Mu,yn=0,di=0,Pn=er==="right"?1:er==="left"?0:.5,dn=0;for(let fn of Qt){fn.trim();let Mn=fn.getMaxScale(),kn=(Mn-1)*En,Nn={positionedGlyphs:[],lineOffset:0};Ft.positionedLines[dn]=Nn;let Yn=Nn.positionedGlyphs,Xn=0;if(!fn.length()){nn+=Yt,++dn;continue}for(let Cn=0;Cn<fn.length();Cn++){let Pr=fn.getSection(Cn),ai=fn.getSectionIndex(Cn),Dn=fn.getCharCode(Cn),Ln=0,Ci=null,Ri=null,ji=null,yo=En,Si=!(Ut===a.WritingMode.horizontal||!fr&&!Zs(Dn)||fr&&(Au[Dn]||(wn=Dn,tr.Arabic(wn)||tr["Arabic Supplement"](wn)||tr["Arabic Extended-A"](wn)||tr["Arabic Presentation Forms-A"](wn)||tr["Arabic Presentation Forms-B"](wn))));if(Pr.imageName){let fi=rr[Pr.imageName];if(!fi)continue;ji=Pr.imageName,Ft.iconsInText=Ft.iconsInText||!0,Ri=fi.paddedRect;let Jn=fi.displaySize;Pr.scale=Pr.scale*En/Cr,Ci={width:Jn[0],height:Jn[1],left:1,top:-3,advance:Si?Jn[1]:Jn[0]},Ln=kn+(En-Jn[1]*Pr.scale),yo=Ci.advance;let vo=Si?Jn[0]*Pr.scale-En*Mn:Jn[1]*Pr.scale-En*Mn;vo>0&&vo>Xn&&(Xn=vo)}else{let fi=cr[Pr.fontStack],Jn=fi&&fi[Dn];if(Jn&&Jn.rect)Ri=Jn.rect,Ci=Jn.metrics;else{let vo=ar[Pr.fontStack],vl=vo&&vo[Dn];if(!vl)continue;Ci=vl.metrics}Ln=(Mn-Pr.scale)*En}Si?(Ft.verticalizable=!0,Yn.push({glyph:Dn,imageName:ji,x:Qr,y:nn+Ln,vertical:Si,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:ai,metrics:Ci,rect:Ri}),Qr+=yo*Pr.scale+gr):(Yn.push({glyph:Dn,imageName:ji,x:Qr,y:nn+Ln,vertical:Si,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:ai,metrics:Ci,rect:Ri}),Qr+=Ci.advance*Pr.scale+gr)}Yn.length!==0&&(yn=Math.max(Qr-gr,yn),v2(Yn,0,Yn.length-1,Pn,Xn)),Qr=0;let an=Yt*Mn+Xn;Nn.lineOffset=Math.max(Xn,kn),nn+=an,di=Math.max(an,di),++dn}var wn;let On=nn-Mu,{horizontalAlign:zn,verticalAlign:Zn}=rd(nr);(function(fn,Mn,kn,Nn,Yn,Xn,an,Cn,Pr){let ai=(Mn-kn)*Yn,Dn=0;Dn=Xn!==an?-Cn*Nn-Mu:(-Nn*Pr+.5)*an;for(let Ln of fn)for(let Ci of Ln.positionedGlyphs)Ci.x+=ai,Ci.y+=Dn})(Ft.positionedLines,Pn,zn,Zn,yn,di,Yt,On,Qt.length),Ft.top+=-Zn*On,Ft.bottom=Ft.top+On,Ft.left+=-zn*yn,Ft.right=Ft.left+yn}(Bt,e,o,h,pt,v,S,P,q,z,se,Ge),!function(Ft){for(let ar of Ft)if(ar.positionedGlyphs.length!==0)return!1;return!0}(wt)&&Bt}let Au={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},g2={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ym(r,e,o,h,p,g){if(e.imageName){let v=h[e.imageName];return v?v.displaySize[0]*e.scale*En/g+p:0}{let v=o[e.fontStack],S=v&&v[r];return S?S.metrics.advance*e.scale+p:0}}function vm(r,e,o,h){let p=Math.pow(r-e,2);return h?r<e?p/2:2*p:p+Math.abs(o)*o}function y2(r,e,o){let h=0;return r===10&&(h-=1e4),o&&(h+=150),r!==40&&r!==65288||(h+=50),e!==41&&e!==65289||(h+=50),h}function bm(r,e,o,h,p,g){let v=null,S=vm(e,o,p,g);for(let P of h){let z=vm(e-P.x,o,p,g)+P.badness;z<=S&&(v=P,S=z)}return{index:r,x:e,priorBreak:v,badness:S}}function xm(r){return r?xm(r.priorBreak).concat(r.index):[]}function td(r,e,o,h,p,g,v){if(g!=="point")return[];if(!r)return[];let S=[],P=function(se,ye,be,Ge,Ue,pt){let Tt=0;for(let ht=0;ht<se.length();ht++){let wt=se.getSection(ht);Tt+=ym(se.getCharCode(ht),wt,Ge,Ue,ye,pt)}return Tt/Math.max(1,Math.ceil(Tt/be))}(r,e,o,h,p,v),z=r.text.indexOf("\u200B")>=0,W=0;for(let se=0;se<r.length();se++){let ye=r.getSection(se),be=r.getCharCode(se);if(Au[be]||(W+=ym(be,ye,h,p,e,v)),se<r.length()-1){let Ge=!((q=be)<11904||!(tr["Bopomofo Extended"](q)||tr.Bopomofo(q)||tr["CJK Compatibility Forms"](q)||tr["CJK Compatibility Ideographs"](q)||tr["CJK Compatibility"](q)||tr["CJK Radicals Supplement"](q)||tr["CJK Strokes"](q)||tr["CJK Symbols and Punctuation"](q)||tr["CJK Unified Ideographs Extension A"](q)||tr["CJK Unified Ideographs"](q)||tr["Enclosed CJK Letters and Months"](q)||tr["Halfwidth and Fullwidth Forms"](q)||tr.Hiragana(q)||tr["Ideographic Description Characters"](q)||tr["Kangxi Radicals"](q)||tr["Katakana Phonetic Extensions"](q)||tr.Katakana(q)||tr["Vertical Forms"](q)||tr["Yi Radicals"](q)||tr["Yi Syllables"](q)));(g2[be]||Ge||ye.imageName)&&S.push(bm(se+1,W,P,S,y2(be,r.getCharCode(se+1),Ge&&z),!1))}}var q;return xm(bm(r.length(),W,P,S,0,!0))}function rd(r){let e=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function v2(r,e,o,h,p){if(!h&&!p)return;let g=r[o],v=(r[o].x+g.metrics.advance*g.scale)*h;for(let S=e;S<=o;S++)r[S].x-=v,r[S].y+=p}function b2(r,e,o){let{horizontalAlign:h,verticalAlign:p}=rd(o),g=e[0]-r.displaySize[0]*h,v=e[1]-r.displaySize[1]*p;return{image:r,top:v,bottom:v+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function _m(r,e,o,h,p,g){let v=r.image,S;if(v.content){let Ue=v.content,pt=v.pixelRatio||1;S=[Ue[0]/pt,Ue[1]/pt,v.displaySize[0]-Ue[2]/pt,v.displaySize[1]-Ue[3]/pt]}let P=e.left*g,z=e.right*g,W,q,se,ye;o==="width"||o==="both"?(ye=p[0]+P-h[3],q=p[0]+z+h[1]):(ye=p[0]+(P+z-v.displaySize[0])/2,q=ye+v.displaySize[0]);let be=e.top*g,Ge=e.bottom*g;return o==="height"||o==="both"?(W=p[1]+be-h[0],se=p[1]+Ge+h[2]):(W=p[1]+(be+Ge-v.displaySize[1])/2,se=W+v.displaySize[1]),{image:v,top:W,right:q,bottom:se,left:ye,collisionPadding:S}}let go=128;function wm(r,e){let{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new tn(r+1))};if(o.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=o,g=0;for(;g<h.length&&h[g]<=r;)g++;g=Math.max(0,g-1);let v=g;for(;v<h.length&&h[v]<r+1;)v++;v=Math.min(h.length-1,v);let S=h[g],P=h[v];return o.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:P,minSize:o.evaluate(new tn(S)),maxSize:o.evaluate(new tn(P)),interpolationType:p}}}class No extends je{constructor(e,o,h,p){super(e,o),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new No(this.x,this.y,this.angle,this.segment)}}function Cm(r,e,o,h,p){if(e.segment===void 0)return!0;let g=e,v=e.segment+1,S=0;for(;S>-o/2;){if(v--,v<0)return!1;S-=r[v].dist(g),g=r[v]}S+=r[v].dist(r[v+1]),v++;let P=[],z=0;for(;S<o/2;){let W=r[v],q=r[v+1];if(!q)return!1;let se=r[v-1].angleTo(W)-W.angleTo(q);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:se}),z+=se;S-P[0].distance>h;)z-=P.shift().angleDelta;if(z>p)return!1;v++,S+=W.dist(q)}return!0}function Sm(r){let e=0;for(let o=0;o<r.length-1;o++)e+=r[o].dist(r[o+1]);return e}function Tm(r,e,o){return r?.6*e*o:0}function Em(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function x2(r,e,o,h,p,g){let v=Tm(o,p,g),S=Em(o,h)*g,P=0,z=Sm(r)/2;for(let W=0;W<r.length-1;W++){let q=r[W],se=r[W+1],ye=q.dist(se);if(P+ye>z){let be=(z-P)/ye,Ge=Yr(q.x,se.x,be),Ue=Yr(q.y,se.y,be),pt=new No(Ge,Ue,se.angleTo(q),W);return pt._round(),!v||Cm(r,pt,S,v,e)?pt:void 0}P+=ye}}function _2(r,e,o,h,p,g,v,S,P){let z=Tm(h,g,v),W=Em(h,p),q=W*v,se=r[0].x===0||r[0].x===P||r[0].y===0||r[0].y===P;return e-q<e/4&&(e=q+e/4),Pm(r,se?e/2*S%e:(W/2+2*g)*v*S%e,e,z,o,q,se,!1,P)}function Pm(r,e,o,h,p,g,v,S,P){let z=g/2,W=Sm(r),q=0,se=e-o,ye=[];for(let be=0;be<r.length-1;be++){let Ge=r[be],Ue=r[be+1],pt=Ge.dist(Ue),Tt=Ue.angleTo(Ge);for(;se+o<q+pt;){se+=o;let ht=(se-q)/pt,wt=Yr(Ge.x,Ue.x,ht),Bt=Yr(Ge.y,Ue.y,ht);if(wt>=0&&wt<P&&Bt>=0&&Bt<P&&se-z>=0&&se+z<=W){let Ft=new No(wt,Bt,Tt,be);Ft._round(),h&&!Cm(r,Ft,g,h,p)||ye.push(Ft)}}q+=pt}return S||ye.length||v||(ye=Pm(r,q/2,o,h,p,g,v,!0,P)),ye}function Om(r,e,o,h,p){let g=[];for(let v=0;v<r.length;v++){let S=r[v],P;for(let z=0;z<S.length-1;z++){let W=S[z],q=S[z+1];W.x<e&&q.x<e||(W.x<e?W=new je(e,W.y+(e-W.x)/(q.x-W.x)*(q.y-W.y))._round():q.x<e&&(q=new je(e,W.y+(e-W.x)/(q.x-W.x)*(q.y-W.y))._round()),W.y<o&&q.y<o||(W.y<o?W=new je(W.x+(o-W.y)/(q.y-W.y)*(q.x-W.x),o)._round():q.y<o&&(q=new je(W.x+(o-W.y)/(q.y-W.y)*(q.x-W.x),o)._round()),W.x>=h&&q.x>=h||(W.x>=h?W=new je(h,W.y+(h-W.x)/(q.x-W.x)*(q.y-W.y))._round():q.x>=h&&(q=new je(h,W.y+(h-W.x)/(q.x-W.x)*(q.y-W.y))._round()),W.y>=p&&q.y>=p||(W.y>=p?W=new je(W.x+(p-W.y)/(q.y-W.y)*(q.x-W.x),p)._round():q.y>=p&&(q=new je(W.x+(p-W.y)/(q.y-W.y)*(q.x-W.x),p)._round()),P&&W.equals(P[P.length-1])||(P=[W],g.push(P)),P.push(q)))))}}return g}function Mm(r,e,o,h){let p=[],g=r.image,v=g.pixelRatio,S=g.paddedRect.w-2,P=g.paddedRect.h-2,z=r.right-r.left,W=r.bottom-r.top,q=g.stretchX||[[0,S]],se=g.stretchY||[[0,P]],ye=(Yt,nr)=>Yt+nr[1]-nr[0],be=q.reduce(ye,0),Ge=se.reduce(ye,0),Ue=S-be,pt=P-Ge,Tt=0,ht=be,wt=0,Bt=Ge,Ft=0,ar=Ue,cr=0,rr=pt;if(g.content&&h){let Yt=g.content;Tt=Iu(q,0,Yt[0]),wt=Iu(se,0,Yt[1]),ht=Iu(q,Yt[0],Yt[2]),Bt=Iu(se,Yt[1],Yt[3]),Ft=Yt[0]-Tt,cr=Yt[1]-wt,ar=Yt[2]-Yt[0]-ht,rr=Yt[3]-Yt[1]-Bt}let Qt=(Yt,nr,er,Ut)=>{let gr=zu(Yt.stretch-Tt,ht,z,r.left),fr=ku(Yt.fixed-Ft,ar,Yt.stretch,be),Cr=zu(nr.stretch-wt,Bt,W,r.top),Qr=ku(nr.fixed-cr,rr,nr.stretch,Ge),nn=zu(er.stretch-Tt,ht,z,r.left),yn=ku(er.fixed-Ft,ar,er.stretch,be),di=zu(Ut.stretch-wt,Bt,W,r.top),Pn=ku(Ut.fixed-cr,rr,Ut.stretch,Ge),dn=new je(gr,Cr),wn=new je(nn,Cr),On=new je(nn,di),zn=new je(gr,di),Zn=new je(fr/v,Qr/v),fn=new je(yn/v,Pn/v),Mn=e*Math.PI/180;if(Mn){let Yn=Math.sin(Mn),Xn=Math.cos(Mn),an=[Xn,-Yn,Yn,Xn];dn._matMult(an),wn._matMult(an),zn._matMult(an),On._matMult(an)}let kn=Yt.stretch+Yt.fixed,Nn=nr.stretch+nr.fixed;return{tl:dn,tr:wn,bl:zn,br:On,tex:{x:g.paddedRect.x+1+kn,y:g.paddedRect.y+1+Nn,w:er.stretch+er.fixed-kn,h:Ut.stretch+Ut.fixed-Nn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zn,pixelOffsetBR:fn,minFontScaleX:ar/v/z,minFontScaleY:rr/v/W,isSDF:o}};if(h&&(g.stretchX||g.stretchY)){let Yt=Dm(q,Ue,be),nr=Dm(se,pt,Ge);for(let er=0;er<Yt.length-1;er++){let Ut=Yt[er],gr=Yt[er+1];for(let fr=0;fr<nr.length-1;fr++)p.push(Qt(Ut,nr[fr],gr,nr[fr+1]))}}else p.push(Qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return p}function Iu(r,e,o){let h=0;for(let p of r)h+=Math.max(e,Math.min(o,p[1]))-Math.max(e,Math.min(o,p[0]));return h}function Dm(r,e,o){let h=[{fixed:-1,stretch:0}];for(let[p,g]of r){let v=h[h.length-1];h.push({fixed:p-v.stretch,stretch:v.stretch}),h.push({fixed:p-v.stretch,stretch:v.stretch+(g-p)})}return h.push({fixed:e+1,stretch:o}),h}function zu(r,e,o,h){return r/e*o+h}function ku(r,e,o,h){return r-e*o/h}sr("Anchor",No);class Lu{constructor(e,o,h,p,g,v,S,P,z,W){if(this.boxStartIndex=e.length,z){let q=v.top,se=v.bottom,ye=v.collisionPadding;ye&&(q-=ye[1],se+=ye[3]);let be=se-q;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{let q=v.top*S-P[0],se=v.bottom*S+P[2],ye=v.left*S-P[3],be=v.right*S+P[1],Ge=v.collisionPadding;if(Ge&&(ye-=Ge[0]*S,q-=Ge[1]*S,be+=Ge[2]*S,se+=Ge[3]*S),W){let Ue=new je(ye,q),pt=new je(be,q),Tt=new je(ye,se),ht=new je(be,se),wt=W*Math.PI/180;Ue._rotate(wt),pt._rotate(wt),Tt._rotate(wt),ht._rotate(wt),ye=Math.min(Ue.x,pt.x,Tt.x,ht.x),be=Math.max(Ue.x,pt.x,Tt.x,ht.x),q=Math.min(Ue.y,pt.y,Tt.y,ht.y),se=Math.max(Ue.y,pt.y,Tt.y,ht.y)}e.emplaceBack(o.x,o.y,ye,q,be,se,h,p,g)}this.boxEndIndex=e.length}}class w2{constructor(e=[],o=C2){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:o,compare:h}=this,p=o[e];for(;e>0;){let g=e-1>>1,v=o[g];if(h(p,v)>=0)break;o[e]=v,e=g}o[e]=p}_down(e){let{data:o,compare:h}=this,p=this.length>>1,g=o[e];for(;e<p;){let v=1+(e<<1),S=o[v],P=v+1;if(P<this.length&&h(o[P],S)<0&&(v=P,S=o[P]),h(S,g)>=0)break;o[e]=S,e=v}o[e]=g}}function C2(r,e){return r<e?-1:r>e?1:0}function S2(r,e=1,o=!1){let h=1/0,p=1/0,g=-1/0,v=-1/0,S=r[0];for(let ye=0;ye<S.length;ye++){let be=S[ye];(!ye||be.x<h)&&(h=be.x),(!ye||be.y<p)&&(p=be.y),(!ye||be.x>g)&&(g=be.x),(!ye||be.y>v)&&(v=be.y)}let P=Math.min(g-h,v-p),z=P/2,W=new w2([],T2);if(P===0)return new je(h,p);for(let ye=h;ye<g;ye+=P)for(let be=p;be<v;be+=P)W.push(new rs(ye+z,be+z,z,r));let q=function(ye){let be=0,Ge=0,Ue=0,pt=ye[0];for(let Tt=0,ht=pt.length,wt=ht-1;Tt<ht;wt=Tt++){let Bt=pt[Tt],Ft=pt[wt],ar=Bt.x*Ft.y-Ft.x*Bt.y;Ge+=(Bt.x+Ft.x)*ar,Ue+=(Bt.y+Ft.y)*ar,be+=3*ar}return new rs(Ge/be,Ue/be,0,ye)}(r),se=W.length;for(;W.length;){let ye=W.pop();(ye.d>q.d||!q.d)&&(q=ye,o&&console.log("found best %d after %d probes",Math.round(1e4*ye.d)/1e4,se)),ye.max-q.d<=e||(z=ye.h/2,W.push(new rs(ye.p.x-z,ye.p.y-z,z,r)),W.push(new rs(ye.p.x+z,ye.p.y-z,z,r)),W.push(new rs(ye.p.x-z,ye.p.y+z,z,r)),W.push(new rs(ye.p.x+z,ye.p.y+z,z,r)),se+=4)}return o&&(console.log(`num probes: ${se}`),console.log(`best distance: ${q.d}`)),q.p}function T2(r,e){return e.max-r.max}function rs(r,e,o,h){this.p=new je(r,e),this.h=o,this.d=function(p,g){let v=!1,S=1/0;for(let P=0;P<g.length;P++){let z=g[P];for(let W=0,q=z.length,se=q-1;W<q;se=W++){let ye=z[W],be=z[se];ye.y>p.y!=be.y>p.y&&p.x<(be.x-ye.x)*(p.y-ye.y)/(be.y-ye.y)+ye.x&&(v=!v),S=Math.min(S,Fp(p,ye,be))}}return(v?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}let nd=Number.POSITIVE_INFINITY;function Am(r,e){return e[1]!==nd?function(o,h,p){let g=0,v=0;switch(h=Math.abs(h),p=Math.abs(p),o){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(o){case"top-right":case"bottom-right":case"right":g=-h;break;case"top-left":case"bottom-left":case"left":g=h}return[g,v]}(r,e[0],e[1]):function(o,h){let p=0,g=0;h<0&&(h=0);let v=h/Math.sqrt(2);switch(o){case"top-right":case"top-left":g=v-7;break;case"bottom-right":case"bottom-left":g=7-v;break;case"bottom":g=7-h;break;case"top":g=h-7}switch(o){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=h;break;case"right":p=-h}return[p,g]}(r,e[0])}function id(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function E2(r,e,o,h,p,g,v,S,P,z,W){let q=g.textMaxSize.evaluate(e,{});q===void 0&&(q=v);let se=r.layers[0].layout,ye=se.get("icon-offset").evaluate(e,{},W),be=zm(o.horizontal),Ge=v/24,Ue=r.tilePixelRatio*Ge,pt=r.tilePixelRatio*q/24,Tt=r.tilePixelRatio*S,ht=r.tilePixelRatio*se.get("symbol-spacing"),wt=se.get("text-padding")*r.tilePixelRatio,Bt=function(Ut,gr,fr,Cr=1){let Qr=Ut.get("icon-padding").evaluate(gr,{},fr),nn=Qr&&Qr.values;return[nn[0]*Cr,nn[1]*Cr,nn[2]*Cr,nn[3]*Cr]}(se,e,W,r.tilePixelRatio),Ft=se.get("text-max-angle")/180*Math.PI,ar=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",cr=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",rr=se.get("symbol-placement"),Qt=ht/2,Yt=se.get("icon-text-fit"),nr;h&&Yt!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(nr=_m(h,o.vertical,Yt,se.get("icon-text-fit-padding"),ye,Ge)),be&&(h=_m(h,be,Yt,se.get("icon-text-fit-padding"),ye,Ge)));let er=(Ut,gr)=>{gr.x<0||gr.x>=gn||gr.y<0||gr.y>=gn||function(fr,Cr,Qr,nn,yn,di,Pn,dn,wn,On,zn,Zn,fn,Mn,kn,Nn,Yn,Xn,an,Cn,Pr,ai,Dn,Ln,Ci){let Ri=fr.addToLineVertexArray(Cr,Qr),ji,yo,Si,fi,Jn=0,vo=0,vl=0,Ym=0,pd=-1,md=-1,bo={},Xm=_n.exports(""),gd=0,yd=0;if(dn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[gd,yd]=dn.layout.get("text-offset").evaluate(Pr,{},Ln).map(qn=>qn*En):(gd=dn.layout.get("text-radial-offset").evaluate(Pr,{},Ln)*En,yd=nd),fr.allowVerticalPlacement&&nn.vertical){let qn=dn.layout.get("text-rotate").evaluate(Pr,{},Ln)+90;Si=new Lu(wn,Cr,On,zn,Zn,nn.vertical,fn,Mn,kn,qn),Pn&&(fi=new Lu(wn,Cr,On,zn,Zn,Pn,Yn,Xn,kn,qn))}if(yn){let qn=dn.layout.get("icon-rotate").evaluate(Pr,{}),Ji=dn.layout.get("icon-text-fit")!=="none",bl=Mm(yn,qn,Dn,Ji),xl=Pn?Mm(Pn,qn,Dn,Ji):void 0;yo=new Lu(wn,Cr,On,zn,Zn,yn,Yn,Xn,!1,qn),Jn=4*bl.length;let Qm=fr.iconSizeData,wa=null;Qm.kind==="source"?(wa=[go*dn.layout.get("icon-size").evaluate(Pr,{})],wa[0]>Uo&&K(`${fr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qm.kind==="composite"&&(wa=[go*ai.compositeIconSizes[0].evaluate(Pr,{},Ln),go*ai.compositeIconSizes[1].evaluate(Pr,{},Ln)],(wa[0]>Uo||wa[1]>Uo)&&K(`${fr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),fr.addSymbols(fr.icon,bl,wa,Cn,an,Pr,a.WritingMode.none,Cr,Ri.lineStartIndex,Ri.lineLength,-1,Ln),pd=fr.icon.placedSymbolArray.length-1,xl&&(vo=4*xl.length,fr.addSymbols(fr.icon,xl,wa,Cn,an,Pr,a.WritingMode.vertical,Cr,Ri.lineStartIndex,Ri.lineLength,-1,Ln),md=fr.icon.placedSymbolArray.length-1)}let Jm=Object.keys(nn.horizontal);for(let qn of Jm){let Ji=nn.horizontal[qn];if(!ji){Xm=_n.exports(Ji.text);let xl=dn.layout.get("text-rotate").evaluate(Pr,{},Ln);ji=new Lu(wn,Cr,On,zn,Zn,Ji,fn,Mn,kn,xl)}let bl=Ji.positionedLines.length===1;if(vl+=Im(fr,Cr,Ji,di,dn,kn,Pr,Nn,Ri,nn.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,bl?Jm:[qn],bo,pd,ai,Ln),bl)break}nn.vertical&&(Ym+=Im(fr,Cr,nn.vertical,di,dn,kn,Pr,Nn,Ri,a.WritingMode.vertical,["vertical"],bo,md,ai,Ln));let V2=ji?ji.boxStartIndex:fr.collisionBoxArray.length,B2=ji?ji.boxEndIndex:fr.collisionBoxArray.length,N2=Si?Si.boxStartIndex:fr.collisionBoxArray.length,U2=Si?Si.boxEndIndex:fr.collisionBoxArray.length,$2=yo?yo.boxStartIndex:fr.collisionBoxArray.length,W2=yo?yo.boxEndIndex:fr.collisionBoxArray.length,H2=fi?fi.boxStartIndex:fr.collisionBoxArray.length,G2=fi?fi.boxEndIndex:fr.collisionBoxArray.length,Fi=-1,Bu=(qn,Ji)=>qn&&qn.circleDiameter?Math.max(qn.circleDiameter,Ji):Ji;Fi=Bu(ji,Fi),Fi=Bu(Si,Fi),Fi=Bu(yo,Fi),Fi=Bu(fi,Fi);let qm=Fi>-1?1:0;qm&&(Fi*=Ci/En),fr.glyphOffsetArray.length>=ns.MAX_GLYPHS&&K("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pr.sortKey!==void 0&&fr.addToSortKeyRanges(fr.symbolInstances.length,Pr.sortKey),fr.symbolInstances.emplaceBack(Cr.x,Cr.y,bo.right>=0?bo.right:-1,bo.center>=0?bo.center:-1,bo.left>=0?bo.left:-1,bo.vertical||-1,pd,md,Xm,V2,B2,N2,U2,$2,W2,H2,G2,On,vl,Ym,Jn,vo,qm,0,fn,gd,yd,Fi)}(r,gr,Ut,o,h,p,nr,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,Ue,[wt,wt,wt,wt],ar,P,Tt,Bt,cr,ye,e,g,z,W,v)};if(rr==="line")for(let Ut of Om(e.geometry,0,0,gn,gn)){let gr=_2(Ut,ht,Ft,o.vertical||be,h,24,pt,r.overscaling,gn);for(let fr of gr){let Cr=be;Cr&&P2(r,Cr.text,Qt,fr)||er(Ut,fr)}}else if(rr==="line-center"){for(let Ut of e.geometry)if(Ut.length>1){let gr=x2(Ut,Ft,o.vertical||be,h,24,pt);gr&&er(Ut,gr)}}else if(e.type==="Polygon")for(let Ut of Hh(e.geometry,0)){let gr=S2(Ut,16);er(Ut[0],new No(gr.x,gr.y,0))}else if(e.type==="LineString")for(let Ut of e.geometry)er(Ut,new No(Ut[0].x,Ut[0].y,0));else if(e.type==="Point")for(let Ut of e.geometry)for(let gr of Ut)er([gr],new No(gr.x,gr.y,0))}let Uo=32640;function Im(r,e,o,h,p,g,v,S,P,z,W,q,se,ye,be){let Ge=function(Tt,ht,wt,Bt,Ft,ar,cr,rr){let Qt=Bt.layout.get("text-rotate").evaluate(ar,{})*Math.PI/180,Yt=[];for(let nr of ht.positionedLines)for(let er of nr.positionedGlyphs){if(!er.rect)continue;let Ut=er.rect||{},gr=4,fr=!0,Cr=1,Qr=0,nn=(Ft||rr)&&er.vertical,yn=er.metrics.advance*er.scale/2;if(rr&&ht.verticalizable){let an=(er.scale-1)*En,Cn=(En-er.metrics.width*er.scale)/2;Qr=nr.lineOffset/2-(er.imageName?-Cn:an)}if(er.imageName){let an=cr[er.imageName];fr=an.sdf,Cr=an.pixelRatio,gr=1/Cr}let di=Ft?[er.x+yn,er.y]:[0,0],Pn=Ft?[0,0]:[er.x+yn+wt[0],er.y+wt[1]-Qr],dn=[0,0];nn&&(dn=Pn,Pn=[0,0]);let wn=(er.metrics.left-gr)*er.scale-yn+Pn[0],On=(-er.metrics.top-gr)*er.scale+Pn[1],zn=wn+Ut.w*er.scale/Cr,Zn=On+Ut.h*er.scale/Cr,fn=new je(wn,On),Mn=new je(zn,On),kn=new je(wn,Zn),Nn=new je(zn,Zn);if(nn){let an=new je(-yn,yn-Mu),Cn=-Math.PI/2,Pr=12-yn,ai=new je(22-Pr,-(er.imageName?Pr:0)),Dn=new je(...dn);fn._rotateAround(Cn,an)._add(ai)._add(Dn),Mn._rotateAround(Cn,an)._add(ai)._add(Dn),kn._rotateAround(Cn,an)._add(ai)._add(Dn),Nn._rotateAround(Cn,an)._add(ai)._add(Dn)}if(Qt){let an=Math.sin(Qt),Cn=Math.cos(Qt),Pr=[Cn,-an,an,Cn];fn._matMult(Pr),Mn._matMult(Pr),kn._matMult(Pr),Nn._matMult(Pr)}let Yn=new je(0,0),Xn=new je(0,0);Yt.push({tl:fn,tr:Mn,bl:kn,br:Nn,tex:Ut,writingMode:ht.writingMode,glyphOffset:di,sectionIndex:er.sectionIndex,isSDF:fr,pixelOffsetTL:Yn,pixelOffsetBR:Xn,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,o,S,p,g,v,h,r.allowVerticalPlacement),Ue=r.textSizeData,pt=null;Ue.kind==="source"?(pt=[go*p.layout.get("text-size").evaluate(v,{})],pt[0]>Uo&&K(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ue.kind==="composite"&&(pt=[go*ye.compositeTextSizes[0].evaluate(v,{},be),go*ye.compositeTextSizes[1].evaluate(v,{},be)],(pt[0]>Uo||pt[1]>Uo)&&K(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,Ge,pt,S,g,v,z,e,P.lineStartIndex,P.lineLength,se,be);for(let Tt of W)q[Tt]=r.text.placedSymbolArray.length-1;return 4*Ge.length}function zm(r){for(let e in r)return r[e];return null}function P2(r,e,o,h){let p=r.compareText;if(e in p){let g=p[e];for(let v=g.length-1;v>=0;v--)if(h.dist(g[v])<o)return!0}else p[e]=[];return p[e].push(h),!1}let O2=Vo.VectorTileFeature.types,M2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ru(r,e,o,h,p,g,v,S,P,z,W,q,se){let ye=S?Math.min(Uo,Math.round(S[0])):0,be=S?Math.min(Uo,Math.round(S[1])):0;r.emplaceBack(e,o,Math.round(32*h),Math.round(32*p),g,v,(ye<<1)+(P?1:0),be,16*z,16*W,256*q,256*se)}function od(r,e,o){r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o)}function D2(r){for(let e of r.sections)if(hu(e.text))return!0;return!1}class ad{constructor(e){this.layoutVertexArray=new _i,this.indexArray=new Fn,this.programConfigurations=e,this.segments=new Er,this.dynamicLayoutVertexArray=new ui,this.opacityVertexArray=new wi,this.placedSymbolArray=new Nt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Qx.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,e2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,M2,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}sr("SymbolBuffers",ad);class sd{constructor(e,o,h){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Er,this.collisionVertexArray=new ii}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,t2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}sr("CollisionBuffers",sd);class ns{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(v=>v.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Vh([]),this.placementViewportMatrix=Vh([]);let o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wm(this.zoom,o["text-size"]),this.iconSizeData=wm(this.zoom,o["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=ud(h,"text-overlap","text-allow-overlap")!=="never"||ud(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(v=>a.WritingMode[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=e.sourceID}createArrays(){this.text=new ad(new ya(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new ad(new ya(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new qt,this.lineVertexArray=new or,this.symbolInstances=new ir}calculateGlyphDependencies(e,o,h,p,g){for(let v=0;v<e.length;v++)if(o[e.charCodeAt(v)]=!0,(h||p)&&g){let S=pl[e.charAt(v)];S&&(o[S.charCodeAt(0)]=!0)}}populate(e,o,h){let p=this.layers[0],g=p.layout,v=g.get("text-font"),S=g.get("text-field"),P=g.get("icon-image"),z=(S.value.kind!=="constant"||S.value.value instanceof V&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),W=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,q=g.get("symbol-sort-key");if(this.features=[],!z&&!W)return;let se=o.iconDependencies,ye=o.glyphDependencies,be=o.availableImages,Ge=new tn(this.zoom);for(let{feature:Ue,id:pt,index:Tt,sourceLayerIndex:ht}of e){let wt=p._featureFilter.needGeometry,Bt=ba(Ue,wt);if(!p._featureFilter.filter(Ge,Bt,h))continue;let Ft,ar;if(wt||(Bt.geometry=va(Ue)),z){let rr=p.getValueAndResolveTokens("text-field",Bt,h,be),Qt=V.factory(rr);D2(Qt)&&(this.hasRTLText=!0),(!this.hasRTLText||pa()==="unavailable"||this.hasRTLText&&ni.isParsed())&&(Ft=n2(Qt,p,Bt))}if(W){let rr=p.getValueAndResolveTokens("icon-image",Bt,h,be);ar=rr instanceof ee?rr:ee.fromString(rr)}if(!Ft&&!ar)continue;let cr=this.sortFeaturesByKey?q.evaluate(Bt,{},h):void 0;if(this.features.push({id:pt,text:Ft,icon:ar,index:Tt,sourceLayerIndex:ht,geometry:Bt.geometry,properties:Ue.properties,type:O2[Ue.type],sortKey:cr}),ar&&(se[ar.name]=!0),Ft){let rr=v.evaluate(Bt,{},h).join(","),Qt=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(let Yt of Ft.sections)if(Yt.image)se[Yt.image.name]=!0;else{let nr=Ha(Ft.toString()),er=Yt.fontStack||rr,Ut=ye[er]=ye[er]||{};this.calculateGlyphDependencies(Yt.text,Ut,Qt,this.allowVerticalPlacement,nr)}}}g.get("symbol-placement")==="line"&&(this.features=function(Ue){let pt={},Tt={},ht=[],wt=0;function Bt(rr){ht.push(Ue[rr]),wt++}function Ft(rr,Qt,Yt){let nr=Tt[rr];return delete Tt[rr],Tt[Qt]=nr,ht[nr].geometry[0].pop(),ht[nr].geometry[0]=ht[nr].geometry[0].concat(Yt[0]),nr}function ar(rr,Qt,Yt){let nr=pt[Qt];return delete pt[Qt],pt[rr]=nr,ht[nr].geometry[0].shift(),ht[nr].geometry[0]=Yt[0].concat(ht[nr].geometry[0]),nr}function cr(rr,Qt,Yt){let nr=Yt?Qt[0][Qt[0].length-1]:Qt[0][0];return`${rr}:${nr.x}:${nr.y}`}for(let rr=0;rr<Ue.length;rr++){let Qt=Ue[rr],Yt=Qt.geometry,nr=Qt.text?Qt.text.toString():null;if(!nr){Bt(rr);continue}let er=cr(nr,Yt),Ut=cr(nr,Yt,!0);if(er in Tt&&Ut in pt&&Tt[er]!==pt[Ut]){let gr=ar(er,Ut,Yt),fr=Ft(er,Ut,ht[gr].geometry);delete pt[er],delete Tt[Ut],Tt[cr(nr,ht[fr].geometry,!0)]=fr,ht[gr].geometry=null}else er in Tt?Ft(er,Ut,Yt):Ut in pt?ar(er,Ut,Yt):(Bt(rr),pt[er]=wt-1,Tt[Ut]=wt-1)}return ht.filter(rr=>rr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ue,pt)=>Ue.sortKey-pt.sortKey)}update(e,o,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,h),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){let h=this.lineVertexArray.length;if(e.segment!==void 0){let p=e.dist(o[e.segment+1]),g=e.dist(o[e.segment]),v={};for(let S=e.segment+1;S<o.length;S++)v[S]={x:o[S].x,y:o[S].y,tileUnitDistanceFromAnchor:p},S<o.length-1&&(p+=o[S+1].dist(o[S]));for(let S=e.segment||0;S>=0;S--)v[S]={x:o[S].x,y:o[S].y,tileUnitDistanceFromAnchor:g},S>0&&(g+=o[S-1].dist(o[S]));for(let S=0;S<o.length;S++){let P=v[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,o,h,p,g,v,S,P,z,W,q,se){let ye=e.indexArray,be=e.layoutVertexArray,Ge=e.segments.prepareSegment(4*o.length,be,ye,this.canOverlap?v.sortKey:void 0),Ue=this.glyphOffsetArray.length,pt=Ge.vertexLength,Tt=this.allowVerticalPlacement&&S===a.WritingMode.vertical?Math.PI/2:0,ht=v.text&&v.text.sections;for(let wt=0;wt<o.length;wt++){let{tl:Bt,tr:Ft,bl:ar,br:cr,tex:rr,pixelOffsetTL:Qt,pixelOffsetBR:Yt,minFontScaleX:nr,minFontScaleY:er,glyphOffset:Ut,isSDF:gr,sectionIndex:fr}=o[wt],Cr=Ge.vertexLength,Qr=Ut[1];Ru(be,P.x,P.y,Bt.x,Qr+Bt.y,rr.x,rr.y,h,gr,Qt.x,Qt.y,nr,er),Ru(be,P.x,P.y,Ft.x,Qr+Ft.y,rr.x+rr.w,rr.y,h,gr,Yt.x,Qt.y,nr,er),Ru(be,P.x,P.y,ar.x,Qr+ar.y,rr.x,rr.y+rr.h,h,gr,Qt.x,Yt.y,nr,er),Ru(be,P.x,P.y,cr.x,Qr+cr.y,rr.x+rr.w,rr.y+rr.h,h,gr,Yt.x,Yt.y,nr,er),od(e.dynamicLayoutVertexArray,P,Tt),ye.emplaceBack(Cr,Cr+1,Cr+2),ye.emplaceBack(Cr+1,Cr+2,Cr+3),Ge.vertexLength+=4,Ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),wt!==o.length-1&&fr===o[wt+1].sectionIndex||e.programConfigurations.populatePaintArrays(be.length,v,v.index,{},se,ht&&ht[fr])}e.placedSymbolArray.emplaceBack(P.x,P.y,Ue,this.glyphOffsetArray.length-Ue,pt,z,W,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,q)}_addCollisionDebugVertex(e,o,h,p,g,v){return o.emplaceBack(0,0),e.emplaceBack(h.x,h.y,p,g,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(e,o,h,p,g,v,S){let P=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),z=P.vertexLength,W=g.layoutVertexArray,q=g.collisionVertexArray,se=S.anchorX,ye=S.anchorY;this._addCollisionDebugVertex(W,q,v,se,ye,new je(e,o)),this._addCollisionDebugVertex(W,q,v,se,ye,new je(h,o)),this._addCollisionDebugVertex(W,q,v,se,ye,new je(h,p)),this._addCollisionDebugVertex(W,q,v,se,ye,new je(e,p)),P.vertexLength+=4;let be=g.indexArray;be.emplaceBack(z,z+1),be.emplaceBack(z+1,z+2),be.emplaceBack(z+2,z+3),be.emplaceBack(z+3,z),P.primitiveLength+=4}addDebugCollisionBoxes(e,o,h,p){for(let g=e;g<o;g++){let v=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sd(Yi,lm.members,ki),this.iconCollisionBox=new sd(Yi,lm.members,ki);for(let e=0;e<this.symbolInstances.length;e++){let o=this.symbolInstances.get(e);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(e,o,h,p,g,v,S,P,z){let W={};for(let q=o;q<h;q++){let se=e.get(q);W.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.textFeatureIndex=se.featureIndex;break}for(let q=p;q<g;q++){let se=e.get(q);W.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalTextFeatureIndex=se.featureIndex;break}for(let q=v;q<S;q++){let se=e.get(q);W.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.iconFeatureIndex=se.featureIndex;break}for(let q=P;q<z;q++){let se=e.get(q);W.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalIconFeatureIndex=se.featureIndex;break}return W}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){let h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){let h=e.placedSymbolArray.get(o),p=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<p;g+=4)e.indexArray.emplaceBack(g,g+1,g+2),e.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let o=Math.sin(e),h=Math.cos(e),p=[],g=[],v=[];for(let S=0;S<this.symbolInstances.length;++S){v.push(S);let P=this.symbolInstances.get(S);p.push(0|Math.round(o*P.anchorX+h*P.anchorY)),g.push(P.featureIndex)}return v.sort((S,P)=>p[S]-p[P]||g[P]-g[S]),v}addToSortKeyRanges(e,o){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let o of this.symbolInstanceIndexes){let h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,g,v)=>{p>=0&&v.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}sr("SymbolBucket",ns,{omit:["layers","collisionBoxArray","features","compareText"]}),ns.MAX_GLYPHS=65535,ns.addDynamicAttributes=od;let A2=new Tn({"symbol-placement":new hr(fe.layout_symbol["symbol-placement"]),"symbol-spacing":new hr(fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hr(fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vr(fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hr(fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hr(fe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hr(fe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hr(fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new hr(fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hr(fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new vr(fe.layout_symbol["icon-size"]),"icon-text-fit":new hr(fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hr(fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new vr(fe.layout_symbol["icon-image"]),"icon-rotate":new vr(fe.layout_symbol["icon-rotate"]),"icon-padding":new vr(fe.layout_symbol["icon-padding"]),"icon-keep-upright":new hr(fe.layout_symbol["icon-keep-upright"]),"icon-offset":new vr(fe.layout_symbol["icon-offset"]),"icon-anchor":new vr(fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hr(fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hr(fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hr(fe.layout_symbol["text-rotation-alignment"]),"text-field":new vr(fe.layout_symbol["text-field"]),"text-font":new vr(fe.layout_symbol["text-font"]),"text-size":new vr(fe.layout_symbol["text-size"]),"text-max-width":new vr(fe.layout_symbol["text-max-width"]),"text-line-height":new hr(fe.layout_symbol["text-line-height"]),"text-letter-spacing":new vr(fe.layout_symbol["text-letter-spacing"]),"text-justify":new vr(fe.layout_symbol["text-justify"]),"text-radial-offset":new vr(fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hr(fe.layout_symbol["text-variable-anchor"]),"text-anchor":new vr(fe.layout_symbol["text-anchor"]),"text-max-angle":new hr(fe.layout_symbol["text-max-angle"]),"text-writing-mode":new hr(fe.layout_symbol["text-writing-mode"]),"text-rotate":new vr(fe.layout_symbol["text-rotate"]),"text-padding":new hr(fe.layout_symbol["text-padding"]),"text-keep-upright":new hr(fe.layout_symbol["text-keep-upright"]),"text-transform":new vr(fe.layout_symbol["text-transform"]),"text-offset":new vr(fe.layout_symbol["text-offset"]),"text-allow-overlap":new hr(fe.layout_symbol["text-allow-overlap"]),"text-overlap":new hr(fe.layout_symbol["text-overlap"]),"text-ignore-placement":new hr(fe.layout_symbol["text-ignore-placement"]),"text-optional":new hr(fe.layout_symbol["text-optional"])});var ld={paint:new Tn({"icon-opacity":new vr(fe.paint_symbol["icon-opacity"]),"icon-color":new vr(fe.paint_symbol["icon-color"]),"icon-halo-color":new vr(fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new vr(fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vr(fe.paint_symbol["icon-halo-blur"]),"icon-translate":new hr(fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new hr(fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new vr(fe.paint_symbol["text-opacity"]),"text-color":new vr(fe.paint_symbol["text-color"],{runtimeType:X,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new vr(fe.paint_symbol["text-halo-color"]),"text-halo-width":new vr(fe.paint_symbol["text-halo-width"]),"text-halo-blur":new vr(fe.paint_symbol["text-halo-blur"]),"text-translate":new hr(fe.paint_symbol["text-translate"]),"text-translate-anchor":new hr(fe.paint_symbol["text-translate-anchor"])}),layout:A2};class km{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ve,this.defaultValue=e}evaluate(e){if(e.formattedSection){let o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}sr("FormatSectionOverride",km,{omit:["defaultValue"]});class ju extends xi{constructor(e){super(e,ld)}recalculate(e,o){if(super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let g of h)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,o,h,p){let g=this.layout.get(e).evaluate(o,{},h,p),v=this._unevaluatedLayout._values[e];return v.isDataDriven()||ta(v.value)||!g?g:function(S,P){return P.replace(/{([^{}]+)}/g,(z,W)=>W in S?String(S[W]):"")}(o.properties,g)}createBucket(e){return new ns(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let e of ld.paint.overridableProperties){if(!ju.hasPaintOverride(this.layout,e))continue;let o=this.paint.get(e),h=new km(o),p=new Va(h,o.property.specification),g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new na("source",p):new Us("composite",p,o.value.zoomStops),this.paint._values[e]=new bi(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&ju.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){let h=e.get("text-field"),p=ld.paint.properties[o],g=!1,v=S=>{for(let P of S)if(p.overrides&&p.overrides.hasOverride(P))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof V)v(h.value.value.sections);else if(h.value.kind==="source"){let S=z=>{g||(z instanceof At&&Ne(z.value)===ot?v(z.value.sections):z instanceof ja?v(z.sections):z.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return g}}function ud(r,e,o){let h="never",p=r.get(e);return p?h=p:r.get(o)&&(h="always"),h}var I2={paint:new Tn({"background-color":new hr(fe.paint_background["background-color"]),"background-pattern":new el(fe.paint_background["background-pattern"]),"background-opacity":new hr(fe.paint_background["background-opacity"])})},z2={paint:new Tn({"raster-opacity":new hr(fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new hr(fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hr(fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hr(fe.paint_raster["raster-brightness-max"]),"raster-saturation":new hr(fe.paint_raster["raster-saturation"]),"raster-contrast":new hr(fe.paint_raster["raster-contrast"]),"raster-resampling":new hr(fe.paint_raster["raster-resampling"]),"raster-fade-duration":new hr(fe.paint_raster["raster-fade-duration"])})};class k2 extends xi{constructor(e){super(e,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}let L2={circle:class extends xi{constructor(r){super(r,dx)}createBucket(r){return new Rh(r)}queryRadius(r){let e=r;return ol("circle-radius",this,e)+ol("circle-stroke-width",this,e)+xu(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,o,h,p,g,v,S){let P=_u(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,v),z=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o),W=this.paint.get("circle-pitch-alignment")==="map",q=W?P:function(ye,be){return ye.map(Ge=>Hp(Ge,be))}(P,S),se=W?z*v:z;for(let ye of h)for(let be of ye){let Ge=W?be:Hp(be,S),Ue=se,pt=wu([],[be.x,be.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=pt[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=g.cameraToCenterDistance/pt[3]),sx(q,Ge,Ue))return!0}return!1}},heatmap:class extends xi{constructor(r){super(r,px),this._updateColorRamp()}createBucket(r){return new Gp(r)}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends xi{constructor(r){super(r,mx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends xi{constructor(r){super(r,Ax)}recalculate(r,e){super.recalculate(r,e);let o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Zh(r)}queryRadius(){return xu(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,o,h,p,g,v){return jp(_u(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,v),h)}isTileClipped(){return!0}},"fill-extrusion":class extends xi{constructor(r){super(r,Hx)}createBucket(r){return new Xh(r)}queryRadius(){return xu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,e,o,h,p,g,v,S){let P=_u(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,v),z=this.paint.get("fill-extrusion-height").evaluate(e,o),W=this.paint.get("fill-extrusion-base").evaluate(e,o),q=function(ye,be,Ge,Ue){let pt=[];for(let Tt of ye){let ht=[Tt.x,Tt.y,0,1];wu(ht,ht,be),pt.push(new je(ht[0]/ht[3],ht[1]/ht[3]))}return pt}(P,S),se=function(ye,be,Ge,Ue){let pt=[],Tt=[],ht=Ue[8]*be,wt=Ue[9]*be,Bt=Ue[10]*be,Ft=Ue[11]*be,ar=Ue[8]*Ge,cr=Ue[9]*Ge,rr=Ue[10]*Ge,Qt=Ue[11]*Ge;for(let Yt of ye){let nr=[],er=[];for(let Ut of Yt){let gr=Ut.x,fr=Ut.y,Cr=Ue[0]*gr+Ue[4]*fr+Ue[12],Qr=Ue[1]*gr+Ue[5]*fr+Ue[13],nn=Ue[2]*gr+Ue[6]*fr+Ue[14],yn=Ue[3]*gr+Ue[7]*fr+Ue[15],di=nn+Bt,Pn=yn+Ft,dn=Cr+ar,wn=Qr+cr,On=nn+rr,zn=yn+Qt,Zn=new je((Cr+ht)/Pn,(Qr+wt)/Pn);Zn.z=di/Pn,nr.push(Zn);let fn=new je(dn/zn,wn/zn);fn.z=On/zn,er.push(fn)}pt.push(nr),Tt.push(er)}return[pt,Tt]}(h,W,z,S);return function(ye,be,Ge){let Ue=1/0;jp(Ge,be)&&(Ue=nm(Ge,be[0]));for(let pt=0;pt<be.length;pt++){let Tt=be[pt],ht=ye[pt];for(let wt=0;wt<Tt.length-1;wt++){let Bt=Tt[wt],Ft=[Bt,Tt[wt+1],ht[wt+1],ht[wt],Bt];Rp(Ge,Ft)&&(Ue=Math.min(Ue,nm(Ge,Ft)))}}return Ue!==1/0&&Ue}(se[0],se[1],q)}},line:class extends xi{constructor(r){super(r,om),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Wn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=am.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Jh(r)}queryRadius(r){let e=r,o=sm(ol("line-width",this,e),ol("line-gap-width",this,e)),h=ol("line-offset",this,e);return o/2+Math.abs(h)+xu(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,o,h,p,g,v){let S=_u(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,v),P=v/2*sm(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),z=this.paint.get("line-offset").evaluate(e,o);return z&&(h=function(W,q){let se=[];for(let ye=0;ye<W.length;ye++){let be=W[ye],Ge=[];for(let Ue=0;Ue<be.length;Ue++){let pt=be[Ue-1],Tt=be[Ue],ht=be[Ue+1],wt=Ue===0?new je(0,0):Tt.sub(pt)._unit()._perp(),Bt=Ue===be.length-1?new je(0,0):ht.sub(Tt)._unit()._perp(),Ft=wt._add(Bt)._unit(),ar=Ft.x*Bt.x+Ft.y*Bt.y;ar!==0&&Ft._mult(1/ar),Ge.push(Ft._mult(q)._add(Tt))}se.push(Ge)}return se}(h,z*v)),function(W,q,se){for(let ye=0;ye<q.length;ye++){let be=q[ye];if(W.length>=3){for(let Ge=0;Ge<be.length;Ge++)if(Xa(W,be[Ge]))return!0}if(lx(W,be,se))return!0}return!1}(S,h,P)}isTileClipped(){return!0}},symbol:ju,background:class extends xi{constructor(r){super(r,I2)}},raster:class extends xi{constructor(r){super(r,z2)}}};class R2{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}let Lm=63710088e-1;class ln{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ln(M(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let o=Math.PI/180,h=this.lat*o,p=e.lat*o,g=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((e.lng-this.lng)*o);return Lm*Math.acos(Math.min(g,1))}toBounds(e=0){let o=360*e/40075017,h=o/Math.cos(Math.PI/180*this.lat);return new _a(new ln(this.lng-h,this.lat-o),new ln(this.lng+h,this.lat+o))}static convert(e){if(e instanceof ln)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ln(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ln(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class _a{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof ln?new ln(e.lng,e.lat):ln.convert(e),this}setSouthWest(e){return this._sw=e instanceof ln?new ln(e.lng,e.lat):ln.convert(e),this}extend(e){let o=this._sw,h=this._ne,p,g;if(e instanceof ln)p=e,g=e;else{if(!(e instanceof _a))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(_a.convert(e)):this.extend(ln.convert(e)):this;if(p=e._sw,g=e._ne,!p||!g)return this}return o||h?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new ln(p.lng,p.lat),this._ne=new ln(g.lng,g.lat)),this}getCenter(){return new ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ln(this.getWest(),this.getNorth())}getSouthEast(){return new ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){let{lng:o,lat:h}=ln.convert(e),p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(e){return e instanceof _a?e:e&&new _a(e)}}let Rm=2*Math.PI*Lm;function jm(r){return Rm*Math.cos(r*Math.PI/180)}function Fm(r){return(180+r)/360}function Vm(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Bm(r,e){return r/jm(e)}function cd(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class Fu{constructor(e,o,h=0){this.x=+e,this.y=+o,this.z=+h}static fromLngLat(e,o=0){let h=ln.convert(e);return new Fu(Fm(h.lng),Vm(h.lat),Bm(o,h.lat))}toLngLat(){return new ln(360*this.x-180,cd(this.y))}toAltitude(){return this.z*jm(cd(this.y))}meterInMercatorCoordinateUnits(){return 1/Rm*(e=cd(this.y),1/Math.cos(e*Math.PI/180));var e}}function Nm(r,e,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[r*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class hd{constructor(e,o,h){if(e<0||e>25||h<0||h>=Math.pow(2,e)||o<0||o>=Math.pow(2,e))throw new Error(`x=${o}, y=${h}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=o,this.y=h,this.key=gl(0,e,e,o,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o,h){let p=(v=this.y,S=this.z,P=Nm(256*(g=this.x),256*(v=Math.pow(2,S)-v-1),S),z=Nm(256*(g+1),256*(v+1),S),P[0]+","+P[1]+","+z[0]+","+z[1]);var g,v,S,P,z;let W=function(q,se,ye){let be,Ge="";for(let Ue=q;Ue>0;Ue--)be=1<<Ue-1,Ge+=(se&be?1:0)+(ye&be?2:0);return Ge}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,p)}isChildOf(e){let o=this.z-e.z;return o>0&&e.x===this.x>>o&&e.y===this.y>>o}getTilePoint(e){let o=Math.pow(2,this.z);return new je((e.x*o-this.x)*gn,(e.y*o-this.y)*gn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Um{constructor(e,o){this.wrap=e,this.canonical=o,this.key=gl(e,o.z,o.z,o.x,o.y)}}class hi{constructor(e,o,h,p,g){if(e<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${h}`);this.overscaledZ=e,this.wrap=o,this.canonical=new hd(h,+p,+g),this.key=gl(o,e,h,p,g)}clone(){return new hi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let o=this.canonical.z-e;return e>this.canonical.z?new hi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hi(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-e;return e>this.canonical.z?gl(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y):gl(this.wrap*+o,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap)return!1;let o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let o=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new hi(o,this.wrap,o,h,p),new hi(o,this.wrap,o,h+1,p),new hi(o,this.wrap,o,h,p+1),new hi(o,this.wrap,o,h+1,p+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new hi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Um(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Fu(e.x-this.wrap,e.y))}}function gl(r,e,o,h,p){(r*=2)<0&&(r=-1*r-1);let g=1<<o;return(g*g*r+g*p+h).toString(36)+o.toString(36)+e.toString(36)}sr("CanonicalTileID",hd),sr("OverscaledTileID",hi,{omit:["posMatrix"]});class $m{constructor(e,o,h){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void K(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;let p=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=h||"mapbox";for(let g=0;g<p;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(p,g)]=this.data[this._idx(p-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,p)]=this.data[this._idx(g,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let g=0;g<p;g++)for(let v=0;v<p;v++){let S=this.get(g,v);S>this.max&&(this.max=S),S<this.min&&(this.min=S)}}get(e,o){let h=new Uint8Array(this.data.buffer),p=4*this._idx(e,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,h){return(256*e*256+256*o+h)/10-1e4}_unpackTerrarium(e,o,h){return 256*e+o+h/256-32768}getPixels(){return new ci({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,o,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,g=o*this.dim+this.dim,v=h*this.dim,S=h*this.dim+this.dim;switch(o){case-1:p=g-1;break;case 1:g=p+1}switch(h){case-1:v=S-1;break;case 1:S=v+1}let P=-o*this.dim,z=-h*this.dim;for(let W=v;W<S;W++)for(let q=p;q<g;q++)this.data[this._idx(q,W)]=e.data[this._idx(q+P,W+z)]}}sr("DEMData",$m);class Wm{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){let h=e[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Hm{constructor(e,o,h,p,g){this.type="Feature",this._vectorTileFeature=e,e._z=o,e._x=h,e._y=p,this.properties=e.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={geometry:this.geometry};for(let o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(e[o]=this[o]);return e}}class Gm{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new fa(gn,16,0),this.grid3D=new fa(gn,16,0),this.featureIndexArray=new wr,this.promoteId=o}insert(e,o,h,p,g,v){let S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,g);let P=v?this.grid3D:this.grid;for(let z=0;z<o.length;z++){let W=o[z],q=[1/0,1/0,-1/0,-1/0];for(let se=0;se<W.length;se++){let ye=W[se];q[0]=Math.min(q[0],ye.x),q[1]=Math.min(q[1],ye.y),q[2]=Math.max(q[2],ye.x),q[3]=Math.max(q[3],ye.y)}q[0]<gn&&q[1]<gn&&q[2]>=0&&q[3]>=0&&P.insert(S,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vo.VectorTile(new qh(this.rawTileData)).layers,this.sourceLayerCoder=new Wm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,o,h,p){this.loadVTLayers();let g=e.params||{},v=gn/e.tileSize/e.scale,S=Ua(g.filter),P=e.queryGeometry,z=e.queryPadding*v,W=Zm(P),q=this.grid.query(W.minX-z,W.minY-z,W.maxX+z,W.maxY+z),se=Zm(e.cameraQueryGeometry),ye=this.grid3D.query(se.minX-z,se.minY-z,se.maxX+z,se.maxY+z,(Ue,pt,Tt,ht)=>function(wt,Bt,Ft,ar,cr){for(let Qt of wt)if(Bt<=Qt.x&&Ft<=Qt.y&&ar>=Qt.x&&cr>=Qt.y)return!0;let rr=[new je(Bt,Ft),new je(Bt,cr),new je(ar,cr),new je(ar,Ft)];if(wt.length>2){for(let Qt of rr)if(Xa(wt,Qt))return!0}for(let Qt=0;Qt<wt.length-1;Qt++)if(cx(wt[Qt],wt[Qt+1],rr))return!0;return!1}(e.cameraQueryGeometry,Ue-z,pt-z,Tt+z,ht+z));for(let Ue of ye)q.push(Ue);q.sort(j2);let be={},Ge;for(let Ue=0;Ue<q.length;Ue++){let pt=q[Ue];if(pt===Ge)continue;Ge=pt;let Tt=this.featureIndexArray.get(pt),ht=null;this.loadMatchingFeature(be,Tt.bucketIndex,Tt.sourceLayerIndex,Tt.featureIndex,S,g.layers,g.availableImages,o,h,p,(wt,Bt,Ft)=>(ht||(ht=va(wt)),Bt.queryIntersectsFeature(P,wt,Ft,ht,this.z,e.transform,v,e.pixelPosMatrix)))}return be}loadMatchingFeature(e,o,h,p,g,v,S,P,z,W,q){let se=this.bucketLayerIDs[o];if(v&&!function(Ue,pt){for(let Tt=0;Tt<Ue.length;Tt++)if(pt.indexOf(Ue[Tt])>=0)return!0;return!1}(v,se))return;let ye=this.sourceLayerCoder.decode(h),be=this.vtLayers[ye].feature(p);if(g.needGeometry){let Ue=ba(be,!0);if(!g.filter(new tn(this.tileID.overscaledZ),Ue,this.tileID.canonical))return}else if(!g.filter(new tn(this.tileID.overscaledZ),be))return;let Ge=this.getId(be,ye);for(let Ue=0;Ue<se.length;Ue++){let pt=se[Ue];if(v&&v.indexOf(pt)<0)continue;let Tt=P[pt];if(!Tt)continue;let ht={};Ge&&W&&(ht=W.getState(Tt.sourceLayer||"_geojsonTileLayer",Ge));let wt=A({},z[pt]);wt.paint=Km(wt.paint,Tt.paint,be,ht,S),wt.layout=Km(wt.layout,Tt.layout,be,ht,S);let Bt=!q||q(be,Tt,ht);if(!Bt)continue;let Ft=new Hm(be,this.z,this.x,this.y,Ge);Ft.layer=wt;let ar=e[pt];ar===void 0&&(ar=e[pt]=[]),ar.push({featureIndex:p,feature:Ft,intersectionZ:Bt})}}lookupSymbolFeatures(e,o,h,p,g,v,S,P){let z={};this.loadVTLayers();let W=Ua(g);for(let q of e)this.loadMatchingFeature(z,h,p,q,W,v,S,P,o);return z}hasLayer(e){for(let o of this.bucketLayerIDs)for(let h of o)if(e===h)return!0;return!1}getId(e,o){let h=e.id;return this.promoteId&&(h=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof h=="boolean"&&(h=Number(h))),h}}function Km(r,e,o,h,p){return $(r,(g,v)=>{let S=e instanceof ga?e.get(v):null;return S&&S.evaluate?S.evaluate(o,h,p):S})}function Zm(r){let e=1/0,o=1/0,h=-1/0,p=-1/0;for(let g of r)e=Math.min(e,g.x),o=Math.min(o,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return{minX:e,minY:o,maxX:h,maxY:p}}function j2(r,e){return e-r}var dd;sr("FeatureIndex",Gm,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(dd=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",dd.load="load",dd.fullLoad="fullLoad";let Vu=null,yl=[],fd=1e3/30,F2={mark(r){performance.mark(r)},frame(r){let e=r;Vu!=null&&yl.push(e-Vu),Vu=e},clearMetrics(){Vu=null,yl=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(let r in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);let r=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,o=yl.length,h=1/(yl.reduce((g,v)=>g+v,0)/o/1e3),p=yl.filter(g=>g>fd).reduce((g,v)=>g+(v-fd)/fd,0);return{loadTime:r,fullLoadTime:e,fps:h,percentDroppedFrames:p/(o+p)*100}}};a.AJAXError=Jt,a.ARRAY_TYPE=Bn,a.Actor=class{constructor(r,e,o){this.target=r,this.parent=e,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new R2(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?r:window}send(r,e,o,h,p=!1){let g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[g]=o);let v=et(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:r,hasCallback:!!o,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:lo(e,v)},v),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(r){let e=r.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){delete this.tasks[o];let h=this.cancelCallbacks[o];delete this.cancelCallbacks[o],h&&h()}else L()||e.mustQueue?(this.tasks[o]=e,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,e)}process(){if(!this.taskQueue.length)return;let r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){if(e.type==="<response>"){let o=this.callbacks[r];delete this.callbacks[r],o&&(e.error?o(Wi(e.error)):o(null,Wi(e.data)))}else{let o=!1,h=et(this.globalScope)?void 0:[],p=e.hasCallback?(S,P)=>{o=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:S?lo(S):null,data:lo(P,h)},h)}:S=>{o=!0},g=null,v=Wi(e.data);if(this.parent[e.type])g=this.parent[e.type](e.sourceMapId,v,p);else if(this.parent.getWorkerSource){let S=e.type.split(".");g=this.parent.getWorkerSource(e.sourceMapId,S[0],v.source)[S[1]](v,p)}else p(new Error(`Could not find function ${e.type}`));!o&&g&&g.cancel&&(this.cancelCallbacks[r]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=sl,a.CanonicalTileID=hd,a.CollisionBoxArray=Dt,a.CollisionCircleLayoutArray=class extends J{},a.Color=xe,a.DEMData=$m,a.DataConstantProperty=hr,a.DictionaryCoder=Wm,a.EXTENT=gn,a.ErrorEvent=Qe,a.EvaluationParameters=tn,a.Event=We,a.Evented=He,a.FeatureIndex=Gm,a.FillBucket=Zh,a.FillExtrusionBucket=Xh,a.GeoJSONFeature=Hm,a.ImageAtlas=gm,a.ImagePosition=ed,a.LineBucket=Jh,a.LineStripIndexArray=class extends Be{},a.LngLat=ln,a.LngLatBounds=_a,a.MercatorCoordinate=Fu,a.ONE_EM=En,a.OverscaledTileID=hi,a.PerformanceUtils=F2,a.PosArray=mr,a.Properties=Tn,a.QuadTriangleArray=class extends ge{},a.RGBAImage=ci,a.RasterBoundsArray=class extends f{},a.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},a.ResourceType=Ht,a.SegmentVector=Er,a.SymbolBucket=ns,a.Transitionable=pu,a.TriangleIndexArray=Fn,a.Uniform1f=fo,a.Uniform1i=class extends ho{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},a.Uniform2f=class extends ho{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},a.Uniform3f=class extends ho{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},a.Uniform4f=Za,a.UniformColor=Ip,a.UniformMatrix4f=class extends ho{constructor(r,e){super(r,e),this.current=ox}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},a.UnwrappedTileID=Um,a.ValidationError=De,a.ZoomHistory=Gs,a.add=function(r,e,o){return r[0]=e[0]+o[0],r[1]=e[1]+o[1],r[2]=e[2]+o[2],r},a.addDynamicAttributes=od,a.asyncAll=function(r,e,o){if(!r.length)return o(null,[]);let h=r.length,p=new Array(r.length),g=null;r.forEach((v,S)=>{e(v,(P,z)=>{P&&(g=P),p[S]=z,--h==0&&o(g,p)})})},a.bezier=_,a.bindAll=E,a.cacheEntryPossiblyAdded=function(r){Ke++,Ke>Ce&&(r.getActor().send("enforceCacheSizeLimit",ke),Ke=0)},a.clamp=x,a.clearTileCache=function(r){let e=caches.delete(te);r&&e.catch(r).then(()=>r())},a.clipLine=Om,a.clone=function(r){var e=new Bn(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},a.clone$1=G,a.clone$2=function(r){var e=new Bn(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},a.collisionCircleLayout=r2,a.config=_e,a.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},a.create=function(){var r=new Bn(16);return Bn!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=Bp,a.createExpression=ra,a.createFilter=Ua,a.createLayout=hn,a.createStyleLayer=function(r){return r.type==="custom"?new k2(r):new L2[r.type](r)},a.cross=function(r,e,o){var h=e[0],p=e[1],g=e[2],v=o[0],S=o[1],P=o[2];return r[0]=p*P-g*S,r[1]=g*v-h*P,r[2]=h*S-p*v,r},a.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]},a.dot$1=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},a.ease=T,a.emitValidationErrors=Wa,a.enforceCacheSizeLimit=function(r){$e(),ce&&ce.then(e=>{e.keys().then(o=>{for(let h=0;h<o.length-r;h++)e.delete(o[h])})})},a.equals=function(r,e){var o=r[0],h=r[1],p=r[2],g=r[3],v=r[4],S=r[5],P=r[6],z=r[7],W=r[8],q=r[9],se=r[10],ye=r[11],be=r[12],Ge=r[13],Ue=r[14],pt=r[15],Tt=e[0],ht=e[1],wt=e[2],Bt=e[3],Ft=e[4],ar=e[5],cr=e[6],rr=e[7],Qt=e[8],Yt=e[9],nr=e[10],er=e[11],Ut=e[12],gr=e[13],fr=e[14],Cr=e[15];return Math.abs(o-Tt)<=Vn*Math.max(1,Math.abs(o),Math.abs(Tt))&&Math.abs(h-ht)<=Vn*Math.max(1,Math.abs(h),Math.abs(ht))&&Math.abs(p-wt)<=Vn*Math.max(1,Math.abs(p),Math.abs(wt))&&Math.abs(g-Bt)<=Vn*Math.max(1,Math.abs(g),Math.abs(Bt))&&Math.abs(v-Ft)<=Vn*Math.max(1,Math.abs(v),Math.abs(Ft))&&Math.abs(S-ar)<=Vn*Math.max(1,Math.abs(S),Math.abs(ar))&&Math.abs(P-cr)<=Vn*Math.max(1,Math.abs(P),Math.abs(cr))&&Math.abs(z-rr)<=Vn*Math.max(1,Math.abs(z),Math.abs(rr))&&Math.abs(W-Qt)<=Vn*Math.max(1,Math.abs(W),Math.abs(Qt))&&Math.abs(q-Yt)<=Vn*Math.max(1,Math.abs(q),Math.abs(Yt))&&Math.abs(se-nr)<=Vn*Math.max(1,Math.abs(se),Math.abs(nr))&&Math.abs(ye-er)<=Vn*Math.max(1,Math.abs(ye),Math.abs(er))&&Math.abs(be-Ut)<=Vn*Math.max(1,Math.abs(be),Math.abs(Ut))&&Math.abs(Ge-gr)<=Vn*Math.max(1,Math.abs(Ge),Math.abs(gr))&&Math.abs(Ue-fr)<=Vn*Math.max(1,Math.abs(Ue),Math.abs(fr))&&Math.abs(pt-Cr)<=Vn*Math.max(1,Math.abs(pt),Math.abs(Cr))},a.evaluateSizeForFeature=function(r,{uSize:e,uSizeT:o},{lowerSize:h,upperSize:p}){return r.kind==="source"?h/go:r.kind==="composite"?Yr(h/go,p/go,o):e},a.evaluateSizeForZoom=function(r,e){let o=0,h=0;if(r.kind==="constant")h=r.layoutSize;else if(r.kind!=="source"){let{interpolationType:p,minZoom:g,maxZoom:v}=r,S=p?x(Hn.interpolationFactor(p,e,g,v),0,1):0;r.kind==="camera"?h=Yr(r.minSize,r.maxSize,S):o=S}return{uSizeT:o,uSize:h}},a.evaluateVariableOffset=Am,a.evented=Qs,a.exported=tt,a.exported$1=Ve,a.extend=A,a.filterObject=Y,a.fromRotation=function(r,e){var o=Math.sin(e),h=Math.cos(e);return r[0]=h,r[1]=o,r[2]=0,r[3]=-o,r[4]=h,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},a.getAnchorAlignment=rd,a.getAnchorJustification=id,a.getArrayBuffer=st,a.getImage=mt,a.getJSON=function(r,e){return Ye(A(r,{type:"json"}),e)},a.getOverlapMode=ud,a.getRTLTextPluginStatus=pa,a.getReferrer=Mt,a.getVideo=function(r,e){let o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let h=0;h<r.length;h++){let p=window.document.createElement("source");_t(r[h])||(o.crossOrigin="Anonymous"),p.src=r[h],o.appendChild(p)}return{cancel:()=>{}}},a.identity=Vh,a.invert=function(r,e){var o=e[0],h=e[1],p=e[2],g=e[3],v=e[4],S=e[5],P=e[6],z=e[7],W=e[8],q=e[9],se=e[10],ye=e[11],be=e[12],Ge=e[13],Ue=e[14],pt=e[15],Tt=o*S-h*v,ht=o*P-p*v,wt=o*z-g*v,Bt=h*P-p*S,Ft=h*z-g*S,ar=p*z-g*P,cr=W*Ge-q*be,rr=W*Ue-se*be,Qt=W*pt-ye*be,Yt=q*Ue-se*Ge,nr=q*pt-ye*Ge,er=se*pt-ye*Ue,Ut=Tt*er-ht*nr+wt*Yt+Bt*Qt-Ft*rr+ar*cr;return Ut?(r[0]=(S*er-P*nr+z*Yt)*(Ut=1/Ut),r[1]=(p*nr-h*er-g*Yt)*Ut,r[2]=(Ge*ar-Ue*Ft+pt*Bt)*Ut,r[3]=(se*Ft-q*ar-ye*Bt)*Ut,r[4]=(P*Qt-v*er-z*rr)*Ut,r[5]=(o*er-p*Qt+g*rr)*Ut,r[6]=(Ue*wt-be*ar-pt*ht)*Ut,r[7]=(W*ar-se*wt+ye*ht)*Ut,r[8]=(v*nr-S*Qt+z*cr)*Ut,r[9]=(h*Qt-o*nr-g*cr)*Ut,r[10]=(be*Ft-Ge*wt+pt*Tt)*Ut,r[11]=(q*wt-W*Ft-ye*Tt)*Ut,r[12]=(S*rr-v*Yt-P*cr)*Ut,r[13]=(o*Yt-h*rr+p*cr)*Ut,r[14]=(Ge*ht-be*Bt-Ue*Tt)*Ut,r[15]=(W*Bt-q*ht+se*Tt)*Ut,r):null},a.isImageBitmap=lt,a.isSafari=et,a.isWorker=L,a.keysDifference=function(r,e){let o=[];for(let h in r)h in e||o.push(h);return o},a.lazyLoadRTLTextPlugin=function(){ni.isLoading()||ni.isLoaded()||pa()!=="deferred"||fu()},a.makeRequest=Ye,a.mapObject=$,a.mercatorXfromLng=Fm,a.mercatorYfromLat=Vm,a.mercatorZfromAltitude=Bm,a.mul=fx,a.mul$1=function(r,e,o){return r[0]=e[0]*o[0],r[1]=e[1]*o[1],r[2]=e[2]*o[2],r[3]=e[3]*o[3],r},a.multiply=Np,a.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},a.normalize=function(r,e){var o=e[0],h=e[1],p=e[2],g=o*o+h*h+p*p;return g>0&&(g=1/Math.sqrt(g)),r[0]=e[0]*g,r[1]=e[1]*g,r[2]=e[2]*g,r},a.number=Yr,a.ortho=function(r,e,o,h,p,g,v){var S=1/(e-o),P=1/(h-p),z=1/(g-v);return r[0]=-2*S,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*P,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*z,r[11]=0,r[12]=(e+o)*S,r[13]=(p+h)*P,r[14]=(v+g)*z,r[15]=1,r},a.parseCacheControl=k,a.parseGlyphPbf=function(r){return new qh(r).readFields(f2,[])},a.pbf=qh,a.performSymbolLayout=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=gn/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;let e=r.bucket.layers[0].layout,o=r.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:o["icon-size"].possiblyEvaluate(new tn(r.bucket.zoom+1),r.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new tn(r.bucket.zoom+1),r.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new tn(18))};if(r.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:z}=r.bucket.textSizeData;h.compositeTextSizes=[o["text-size"].possiblyEvaluate(new tn(P),r.canonical),o["text-size"].possiblyEvaluate(new tn(z),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:z}=r.bucket.iconSizeData;h.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new tn(P),r.canonical),o["icon-size"].possiblyEvaluate(new tn(z),r.canonical)]}let p=e.get("text-line-height")*En,g=e.get("text-rotation-alignment")!=="viewport"&&e.get("symbol-placement")!=="point",v=e.get("text-keep-upright"),S=e.get("text-size");for(let P of r.bucket.features){let z=e.get("text-font").evaluate(P,{},r.canonical).join(","),W=S.evaluate(P,{},r.canonical),q=h.layoutTextSize.evaluate(P,{},r.canonical),se=h.layoutIconSize.evaluate(P,{},r.canonical),ye={horizontal:{},vertical:void 0},be=P.text,Ge,Ue=[0,0];if(be){let ht=be.toString(),wt=e.get("text-letter-spacing").evaluate(P,{},r.canonical)*En,Bt=Ah(ht)?wt:0,Ft=e.get("text-anchor").evaluate(P,{},r.canonical),ar=e.get("text-variable-anchor");if(!ar){let nr=e.get("text-radial-offset").evaluate(P,{},r.canonical);Ue=nr?Am(Ft,[nr*En,nd]):e.get("text-offset").evaluate(P,{},r.canonical).map(er=>er*En)}let cr=g?"center":e.get("text-justify").evaluate(P,{},r.canonical),rr=e.get("symbol-placement"),Qt=rr==="point"?e.get("text-max-width").evaluate(P,{},r.canonical)*En:0,Yt=()=>{r.bucket.allowVerticalPlacement&&Ha(ht)&&(ye.vertical=Du(be,r.glyphMap,r.glyphPositions,r.imagePositions,z,Qt,p,Ft,"left",Bt,Ue,a.WritingMode.vertical,!0,rr,q,W))};if(!g&&ar){let nr=cr==="auto"?ar.map(Ut=>id(Ut)):[cr],er=!1;for(let Ut=0;Ut<nr.length;Ut++){let gr=nr[Ut];if(!ye.horizontal[gr])if(er)ye.horizontal[gr]=ye.horizontal[0];else{let fr=Du(be,r.glyphMap,r.glyphPositions,r.imagePositions,z,Qt,p,"center",gr,Bt,Ue,a.WritingMode.horizontal,!1,rr,q,W);fr&&(ye.horizontal[gr]=fr,er=fr.positionedLines.length===1)}}Yt()}else{cr==="auto"&&(cr=id(Ft));let nr=Du(be,r.glyphMap,r.glyphPositions,r.imagePositions,z,Qt,p,Ft,cr,Bt,Ue,a.WritingMode.horizontal,!1,rr,q,W);nr&&(ye.horizontal[cr]=nr),Yt(),Ha(ht)&&g&&v&&(ye.vertical=Du(be,r.glyphMap,r.glyphPositions,r.imagePositions,z,Qt,p,Ft,cr,Bt,Ue,a.WritingMode.vertical,!1,rr,q,W))}}let pt=!1;if(P.icon&&P.icon.name){let ht=r.imageMap[P.icon.name];ht&&(Ge=b2(r.imagePositions[P.icon.name],e.get("icon-offset").evaluate(P,{},r.canonical),e.get("icon-anchor").evaluate(P,{},r.canonical)),pt=!!ht.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=pt:r.bucket.sdfIcons!==pt&&K("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ht.pixelRatio!==r.bucket.pixelRatio||e.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}let Tt=zm(ye.horizontal)||ye.vertical;r.bucket.iconsInText=!!Tt&&Tt.iconsInText,(Tt||Ge)&&E2(r.bucket,P,ye,Ge,r.imageMap,h,q,se,Ue,pt,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},a.perspective=function(r,e,o,h,p){var g,v=1/Math.tan(e/2);return r[0]=v/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,p!=null&&p!==1/0?(r[10]=(p+h)*(g=1/(h-p)),r[14]=2*p*h*g):(r[10]=-1,r[14]=-2*h),r},a.pick=function(r,e){let o={};for(let h=0;h<e.length;h++){let p=e[h];p in r&&(o[p]=r[p])}return o},a.plugin=ni,a.pointGeometry=je,a.polygonIntersectsPolygon=Rp,a.potpack=mm,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=sr,a.registerForPluginStateChange=function(r){return r({pluginStatus:jn,pluginURL:Hi}),Qs.on("pluginStateChange",r),r},a.renderColorRamp=Zp,a.rotateX=function(r,e,o){var h=Math.sin(o),p=Math.cos(o),g=e[4],v=e[5],S=e[6],P=e[7],z=e[8],W=e[9],q=e[10],se=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=g*p+z*h,r[5]=v*p+W*h,r[6]=S*p+q*h,r[7]=P*p+se*h,r[8]=z*p-g*h,r[9]=W*p-v*h,r[10]=q*p-S*h,r[11]=se*p-P*h,r},a.rotateZ=function(r,e,o){var h=Math.sin(o),p=Math.cos(o),g=e[0],v=e[1],S=e[2],P=e[3],z=e[4],W=e[5],q=e[6],se=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*p+z*h,r[1]=v*p+W*h,r[2]=S*p+q*h,r[3]=P*p+se*h,r[4]=z*p-g*h,r[5]=W*p-v*h,r[6]=q*p-S*h,r[7]=se*p-P*h,r},a.scale=function(r,e,o){var h=o[0],p=o[1],g=o[2];return r[0]=e[0]*h,r[1]=e[1]*h,r[2]=e[2]*h,r[3]=e[3]*h,r[4]=e[4]*p,r[5]=e[5]*p,r[6]=e[6]*p,r[7]=e[7]*p,r[8]=e[8]*g,r[9]=e[9]*g,r[10]=e[10]*g,r[11]=e[11]*g,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},a.scale$1=function(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r},a.setCacheLimits=function(r,e){ke=r,Ce=e},a.setRTLTextPlugin=function(r,e,o=!1){if(jn===Ys||jn===Xs||jn===Js)throw new Error("setRTLTextPlugin cannot be called multiple times.");Hi=tt.resolveURL(r),jn=Ys,qs=e,Lo(),o||fu()},a.spec=fe,a.sphericalToCartesian=function([r,e,o]){return e+=90,e*=Math.PI/180,o*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(o),y:r*Math.sin(e)*Math.sin(o),z:r*Math.cos(o)}},a.sqrLen=function(r){var e=r[0],o=r[1];return e*e+o*o},a.sub=function(r,e,o){return r[0]=e[0]-o[0],r[1]=e[1]-o[1],r[2]=e[2]-o[2],r},a.toEvaluationFeature=ba,a.transformMat3=function(r,e,o){var h=e[0],p=e[1],g=e[2];return r[0]=h*o[0]+p*o[3]+g*o[6],r[1]=h*o[1]+p*o[4]+g*o[7],r[2]=h*o[2]+p*o[5]+g*o[8],r},a.transformMat4=wu,a.transformMat4$1=function(r,e,o){var h=e[0],p=e[1];return r[0]=o[0]*h+o[4]*p+o[12],r[1]=o[1]*h+o[5]*p+o[13],r},a.translate=function(r,e,o){var h,p,g,v,S,P,z,W,q,se,ye,be,Ge=o[0],Ue=o[1],pt=o[2];return e===r?(r[12]=e[0]*Ge+e[4]*Ue+e[8]*pt+e[12],r[13]=e[1]*Ge+e[5]*Ue+e[9]*pt+e[13],r[14]=e[2]*Ge+e[6]*Ue+e[10]*pt+e[14],r[15]=e[3]*Ge+e[7]*Ue+e[11]*pt+e[15]):(p=e[1],g=e[2],v=e[3],S=e[4],P=e[5],z=e[6],W=e[7],q=e[8],se=e[9],ye=e[10],be=e[11],r[0]=h=e[0],r[1]=p,r[2]=g,r[3]=v,r[4]=S,r[5]=P,r[6]=z,r[7]=W,r[8]=q,r[9]=se,r[10]=ye,r[11]=be,r[12]=h*Ge+S*Ue+q*pt+e[12],r[13]=p*Ge+P*Ue+se*pt+e[13],r[14]=g*Ge+z*Ue+ye*pt+e[14],r[15]=v*Ge+W*Ue+be*pt+e[15]),r},a.triggerPluginCompletionEvent=du,a.unicodeBlockLookup=tr,a.uniqueId=function(){return D++},a.validateCustomStyleLayer=function(r){let e=[],o=r.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},a.validateLight=Hs,a.validateStyle=da,a.vectorTile=Vo,a.warnOnce=K,a.wrap=M}),l(["./shared"],function(a){"use strict";function b(pe){let R=typeof pe;if(R==="number"||R==="boolean"||R==="string"||pe==null)return JSON.stringify(pe);if(Array.isArray(pe)){let xe="[";for(let Fe of pe)xe+=`${b(Fe)},`;return`${xe}]`}let Z=Object.keys(pe).sort(),he="{";for(let xe=0;xe<Z.length;xe++)he+=`${JSON.stringify(Z[xe])}:${b(pe[Z[xe]])},`;return`${he}}`}function w(pe){let R="";for(let Z of a.refProperties)R+=`/${b(pe[Z])}`;return R}class _{constructor(R){this.keyCache={},R&&this.replace(R)}replace(R){this._layerConfigs={},this._layers={},this.update(R,[])}update(R,Z){for(let xe of R){this._layerConfigs[xe.id]=xe;let Fe=this._layers[xe.id]=a.createStyleLayer(xe);Fe._featureFilter=a.createFilter(Fe.filter),this.keyCache[xe.id]&&delete this.keyCache[xe.id]}for(let xe of Z)delete this.keyCache[xe],delete this._layerConfigs[xe],delete this._layers[xe];this.familiesBySource={};let he=function(xe,Fe){let B={};for(let U=0;U<xe.length;U++){let ee=Fe&&Fe[xe[U].id]||w(xe[U]);Fe&&(Fe[xe[U].id]=ee);let ue=B[ee];ue||(ue=B[ee]=[]),ue.push(xe[U])}let V=[];for(let U in B)V.push(B[U]);return V}(Object.values(this._layerConfigs),this.keyCache);for(let xe of he){let Fe=xe.map(Te=>this._layers[Te.id]),B=Fe[0];if(B.visibility==="none")continue;let V=B.source||"",U=this.familiesBySource[V];U||(U=this.familiesBySource[V]={});let ee=B.sourceLayer||"_geojsonTileLayer",ue=U[ee];ue||(ue=U[ee]=[]),ue.push(Fe)}}}class T{constructor(R){let Z={},he=[];for(let V in R){let U=R[V],ee=Z[V]={};for(let ue in U){let Te=U[+ue];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;let Ne={x:0,y:0,w:Te.bitmap.width+2,h:Te.bitmap.height+2};he.push(Ne),ee[ue]={rect:Ne,metrics:Te.metrics}}}let{w:xe,h:Fe}=a.potpack(he),B=new a.AlphaImage({width:xe||1,height:Fe||1});for(let V in R){let U=R[V];for(let ee in U){let ue=U[+ee];if(!ue||ue.bitmap.width===0||ue.bitmap.height===0)continue;let Te=Z[V][ee].rect;a.AlphaImage.copy(ue.bitmap,B,{x:0,y:0},{x:Te.x+1,y:Te.y+1},ue.bitmap)}}this.image=B,this.positions=Z}}a.register("GlyphAtlas",T);class x{constructor(R){this.tileID=new a.OverscaledTileID(R.tileID.overscaledZ,R.tileID.wrap,R.tileID.canonical.z,R.tileID.canonical.x,R.tileID.canonical.y),this.uid=R.uid,this.zoom=R.zoom,this.pixelRatio=R.pixelRatio,this.tileSize=R.tileSize,this.source=R.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=R.showCollisionBoxes,this.collectResourceTiming=!!R.collectResourceTiming,this.returnDependencies=!!R.returnDependencies,this.promoteId=R.promoteId}parse(R,Z,he,xe,Fe){this.status="parsing",this.data=R,this.collisionBoxArray=new a.CollisionBoxArray;let B=new a.DictionaryCoder(Object.keys(R.layers).sort()),V=new a.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];let U={},ee={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},ue=Z.familiesBySource[this.source];for(let lr in ue){let yr=R.layers[lr];if(!yr)continue;yr.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${lr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let xr=B.encode(lr),Tr=[];for(let Zr=0;Zr<yr.length;Zr++){let Ar=yr.feature(Zr),cn=V.getId(Ar,lr);Tr.push({feature:Ar,id:cn,index:Zr,sourceLayerIndex:xr})}for(let Zr of ue[lr]){let Ar=Zr[0];Ar.source!==this.source&&a.warnOnce(`layer.source = ${Ar.source} does not equal this.source = ${this.source}`),Ar.minzoom&&this.zoom<Math.floor(Ar.minzoom)||Ar.maxzoom&&this.zoom>=Ar.maxzoom||Ar.visibility!=="none"&&(M(Zr,this.zoom,he),(U[Ar.id]=Ar.createBucket({index:V.bucketLayerIDs.length,layers:Zr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xr,sourceID:this.source})).populate(Tr,ee,this.tileID.canonical),V.bucketLayerIDs.push(Zr.map(cn=>cn.id)))}}let Te,Ne,Pt,At,jt=a.mapObject(ee.glyphDependencies,lr=>Object.keys(lr).map(Number));Object.keys(jt).length?xe.send("getGlyphs",{uid:this.uid,stacks:jt},(lr,yr)=>{Te||(Te=lr,Ne=yr,dr.call(this))}):Ne={};let $t=Object.keys(ee.iconDependencies);$t.length?xe.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"icons"},(lr,yr)=>{Te||(Te=lr,Pt=yr,dr.call(this))}):Pt={};let Zt=Object.keys(ee.patternDependencies);function dr(){if(Te)return Fe(Te);if(Ne&&Pt&&At){let lr=new T(Ne),yr=new a.ImageAtlas(Pt,At);for(let xr in U){let Tr=U[xr];Tr instanceof a.SymbolBucket?(M(Tr.layers,this.zoom,he),a.performSymbolLayout({bucket:Tr,glyphMap:Ne,glyphPositions:lr.positions,imageMap:Pt,imagePositions:yr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tr.hasPattern&&(Tr instanceof a.LineBucket||Tr instanceof a.FillBucket||Tr instanceof a.FillExtrusionBucket)&&(M(Tr.layers,this.zoom,he),Tr.addFeatures(ee,this.tileID.canonical,yr.patternPositions))}this.status="done",Fe(null,{buckets:Object.values(U).filter(xr=>!xr.isEmpty()),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:lr.image,imageAtlas:yr,glyphMap:this.returnDependencies?Ne:null,iconMap:this.returnDependencies?Pt:null,glyphPositions:this.returnDependencies?lr.positions:null})}}Zt.length?xe.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},(lr,yr)=>{Te||(Te=lr,At=yr,dr.call(this))}):At={},dr.call(this)}}function M(pe,R,Z){let he=new a.EvaluationParameters(R);for(let xe of pe)xe.recalculate(he,Z)}function A(pe,R){let Z=a.getArrayBuffer(pe.request,(he,xe,Fe,B)=>{he?R(he):xe&&R(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(xe)),rawData:xe,cacheControl:Fe,expires:B})});return()=>{Z.cancel(),R()}}class D{constructor(R,Z,he,xe){this.actor=R,this.layerIndex=Z,this.availableImages=he,this.loadVectorData=xe||A,this.loading={},this.loaded={}}loadTile(R,Z){let he=R.uid;this.loading||(this.loading={});let xe=!!(R&&R.request&&R.request.collectResourceTiming)&&new a.RequestPerformance(R.request),Fe=this.loading[he]=new x(R);Fe.abort=this.loadVectorData(R,(B,V)=>{if(delete this.loading[he],B||!V)return Fe.status="done",this.loaded[he]=Fe,Z(B);let U=V.rawData,ee={};V.expires&&(ee.expires=V.expires),V.cacheControl&&(ee.cacheControl=V.cacheControl);let ue={};if(xe){let Te=xe.finish();Te&&(ue.resourceTiming=JSON.parse(JSON.stringify(Te)))}Fe.vectorTile=V.vectorTile,Fe.parse(V.vectorTile,this.layerIndex,this.availableImages,this.actor,(Te,Ne)=>{if(Te||!Ne)return Z(Te);Z(null,a.extend({rawTileData:U.slice(0)},Ne,ee,ue))}),this.loaded=this.loaded||{},this.loaded[he]=Fe})}reloadTile(R,Z){let he=this.loaded,xe=R.uid,Fe=this;if(he&&he[xe]){let B=he[xe];B.showCollisionBoxes=R.showCollisionBoxes;let V=(U,ee)=>{let ue=B.reloadCallback;ue&&(delete B.reloadCallback,B.parse(B.vectorTile,Fe.layerIndex,this.availableImages,Fe.actor,ue)),Z(U,ee)};B.status==="parsing"?B.reloadCallback=V:B.status==="done"&&(B.vectorTile?B.parse(B.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}}abortTile(R,Z){let he=this.loading,xe=R.uid;he&&he[xe]&&he[xe].abort&&(he[xe].abort(),delete he[xe]),Z()}removeTile(R,Z){let he=this.loaded,xe=R.uid;he&&he[xe]&&delete he[xe],Z()}}class E{constructor(){this.loaded={}}loadTile(R,Z){let{uid:he,encoding:xe,rawImageData:Fe}=R,B=a.isImageBitmap(Fe)?this.getImageData(Fe):Fe,V=new a.DEMData(he,B,xe);this.loaded=this.loaded||{},this.loaded[he]=V,Z(null,V)}getImageData(R){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(R.width,R.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=R.width,this.offscreenCanvas.height=R.height,this.offscreenCanvasContext.drawImage(R,0,0,R.width,R.height);let Z=this.offscreenCanvasContext.getImageData(-1,-1,R.width+2,R.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Z.width,height:Z.height},Z.data)}removeTile(R){let Z=this.loaded,he=R.uid;Z&&Z[he]&&delete Z[he]}}var $=function pe(R,Z){var he,xe=R&&R.type;if(xe==="FeatureCollection")for(he=0;he<R.features.length;he++)pe(R.features[he],Z);else if(xe==="GeometryCollection")for(he=0;he<R.geometries.length;he++)pe(R.geometries[he],Z);else if(xe==="Feature")pe(R.geometry,Z);else if(xe==="Polygon")Y(R.coordinates,Z);else if(xe==="MultiPolygon")for(he=0;he<R.coordinates.length;he++)Y(R.coordinates[he],Z);return R};function Y(pe,R){if(pe.length!==0){G(pe[0],R);for(var Z=1;Z<pe.length;Z++)G(pe[Z],!R)}}function G(pe,R){for(var Z=0,he=0,xe=0,Fe=pe.length,B=Fe-1;xe<Fe;B=xe++){var V=(pe[xe][0]-pe[B][0])*(pe[B][1]+pe[xe][1]),U=Z+V;he+=Math.abs(Z)>=Math.abs(V)?Z-U+V:V-U+Z,Z=U}Z+he>=0!=!!R&&pe.reverse()}let le=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class K{constructor(R){this._feature=R,this.extent=a.EXTENT,this.type=R.type,this.properties=R.tags,"id"in R&&!isNaN(R.id)&&(this.id=parseInt(R.id,10))}loadGeometry(){if(this._feature.type===1){let R=[];for(let Z of this._feature.geometry)R.push([new a.pointGeometry(Z[0],Z[1])]);return R}{let R=[];for(let Z of this._feature.geometry){let he=[];for(let xe of Z)he.push(new a.pointGeometry(xe[0],xe[1]));R.push(he)}return R}}toGeoJSON(R,Z,he){return le.call(this,R,Z,he)}}class F{constructor(R){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=R.length,this._features=R}feature(R){return new K(this._features[R])}}var Q={exports:{}},L=a.pointGeometry,k=a.vectorTile.VectorTileFeature,re=de;function de(pe,R){this.options=R||{},this.features=pe,this.length=pe.length}function Ie(pe,R){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=R||4096}de.prototype.feature=function(pe){return new Ie(this.features[pe],this.options.extent)},Ie.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var R=0;R<pe.length;R++){for(var Z=pe[R],he=[],xe=0;xe<Z.length;xe++)he.push(new L(Z[xe][0],Z[xe][1]));this.geometry.push(he)}return this.geometry},Ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,R=1/0,Z=-1/0,he=1/0,xe=-1/0,Fe=0;Fe<pe.length;Fe++)for(var B=pe[Fe],V=0;V<B.length;V++){var U=B[V];R=Math.min(R,U.x),Z=Math.max(Z,U.x),he=Math.min(he,U.y),xe=Math.max(xe,U.y)}return[R,he,Z,xe]},Ie.prototype.toGeoJSON=k.prototype.toGeoJSON;var et=a.pbf,lt=re;function tt(pe){var R=new et;return function(Z,he){for(var xe in Z.layers)he.writeMessage(3,je,Z.layers[xe])}(pe,R),R.finish()}function je(pe,R){var Z;R.writeVarintField(15,pe.version||1),R.writeStringField(1,pe.name||""),R.writeVarintField(5,pe.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(Z=0;Z<pe.length;Z++)he.feature=pe.feature(Z),R.writeMessage(2,Ee,he);var xe=he.keys;for(Z=0;Z<xe.length;Z++)R.writeStringField(3,xe[Z]);var Fe=he.values;for(Z=0;Z<Fe.length;Z++)R.writeMessage(4,ke,Fe[Z])}function Ee(pe,R){var Z=pe.feature;Z.id!==void 0&&R.writeVarintField(1,Z.id),R.writeMessage(2,_e,pe),R.writeVarintField(3,Z.type),R.writeMessage(4,Ae,Z)}function _e(pe,R){var Z=pe.feature,he=pe.keys,xe=pe.values,Fe=pe.keycache,B=pe.valuecache;for(var V in Z.properties){var U=Z.properties[V],ee=Fe[V];if(U!==null){ee===void 0&&(he.push(V),Fe[V]=ee=he.length-1),R.writeVarint(ee);var ue=typeof U;ue!=="string"&&ue!=="boolean"&&ue!=="number"&&(U=JSON.stringify(U));var Te=ue+":"+U,Ne=B[Te];Ne===void 0&&(xe.push(U),B[Te]=Ne=xe.length-1),R.writeVarint(Ne)}}}function te(pe,R){return(R<<3)+(7&pe)}function ce(pe){return pe<<1^pe>>31}function Ae(pe,R){for(var Z=pe.loadGeometry(),he=pe.type,xe=0,Fe=0,B=Z.length,V=0;V<B;V++){var U=Z[V],ee=1;he===1&&(ee=U.length),R.writeVarint(te(1,ee));for(var ue=he===3?U.length-1:U.length,Te=0;Te<ue;Te++){Te===1&&he!==1&&R.writeVarint(te(2,ue-1));var Ne=U[Te].x-xe,Pt=U[Te].y-Fe;R.writeVarint(ce(Ne)),R.writeVarint(ce(Pt)),xe+=Ne,Fe+=Pt}he===3&&R.writeVarint(te(7,1))}}function ke(pe,R){var Z=typeof pe;Z==="string"?R.writeStringField(1,pe):Z==="boolean"?R.writeBooleanField(7,pe):Z==="number"&&(pe%1!=0?R.writeDoubleField(3,pe):pe<0?R.writeSVarintField(6,pe):R.writeVarintField(5,pe))}function Ce(pe,R,Z,he,xe,Fe){if(xe-he<=Z)return;let B=he+xe>>1;$e(pe,R,B,he,xe,Fe%2),Ce(pe,R,Z,he,B-1,Fe+1),Ce(pe,R,Z,B+1,xe,Fe+1)}function $e(pe,R,Z,he,xe,Fe){for(;xe>he;){if(xe-he>600){let ee=xe-he+1,ue=Z-he+1,Te=Math.log(ee),Ne=.5*Math.exp(2*Te/3),Pt=.5*Math.sqrt(Te*Ne*(ee-Ne)/ee)*(ue-ee/2<0?-1:1);$e(pe,R,Z,Math.max(he,Math.floor(Z-ue*Ne/ee+Pt)),Math.min(xe,Math.floor(Z+(ee-ue)*Ne/ee+Pt)),Fe)}let B=R[2*Z+Fe],V=he,U=xe;for(Ke(pe,R,he,Z),R[2*xe+Fe]>B&&Ke(pe,R,he,xe);V<U;){for(Ke(pe,R,V,U),V++,U--;R[2*V+Fe]<B;)V++;for(;R[2*U+Fe]>B;)U--}R[2*he+Fe]===B?Ke(pe,R,he,U):(U++,Ke(pe,R,U,xe)),U<=Z&&(he=U+1),Z<=U&&(xe=U-1)}}function Ke(pe,R,Z,he){Ve(pe,Z,he),Ve(R,2*Z,2*he),Ve(R,2*Z+1,2*he+1)}function Ve(pe,R,Z){let he=pe[R];pe[R]=pe[Z],pe[Z]=he}function rt(pe,R,Z,he){let xe=pe-Z,Fe=R-he;return xe*xe+Fe*Fe}Q.exports=tt,Q.exports.fromVectorTileJs=tt,Q.exports.fromGeojsonVt=function(pe,R){R=R||{};var Z={};for(var he in pe)Z[he]=new lt(pe[he].features,R),Z[he].name=he,Z[he].version=R.version,Z[he].extent=R.extent;return tt({layers:Z})},Q.exports.GeoJSONWrapper=lt;let it=pe=>pe[0],dt=pe=>pe[1];class bt{constructor(R,Z=it,he=dt,xe=64,Fe=Float64Array){this.nodeSize=xe,this.points=R;let B=R.length<65536?Uint16Array:Uint32Array,V=this.ids=new B(R.length),U=this.coords=new Fe(2*R.length);for(let ee=0;ee<R.length;ee++)V[ee]=ee,U[2*ee]=Z(R[ee]),U[2*ee+1]=he(R[ee]);Ce(V,U,xe,0,V.length-1,0)}range(R,Z,he,xe){return function(Fe,B,V,U,ee,ue,Te){let Ne=[0,Fe.length-1,0],Pt=[],At,jt;for(;Ne.length;){let $t=Ne.pop(),Zt=Ne.pop(),dr=Ne.pop();if(Zt-dr<=Te){for(let xr=dr;xr<=Zt;xr++)At=B[2*xr],jt=B[2*xr+1],At>=V&&At<=ee&&jt>=U&&jt<=ue&&Pt.push(Fe[xr]);continue}let lr=Math.floor((dr+Zt)/2);At=B[2*lr],jt=B[2*lr+1],At>=V&&At<=ee&&jt>=U&&jt<=ue&&Pt.push(Fe[lr]);let yr=($t+1)%2;($t===0?V<=At:U<=jt)&&(Ne.push(dr),Ne.push(lr-1),Ne.push(yr)),($t===0?ee>=At:ue>=jt)&&(Ne.push(lr+1),Ne.push(Zt),Ne.push(yr))}return Pt}(this.ids,this.coords,R,Z,he,xe,this.nodeSize)}within(R,Z,he){return function(xe,Fe,B,V,U,ee){let ue=[0,xe.length-1,0],Te=[],Ne=U*U;for(;ue.length;){let Pt=ue.pop(),At=ue.pop(),jt=ue.pop();if(At-jt<=ee){for(let yr=jt;yr<=At;yr++)rt(Fe[2*yr],Fe[2*yr+1],B,V)<=Ne&&Te.push(xe[yr]);continue}let $t=Math.floor((jt+At)/2),Zt=Fe[2*$t],dr=Fe[2*$t+1];rt(Zt,dr,B,V)<=Ne&&Te.push(xe[$t]);let lr=(Pt+1)%2;(Pt===0?B-U<=Zt:V-U<=dr)&&(ue.push(jt),ue.push($t-1),ue.push(lr)),(Pt===0?B+U>=Zt:V+U>=dr)&&(ue.push($t+1),ue.push(At),ue.push(lr))}return Te}(this.ids,this.coords,R,Z,he,this.nodeSize)}}let Wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},Ht=Math.fround||(Jt=new Float32Array(1),pe=>(Jt[0]=+pe,Jt[0]));var Jt;class Mt{constructor(R){this.options=mt(Object.create(Wt),R),this.trees=new Array(this.options.maxZoom+1)}load(R){let{log:Z,minZoom:he,maxZoom:xe,nodeSize:Fe}=this.options;Z&&console.time("total time");let B=`prepare ${R.length} points`;Z&&console.time(B),this.points=R;let V=[];for(let U=0;U<R.length;U++)R[U].geometry&&V.push(Ye(R[U],U));this.trees[xe+1]=new bt(V,we,me,Fe,Float32Array),Z&&console.timeEnd(B);for(let U=xe;U>=he;U--){let ee=+Date.now();V=this._cluster(V,U),this.trees[U]=new bt(V,we,me,Fe,Float32Array),Z&&console.log("z%d: %d clusters in %dms",U,V.length,+Date.now()-ee)}return Z&&console.timeEnd("total time"),this}getClusters(R,Z){let he=((R[0]+180)%360+360)%360-180,xe=Math.max(-90,Math.min(90,R[1])),Fe=R[2]===180?180:((R[2]+180)%360+360)%360-180,B=Math.max(-90,Math.min(90,R[3]));if(R[2]-R[0]>=360)he=-180,Fe=180;else if(he>Fe){let ue=this.getClusters([he,xe,180,B],Z),Te=this.getClusters([-180,xe,Fe,B],Z);return ue.concat(Te)}let V=this.trees[this._limitZoom(Z)],U=V.range(Ct(he),kt(B),Ct(Fe),kt(xe)),ee=[];for(let ue of U){let Te=V.points[ue];ee.push(Te.numPoints?st(Te):this.points[Te.index])}return ee}getChildren(R){let Z=this._getOriginId(R),he=this._getOriginZoom(R),xe="No cluster with the specified id.",Fe=this.trees[he];if(!Fe)throw new Error(xe);let B=Fe.points[Z];if(!B)throw new Error(xe);let V=this.options.radius/(this.options.extent*Math.pow(2,he-1)),U=Fe.within(B.x,B.y,V),ee=[];for(let ue of U){let Te=Fe.points[ue];Te.parentId===R&&ee.push(Te.numPoints?st(Te):this.points[Te.index])}if(ee.length===0)throw new Error(xe);return ee}getLeaves(R,Z,he){let xe=[];return this._appendLeaves(xe,R,Z=Z||10,he=he||0,0),xe}getTile(R,Z,he){let xe=this.trees[this._limitZoom(R)],Fe=Math.pow(2,R),{extent:B,radius:V}=this.options,U=V/B,ee=(he-U)/Fe,ue=(he+1+U)/Fe,Te={features:[]};return this._addTileFeatures(xe.range((Z-U)/Fe,ee,(Z+1+U)/Fe,ue),xe.points,Z,he,Fe,Te),Z===0&&this._addTileFeatures(xe.range(1-U/Fe,ee,1,ue),xe.points,Fe,he,Fe,Te),Z===Fe-1&&this._addTileFeatures(xe.range(0,ee,U/Fe,ue),xe.points,-1,he,Fe,Te),Te.features.length?Te:null}getClusterExpansionZoom(R){let Z=this._getOriginZoom(R)-1;for(;Z<=this.options.maxZoom;){let he=this.getChildren(R);if(Z++,he.length!==1)break;R=he[0].properties.cluster_id}return Z}_appendLeaves(R,Z,he,xe,Fe){let B=this.getChildren(Z);for(let V of B){let U=V.properties;if(U&&U.cluster?Fe+U.point_count<=xe?Fe+=U.point_count:Fe=this._appendLeaves(R,U.cluster_id,he,xe,Fe):Fe<xe?Fe++:R.push(V),R.length===he)break}return Fe}_addTileFeatures(R,Z,he,xe,Fe,B){for(let V of R){let U=Z[V],ee=U.numPoints,ue,Te,Ne;if(ee)ue=_t(U),Te=U.x,Ne=U.y;else{let jt=this.points[U.index];ue=jt.properties,Te=Ct(jt.geometry.coordinates[0]),Ne=kt(jt.geometry.coordinates[1])}let Pt={type:1,geometry:[[Math.round(this.options.extent*(Te*Fe-he)),Math.round(this.options.extent*(Ne*Fe-xe))]],tags:ue},At;ee?At=U.id:this.options.generateId?At=U.index:this.points[U.index].id&&(At=this.points[U.index].id),At!==void 0&&(Pt.id=At),B.features.push(Pt)}}_limitZoom(R){return Math.max(this.options.minZoom,Math.min(Math.floor(+R),this.options.maxZoom+1))}_cluster(R,Z){let he=[],{radius:xe,extent:Fe,reduce:B,minPoints:V}=this.options,U=xe/(Fe*Math.pow(2,Z));for(let ee=0;ee<R.length;ee++){let ue=R[ee];if(ue.zoom<=Z)continue;ue.zoom=Z;let Te=this.trees[Z+1],Ne=Te.within(ue.x,ue.y,U),Pt=ue.numPoints||1,At=Pt;for(let jt of Ne){let $t=Te.points[jt];$t.zoom>Z&&(At+=$t.numPoints||1)}if(At>Pt&&At>=V){let jt=ue.x*Pt,$t=ue.y*Pt,Zt=B&&Pt>1?this._map(ue,!0):null,dr=(ee<<5)+(Z+1)+this.points.length;for(let lr of Ne){let yr=Te.points[lr];if(yr.zoom<=Z)continue;yr.zoom=Z;let xr=yr.numPoints||1;jt+=yr.x*xr,$t+=yr.y*xr,yr.parentId=dr,B&&(Zt||(Zt=this._map(ue,!0)),B(Zt,this._map(yr)))}ue.parentId=dr,he.push(oe(jt/At,$t/At,dr,At,Zt))}else if(he.push(ue),At>1)for(let jt of Ne){let $t=Te.points[jt];$t.zoom<=Z||($t.zoom=Z,he.push($t))}}return he}_getOriginId(R){return R-this.points.length>>5}_getOriginZoom(R){return(R-this.points.length)%32}_map(R,Z){if(R.numPoints)return Z?mt({},R.properties):R.properties;let he=this.points[R.index].properties,xe=this.options.map(he);return Z&&xe===he?mt({},xe):xe}}function oe(pe,R,Z,he,xe){return{x:Ht(pe),y:Ht(R),zoom:1/0,id:Z,parentId:-1,numPoints:he,properties:xe}}function Ye(pe,R){let[Z,he]=pe.geometry.coordinates;return{x:Ht(Ct(Z)),y:Ht(kt(he)),zoom:1/0,index:R,parentId:-1}}function st(pe){return{type:"Feature",id:pe.id,properties:_t(pe),geometry:{type:"Point",coordinates:[(R=pe.x,360*(R-.5)),ct(pe.y)]}};var R}function _t(pe){let R=pe.numPoints,Z=R>=1e4?`${Math.round(R/1e3)}k`:R>=1e3?Math.round(R/100)/10+"k":R;return mt(mt({},pe.properties),{cluster:!0,cluster_id:pe.id,point_count:R,point_count_abbreviated:Z})}function Ct(pe){return pe/360+.5}function kt(pe){let R=Math.sin(pe*Math.PI/180),Z=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return Z<0?0:Z>1?1:Z}function ct(pe){let R=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(R))/Math.PI-90}function mt(pe,R){for(let Z in R)pe[Z]=R[Z];return pe}function we(pe){return pe.x}function me(pe){return pe.y}function We(pe,R,Z,he){for(var xe,Fe=he,B=Z-R>>1,V=Z-R,U=pe[R],ee=pe[R+1],ue=pe[Z],Te=pe[Z+1],Ne=R+3;Ne<Z;Ne+=3){var Pt=Qe(pe[Ne],pe[Ne+1],U,ee,ue,Te);if(Pt>Fe)xe=Ne,Fe=Pt;else if(Pt===Fe){var At=Math.abs(Ne-B);At<V&&(xe=Ne,V=At)}}Fe>he&&(xe-R>3&&We(pe,R,xe,he),pe[xe+2]=Fe,Z-xe>3&&We(pe,xe,Z,he))}function Qe(pe,R,Z,he,xe,Fe){var B=xe-Z,V=Fe-he;if(B!==0||V!==0){var U=((pe-Z)*B+(R-he)*V)/(B*B+V*V);U>1?(Z=xe,he=Fe):U>0&&(Z+=B*U,he+=V*U)}return(B=pe-Z)*B+(V=R-he)*V}function He(pe,R,Z,he){var xe={id:pe===void 0?null:pe,type:R,geometry:Z,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Fe){var B=Fe.geometry,V=Fe.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")fe(Fe,B);else if(V==="Polygon"||V==="MultiLineString")for(var U=0;U<B.length;U++)fe(Fe,B[U]);else if(V==="MultiPolygon")for(U=0;U<B.length;U++)for(var ee=0;ee<B[U].length;ee++)fe(Fe,B[U][ee])}(xe),xe}function fe(pe,R){for(var Z=0;Z<R.length;Z+=3)pe.minX=Math.min(pe.minX,R[Z]),pe.minY=Math.min(pe.minY,R[Z+1]),pe.maxX=Math.max(pe.maxX,R[Z]),pe.maxY=Math.max(pe.maxY,R[Z+1])}function De(pe,R,Z,he){if(R.geometry){var xe=R.geometry.coordinates,Fe=R.geometry.type,B=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),V=[],U=R.id;if(Z.promoteId?U=R.properties[Z.promoteId]:Z.generateId&&(U=he||0),Fe==="Point")ft(xe,V);else if(Fe==="MultiPoint")for(var ee=0;ee<xe.length;ee++)ft(xe[ee],V);else if(Fe==="LineString")Rt(xe,V,B,!1);else if(Fe==="MultiLineString"){if(Z.lineMetrics){for(ee=0;ee<xe.length;ee++)Rt(xe[ee],V=[],B,!1),pe.push(He(U,"LineString",V,R.properties));return}Oe(xe,V,B,!1)}else if(Fe==="Polygon")Oe(xe,V,B,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(ee=0;ee<R.geometry.geometries.length;ee++)De(pe,{id:U,geometry:R.geometry.geometries[ee],properties:R.properties},Z,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ee=0;ee<xe.length;ee++){var ue=[];Oe(xe[ee],ue,B,!0),V.push(ue)}}pe.push(He(U,Fe,V,R.properties))}}function ft(pe,R){R.push(qe(pe[0])),R.push(H(pe[1])),R.push(0)}function Rt(pe,R,Z,he){for(var xe,Fe,B=0,V=0;V<pe.length;V++){var U=qe(pe[V][0]),ee=H(pe[V][1]);R.push(U),R.push(ee),R.push(0),V>0&&(B+=he?(xe*ee-U*Fe)/2:Math.sqrt(Math.pow(U-xe,2)+Math.pow(ee-Fe,2))),xe=U,Fe=ee}var ue=R.length-3;R[2]=1,We(R,0,ue,Z),R[ue+2]=1,R.size=Math.abs(B),R.start=0,R.end=R.size}function Oe(pe,R,Z,he){for(var xe=0;xe<pe.length;xe++){var Fe=[];Rt(pe[xe],Fe,Z,he),R.push(Fe)}}function qe(pe){return pe/360+.5}function H(pe){var R=Math.sin(pe*Math.PI/180),Z=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return Z<0?0:Z>1?1:Z}function ae(pe,R,Z,he,xe,Fe,B,V){if(he/=R,Fe>=(Z/=R)&&B<he)return pe;if(B<Z||Fe>=he)return null;for(var U=[],ee=0;ee<pe.length;ee++){var ue=pe[ee],Te=ue.geometry,Ne=ue.type,Pt=xe===0?ue.minX:ue.minY,At=xe===0?ue.maxX:ue.maxY;if(Pt>=Z&&At<he)U.push(ue);else if(!(At<Z||Pt>=he)){var jt=[];if(Ne==="Point"||Ne==="MultiPoint")ve(Te,jt,Z,he,xe);else if(Ne==="LineString")N(Te,jt,Z,he,xe,!1,V.lineMetrics);else if(Ne==="MultiLineString")Ze(Te,jt,Z,he,xe,!1);else if(Ne==="Polygon")Ze(Te,jt,Z,he,xe,!0);else if(Ne==="MultiPolygon")for(var $t=0;$t<Te.length;$t++){var Zt=[];Ze(Te[$t],Zt,Z,he,xe,!0),Zt.length&&jt.push(Zt)}if(jt.length){if(V.lineMetrics&&Ne==="LineString"){for($t=0;$t<jt.length;$t++)U.push(He(ue.id,Ne,jt[$t],ue.tags));continue}Ne!=="LineString"&&Ne!=="MultiLineString"||(jt.length===1?(Ne="LineString",jt=jt[0]):Ne="MultiLineString"),Ne!=="Point"&&Ne!=="MultiPoint"||(Ne=jt.length===3?"Point":"MultiPoint"),U.push(He(ue.id,Ne,jt,ue.tags))}}}return U.length?U:null}function ve(pe,R,Z,he,xe){for(var Fe=0;Fe<pe.length;Fe+=3){var B=pe[Fe+xe];B>=Z&&B<=he&&(R.push(pe[Fe]),R.push(pe[Fe+1]),R.push(pe[Fe+2]))}}function N(pe,R,Z,he,xe,Fe,B){for(var V,U,ee=ie(pe),ue=xe===0?Le:ze,Te=pe.start,Ne=0;Ne<pe.length-3;Ne+=3){var Pt=pe[Ne],At=pe[Ne+1],jt=pe[Ne+2],$t=pe[Ne+3],Zt=pe[Ne+4],dr=xe===0?Pt:At,lr=xe===0?$t:Zt,yr=!1;B&&(V=Math.sqrt(Math.pow(Pt-$t,2)+Math.pow(At-Zt,2))),dr<Z?lr>Z&&(U=ue(ee,Pt,At,$t,Zt,Z),B&&(ee.start=Te+V*U)):dr>he?lr<he&&(U=ue(ee,Pt,At,$t,Zt,he),B&&(ee.start=Te+V*U)):X(ee,Pt,At,jt),lr<Z&&dr>=Z&&(U=ue(ee,Pt,At,$t,Zt,Z),yr=!0),lr>he&&dr<=he&&(U=ue(ee,Pt,At,$t,Zt,he),yr=!0),!Fe&&yr&&(B&&(ee.end=Te+V*U),R.push(ee),ee=ie(pe)),B&&(Te+=V)}var xr=pe.length-3;Pt=pe[xr],At=pe[xr+1],jt=pe[xr+2],(dr=xe===0?Pt:At)>=Z&&dr<=he&&X(ee,Pt,At,jt),xr=ee.length-3,Fe&&xr>=3&&(ee[xr]!==ee[0]||ee[xr+1]!==ee[1])&&X(ee,ee[0],ee[1],ee[2]),ee.length&&R.push(ee)}function ie(pe){var R=[];return R.size=pe.size,R.start=pe.start,R.end=pe.end,R}function Ze(pe,R,Z,he,xe,Fe){for(var B=0;B<pe.length;B++)N(pe[B],R,Z,he,xe,Fe,!1)}function X(pe,R,Z,he){pe.push(R),pe.push(Z),pe.push(he)}function Le(pe,R,Z,he,xe,Fe){var B=(Fe-R)/(he-R);return pe.push(Fe),pe.push(Z+(xe-Z)*B),pe.push(1),B}function ze(pe,R,Z,he,xe,Fe){var B=(Fe-Z)/(xe-Z);return pe.push(R+(he-R)*B),pe.push(Fe),pe.push(1),B}function Je(pe,R){for(var Z=[],he=0;he<pe.length;he++){var xe,Fe=pe[he],B=Fe.type;if(B==="Point"||B==="MultiPoint"||B==="LineString")xe=ot(Fe.geometry,R);else if(B==="MultiLineString"||B==="Polygon"){xe=[];for(var V=0;V<Fe.geometry.length;V++)xe.push(ot(Fe.geometry[V],R))}else if(B==="MultiPolygon")for(xe=[],V=0;V<Fe.geometry.length;V++){for(var U=[],ee=0;ee<Fe.geometry[V].length;ee++)U.push(ot(Fe.geometry[V][ee],R));xe.push(U)}Z.push(He(Fe.id,B,xe,Fe.tags))}return Z}function ot(pe,R){var Z=[];Z.size=pe.size,pe.start!==void 0&&(Z.start=pe.start,Z.end=pe.end);for(var he=0;he<pe.length;he+=3)Z.push(pe[he]+R,pe[he+1],pe[he+2]);return Z}function gt(pe,R){if(pe.transformed)return pe;var Z,he,xe,Fe=1<<pe.z,B=pe.x,V=pe.y;for(Z=0;Z<pe.features.length;Z++){var U=pe.features[Z],ee=U.geometry,ue=U.type;if(U.geometry=[],ue===1)for(he=0;he<ee.length;he+=2)U.geometry.push(yt(ee[he],ee[he+1],R,Fe,B,V));else for(he=0;he<ee.length;he++){var Te=[];for(xe=0;xe<ee[he].length;xe+=2)Te.push(yt(ee[he][xe],ee[he][xe+1],R,Fe,B,V));U.geometry.push(Te)}}return pe.transformed=!0,pe}function yt(pe,R,Z,he,xe,Fe){return[Math.round(Z*(pe*he-xe)),Math.round(Z*(R*he-Fe))]}function Lt(pe,R,Z,he,xe){for(var Fe=R===xe.maxZoom?0:xe.tolerance/((1<<R)*xe.extent),B={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Z,y:he,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<pe.length;V++){B.numFeatures++,Vt(B,pe[V],Fe,xe);var U=pe[V].minX,ee=pe[V].minY,ue=pe[V].maxX,Te=pe[V].maxY;U<B.minX&&(B.minX=U),ee<B.minY&&(B.minY=ee),ue>B.maxX&&(B.maxX=ue),Te>B.maxY&&(B.maxY=Te)}return B}function Vt(pe,R,Z,he){var xe=R.geometry,Fe=R.type,B=[];if(Fe==="Point"||Fe==="MultiPoint")for(var V=0;V<xe.length;V+=3)B.push(xe[V]),B.push(xe[V+1]),pe.numPoints++,pe.numSimplified++;else if(Fe==="LineString")zt(B,xe,pe,Z,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(V=0;V<xe.length;V++)zt(B,xe[V],pe,Z,Fe==="Polygon",V===0);else if(Fe==="MultiPolygon")for(var U=0;U<xe.length;U++){var ee=xe[U];for(V=0;V<ee.length;V++)zt(B,ee[V],pe,Z,!0,V===0)}if(B.length){var ue=R.tags||null;if(Fe==="LineString"&&he.lineMetrics){for(var Te in ue={},R.tags)ue[Te]=R.tags[Te];ue.mapbox_clip_start=xe.start/xe.size,ue.mapbox_clip_end=xe.end/xe.size}var Ne={geometry:B,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:ue};R.id!==null&&(Ne.id=R.id),pe.features.push(Ne)}}function zt(pe,R,Z,he,xe,Fe){var B=he*he;if(he>0&&R.size<(xe?B:he))Z.numPoints+=R.length/3;else{for(var V=[],U=0;U<R.length;U+=3)(he===0||R[U+2]>B)&&(Z.numSimplified++,V.push(R[U]),V.push(R[U+1])),Z.numPoints++;xe&&function(ee,ue){for(var Te=0,Ne=0,Pt=ee.length,At=Pt-2;Ne<Pt;At=Ne,Ne+=2)Te+=(ee[Ne]-ee[At])*(ee[Ne+1]+ee[At+1]);if(Te>0===ue)for(Ne=0,Pt=ee.length;Ne<Pt/2;Ne+=2){var jt=ee[Ne],$t=ee[Ne+1];ee[Ne]=ee[Pt-2-Ne],ee[Ne+1]=ee[Pt-1-Ne],ee[Pt-2-Ne]=jt,ee[Pt-1-Ne]=$t}}(V,Fe),pe.push(V)}}function Se(pe,R){var Z=(R=this.options=function(xe,Fe){for(var B in Fe)xe[B]=Fe[B];return xe}(Object.create(this.options),R)).debug;if(Z&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=function(xe,Fe){var B=[];if(xe.type==="FeatureCollection")for(var V=0;V<xe.features.length;V++)De(B,xe.features[V],Fe,V);else De(B,xe.type==="Feature"?xe:{geometry:xe},Fe);return B}(pe,R);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(xe,Fe){var B=Fe.buffer/Fe.extent,V=xe,U=ae(xe,1,-1-B,B,0,-1,2,Fe),ee=ae(xe,1,1-B,2+B,0,-1,2,Fe);return(U||ee)&&(V=ae(xe,1,-B,1+B,0,-1,2,Fe)||[],U&&(V=Je(U,1).concat(V)),ee&&(V=V.concat(Je(ee,-1)))),V}(he,R),he.length&&this.splitTile(he,0,0,0),Z&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xe(pe,R,Z){return 32*((1<<pe)*Z+R)+pe}function at(pe,R){let Z=pe.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);let he=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!he)return R(null,null);let xe=new F(he.features),Fe=Q.exports(xe);Fe.byteOffset===0&&Fe.byteLength===Fe.buffer.byteLength||(Fe=new Uint8Array(Fe)),R(null,{vectorTile:xe,rawData:Fe.buffer})}Se.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Se.prototype.splitTile=function(pe,R,Z,he,xe,Fe,B){for(var V=[pe,R,Z,he],U=this.options,ee=U.debug;V.length;){he=V.pop(),Z=V.pop(),R=V.pop(),pe=V.pop();var ue=1<<R,Te=Xe(R,Z,he),Ne=this.tiles[Te];if(!Ne&&(ee>1&&console.time("creation"),Ne=this.tiles[Te]=Lt(pe,R,Z,he,U),this.tileCoords.push({z:R,x:Z,y:he}),ee)){ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,Z,he,Ne.numFeatures,Ne.numPoints,Ne.numSimplified),console.timeEnd("creation"));var Pt="z"+R;this.stats[Pt]=(this.stats[Pt]||0)+1,this.total++}if(Ne.source=pe,xe){if(R===U.maxZoom||R===xe)continue;var At=1<<xe-R;if(Z!==Math.floor(Fe/At)||he!==Math.floor(B/At))continue}else if(R===U.indexMaxZoom||Ne.numPoints<=U.indexMaxPoints)continue;if(Ne.source=null,pe.length!==0){ee>1&&console.time("clipping");var jt,$t,Zt,dr,lr,yr,xr=.5*U.buffer/U.extent,Tr=.5-xr,Zr=.5+xr,Ar=1+xr;jt=$t=Zt=dr=null,lr=ae(pe,ue,Z-xr,Z+Zr,0,Ne.minX,Ne.maxX,U),yr=ae(pe,ue,Z+Tr,Z+Ar,0,Ne.minX,Ne.maxX,U),pe=null,lr&&(jt=ae(lr,ue,he-xr,he+Zr,1,Ne.minY,Ne.maxY,U),$t=ae(lr,ue,he+Tr,he+Ar,1,Ne.minY,Ne.maxY,U),lr=null),yr&&(Zt=ae(yr,ue,he-xr,he+Zr,1,Ne.minY,Ne.maxY,U),dr=ae(yr,ue,he+Tr,he+Ar,1,Ne.minY,Ne.maxY,U),yr=null),ee>1&&console.timeEnd("clipping"),V.push(jt||[],R+1,2*Z,2*he),V.push($t||[],R+1,2*Z,2*he+1),V.push(Zt||[],R+1,2*Z+1,2*he),V.push(dr||[],R+1,2*Z+1,2*he+1)}}},Se.prototype.getTile=function(pe,R,Z){var he=this.options,xe=he.extent,Fe=he.debug;if(pe<0||pe>24)return null;var B=1<<pe,V=Xe(pe,R=(R%B+B)%B,Z);if(this.tiles[V])return gt(this.tiles[V],xe);Fe>1&&console.log("drilling down to z%d-%d-%d",pe,R,Z);for(var U,ee=pe,ue=R,Te=Z;!U&&ee>0;)ee--,ue=Math.floor(ue/2),Te=Math.floor(Te/2),U=this.tiles[Xe(ee,ue,Te)];return U&&U.source?(Fe>1&&console.log("found parent tile z%d-%d-%d",ee,ue,Te),Fe>1&&console.time("drilling down"),this.splitTile(U.source,ee,ue,Te,pe,R,Z),Fe>1&&console.timeEnd("drilling down"),this.tiles[V]?gt(this.tiles[V],xe):null):null};class Et extends D{constructor(R,Z,he,xe){super(R,Z,he,at),xe&&(this.loadGeoJSON=xe)}loadData(R,Z){var he;(he=this._pendingRequest)===null||he===void 0||he.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});let xe=!!(R&&R.request&&R.request.collectResourceTiming)&&new a.RequestPerformance(R.request);this._pendingCallback=Z,this._pendingRequest=this.loadGeoJSON(R,(Fe,B)=>{if(delete this._pendingCallback,delete this._pendingRequest,Fe||!B)return Z(Fe);if(typeof B!="object")return Z(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));{$(B,!0);try{if(R.filter){let U=a.createExpression(R.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(U.result==="error")throw new Error(U.value.map(ue=>`${ue.key}: ${ue.message}`).join(", "));let ee=B.features.filter(ue=>U.value.evaluate({zoom:0},ue));B={type:"FeatureCollection",features:ee}}this._geoJSONIndex=R.cluster?new Mt(function({superclusterOptions:U,clusterProperties:ee}){if(!ee||!U)return U;let ue={},Te={},Ne={accumulated:null,zoom:0},Pt={properties:null},At=Object.keys(ee);for(let jt of At){let[$t,Zt]=ee[jt],dr=a.createExpression(Zt),lr=a.createExpression(typeof $t=="string"?[$t,["accumulated"],["get",jt]]:$t);ue[jt]=dr.value,Te[jt]=lr.value}return U.map=jt=>{Pt.properties=jt;let $t={};for(let Zt of At)$t[Zt]=ue[Zt].evaluate(Ne,Pt);return $t},U.reduce=(jt,$t)=>{Pt.properties=$t;for(let Zt of At)Ne.accumulated=jt[Zt],jt[Zt]=Te[Zt].evaluate(Ne,Pt)},U}(R)).load(B.features):function(U,ee){return new Se(U,ee)}(B,R.geojsonVtOptions)}catch(U){return Z(U)}this.loaded={};let V={};if(xe){let U=xe.finish();U&&(V.resourceTiming={},V.resourceTiming[R.source]=JSON.parse(JSON.stringify(U)))}Z(null,V)}})}reloadTile(R,Z){let he=this.loaded;return he&&he[R.uid]?super.reloadTile(R,Z):this.loadTile(R,Z)}loadGeoJSON(R,Z){if(R.request)return a.getJSON(R.request,Z);if(typeof R.data=="string")try{Z(null,JSON.parse(R.data))}catch(he){Z(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`))}else Z(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(R,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()}getClusterExpansionZoom(R,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(R.clusterId))}catch(he){Z(he)}}getClusterChildren(R,Z){try{Z(null,this._geoJSONIndex.getChildren(R.clusterId))}catch(he){Z(he)}}getClusterLeaves(R,Z){try{Z(null,this._geoJSONIndex.getLeaves(R.clusterId,R.limit,R.offset))}catch(he){Z(he)}}}class pr{constructor(R){this.self=R,this.actor=new a.Actor(R,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:D,geojson:Et},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Z,he)=>{if(this.workerSourceTypes[Z])throw new Error(`Worker source with name "${Z}" already registered.`);this.workerSourceTypes[Z]=he},this.self.registerRTLTextPlugin=Z=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Z.applyArabicShaping,a.plugin.processBidirectionalText=Z.processBidirectionalText,a.plugin.processStyledBidirectionalText=Z.processStyledBidirectionalText}}setReferrer(R,Z){this.referrer=Z}setImages(R,Z,he){this.availableImages[R]=Z;for(let xe in this.workerSources[R]){let Fe=this.workerSources[R][xe];for(let B in Fe)Fe[B].availableImages=Z}he()}setLayers(R,Z,he){this.getLayerIndex(R).replace(Z),he()}updateLayers(R,Z,he){this.getLayerIndex(R).update(Z.layers,Z.removedIds),he()}loadTile(R,Z,he){this.getWorkerSource(R,Z.type,Z.source).loadTile(Z,he)}loadDEMTile(R,Z,he){this.getDEMWorkerSource(R,Z.source).loadTile(Z,he)}reloadTile(R,Z,he){this.getWorkerSource(R,Z.type,Z.source).reloadTile(Z,he)}abortTile(R,Z,he){this.getWorkerSource(R,Z.type,Z.source).abortTile(Z,he)}removeTile(R,Z,he){this.getWorkerSource(R,Z.type,Z.source).removeTile(Z,he)}removeDEMTile(R,Z){this.getDEMWorkerSource(R,Z.source).removeTile(Z)}removeSource(R,Z,he){if(!this.workerSources[R]||!this.workerSources[R][Z.type]||!this.workerSources[R][Z.type][Z.source])return;let xe=this.workerSources[R][Z.type][Z.source];delete this.workerSources[R][Z.type][Z.source],xe.removeSource!==void 0?xe.removeSource(Z,he):he()}loadWorkerSource(R,Z,he){try{this.self.importScripts(Z.url),he()}catch(xe){he(xe.toString())}}syncRTLPluginState(R,Z,he){try{a.plugin.setState(Z);let xe=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&xe!=null){this.self.importScripts(xe);let Fe=a.plugin.isParsed();he(Fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${xe}`),Fe)}}catch(xe){he(xe.toString())}}getAvailableImages(R){let Z=this.availableImages[R];return Z||(Z=[]),Z}getLayerIndex(R){let Z=this.layerIndexes[R];return Z||(Z=this.layerIndexes[R]=new _),Z}getWorkerSource(R,Z,he){if(this.workerSources[R]||(this.workerSources[R]={}),this.workerSources[R][Z]||(this.workerSources[R][Z]={}),!this.workerSources[R][Z][he]){let xe={send:(Fe,B,V)=>{this.actor.send(Fe,B,V,R)}};this.workerSources[R][Z][he]=new this.workerSourceTypes[Z](xe,this.getLayerIndex(R),this.getAvailableImages(R))}return this.workerSources[R][Z][he]}getDEMWorkerSource(R,Z){return this.demWorkerSources[R]||(this.demWorkerSources[R]={}),this.demWorkerSources[R][Z]||(this.demWorkerSources[R][Z]=new E),this.demWorkerSources[R][Z]}enforceCacheSizeLimit(R,Z){a.enforceCacheSizeLimit(Z)}}return a.isWorker()&&(self.worker=new pr(self)),pr}),l(["./shared"],function(a){"use strict";var b=w;function w(f){return!function(t){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,m,y=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(y);try{m=new Worker(C),d=!0}catch(O){d=!1}return m&&m.terminate(),URL.revokeObjectURL(C),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var m=d.getContext("2d");if(!m)return!1;var y=m.getImageData(0,0,1,1);return y&&y.width===d.width}()?(_[u=t&&t.failIfMajorPerformanceCaveat]===void 0&&(_[u]=function(d){var m,y=function(C){var O=document.createElement("canvas"),I=Object.create(w.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=C,O.getContext("webgl",I)||O.getContext("experimental-webgl",I)}(d);if(!y)return!1;try{m=y.createShader(y.VERTEX_SHADER)}catch(C){return!1}return!(!m||y.isContextLost())&&(y.shaderSource(m,"void main() {}"),y.compileShader(m),y.getShaderParameter(m,y.COMPILE_STATUS)===!0)}(u)),_[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(f)}var _={};function T(f,t){if(Array.isArray(f)){if(!Array.isArray(t)||f.length!==t.length)return!1;for(let u=0;u<f.length;u++)if(!T(f[u],t[u]))return!1;return!0}if(typeof f=="object"&&f!==null&&t!==null){if(typeof t!="object"||Object.keys(f).length!==Object.keys(t).length)return!1;for(let u in f)if(!T(f[u],t[u]))return!1;return!0}return f===t}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class x{static testProp(t){if(!x.docStyle)return t[0];for(let u=0;u<t.length;u++)if(t[u]in x.docStyle)return t[u];return t[0]}static create(t,u,d){let m=window.document.createElement(t);return u!==void 0&&(m.className=u),d&&d.appendChild(m),m}static createNS(t,u){return window.document.createElementNS(t,u)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(t,u){t.style[x.transformProp]=u}static addEventListener(t,u,d,m={}){t.addEventListener(u,d,"passive"in m?m:m.capture)}static removeEventListener(t,u,d,m={}){t.removeEventListener(u,d,"passive"in m?m:m.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",x.suppressClickInternal,!0)},0)}static mousePos(t,u){let d=t.getBoundingClientRect();return new a.pointGeometry(u.clientX-d.left-t.clientLeft,u.clientY-d.top-t.clientTop)}static touchPos(t,u){let d=t.getBoundingClientRect(),m=[];for(let y=0;y<u.length;y++)m.push(new a.pointGeometry(u[y].clientX-d.left-t.clientLeft,u[y].clientY-d.top-t.clientTop));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}x.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);class M{constructor(t){this._transformRequestFn=t}transformRequest(t,u){return this._transformRequestFn&&this._transformRequestFn(t,u)||{url:t}}normalizeSpriteURL(t,u,d){let m=function(y){let C=y.match(A);if(!C)throw new Error(`Unable to parse URL "${y}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(t);return m.path+=`${u}${d}`,function(y){let C=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${C}`}(m)}setTransformRequest(t){this._transformRequestFn=t}}let A=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class D{constructor(t,u,d,m){this.context=t,this.format=d,this.texture=t.gl.createTexture(),this.update(u,m)}update(t,u,d){let{width:m,height:y}=t,C=!(this.size&&this.size[0]===m&&this.size[1]===y||d),{context:O}=this,{gl:I}=O;if(this.useMipmap=Boolean(u&&u.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[m,y],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||a.isImageBitmap(t)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,t):I.texImage2D(I.TEXTURE_2D,0,this.format,m,y,0,this.format,I.UNSIGNED_BYTE,t.data);else{let{x:j,y:J}=d||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||a.isImageBitmap(t)?I.texSubImage2D(I.TEXTURE_2D,0,j,J,I.RGBA,I.UNSIGNED_BYTE,t):I.texSubImage2D(I.TEXTURE_2D,0,j,J,m,y,I.RGBA,I.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(t,u,d){let{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),t!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,t),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||t),this.filter=t),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function E(f){let{userImage:t}=f;return!!(t&&t.render&&t.render())&&(f.data.replace(new Uint8Array(t.data.buffer)),!0)}class $ extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(let{ids:u,callback:d}of this.requestors)this._notify(u,d);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,u){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,u)&&(this.images[t]=u)}_validate(t,u){let d=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),d=!1),d}_validateStretch(t,u){if(!t)return!0;let d=0;for(let m of t){if(m[0]<d||m[1]<m[0]||u<m[1])return!1;d=m[1]}return!0}_validateContent(t,u){return!(t&&(t.length!==4||t[0]<0||u.data.width<t[0]||t[1]<0||u.data.height<t[1]||t[2]<0||u.data.width<t[2]||t[3]<0||u.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,u){let d=this.images[t];if(d.data.width!==u.data.width||d.data.height!==u.data.height)throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=d.version+1,this.images[t]=u,this.updatedImages[t]=!0}removeImage(t){let u=this.images[t];delete this.images[t],delete this.patterns[t],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,u){let d=!0;if(!this.isLoaded())for(let m of t)this.images[m]||(d=!1);this.isLoaded()||d?this._notify(t,u):this.requestors.push({ids:t,callback:u})}_notify(t,u){let d={};for(let m of t){this.images[m]||this.fire(new a.Event("styleimagemissing",{id:m}));let y=this.images[m];y?d[m]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:Boolean(y.userImage&&y.userImage.render)}:a.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,d)}getPixelSize(){let{width:t,height:u}=this.atlasImage;return{width:t,height:u}}getPattern(t){let u=this.patterns[t],d=this.getImage(t);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{let m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new a.ImagePosition(m,d);this.patterns[t]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){let u=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new D(t,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let y in this.patterns)t.push(this.patterns[y].bin);let{w:u,h:d}=a.potpack(t),m=this.atlasImage;m.resize({width:u||1,height:d||1});for(let y in this.patterns){let{bin:C}=this.patterns[y],O=C.x+1,I=C.y+1,j=this.images[y].data,J=j.width,ne=j.height;a.RGBAImage.copy(j,m,{x:0,y:0},{x:O,y:I},{width:J,height:ne}),a.RGBAImage.copy(j,m,{x:0,y:ne-1},{x:O,y:I-1},{width:J,height:1}),a.RGBAImage.copy(j,m,{x:0,y:0},{x:O,y:I+ne},{width:J,height:1}),a.RGBAImage.copy(j,m,{x:J-1,y:0},{x:O-1,y:I},{width:1,height:ne}),a.RGBAImage.copy(j,m,{x:0,y:0},{x:O+J,y:I},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(let u of t){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;let d=this.images[u];d||a.warnOnce(`Image with ID: "${u}" was not found`),E(d)&&this.updateImage(u,d)}}}let Y=1e20;function G(f,t,u,d,m,y,C,O,I){for(let j=t;j<t+d;j++)le(f,u*y+j,y,m,C,O,I);for(let j=u;j<u+m;j++)le(f,j*y+t,1,d,C,O,I)}function le(f,t,u,d,m,y,C){y[0]=0,C[0]=-Y,C[1]=Y,m[0]=f[t];for(let O=1,I=0,j=0;O<d;O++){m[O]=f[t+O*u];let J=O*O;do{let ne=y[I];j=(m[O]-m[ne]+J-ne*ne)/(O-ne)/2}while(j<=C[I]&&--I>-1);I++,y[I]=O,C[I]=j,C[I+1]=Y}for(let O=0,I=0;O<d;O++){for(;C[I+1]<O;)I++;let j=y[I],J=O-j;f[t+O*u]=m[j]+J*J}}class K{constructor(t,u){this.requestManager=t,this.localIdeographFontFamily=u,this.entries={}}setURL(t){this.url=t}getGlyphs(t,u){let d=[];for(let m in t)for(let y of t[m])d.push({stack:m,id:y});a.asyncAll(d,({stack:m,id:y},C)=>{let O=this.entries[m];O||(O=this.entries[m]={glyphs:{},requests:{},ranges:{}});let I=O.glyphs[y];if(I!==void 0)return void C(null,{stack:m,id:y,glyph:I});if(I=this._tinySDF(O,m,y),I)return O.glyphs[y]=I,void C(null,{stack:m,id:y,glyph:I});let j=Math.floor(y/256);if(256*j>65535)return void C(new Error("glyphs > 65535 not supported"));if(O.ranges[j])return void C(null,{stack:m,id:y,glyph:I});let J=O.requests[j];J||(J=O.requests[j]=[],K.loadGlyphRange(m,j,this.url,this.requestManager,(ne,ge)=>{if(ge){for(let Re in ge)this._doesCharSupportLocalGlyph(+Re)||(O.glyphs[+Re]=ge[+Re]);O.ranges[j]=!0}for(let Re of J)Re(ne,ge);delete O.requests[j]})),J.push((ne,ge)=>{ne?C(ne):ge&&C(null,{stack:m,id:y,glyph:ge[y]||null})})},(m,y)=>{if(m)u(m);else if(y){let C={};for(let{stack:O,id:I,glyph:j}of y)(C[O]||(C[O]={}))[I]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](t)||a.unicodeBlockLookup["Hangul Syllables"](t)||a.unicodeBlockLookup.Hiragana(t)||a.unicodeBlockLookup.Katakana(t))}_tinySDF(t,u,d){let m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let y=t.tinySDF;if(!y){let O="400";/bold/i.test(u)?O="900":/medium/i.test(u)?O="500":/light/i.test(u)&&(O="200"),y=t.tinySDF=new K.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:O})}let C=y.draw(String.fromCharCode(d));return{id:d,bitmap:new a.AlphaImage({width:C.width||30,height:C.height||30},C.data),metrics:{width:C.glyphWidth||24,height:C.glyphHeight||24,left:C.glyphLeft||0,top:C.glyphTop-27||-8,advance:C.glyphAdvance||24}}}}K.loadGlyphRange=function(f,t,u,d,m){let y=256*t,C=y+255,O=d.transformRequest(u.replace("{fontstack}",f).replace("{range}",`${y}-${C}`),a.ResourceType.Glyphs);a.getArrayBuffer(O,(I,j)=>{if(I)m(I);else if(j){let J={};for(let ne of a.parseGlyphPbf(j))J[ne.id]=ne;m(null,J)}})},K.TinySDF=class{constructor({fontSize:f=24,buffer:t=3,radius:u=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:C="normal"}={}){this.buffer=t,this.cutoff=d,this.radius=u;let O=this.size=f+4*t,I=this._createCanvas(O),j=this.ctx=I.getContext("2d",{willReadFrequently:!0});j.font=`${C} ${y} ${f}px ${m}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(f){let t=document.createElement("canvas");return t.width=t.height=f,t}draw(f){let{width:t,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(f),C=Math.ceil(u),O=Math.min(this.size-this.buffer,Math.ceil(y-m)),I=Math.min(this.size-this.buffer,C+Math.ceil(d)),j=O+2*this.buffer,J=I+2*this.buffer,ne=Math.max(j*J,0),ge=new Uint8ClampedArray(ne),Re={data:ge,width:j,height:J,glyphWidth:O,glyphHeight:I,glyphTop:C,glyphLeft:0,glyphAdvance:t};if(O===0||I===0)return Re;let{ctx:Pe,buffer:Me,gridInner:nt,gridOuter:ut}=this;Pe.clearRect(Me,Me,O,I),Pe.fillText(f,Me,Me+C);let vt=Pe.getImageData(Me,Me,O,I);ut.fill(Y,0,ne),nt.fill(0,0,ne);for(let Be=0;Be<I;Be++)for(let St=0;St<O;St++){let xt=vt.data[4*(Be*O+St)+3]/255;if(xt===0)continue;let Dt=(Be+Me)*j+St+Me;if(xt===1)ut[Dt]=0,nt[Dt]=Y;else{let It=.5-xt;ut[Dt]=It>0?It*It:0,nt[Dt]=It<0?It*It:0}}G(ut,0,0,j,J,j,this.f,this.v,this.z),G(nt,Me,Me,O,I,j,this.f,this.v,this.z);for(let Be=0;Be<ne;Be++){let St=Math.sqrt(ut[Be])-Math.sqrt(nt[Be]);ge[Be]=Math.round(255-255*(St/this.radius+this.cutoff))}return Re}};let F=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(f,t){return a.sphericalToCartesian(f.expression.evaluate(t))}interpolate(f,t,u){return{x:a.number(f.x,t.x,u),y:a.number(f.y,t.y,u),z:a.number(f.z,t.z,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),Q="-transition";class L extends a.Evented{constructor(t){super(),this._transitionable=new a.Transitionable(F),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,u={}){if(!this._validate(a.validateLight,t,u))for(let d in t){let m=t[d];d.endsWith(Q)?this._transitionable.setTransition(d.slice(0,-Q.length),m):this._transitionable.setValue(d,m)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,u,d){return(!d||d.validate!==!1)&&a.emitValidationErrors(this,t.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class k{constructor(t,u){this.width=t,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,u){let d=t.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(t,u)),this.dashEntry[d]}getDashRanges(t,u,d){let m=[],y=t.length%2==1?-t[t.length-1]*d:0,C=t[0]*d,O=!0;m.push({left:y,right:C,isDash:O,zeroLength:t[0]===0});let I=t[0];for(let j=1;j<t.length;j++){O=!O;let J=t[j];y=I*d,I+=J,C=I*d,m.push({left:y,right:C,isDash:O,zeroLength:J===0})}return m}addRoundDash(t,u,d){let m=u/2;for(let y=-d;y<=d;y++){let C=this.width*(this.nextRow+d+y),O=0,I=t[O];for(let j=0;j<this.width;j++){j/I.right>1&&(I=t[++O]);let J=Math.abs(j-I.left),ne=Math.abs(j-I.right),ge=Math.min(J,ne),Re,Pe=y/d*(m+1);if(I.isDash){let Me=m-Math.abs(Pe);Re=Math.sqrt(ge*ge+Me*Me)}else Re=m-Math.sqrt(ge*ge+Pe*Pe);this.data[C+j]=Math.max(0,Math.min(255,Re+128))}}}addRegularDash(t){for(let O=t.length-1;O>=0;--O){let I=t[O],j=t[O+1];I.zeroLength?t.splice(O,1):j&&j.isDash===I.isDash&&(j.left=I.left,t.splice(O,1))}let u=t[0],d=t[t.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);let m=this.width*this.nextRow,y=0,C=t[y];for(let O=0;O<this.width;O++){O/C.right>1&&(C=t[++y]);let I=Math.abs(O-C.left),j=Math.abs(O-C.right),J=Math.min(I,j);this.data[m+O]=Math.max(0,Math.min(255,(C.isDash?J:-J)+128))}}addDash(t,u){let d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return a.warnOnce("LineAtlas out of space"),null;let y=0;for(let O=0;O<t.length;O++)y+=t[O];if(y!==0){let O=this.width/y,I=this.getDashRanges(t,this.width,O);u?this.addRoundDash(I,O,d):this.addRegularDash(I)}let C={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=m,this.dirty=!0,C}bind(t){let u=t.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class re{constructor(t,u){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a.uniqueId();let d=this.workerPool.acquire(this.id);for(let m=0;m<d.length;m++){let y=new re.Actor(d[m],u,this.id);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,u,d){a.asyncAll(this.actors,(m,y)=>{m.send(t,u,y)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function de(f,t,u){let d=function(m,y){if(m)return u(m);if(y){let C=a.pick(a.extend(y,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);y.vector_layers&&(C.vectorLayers=y.vector_layers,C.vectorLayerIds=C.vectorLayers.map(O=>O.id)),u(null,C)}};return f.url?a.getJSON(t.transformRequest(f.url,a.ResourceType.Source),d):a.exported.frame(()=>d(null,f))}re.Actor=a.Actor;class Ie{constructor(t,u,d){this.bounds=a.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){let u=Math.pow(2,t.z),d=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),m=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),y=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),C=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return t.x>=d&&t.x<y&&t.y>=m&&t.y<C}}class et extends a.Evented{constructor(t,u,d,m){if(super(),this.id=t,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=de(this._options,this.map._requestManager,(t,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new a.ErrorEvent(t)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new Ie(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(t,u){let d=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(d,a.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(C,O){return delete t.request,t.aborted?u(null):C&&C.status!==404?u(C):(O&&O.resourceTiming&&(t.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&t.setExpiryData(O),t.loadVectorData(O,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,t.actor&&t.state!=="expired"?t.state==="loading"?t.reloadCallback=u:t.request=t.actor.send("reloadTile",m,y.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",m,y.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class lt extends a.Evented{constructor(t,u,d,m){super(),this.id=t,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=de(this._options,this.map._requestManager,(t,u)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new a.ErrorEvent(t)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new Ie(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,u){let d=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=a.getImage(this.map._requestManager.transformRequest(d,a.ResourceType.Tile),(m,y,C)=>{if(delete t.request,t.aborted)t.state="unloaded",u(null);else if(m)t.state="errored",u(m);else if(y){this.map._refreshExpiredTiles&&t.setExpiryData(C);let O=this.map.painter.context,I=O.gl;t.texture=this.map.painter.getTileTexture(y.width),t.texture?t.texture.update(y,{useMipmap:!0}):(t.texture=new D(O,y,I.RGBA,{useMipmap:!0}),t.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),O.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax)),t.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(t,u){t.request&&(t.request.cancel(),delete t.request),u()}unloadTile(t,u){t.texture&&this.map.painter.saveTileTexture(t.texture),u()}hasTransition(){return!1}}let tt;class je extends lt{constructor(t,u,d,m){super(t,u,d,m),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,u){let d=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(y,C){y&&(t.state="errored",u(y)),C&&(t.dem=C,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",u(null))}t.request=a.getImage(this.map._requestManager.transformRequest(d,a.ResourceType.Tile),function(y,C){if(delete t.request,t.aborted)t.state="unloaded",u(null);else if(y)t.state="errored",u(y);else if(C){this.map._refreshExpiredTiles&&t.setExpiryData(C),delete C.cacheControl,delete C.expires;let O=a.isImageBitmap(C)&&(tt==null&&(tt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),tt)?C:a.exported.getImageData(C,1),I={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:O,encoding:this.encoding};t.actor&&t.state!=="expired"||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",I,m.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){let u=t.canonical,d=Math.pow(2,u.z),m=(u.x-1+d)%d,y=u.x===0?t.wrap-1:t.wrap,C=(u.x+1+d)%d,O=u.x+1===d?t.wrap+1:t.wrap,I={};return I[new a.OverscaledTileID(t.overscaledZ,y,u.z,m,u.y).key]={backfilled:!1},I[new a.OverscaledTileID(t.overscaledZ,O,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(I[new a.OverscaledTileID(t.overscaledZ,y,u.z,m,u.y-1).key]={backfilled:!1},I[new a.OverscaledTileID(t.overscaledZ,t.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},I[new a.OverscaledTileID(t.overscaledZ,O,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<d&&(I[new a.OverscaledTileID(t.overscaledZ,y,u.z,m,u.y+1).key]={backfilled:!1},I[new a.OverscaledTileID(t.overscaledZ,t.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},I[new a.OverscaledTileID(t.overscaledZ,O,u.z,C,u.y+1).key]={backfilled:!1}),I}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class Ee extends a.Evented{constructor(t,u,d,m){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(m),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;let y=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*y,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*y,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*y,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},u),this}getClusterChildren(t,u){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},u),this}getClusterLeaves(t,u,d,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:u,offset:d},m),this}_updateWorkerData(t){let u=a.extend({},this.workerOptions),d=this._data;typeof d=="string"?(u.request=this.map._requestManager.transformRequest(a.exported.resolveURL(d),a.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(d),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(m,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:t}));let C=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(C=y.resourceTiming[this.id].slice(0)),m)return void this.fire(new a.ErrorEvent(m));let O={dataType:"source",sourceDataType:t};this._collectResourceTiming&&C&&C.length>0&&a.extend(O,{resourceTiming:C}),this.fire(new a.Event("data",O))})}loaded(){return this._pendingLoads===0}loadTile(t,u){let d=t.actor?"reloadTile":"loadTile";t.actor=this.actor;let m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(d,m,(y,C)=>(delete t.request,t.unloadVectorData(),t.aborted?u(null):y?u(y):(t.loadVectorData(C,this.map.painter,d==="reloadTile"),u(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _e=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class te extends a.Evented{constructor(t,u,d,m){super(),this.id=t,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(t,u){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(d,m)=>{this._loaded=!0,d?this.fire(new a.ErrorEvent(d)):m&&(this.image=m,t&&(this.coordinates=t),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(t){this.coordinates=t;let u=t.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(m){let y=1/0,C=1/0,O=-1/0,I=-1/0;for(let ge of m)y=Math.min(y,ge.x),C=Math.min(C,ge.y),O=Math.max(O,ge.x),I=Math.max(I,ge.y);let j=Math.max(O-y,I-C),J=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),ne=Math.pow(2,J);return new a.CanonicalTileID(J,Math.floor((y+O)/2*ne),Math.floor((C+I)/2*ne))}(u),this.minzoom=this.maxzoom=this.tileID.z;let d=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new D(t,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}loadTile(t,u){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},u(null)):(t.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ce extends te{constructor(t,u,d,m){super(t,u,d,m),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;let t=this.options;this.urls=[];for(let u of t.urls)this.urls.push(this.map._requestManager.transformRequest(u,a.ResourceType.Source).url);a.getVideo(this.urls,(u,d)=>{this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let u=this.video.seekable;t<u.start(0)||t>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let t=this.map.painter.context,u=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new D(t,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ae extends te{constructor(t,u,d,m){super(t,u,d,m),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(C=>typeof C!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let u=this.map.painter.context,d=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new D(u,this.canvas,d.RGBA,{premultiply:!0});for(let m in this.tiles){let y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}let ke={vector:et,raster:lt,"raster-dem":je,geojson:Ee,video:ce,image:te,canvas:Ae};function Ce(f,t){let u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*f.width,.5*f.height,1]),a.multiply(u,u,f.calculatePosMatrix(t.toUnwrapped()))}function $e(f,t,u,d,m,y){let C=function(ne,ge,Re){if(ne)for(let Pe of ne){let Me=ge[Pe];if(Me&&Me.source===Re&&Me.type==="fill-extrusion")return!0}else for(let Pe in ge){let Me=ge[Pe];if(Me.source===Re&&Me.type==="fill-extrusion")return!0}return!1}(m&&m.layers,t,f.id),O=y.maxPitchScaleFactor(),I=f.tilesIn(d,O,C);I.sort(Ke);let j=[];for(let ne of I)j.push({wrappedTileID:ne.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(t,u,f._state,ne.queryGeometry,ne.cameraQueryGeometry,ne.scale,m,y,O,Ce(f.transform,ne.tileID))});let J=function(ne){let ge={},Re={};for(let Pe of ne){let Me=Pe.queryResults,nt=Pe.wrappedTileID,ut=Re[nt]=Re[nt]||{};for(let vt in Me){let Be=Me[vt],St=ut[vt]=ut[vt]||{},xt=ge[vt]=ge[vt]||[];for(let Dt of Be)St[Dt.featureIndex]||(St[Dt.featureIndex]=!0,xt.push(Dt))}}return ge}(j);for(let ne in J)J[ne].forEach(ge=>{let Re=ge.feature,Pe=f.getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Pe});return J}function Ke(f,t){let u=f.tileID,d=t.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}class Ve{constructor(t,u){this.tileID=t,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){let u=t+this.timeAdded;u<a.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach(u=>t.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(t,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(m,y){let C={};if(!y)return C;for(let O of m){let I=O.layerIds.map(j=>y.getLayer(j)).filter(Boolean);if(I.length!==0){O.layers=I,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(j=>I.filter(J=>J.id===j)[0]));for(let j of I)C[j.id]=O}}return C}(t.buckets,u.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.SymbolBucket&&y.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(let m in this.buckets){let y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let d in this.buckets){let m=this.buckets[d];m.uploadPending()&&m.upload(t)}let u=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new D(t,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new D(t,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,u,d,m,y,C,O,I,j,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:C,tileSize:this.tileSize,pixelPosMatrix:J,transform:I,params:O,queryPadding:this.queryPadding*j},t,u,d):{}}querySourceFeatures(t,u){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let m=d.loadVTLayers(),y=u?u.sourceLayer:"",C=m._geojsonTileLayer||m[y];if(!C)return;let O=a.createFilter(u&&u.filter),{z:I,x:j,y:J}=this.tileID.canonical,ne={z:I,x:j,y:J};for(let ge=0;ge<C.length;ge++){let Re=C.feature(ge);if(O.needGeometry){let nt=a.toEvaluationFeature(Re,!0);if(!O.filter(new a.EvaluationParameters(this.tileID.overscaledZ),nt,this.tileID.canonical))continue}else if(!O.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Re))continue;let Pe=d.getId(Re,y),Me=new a.GeoJSONFeature(Re,I,j,J,Pe);Me.tile=ne,t.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let u=this.expirationTime;if(t.cacheControl){let d=a.parseCacheControl(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let d=Date.now(),m=!1;if(this.expirationTime>d)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{let y=this.expirationTime-u;y?this.expirationTime=d+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!u.style.hasLayer(m))continue;let y=this.buckets[m],C=y.layers[0].sourceLayer||"_geojsonTileLayer",O=d[C],I=t[C];if(!O||!I||Object.keys(I).length===0)continue;y.update(I,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});let j=u&&u.style&&u.style.getLayer(m);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=a.exported.now()+t}setDependencies(t,u){let d={};for(let m of u)d[m]=!0;this.dependencies[t]=d}hasDependency(t,u){for(let d of t){let m=this.dependencies[d];if(m){for(let y of u)if(m[y])return!0}}return!1}}class rt{constructor(t,u){this.max=t,this.onRemove=u,this.reset()}reset(){for(let t in this.data)for(let u of this.data[t])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(t,u,d){let m=t.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);let y={value:u,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(t,y)},d)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){let C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){let u=this.data[t].shift();return u.timeout&&clearTimeout(u.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),u.value}getByKey(t){let u=this.data[t];return u?u[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,u){if(!this.has(t))return this;let d=t.wrapped().key,m=u===void 0?0:this.data[d].indexOf(u),y=this.data[d][m];return this.data[d].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){let u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(t){let u=[];for(let d in this.data)for(let m of this.data[d])t(m.value)||u.push(m);for(let d of u)this.remove(d.value.tileID,d)}}class it{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,u,d){let m=String(u);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][m]=this.stateChanges[t][m]||{},a.extend(this.stateChanges[t][m],d),this.deletedStates[t]===null){this.deletedStates[t]={};for(let y in this.state[t])y!==m&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][m]===null){this.deletedStates[t][m]={};for(let y in this.state[t][m])d[y]||(this.deletedStates[t][m][y]=null)}else for(let y in d)this.deletedStates[t]&&this.deletedStates[t][m]&&this.deletedStates[t][m][y]===null&&delete this.deletedStates[t][m][y]}removeFeatureState(t,u,d){if(this.deletedStates[t]===null)return;let m=String(u);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&u!==void 0)this.deletedStates[t][m]!==null&&(this.deletedStates[t][m]=this.deletedStates[t][m]||{},this.deletedStates[t][m][d]=null);else if(u!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][m])for(d in this.deletedStates[t][m]={},this.stateChanges[t][m])this.deletedStates[t][m][d]=null;else this.deletedStates[t][m]=null;else this.deletedStates[t]=null}getState(t,u){let d=String(u),m=a.extend({},(this.state[t]||{})[d],(this.stateChanges[t]||{})[d]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){let y=this.deletedStates[t][u];if(y===null)return{};for(let C in y)delete m[C]}return m}initializeTileState(t,u){t.setFeatureState(this.state,u)}coalesceChanges(t,u){let d={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let y={};for(let C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),a.extend(this.state[m][C],this.stateChanges[m][C]),y[C]=this.state[m][C];d[m]=y}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let y={};if(this.deletedStates[m]===null)for(let C in this.state[m])y[C]={},this.state[m][C]={};else for(let C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(let O of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][O];y[C]=this.state[m][C]}d[m]=d[m]||{},a.extend(d[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let m in t)t[m].setFeatureState(d,u)}}class dt extends a.Evented{constructor(t,u,d){super(),this.id=t,this.dispatcher=d,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(m,y,C,O){let I=new ke[y.type](m,y,C,O);if(I.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${I.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],I),I}(t,u,d,this),this._tiles={},this._cache=new rt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new it}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(let t in this._tiles){let u=this._tiles[t];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,u){return this._source.loadTile(t,u)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,()=>{}),this._source.fire(new a.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let u in this._tiles){let d=this._tiles[u];d.upload(t),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(bt).map(t=>t.key)}getRenderableIds(t){let u=[];for(let d in this._tiles)this._isIdRenderable(d,t)&&u.push(this._tiles[d]);return t?u.sort((d,m)=>{let y=d.tileID,C=m.tileID,O=new a.pointGeometry(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new a.pointGeometry(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-C.overscaledZ||I.y-O.y||I.x-O.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(bt).map(d=>d.key)}hasRenderableParent(t){let u=this.findLoadedParent(t,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(t,u){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(u||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,u){let d=this._tiles[t];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,t,u)))}_tileLoaded(t,u,d,m){if(m)return t.state="errored",void(m.status!==404?this._source.fire(new a.ErrorEvent(m,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=a.exported.now(),d==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(u,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){let u=this.getRenderableIds();for(let m=0;m<u.length;m++){let y=u[m];if(t.neighboringTiles&&t.neighboringTiles[y]){let C=this.getTileByID(y);d(t,C),d(C,t)}}function d(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=y.tileID.canonical.x-m.tileID.canonical.x,O=y.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),j=y.tileID.key;C===0&&O===0||Math.abs(O)>1||(Math.abs(C)>1&&(Math.abs(C+I)===1?C+=I:Math.abs(C-I)===1&&(C-=I)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,C,O),m.neighboringTiles&&m.neighboringTiles[j]&&(m.neighboringTiles[j].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,u,d,m){for(let y in this._tiles){let C=this._tiles[y];if(m[y]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>d)continue;let O=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){let j=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[j.key],C&&C.hasData()&&(O=j)}let I=O;for(;I.overscaledZ>u;)if(I=I.scaledTo(I.overscaledZ-1),t[I.key]){m[O.key]=O;break}}}findLoadedParent(t,u){if(t.key in this._loadedParentTiles){let d=this._loadedParentTiles[t.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=t.overscaledZ-1;d>=u;d--){let m=t.scaledTo(d),y=this._getLoadedTile(m);if(y)return y}}_getLoadedTile(t){let u=this._tiles[t.key];return u&&u.hasData()?u:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){let u=Math.ceil(t.width/this._source.tileSize)+1,d=Math.ceil(t.height/this._source.tileSize)+1,m=Math.floor(u*d*5),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(t){let u=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,u){let d={};for(let m in this._tiles){let y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+u),d[y.tileID.key]=y}this._tiles=d;for(let m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(let m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(t,u){if(this.transform=t,this.terrain=u,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(j=>new a.OverscaledTileID(j.canonical.z,j.wrap,j.canonical.z,j.canonical.x,j.canonical.y)):(d=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(d=d.filter(j=>this._source.hasTile(j)))):d=[];let m=t.coveringZoomLevel(this._source),y=Math.max(m-dt.maxOverzooming,this._source.minzoom),C=Math.max(m+dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let j={};for(let J of d)if(J.canonical.z>this._source.minzoom){let ne=J.scaledTo(J.canonical.z-1);j[ne.key]=ne;let ge=J.scaledTo(Math.max(this._source.minzoom,Math.min(J.canonical.z,5)));j[ge.key]=ge}d=d.concat(Object.values(j))}let O=this._updateRetainedTiles(d,m);if(Wt(this._source.type)){let j={},J={},ne=Object.keys(O);for(let ge of ne){let Re=O[ge],Pe=this._tiles[ge];if(!Pe||Pe.fadeEndTime&&Pe.fadeEndTime<=a.exported.now())continue;let Me=this.findLoadedParent(Re,y);Me&&(this._addTile(Me.tileID),j[Me.tileID.key]=Me.tileID),J[ge]=Re}this._retainLoadedChildren(J,m,C,O);for(let ge in j)O[ge]||(this._coveredTiles[ge]=!0,O[ge]=j[ge]);if(u){let ge={},Re={};for(let Pe of d)this._tiles[Pe.key].hasData()?ge[Pe.key]=Pe:Re[Pe.key]=Pe;for(let Pe in Re){let Me=Re[Pe].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(ge[Me[0].key]=O[Me[0].key]=Me[0],ge[Me[1].key]=O[Me[1].key]=Me[1],ge[Me[2].key]=O[Me[2].key]=Me[2],ge[Me[3].key]=O[Me[3].key]=Me[3],delete Re[Pe])}for(let Pe in Re){let Me=this.findLoadedParent(Re[Pe],this._source.minzoom);if(Me){ge[Me.tileID.key]=O[Me.tileID.key]=Me.tileID;for(let nt in ge)ge[nt].isChildOf(Me.tileID)&&delete ge[nt]}}for(let Pe in this._tiles)ge[Pe]||(this._coveredTiles[Pe]=!0)}}for(let j in O)this._tiles[j].clearFadeHold();let I=a.keysDifference(this._tiles,O);for(let j of I){let J=this._tiles[j];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(j)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(let t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,u){let d={},m={},y=Math.max(u-dt.maxOverzooming,this._source.minzoom),C=Math.max(u+dt.maxUnderzooming,this._source.minzoom),O={};for(let I of t){let j=this._addTile(I);d[I.key]=I,j.hasData()||u<this._source.maxzoom&&(O[I.key]=I)}this._retainLoadedChildren(O,u,C,d);for(let I of t){let j=this._tiles[I.key];if(j.hasData())continue;if(u+1>this._source.maxzoom){let ne=I.children(this._source.maxzoom)[0],ge=this.getTile(ne);if(ge&&ge.hasData()){d[ne.key]=ne;continue}}else{let ne=I.children(this._source.maxzoom);if(d[ne[0].key]&&d[ne[1].key]&&d[ne[2].key]&&d[ne[3].key])continue}let J=j.wasRequested();for(let ne=I.overscaledZ-1;ne>=y;--ne){let ge=I.scaledTo(ne);if(m[ge.key]||(m[ge.key]=!0,j=this.getTile(ge),!j&&J&&(j=this._addTile(ge)),j&&(d[ge.key]=ge,J=j.wasRequested(),j.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let t in this._tiles){let u=[],d,m=this._tiles[t].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}u.push(m.key);let y=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;m=y}for(let y of u)this._loadedParentTiles[y]=d}}_addTile(t){let u=this._tiles[t.key];if(u)return u;u=this._cache.getAndRemove(t),u&&(this._setTileReloadTimer(t.key,u),u.tileID=t,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,u)));let d=u;return u||(u=new Ve(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,t.key,u.state))),u.uses++,this._tiles[t.key]=u,d||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(t,u){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);let d=u.getExpiryTimeout();d&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},d))}_removeTile(t){let u=this._tiles[t];u&&(u.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,u,d){let m=[],y=this.transform;if(!y)return m;let C=d?y.getCameraQueryGeometry(t):t,O=t.map(Pe=>y.pointCoordinate(Pe,this.terrain)),I=C.map(Pe=>y.pointCoordinate(Pe,this.terrain)),j=this.getIds(),J=1/0,ne=1/0,ge=-1/0,Re=-1/0;for(let Pe of I)J=Math.min(J,Pe.x),ne=Math.min(ne,Pe.y),ge=Math.max(ge,Pe.x),Re=Math.max(Re,Pe.y);for(let Pe=0;Pe<j.length;Pe++){let Me=this._tiles[j[Pe]];if(Me.holdingForFade())continue;let nt=Me.tileID,ut=Math.pow(2,y.zoom-Me.tileID.overscaledZ),vt=u*Me.queryPadding*a.EXTENT/Me.tileSize/ut,Be=[nt.getTilePoint(new a.MercatorCoordinate(J,ne)),nt.getTilePoint(new a.MercatorCoordinate(ge,Re))];if(Be[0].x-vt<a.EXTENT&&Be[0].y-vt<a.EXTENT&&Be[1].x+vt>=0&&Be[1].y+vt>=0){let St=O.map(Dt=>nt.getTilePoint(Dt)),xt=I.map(Dt=>nt.getTilePoint(Dt));m.push({tile:Me,tileID:nt,queryGeometry:St,cameraQueryGeometry:xt,scale:ut})}}return m}getVisibleCoordinates(t){let u=this.getRenderableIds(t).map(d=>this._tiles[d].tileID);for(let d of u)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Wt(this._source.type))for(let t in this._tiles){let u=this._tiles[t];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(t,u,d){this._state.updateState(t=t||"_geojsonTileLayer",u,d)}removeFeatureState(t,u,d){this._state.removeFeatureState(t=t||"_geojsonTileLayer",u,d)}getFeatureState(t,u){return this._state.getState(t=t||"_geojsonTileLayer",u)}setDependencies(t,u,d){let m=this._tiles[t];m&&m.setDependencies(u,d)}reloadTilesForDependencies(t,u){for(let d in this._tiles)this._tiles[d].hasDependency(t,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(t,u))}}function bt(f,t){let u=Math.abs(2*f.wrap)-+(f.wrap<0),d=Math.abs(2*t.wrap)-+(t.wrap<0);return f.overscaledZ-t.overscaledZ||d-u||t.canonical.y-f.canonical.y||t.canonical.x-f.canonical.x}function Wt(f){return f==="raster"||f==="image"||f==="video"}dt.maxOverzooming=10,dt.maxUnderzooming=3;let Ht="mapboxgl_preloaded_worker_pool";class Jt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Jt.workerCount;)this.workers.push(new Worker(uo.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ht]}numActive(){return Object.keys(this.active).length}}let Mt=Math.floor(a.exported.hardwareConcurrency/2),oe;function Ye(){return oe||(oe=new Jt),oe}function st(f,t){let u={};for(let d in f)d!=="ref"&&(u[d]=f[d]);return a.refProperties.forEach(d=>{d in t&&(u[d]=t[d])}),u}function _t(f){f=f.slice();let t=Object.create(null);for(let u=0;u<f.length;u++)t[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=st(f[u],t[f[u].ref]));return f}Jt.workerCount=Math.max(Math.min(Mt,6),1);let Ct={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kt(f,t,u){u.push({command:Ct.addSource,args:[f,t[f]]})}function ct(f,t,u){t.push({command:Ct.removeSource,args:[f]}),u[f]=!0}function mt(f,t,u,d){ct(f,u,d),kt(f,t,u)}function we(f,t,u){let d;for(d in f[u])if(Object.prototype.hasOwnProperty.call(f[u],d)&&d!=="data"&&!T(f[u][d],t[u][d]))return!1;for(d in t[u])if(Object.prototype.hasOwnProperty.call(t[u],d)&&d!=="data"&&!T(f[u][d],t[u][d]))return!1;return!0}function me(f,t,u,d,m,y){let C;for(C in t=t||{},f=f||{})Object.prototype.hasOwnProperty.call(f,C)&&(T(f[C],t[C])||u.push({command:y,args:[d,C,t[C],m]}));for(C in t)Object.prototype.hasOwnProperty.call(t,C)&&!Object.prototype.hasOwnProperty.call(f,C)&&(T(f[C],t[C])||u.push({command:y,args:[d,C,t[C],m]}))}function We(f){return f.id}function Qe(f,t){return f[t.id]=t,f}class He{constructor(t,u){this.reset(t,u)}reset(t,u){this.points=t||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.clamp(t,0,1);let u=1,d=this._distances[u],m=t*this.paddedLength+this.padding;for(;d<m&&u<this._distances.length;)d=this._distances[++u];let y=u-1,C=this._distances[y],O=d-C,I=O>0?(m-C)/O:0;return this.points[y].mult(1-I).add(this.points[u].mult(I))}}function fe(f,t){let u=!0;return f==="always"||f!=="never"&&t!=="never"||(u=!1),u}class De{constructor(t,u,d){let m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(t/d),this.yCellCount=Math.ceil(u/d);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=u,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,u,d,m,y){this._forEachCell(u,d,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(t,u,d,m){this._forEachCell(u-m,d-m,u+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(u),this.circles.push(d),this.circles.push(m)}_insertBoxCell(t,u,d,m,y,C){this.boxCells[y].push(C)}_insertCircleCell(t,u,d,m,y,C){this.circleCells[y].push(C)}_query(t,u,d,m,y,C,O){if(d<0||t>this.width||m<0||u>this.height)return[];let I=[];if(t<=0&&u<=0&&this.width<=d&&this.height<=m){if(y)return[{key:null,x1:t,y1:u,x2:d,y2:m}];for(let j=0;j<this.boxKeys.length;j++)I.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){let J=this.circles[3*j],ne=this.circles[3*j+1],ge=this.circles[3*j+2];I.push({key:this.circleKeys[j],x1:J-ge,y1:ne-ge,x2:J+ge,y2:ne+ge})}}else this._forEachCell(t,u,d,m,this._queryCell,I,{hitTest:y,overlapMode:C,seenUids:{box:{},circle:{}}},O);return I}query(t,u,d,m){return this._query(t,u,d,m,!1,null)}hitTest(t,u,d,m,y,C){return this._query(t,u,d,m,!0,y,C).length>0}hitTestCircle(t,u,d,m,y){let C=t-d,O=t+d,I=u-d,j=u+d;if(O<0||C>this.width||j<0||I>this.height)return!1;let J=[];return this._forEachCell(C,I,O,j,this._queryCellCircle,J,{hitTest:!0,overlapMode:m,circle:{x:t,y:u,radius:d},seenUids:{box:{},circle:{}}},y),J.length>0}_queryCell(t,u,d,m,y,C,O,I){let{seenUids:j,hitTest:J,overlapMode:ne}=O,ge=this.boxCells[y];if(ge!==null){let Pe=this.bboxes;for(let Me of ge)if(!j.box[Me]){j.box[Me]=!0;let nt=4*Me,ut=this.boxKeys[Me];if(t<=Pe[nt+2]&&u<=Pe[nt+3]&&d>=Pe[nt+0]&&m>=Pe[nt+1]&&(!I||I(ut))&&(!J||!fe(ne,ut.overlapMode))&&(C.push({key:ut,x1:Pe[nt],y1:Pe[nt+1],x2:Pe[nt+2],y2:Pe[nt+3]}),J))return!0}}let Re=this.circleCells[y];if(Re!==null){let Pe=this.circles;for(let Me of Re)if(!j.circle[Me]){j.circle[Me]=!0;let nt=3*Me,ut=this.circleKeys[Me];if(this._circleAndRectCollide(Pe[nt],Pe[nt+1],Pe[nt+2],t,u,d,m)&&(!I||I(ut))&&(!J||!fe(ne,ut.overlapMode))){let vt=Pe[nt],Be=Pe[nt+1],St=Pe[nt+2];if(C.push({key:ut,x1:vt-St,y1:Be-St,x2:vt+St,y2:Be+St}),J)return!0}}}return!1}_queryCellCircle(t,u,d,m,y,C,O,I){let{circle:j,seenUids:J,overlapMode:ne}=O,ge=this.boxCells[y];if(ge!==null){let Pe=this.bboxes;for(let Me of ge)if(!J.box[Me]){J.box[Me]=!0;let nt=4*Me,ut=this.boxKeys[Me];if(this._circleAndRectCollide(j.x,j.y,j.radius,Pe[nt+0],Pe[nt+1],Pe[nt+2],Pe[nt+3])&&(!I||I(ut))&&!fe(ne,ut.overlapMode))return C.push(!0),!0}}let Re=this.circleCells[y];if(Re!==null){let Pe=this.circles;for(let Me of Re)if(!J.circle[Me]){J.circle[Me]=!0;let nt=3*Me,ut=this.circleKeys[Me];if(this._circlesCollide(Pe[nt],Pe[nt+1],Pe[nt+2],j.x,j.y,j.radius)&&(!I||I(ut))&&!fe(ne,ut.overlapMode))return C.push(!0),!0}}}_forEachCell(t,u,d,m,y,C,O,I){let j=this._convertToXCellCoord(t),J=this._convertToYCellCoord(u),ne=this._convertToXCellCoord(d),ge=this._convertToYCellCoord(m);for(let Re=j;Re<=ne;Re++)for(let Pe=J;Pe<=ge;Pe++)if(y.call(this,t,u,d,m,this.xCellCount*Pe+Re,C,O,I))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,u,d,m,y,C){let O=m-t,I=y-u,j=d+C;return j*j>O*O+I*I}_circleAndRectCollide(t,u,d,m,y,C,O){let I=(C-m)/2,j=Math.abs(t-(m+I));if(j>I+d)return!1;let J=(O-y)/2,ne=Math.abs(u-(y+J));if(ne>J+d)return!1;if(j<=I||ne<=J)return!0;let ge=j-I,Re=ne-J;return ge*ge+Re*Re<=d*d}}function ft(f,t,u,d,m){let y=a.create();return t?(a.scale(y,y,[1/m,1/m,1]),u||a.rotateZ(y,y,d.angle)):a.multiply(y,d.labelPlaneMatrix,f),y}function Rt(f,t,u,d,m){if(t){let y=a.clone(f);return a.scale(y,y,[m,m,1]),u||a.rotateZ(y,y,-d.angle),y}return d.glCoordMatrix}function Oe(f,t,u){let d;u?(d=[f.x,f.y,u(f.x,f.y),1],a.transformMat4(d,d,t)):(d=[f.x,f.y,0,1],Je(d,d,t));let m=d[3];return{point:new a.pointGeometry(d[0]/m,d[1]/m),signedDistanceFromCamera:m}}function qe(f,t){return .5+f/t*.5}function H(f,t){let u=f[0]/f[3],d=f[1]/f[3];return u>=-t[0]&&u<=t[0]&&d>=-t[1]&&d<=t[1]}function ae(f,t,u,d,m,y,C,O,I,j){let J=d?f.textSizeData:f.iconSizeData,ne=a.evaluateSizeForZoom(J,u.transform.zoom),ge=[256/u.width*2+1,256/u.height*2+1],Re=d?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Re.clear();let Pe=f.lineVertexArray,Me=d?f.text.placedSymbolArray:f.icon.placedSymbolArray,nt=u.transform.width/u.transform.height,ut=!1;for(let vt=0;vt<Me.length;vt++){let Be=Me.get(vt);if(Be.hidden||Be.writingMode===a.WritingMode.vertical&&!ut){ze(Be.numGlyphs,Re);continue}let St;if(ut=!1,j?(St=[Be.anchorX,Be.anchorY,j(Be.anchorX,Be.anchorY),1],a.transformMat4(St,St,t)):(St=[Be.anchorX,Be.anchorY,0,1],Je(St,St,t)),!H(St,ge)){ze(Be.numGlyphs,Re);continue}let xt=qe(u.transform.cameraToCenterDistance,St[3]),Dt=a.evaluateSizeForFeature(J,ne,Be),It=C?Dt/xt:Dt*xt,Nt=new a.pointGeometry(Be.anchorX,Be.anchorY),Ot=Oe(Nt,m,j).point,ir={},qt=ie(Be,It,!1,O,t,m,y,f.glyphOffsetArray,Pe,Re,Ot,Nt,ir,nt,I,j);ut=qt.useVertical,(qt.notEnoughRoom||ut||qt.needsFlipping&&ie(Be,It,!0,O,t,m,y,f.glyphOffsetArray,Pe,Re,Ot,Nt,ir,nt,I,j).notEnoughRoom)&&ze(Be.numGlyphs,Re)}d?f.text.dynamicLayoutVertexBuffer.updateData(Re):f.icon.dynamicLayoutVertexBuffer.updateData(Re)}function ve(f,t,u,d,m,y,C,O,I,j,J,ne,ge){let Re=O.glyphStartIndex+O.numGlyphs,Pe=O.lineStartIndex,Me=O.lineStartIndex+O.lineLength,nt=t.getoffsetX(O.glyphStartIndex),ut=t.getoffsetX(Re-1),vt=X(f*nt,u,d,m,y,C,O.segment,Pe,Me,I,j,J,ne,ge);if(!vt)return null;let Be=X(f*ut,u,d,m,y,C,O.segment,Pe,Me,I,j,J,ne,ge);return Be?{first:vt,last:Be}:null}function N(f,t,u,d){return f===a.WritingMode.horizontal&&Math.abs(u.y-t.y)>Math.abs(u.x-t.x)*d?{useVertical:!0}:(f===a.WritingMode.vertical?t.y<u.y:t.x>u.x)?{needsFlipping:!0}:null}function ie(f,t,u,d,m,y,C,O,I,j,J,ne,ge,Re,Pe,Me){let nt=t/24,ut=f.lineOffsetX*nt,vt=f.lineOffsetY*nt,Be;if(f.numGlyphs>1){let St=f.glyphStartIndex+f.numGlyphs,xt=f.lineStartIndex,Dt=f.lineStartIndex+f.lineLength,It=ve(nt,O,ut,vt,u,J,ne,f,I,y,ge,Pe,Me);if(!It)return{notEnoughRoom:!0};let Nt=Oe(It.first.point,C,Me).point,Ot=Oe(It.last.point,C,Me).point;if(d&&!u){let ir=N(f.writingMode,Nt,Ot,Re);if(ir)return ir}Be=[It.first];for(let ir=f.glyphStartIndex+1;ir<St-1;ir++)Be.push(X(nt*O.getoffsetX(ir),ut,vt,u,J,ne,f.segment,xt,Dt,I,y,ge,Pe,Me));Be.push(It.last)}else{if(d&&!u){let xt=Oe(ne,m,Me).point,Dt=f.lineStartIndex+f.segment+1,It=new a.pointGeometry(I.getx(Dt),I.gety(Dt)),Nt=Oe(It,m,Me),Ot=Nt.signedDistanceFromCamera>0?Nt.point:Ze(ne,It,xt,1,m,Me),ir=N(f.writingMode,xt,Ot,Re);if(ir)return ir}let St=X(nt*O.getoffsetX(f.glyphStartIndex),ut,vt,u,J,ne,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,I,y,ge,Pe,Me);if(!St)return{notEnoughRoom:!0};Be=[St]}for(let St of Be)a.addDynamicAttributes(j,St.point,St.angle);return{}}function Ze(f,t,u,d,m,y){let C=Oe(f.add(f.sub(t)._unit()),m,y).point,O=u.sub(C);return u.add(O._mult(d/O.mag()))}function X(f,t,u,d,m,y,C,O,I,j,J,ne,ge,Re){let Pe=d?f-t:f+t,Me=Pe>0?1:-1,nt=0;d&&(Me*=-1,nt=Math.PI),Me<0&&(nt+=Math.PI);let ut=Me>0?O+C:O+C+1,vt=m,Be=m,St=0,xt=0,Dt=Math.abs(Pe),It=[];for(;St+xt<=Dt;){if(ut+=Me,ut<O||ut>=I)return null;if(Be=vt,It.push(vt),vt=ne[ut],vt===void 0){let or=new a.pointGeometry(j.getx(ut),j.gety(ut)),_r=Oe(or,J,Re);if(_r.signedDistanceFromCamera>0)vt=ne[ut]=_r.point;else{let wr=ut-Me;vt=Ze(St===0?y:new a.pointGeometry(j.getx(wr),j.gety(wr)),or,Be,Dt-St+1,J,Re)}}St+=xt,xt=Be.dist(vt)}let Nt=(Dt-St)/xt,Ot=vt.sub(Be),ir=Ot.mult(Nt)._add(Be);ir._add(Ot._unit()._perp()._mult(u*Me));let qt=nt+Math.atan2(vt.y-Be.y,vt.x-Be.x);return It.push(ir),{point:ir,angle:ge?qt:0,path:It}}let Le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ze(f,t){for(let u=0;u<f;u++){let d=t.length;t.resize(d+4),t.float32.set(Le,3*d)}}function Je(f,t,u){let d=t[0],m=t[1];return f[0]=u[0]*d+u[4]*m+u[12],f[1]=u[1]*d+u[5]*m+u[13],f[3]=u[3]*d+u[7]*m+u[15],f}let ot=100;class gt{constructor(t,u=new De(t.width+200,t.height+200,25),d=new De(t.width+200,t.height+200,25)){this.transform=t,this.grid=u,this.ignoredGrid=d,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ot,this.screenBottomBoundary=t.height+ot,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,u,d,m,y,C){let O=this.projectAndGetPerspectiveRatio(m,t.anchorPointX,t.anchorPointY,C),I=d*O.perspectiveRatio,j=t.x1*I+O.point.x,J=t.y1*I+O.point.y,ne=t.x2*I+O.point.x,ge=t.y2*I+O.point.y;return!this.isInsideGrid(j,J,ne,ge)||u!=="always"&&this.grid.hitTest(j,J,ne,ge,u,y)||O.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[j,J,ne,ge],offscreen:this.isOffscreen(j,J,ne,ge)}}placeCollisionCircles(t,u,d,m,y,C,O,I,j,J,ne,ge,Re,Pe){let Me=[],nt=new a.pointGeometry(u.anchorX,u.anchorY),ut=Oe(nt,C,Pe),vt=qe(this.transform.cameraToCenterDistance,ut.signedDistanceFromCamera),Be=(J?y/vt:y*vt)/a.ONE_EM,St=Oe(nt,O,Pe).point,xt=ve(Be,m,u.lineOffsetX*Be,u.lineOffsetY*Be,!1,St,nt,u,d,O,{},!1,Pe),Dt=!1,It=!1,Nt=!0;if(xt){let Ot=.5*ge*vt+Re,ir=new a.pointGeometry(-100,-100),qt=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),or=new He,_r=xt.first,wr=xt.last,mr=[];for(let Ir=_r.path.length-1;Ir>=1;Ir--)mr.push(_r.path[Ir]);for(let Ir=1;Ir<wr.path.length;Ir++)mr.push(wr.path[Ir]);let Br=2.5*Ot;if(I){let Ir=mr.map(kr=>Oe(kr,I,Pe));mr=Ir.some(kr=>kr.signedDistanceFromCamera<=0)?[]:Ir.map(kr=>kr.point)}let Nr=[];if(mr.length>0){let Ir=mr[0].clone(),kr=mr[0].clone();for(let $r=1;$r<mr.length;$r++)Ir.x=Math.min(Ir.x,mr[$r].x),Ir.y=Math.min(Ir.y,mr[$r].y),kr.x=Math.max(kr.x,mr[$r].x),kr.y=Math.max(kr.y,mr[$r].y);Nr=Ir.x>=ir.x&&kr.x<=qt.x&&Ir.y>=ir.y&&kr.y<=qt.y?[mr]:kr.x<ir.x||Ir.x>qt.x||kr.y<ir.y||Ir.y>qt.y?[]:a.clipLine([mr],ir.x,ir.y,qt.x,qt.y)}for(let Ir of Nr){or.reset(Ir,.25*Ot);let kr=0;kr=or.length<=.5*Ot?1:Math.ceil(or.paddedLength/Br)+1;for(let $r=0;$r<kr;$r++){let bn=$r/Math.max(kr-1,1),_i=or.lerp(bn),ui=_i.x+ot,wi=_i.y+ot;Me.push(ui,wi,Ot,0);let Yi=ui-Ot,ii=wi-Ot,Fn=ui+Ot,ki=wi+Ot;if(Nt=Nt&&this.isOffscreen(Yi,ii,Fn,ki),It=It||this.isInsideGrid(Yi,ii,Fn,ki),t!=="always"&&this.grid.hitTestCircle(ui,wi,Ot,t,ne)&&(Dt=!0,!j))return{circles:[],offscreen:!1,collisionDetected:Dt}}}}return{circles:!j&&Dt||!It||vt<this.perspectiveRatioCutoff?[]:Me,offscreen:Nt,collisionDetected:Dt}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let u=[],d=1/0,m=1/0,y=-1/0,C=-1/0;for(let J of t){let ne=new a.pointGeometry(J.x+ot,J.y+ot);d=Math.min(d,ne.x),m=Math.min(m,ne.y),y=Math.max(y,ne.x),C=Math.max(C,ne.y),u.push(ne)}let O=this.grid.query(d,m,y,C).concat(this.ignoredGrid.query(d,m,y,C)),I={},j={};for(let J of O){let ne=J.key;if(I[ne.bucketInstanceId]===void 0&&(I[ne.bucketInstanceId]={}),I[ne.bucketInstanceId][ne.featureIndex])continue;let ge=[new a.pointGeometry(J.x1,J.y1),new a.pointGeometry(J.x2,J.y1),new a.pointGeometry(J.x2,J.y2),new a.pointGeometry(J.x1,J.y2)];a.polygonIntersectsPolygon(u,ge)&&(I[ne.bucketInstanceId][ne.featureIndex]=!0,j[ne.bucketInstanceId]===void 0&&(j[ne.bucketInstanceId]=[]),j[ne.bucketInstanceId].push(ne.featureIndex))}return j}insertCollisionBox(t,u,d,m,y,C){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:u},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,u,d,m,y,C){let O=d?this.ignoredGrid:this.grid,I={bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:u};for(let j=0;j<t.length;j+=4)O.insertCircle(I,t[j],t[j+1],t[j+2])}projectAndGetPerspectiveRatio(t,u,d,m){let y;return m?(y=[u,d,m(u,d),1],a.transformMat4(y,y,t)):(y=[u,d,0,1],Je(y,y,t)),{point:new a.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+ot,(-y[1]/y[3]+1)/2*this.transform.height+ot),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(t,u,d,m){return d<ot||t>=this.screenRightBoundary||m<ot||u>this.screenBottomBoundary}isInsideGrid(t,u,d,m){return d>=0&&t<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){let t=a.identity([]);return a.translate(t,t,[-100,-100,0]),t}}function yt(f,t,u){return t*(a.EXTENT/(f.tileSize*Math.pow(2,u-f.tileID.overscaledZ)))}class Lt{constructor(t,u,d,m){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?u:-u))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Vt{constructor(t,u,d,m,y){this.text=new Lt(t?t.text:null,u,d,y),this.icon=new Lt(t?t.icon:null,u,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zt{constructor(t,u,d){this.text=t,this.icon=u,this.skipFade=d}}class Se{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Xe{constructor(t,u,d,m,y){this.bucketInstanceId=t,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=y}}class at{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){let u=++this.maxGroupID;this.collisionGroups[t]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[t]}}function Et(f,t,u,d,m){let{horizontalAlign:y,verticalAlign:C}=a.getAnchorAlignment(f),O=-(y-.5)*t,I=-(C-.5)*u,j=a.evaluateVariableOffset(f,d);return new a.pointGeometry(O+j[0]*m,I+j[1]*m)}function pr(f,t,u,d,m,y){let{x1:C,x2:O,y1:I,y2:j,anchorPointX:J,anchorPointY:ne}=f,ge=new a.pointGeometry(t,u);return d&&ge._rotate(m?y:-y),{x1:C+ge.x,y1:I+ge.y,x2:O+ge.x,y2:j+ge.y,anchorPointX:J,anchorPointY:ne}}class pe{constructor(t,u,d,m,y){this.transform=t.clone(),this.terrain=u,this.collisionIndex=new gt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new at(m),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,u,d,m){let y=d.getBucket(u),C=d.latestFeatureIndex;if(!y||!C||u.id!==y.layerIds[0])return;let O=d.collisionBoxArray,I=y.layers[0].layout,j=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),J=d.tileSize/a.EXTENT,ne=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),ge=I.get("text-pitch-alignment")==="map",Re=I.get("text-rotation-alignment")==="map",Pe=yt(d,1,this.transform.zoom),Me=ft(ne,ge,Re,this.transform,Pe),nt=null;if(ge){let vt=Rt(ne,ge,Re,this.transform,Pe);nt=a.multiply([],this.transform.labelPlaneMatrix,vt)}this.retainedQueryData[y.bucketInstanceId]=new Xe(y.bucketInstanceId,C,y.sourceLayerIndex,y.index,d.tileID);let ut={bucket:y,layout:I,posMatrix:ne,textLabelPlaneMatrix:Me,labelToScreenMatrix:nt,scale:j,textPixelRatio:J,holdingForFade:d.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(let vt of y.sortKeyRanges){let{sortKey:Be,symbolInstanceStart:St,symbolInstanceEnd:xt}=vt;t.push({sortKey:Be,symbolInstanceStart:St,symbolInstanceEnd:xt,parameters:ut})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ut})}attemptAnchorPlacement(t,u,d,m,y,C,O,I,j,J,ne,ge,Re,Pe,Me,nt){let ut=[ge.textOffset0,ge.textOffset1],vt=Et(t,d,m,ut,y),Be=this.collisionIndex.placeCollisionBox(pr(u,vt.x,vt.y,C,O,this.transform.angle),ne,I,j,J.predicate,nt);if((!Me||this.collisionIndex.placeCollisionBox(pr(Me,vt.x,vt.y,C,O,this.transform.angle),ne,I,j,J.predicate,nt).box.length!==0)&&Be.box.length>0){let St;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(St=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:ut,width:d,height:m,anchor:t,textBoxScale:y,prevAnchor:St},this.markUsedJustification(Re,t,ge,Pe),Re.allowVerticalPlacement&&(this.markUsedOrientation(Re,Pe,ge),this.placedOrientations[ge.crossTileID]=Pe),{shift:vt,placedGlyphBoxes:Be}}}placeLayerBucketPart(t,u,d){let{bucket:m,layout:y,posMatrix:C,textLabelPlaneMatrix:O,labelToScreenMatrix:I,textPixelRatio:j,holdingForFade:J,collisionBoxArray:ne,partiallyEvaluatedTextSize:ge,collisionGroup:Re}=t.parameters,Pe=y.get("text-optional"),Me=y.get("icon-optional"),nt=a.getOverlapMode(y,"text-overlap","text-allow-overlap"),ut=nt==="always",vt=a.getOverlapMode(y,"icon-overlap","icon-allow-overlap"),Be=vt==="always",St=y.get("text-rotation-alignment")==="map",xt=y.get("text-pitch-alignment")==="map",Dt=y.get("icon-text-fit")!=="none",It=y.get("symbol-z-order")==="viewport-y",Nt=ut&&(Be||!m.hasIconData()||Me),Ot=Be&&(ut||!m.hasTextData()||Pe);!m.collisionArrays&&ne&&m.deserializeCollisionBoxes(ne);let ir=(qt,or)=>{if(u[qt.crossTileID])return;if(J)return void(this.placements[qt.crossTileID]=new zt(!1,!1,!1));let _r=!1,wr=!1,mr=!0,Br=null,Nr={box:null,offscreen:null},Ir={box:null,offscreen:null},kr=null,$r=null,bn=null,_i=0,ui=0,wi=0;or.textFeatureIndex?_i=or.textFeatureIndex:qt.useRuntimeCollisionCircles&&(_i=qt.featureIndex),or.verticalTextFeatureIndex&&(ui=or.verticalTextFeatureIndex);let Yi=this.retainedQueryData[m.bucketInstanceId].tileID,ii=this.terrain?(mn,Er)=>this.terrain.getElevation(Yi,mn,Er):null;for(let mn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){let Er=or[mn];Er&&(Er.elevation=ii?ii(Er.anchorPointX,Er.anchorPointY):0)}let Fn=or.textBox;if(Fn){let mn=Vr=>{let xn=a.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Vr&&this.prevPlacement){let _n=this.prevPlacement.placedOrientations[qt.crossTileID];_n&&(this.placedOrientations[qt.crossTileID]=_n,xn=_n,this.markUsedOrientation(m,xn,qt))}return xn},Er=(Vr,xn)=>{if(m.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&or.verticalTextBox){for(let _n of m.writingModes)if(_n===a.WritingMode.vertical?(Nr=xn(),Ir=Nr):Nr=Vr(),Nr&&Nr.box&&Nr.box.length)break}else Nr=Vr()};if(y.get("text-variable-anchor")){let Vr=y.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[qt.crossTileID]){let rn=this.prevPlacement.variableOffsets[qt.crossTileID];Vr.indexOf(rn.anchor)>0&&(Vr=Vr.filter(oi=>oi!==rn.anchor),Vr.unshift(rn.anchor))}let xn=(rn,oi,co)=>{let rl=rn.x2-rn.x1,jo=rn.y2-rn.y1,vu=qt.textBoxScale,nl=Dt&&vt==="never"?oi:null,Xi={box:[],offscreen:!1},ho=nt!=="never"?2*Vr.length:Vr.length;for(let fo=0;fo<ho;++fo){let Za=this.attemptAnchorPlacement(Vr[fo%Vr.length],rn,rl,jo,vu,St,xt,j,C,Re,fo>=Vr.length?nt:"never",qt,m,co,nl,ii);if(Za&&(Xi=Za.placedGlyphBoxes,Xi&&Xi.box&&Xi.box.length)){_r=!0,Br=Za.shift;break}}return Xi};Er(()=>xn(Fn,or.iconBox,a.WritingMode.horizontal),()=>{let rn=or.verticalTextBox;return m.allowVerticalPlacement&&!(Nr&&Nr.box&&Nr.box.length)&&qt.numVerticalGlyphVertices>0&&rn?xn(rn,or.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Nr&&(_r=Nr.box,mr=Nr.offscreen);let _n=mn(Nr&&Nr.box);if(!_r&&this.prevPlacement){let rn=this.prevPlacement.variableOffsets[qt.crossTileID];rn&&(this.variableOffsets[qt.crossTileID]=rn,this.markUsedJustification(m,rn.anchor,qt,_n))}}else{let Vr=(xn,_n)=>{let rn=this.collisionIndex.placeCollisionBox(xn,nt,j,C,Re.predicate,ii);return rn&&rn.box&&rn.box.length&&(this.markUsedOrientation(m,_n,qt),this.placedOrientations[qt.crossTileID]=_n),rn};Er(()=>Vr(Fn,a.WritingMode.horizontal),()=>{let xn=or.verticalTextBox;return m.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&xn?Vr(xn,a.WritingMode.vertical):{box:null,offscreen:null}}),mn(Nr&&Nr.box&&Nr.box.length)}}if(kr=Nr,_r=kr&&kr.box&&kr.box.length>0,mr=kr&&kr.offscreen,qt.useRuntimeCollisionCircles){let mn=m.text.placedSymbolArray.get(qt.centerJustifiedTextSymbolIndex),Er=a.evaluateSizeForFeature(m.textSizeData,ge,mn),Vr=y.get("text-padding");$r=this.collisionIndex.placeCollisionCircles(nt,mn,m.lineVertexArray,m.glyphOffsetArray,Er,C,O,I,d,xt,Re.predicate,qt.collisionCircleDiameter,Vr,ii),$r.circles.length&&$r.collisionDetected&&!d&&a.warnOnce("Collisions detected, but collision boxes are not shown"),_r=ut||$r.circles.length>0&&!$r.collisionDetected,mr=mr&&$r.offscreen}if(or.iconFeatureIndex&&(wi=or.iconFeatureIndex),or.iconBox){let mn=Er=>{let Vr=Dt&&Br?pr(Er,Br.x,Br.y,St,xt,this.transform.angle):Er;return this.collisionIndex.placeCollisionBox(Vr,vt,j,C,Re.predicate,ii)};Ir&&Ir.box&&Ir.box.length&&or.verticalIconBox?(bn=mn(or.verticalIconBox),wr=bn.box.length>0):(bn=mn(or.iconBox),wr=bn.box.length>0),mr=mr&&bn.offscreen}let ki=Pe||qt.numHorizontalGlyphVertices===0&&qt.numVerticalGlyphVertices===0,Ka=Me||qt.numIconVertices===0;if(ki||Ka?Ka?ki||(wr=wr&&_r):_r=wr&&_r:wr=_r=wr&&_r,_r&&kr&&kr.box&&this.collisionIndex.insertCollisionBox(kr.box,nt,y.get("text-ignore-placement"),m.bucketInstanceId,Ir&&Ir.box&&ui?ui:_i,Re.ID),wr&&bn&&this.collisionIndex.insertCollisionBox(bn.box,vt,y.get("icon-ignore-placement"),m.bucketInstanceId,wi,Re.ID),$r&&(_r&&this.collisionIndex.insertCollisionCircles($r.circles,nt,y.get("text-ignore-placement"),m.bucketInstanceId,_i,Re.ID),d)){let mn=m.bucketInstanceId,Er=this.collisionCircleArrays[mn];Er===void 0&&(Er=this.collisionCircleArrays[mn]=new Se);for(let Vr=0;Vr<$r.circles.length;Vr+=4)Er.circles.push($r.circles[Vr+0]),Er.circles.push($r.circles[Vr+1]),Er.circles.push($r.circles[Vr+2]),Er.circles.push($r.collisionDetected?1:0)}if(qt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[qt.crossTileID]=new zt(_r||Nt,wr||Ot,mr||m.justReloaded),u[qt.crossTileID]=!0};if(It){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let qt=m.getSortedSymbolIndexes(this.transform.angle);for(let or=qt.length-1;or>=0;--or){let _r=qt[or];ir(m.symbolInstances.get(_r),m.collisionArrays[_r])}}else for(let qt=t.symbolInstanceStart;qt<t.symbolInstanceEnd;qt++)ir(m.symbolInstances.get(qt),m.collisionArrays[qt]);if(d&&m.bucketInstanceId in this.collisionCircleArrays){let qt=this.collisionCircleArrays[m.bucketInstanceId];a.invert(qt.invProjMatrix,C),qt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(t,u,d,m){let y;y=m===a.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];let C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let O of C)O>=0&&(t.text.placedSymbolArray.get(O).crossTileID=y>=0&&O!==y?0:d.crossTileID)}markUsedOrientation(t,u,d){let m=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,y=u===a.WritingMode.vertical?u:0,C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let O of C)t.text.placedSymbolArray.get(O).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;let u=this.prevPlacement,d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;let m=u?u.symbolFadeChange(t):1,y=u?u.opacities:{},C=u?u.variableOffsets:{},O=u?u.placedOrientations:{};for(let I in this.placements){let j=this.placements[I],J=y[I];J?(this.opacities[I]=new Vt(J,m,j.text,j.icon),d=d||j.text!==J.text.placed||j.icon!==J.icon.placed):(this.opacities[I]=new Vt(null,m,j.text,j.icon,j.skipFade),d=d||j.text||j.icon)}for(let I in y){let j=y[I];if(!this.opacities[I]){let J=new Vt(j,m,!1,!1);J.isHidden()||(this.opacities[I]=J,d=d||j.text.placed||j.icon.placed)}}for(let I in C)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=C[I]);for(let I in O)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=O[I]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:t)}updateLayerOpacities(t,u){let d={};for(let m of u){let y=m.getBucket(t);y&&m.latestFeatureIndex&&t.id===y.layerIds[0]&&this.updateBucketOpacities(y,d,m.collisionBoxArray)}}updateBucketOpacities(t,u,d){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();let m=t.layers[0].layout,y=new Vt(null,0,!1,!1,!0),C=m.get("text-allow-overlap"),O=m.get("icon-allow-overlap"),I=m.get("text-variable-anchor"),j=m.get("text-rotation-alignment")==="map",J=m.get("text-pitch-alignment")==="map",ne=m.get("icon-text-fit")!=="none",ge=new Vt(null,0,C&&(O||!t.hasIconData()||m.get("icon-optional")),O&&(C||!t.hasTextData()||m.get("text-optional")),!0);!t.collisionArrays&&d&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(d);let Re=(Pe,Me,nt)=>{for(let ut=0;ut<Me/4;ut++)Pe.opacityVertexArray.emplaceBack(nt)};for(let Pe=0;Pe<t.symbolInstances.length;Pe++){let Me=t.symbolInstances.get(Pe),{numHorizontalGlyphVertices:nt,numVerticalGlyphVertices:ut,crossTileID:vt}=Me,Be=this.opacities[vt];u[vt]?Be=y:Be||(Be=ge,this.opacities[vt]=Be),u[vt]=!0;let St=Me.numIconVertices>0,xt=this.placedOrientations[Me.crossTileID],Dt=xt===a.WritingMode.vertical,It=xt===a.WritingMode.horizontal||xt===a.WritingMode.horizontalOnly;if(nt>0||ut>0){let Nt=ee(Be.text);Re(t.text,nt,Dt?ue:Nt),Re(t.text,ut,It?ue:Nt);let Ot=Be.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(or=>{or>=0&&(t.text.placedSymbolArray.get(or).hidden=Ot||Dt?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=Ot||It?1:0);let ir=this.variableOffsets[Me.crossTileID];ir&&this.markUsedJustification(t,ir.anchor,Me,xt);let qt=this.placedOrientations[Me.crossTileID];qt&&(this.markUsedJustification(t,"left",Me,qt),this.markUsedOrientation(t,qt,Me))}if(St){let Nt=ee(Be.icon),Ot=!(ne&&Me.verticalPlacedIconSymbolIndex&&Dt);Me.placedIconSymbolIndex>=0&&(Re(t.icon,Me.numIconVertices,Ot?Nt:ue),t.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=Be.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(Re(t.icon,Me.numVerticalIconVertices,Ot?ue:Nt),t.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=Be.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){let Nt=t.collisionArrays[Pe];if(Nt){let Ot=new a.pointGeometry(0,0);if(Nt.textBox||Nt.verticalTextBox){let qt=!0;if(I){let or=this.variableOffsets[vt];or?(Ot=Et(or.anchor,or.width,or.height,or.textOffset,or.textBoxScale),j&&Ot._rotate(J?this.transform.angle:-this.transform.angle)):qt=!1}Nt.textBox&&R(t.textCollisionBox.collisionVertexArray,Be.text.placed,!qt||Dt,Ot.x,Ot.y),Nt.verticalTextBox&&R(t.textCollisionBox.collisionVertexArray,Be.text.placed,!qt||It,Ot.x,Ot.y)}let ir=Boolean(!It&&Nt.verticalIconBox);Nt.iconBox&&R(t.iconCollisionBox.collisionVertexArray,Be.icon.placed,ir,ne?Ot.x:0,ne?Ot.y:0),Nt.verticalIconBox&&R(t.iconCollisionBox.collisionVertexArray,Be.icon.placed,!ir,ne?Ot.x:0,ne?Ot.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){let Pe=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=Pe.invProjMatrix,t.placementViewportMatrix=Pe.viewportMatrix,t.collisionCircleArray=Pe.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,u){let d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>t}setStale(){this.stale=!0}}function R(f,t,u,d,m){f.emplaceBack(t?1:0,u?1:0,d||0,m||0),f.emplaceBack(t?1:0,u?1:0,d||0,m||0),f.emplaceBack(t?1:0,u?1:0,d||0,m||0),f.emplaceBack(t?1:0,u?1:0,d||0,m||0)}let Z=Math.pow(2,25),he=Math.pow(2,24),xe=Math.pow(2,17),Fe=Math.pow(2,16),B=Math.pow(2,9),V=Math.pow(2,8),U=Math.pow(2,1);function ee(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;let t=f.placed?1:0,u=Math.floor(127*f.opacity);return u*Z+t*he+u*xe+t*Fe+u*B+t*V+u*U+t}let ue=0;class Te{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,u,d,m,y){let C=this._bucketParts;for(;this._currentTileIndex<t.length;)if(u.getBucketParts(C,m,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((O,I)=>O.sortKey-I.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class Ne{constructor(t,u,d,m,y,C,O,I){this.placement=new pe(t,u,C,O,I),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(t,u,d){let m=a.exported.now(),y=()=>{let C=a.exported.now()-m;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){let C=u[t[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=O)&&(!C.maxzoom||C.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Te(C)),this._inProgressLayer.continuePlacement(d[C.source],this.placement,this._showCollisionBoxes,C,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}let Pt=512/a.EXTENT/2;class At{constructor(t,u,d){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let m=0;m<u.length;m++){let y=u.get(m),C=y.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,t)})}}getScaledCoordinates(t,u){let d=Pt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*a.EXTENT+t.anchorX)*d),y:Math.floor((u.canonical.y*a.EXTENT+t.anchorY)*d)}}findMatches(t,u,d){let m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let y=0;y<t.length;y++){let C=t.get(y);if(C.crossTileID)continue;let O=this.indexedSymbolInstances[C.key];if(!O)continue;let I=this.getScaledCoordinates(C,u);for(let j of O)if(Math.abs(j.coord.x-I.x)<=m&&Math.abs(j.coord.y-I.y)<=m&&!d[j.crossTileID]){d[j.crossTileID]=!0,C.crossTileID=j.crossTileID;break}}}}class jt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $t{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){let u=Math.round((t-this.lng)/360);if(u!==0)for(let d in this.indexes){let m=this.indexes[d],y={};for(let C in m){let O=m[C];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+u),y[O.tileID.key]=O}this.indexes[d]=y}this.lng=t}addBucket(t,u,d){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let y=0;y<u.symbolInstances.length;y++)u.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});let m=this.usedCrossTileIDs[t.overscaledZ];for(let y in this.indexes){let C=this.indexes[y];if(Number(y)>t.overscaledZ)for(let O in C){let I=C[O];I.tileID.isChildOf(t)&&I.findMatches(u.symbolInstances,t,m)}else{let O=C[t.scaledTo(Number(y)).key];O&&O.findMatches(u.symbolInstances,t,m)}}for(let y=0;y<u.symbolInstances.length;y++){let C=u.symbolInstances.get(y);C.crossTileID||(C.crossTileID=d.generate(),m[C.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new At(t,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(t,u){for(let d in u.indexedSymbolInstances)for(let m of u.indexedSymbolInstances[d])delete this.usedCrossTileIDs[t][m.crossTileID]}removeStaleBuckets(t){let u=!1;for(let d in this.indexes){let m=this.indexes[d];for(let y in m)t[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[y]),delete m[y],u=!0)}return u}}class Zt{constructor(){this.layerIndexes={},this.crossTileIDs=new jt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,u,d){let m=this.layerIndexes[t.id];m===void 0&&(m=this.layerIndexes[t.id]=new $t);let y=!1,C={};m.handleWrapJump(d);for(let O of u){let I=O.getBucket(t);I&&t.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(O.tileID,I,this.crossTileIDs)&&(y=!0),C[I.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(y=!0),y}pruneUnusedLayers(t){let u={};t.forEach(d=>{u[d]=!0});for(let d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var dr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class lr extends a.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*Nu(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(let t in this._tiles){let u=this._tiles[t];u.textures.forEach(d=>d.destroy()),u.textures=[]}}update(t,u){this.sourceCache.update(t,u),this._renderableTilesKeys=[];for(let d of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),a.ortho(d.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[d.key]=new Ve(d,this.tileSize))}removeOutdated(t){let u={};this.renderHistory=this.renderHistory.filter((d,m)=>this.renderHistory.indexOf(d)===m).slice(0,this.renderHistorySize);for(let d of this._renderableTilesKeys)u[d]=!0;for(let d of this.renderHistory)u[d]=!0;for(let d in this._tiles)u[d]||(this._tiles[d].clearTextures(t),delete this._tiles[d])}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){let u={};for(let d of this._renderableTilesKeys){let m=this._tiles[d].tileID;if(m.canonical.equals(t.canonical)){let y=t.clone();y.posMatrix=new Float64Array(16),a.ortho(y.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[d]=y}else if(m.canonical.isChildOf(t.canonical)){let y=t.clone();y.posMatrix=new Float64Array(16);let C=m.canonical.z-t.canonical.z,O=m.canonical.x-(m.canonical.x>>C<<C),I=m.canonical.y-(m.canonical.y>>C<<C),j=a.EXTENT>>C;a.ortho(y.posMatrix,0,j,0,j,0,1),a.translate(y.posMatrix,y.posMatrix,[-O*j,-I*j,0]),u[d]=y}else if(t.canonical.isChildOf(m.canonical)){let y=t.clone();y.posMatrix=new Float64Array(16);let C=t.canonical.z-m.canonical.z,O=t.canonical.x-(t.canonical.x>>C<<C),I=t.canonical.y-(t.canonical.y>>C<<C),j=a.EXTENT>>C;a.ortho(y.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(y.posMatrix,y.posMatrix,[O*j,I*j,0]),a.scale(y.posMatrix,y.posMatrix,[1/Nu(2,C),1/Nu(2,C),0]),u[d]=y}}return u}getSourceTile(t,u){let d=this.sourceCache._source,m=t.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!y||!y.dem)&&u)for(;m>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(t.scaledTo(m--).key);return y}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=t)}}class yr{constructor(t,u,d){this.style=t,this.sourceCache=new lr(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.elevationOffset=typeof d.elevationOffset=="number"?d.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(t,u,d,m=a.EXTENT){if(!(u>=0&&u<m&&d>=0&&d<m))return this.elevationOffset;let y=0,C=this.getTerrainData(t);if(C.tile&&C.tile.dem){let O=a.transformMat4$1([],[u/m*a.EXTENT,d/m*a.EXTENT],C.u_terrain_matrix),I=[O[0]*C.tile.dem.dim,O[1]*C.tile.dem.dim],j=[Math.floor(I[0]),Math.floor(I[1])],J=C.tile.dem.get(j[0],j[1]),ne=C.tile.dem.get(j[0],j[1]+1),ge=C.tile.dem.get(j[0]+1,j[1]),Re=C.tile.dem.get(j[0]+1,j[1]+1);y=a.number(a.number(J,ne,I[0]-j[0]),a.number(ge,Re,I[0]-j[0]),I[1]-j[1])}return y}rememberForRerender(t,u){for(let d in this.sourceCache._tiles){let m=this.sourceCache._tiles[d];(m.tileID.equals(u)||m.tileID.isChildOf(u))&&(t===this.sourceCache.sourceCache.id&&(m.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][m.tileID.key]=!0)}}needsRerender(t,u){return this._rerender[t]&&this._rerender[t][u.key]}clearRerenderCache(){this._rerender={}}getElevation(t,u,d,m=a.EXTENT){return(this.getDEMElevation(t,u,d,m)+this.elevationOffset)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){let m=this.style.map.painter.context,y=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new D(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new D(m,new a.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}let u=this.sourceCache.getSourceTile(t,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){let m=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new D(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}let d=u&&u+u.tileID.key+t.key;if(d&&!this._demMatrixCache[d]){let m=this.sourceCache.sourceCache._source.maxzoom,y=t.canonical.z-u.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=m?y=t.canonical.z-m:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let C=t.canonical.x-(t.canonical.x>>y<<y),O=t.canonical.y-(t.canonical.y>>y<<y),I=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<y),1/(a.EXTENT<<y),0]);a.translate(I,I,[C*a.EXTENT,O*a.EXTENT,0]),this._demMatrixCache[t.key]={matrix:I,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){let t=this.style.map.painter;if(!this._rttFramebuffer){let u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(t){let u=this.style.map.painter,d=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new D(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new D(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,m,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let t=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;let u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,C=0;y<this._coordsTextureSize;y++)for(let O=0;O<this._coordsTextureSize;O++,C+=4)u[C+0]=255&O,u[C+1]=255&y,u[C+2]=O>>8<<4|y>>8,u[C+3]=0;let d=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new D(t,d,t.gl.RGBA,{premultiply:!1});return m.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(t){let u=new Uint8Array(4),d=this.style.map.painter,m=d.context,y=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(t.x,d.height/devicePixelRatio-t.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);let C=u[0]+(u[2]>>4<<8),O=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],j=I&&this.sourceCache.getTileByID(I);if(!j)return null;let J=this._coordsTextureSize,ne=(1<<j.tileID.canonical.z)*J;return new a.MercatorCoordinate((j.tileID.canonical.x*J+C)/ne,(j.tileID.canonical.y*J+O)/ne,this.getElevation(j.tileID,C,O,J))}getTerrainMesh(){if(this._mesh)return this._mesh;let t=this.style.map.painter.context,u=new a.PosArray,d=new a.TriangleIndexArray,m=this.meshSize,y=a.EXTENT/m,C=m*m;for(let O=0;O<=m;O++)for(let I=0;I<=m;I++)u.emplaceBack(I*y,O*y);for(let O=0;O<C;O+=m+1)for(let I=0;I<m;I++)d.emplaceBack(I+O,m+I+O+1,m+I+O+2),d.emplaceBack(I+O,m+I+O+2,I+O+1);return this._mesh={indexBuffer:t.createIndexBuffer(d),vertexBuffer:t.createVertexBuffer(u,dr.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,d.length)},this._mesh}getMinMaxElevation(t){let u=this.getTerrainData(t).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,d.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),d}}let xr=(f,t)=>a.emitValidationErrors(f,t&&t.filter(u=>u.identifier!=="source.canvas")),Tr=a.pick(Ct,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Zr=a.pick(Ct,["setCenter","setZoom","setBearing","setPitch"]),Ar=function(){let f={},t=a.spec.$version;for(let u in a.spec.$root){let d=a.spec.$root[u];if(d.required){let m=null;m=u==="version"?t:d.type==="array"?[]:{},m!=null&&(f[u]=m)}}return f}();class cn extends a.Evented{constructor(t,u={}){super(),this.map=t,this.dispatcher=new re(Ye(),this),this.imageManager=new $,this.imageManager.setEventedParent(this),this.glyphManager=new K(t._requestManager,u.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new Zt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());let d=this;this._rtlTextPluginCallback=cn.registerForPluginStateChange(m=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(y,C)=>{if(a.triggerPluginCompletionEvent(y),C&&C.every(O=>O))for(let O in d.sourceCaches)d.sourceCaches[O].reload()})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;let y=this.sourceCaches[m.sourceId];if(!y)return;let C=y.getSource();if(C&&C.vectorLayerIds)for(let O in this._layers){let I=this._layers[O];I.source===C.id&&this._validateLayer(I)}})}loadURL(t,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));let d=typeof u.validate!="boolean"||u.validate,m=this.map._requestManager.transformRequest(t,a.ResourceType.Style);this._request=a.getJSON(m,(y,C)=>{this._request=null,y?this.fire(new a.ErrorEvent(y)):C&&this._load(C,d)})}loadJSON(t,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(t,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ar,!1)}_load(t,u){if(u&&xr(this,a.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(let m in t.sources)this.addSource(m,t.sources[m],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);let d=_t(this.stylesheet.layers);this._order=d.map(m=>m.id),this._layers={},this._serializedLayers={};for(let m of d)m=a.createStyleLayer(m),m.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=m,this._serializedLayers[m.id]=m.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new L(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(u,d,m,y){let C,O,I,j=m>1?"@2x":"",J=a.getJSON(d.transformRequest(d.normalizeSpriteURL(u,j,".json"),a.ResourceType.SpriteJSON),(Re,Pe)=>{J=null,I||(I=Re,C=Pe,ge())}),ne=a.getImage(d.transformRequest(d.normalizeSpriteURL(u,j,".png"),a.ResourceType.SpriteImage),(Re,Pe)=>{ne=null,I||(I=Re,O=Pe,ge())});function ge(){if(I)y(I);else if(C&&O){let Re=a.exported.getImageData(O),Pe={};for(let Me in C){let{width:nt,height:ut,x:vt,y:Be,sdf:St,pixelRatio:xt,stretchX:Dt,stretchY:It,content:Nt}=C[Me],Ot=new a.RGBAImage({width:nt,height:ut});a.RGBAImage.copy(Re,Ot,{x:vt,y:Be},{x:0,y:0},{width:nt,height:ut}),Pe[Me]={data:Ot,pixelRatio:xt,sdf:St,stretchX:Dt,stretchY:It,content:Nt}}y(null,Pe)}}return{cancel(){J&&(J.cancel(),J=null),ne&&(ne.cancel(),ne=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),(u,d)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(d)for(let m in d)this.imageManager.addImage(m,d[m]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(t){let u=this.sourceCaches[t.source];if(!u)return;let d=t.sourceLayer;if(!d)return;let m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){let u=[];for(let d of t){let m=this._layers[d];m.type!=="custom"&&u.push(m.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(let t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(let t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;let u=this._changed;if(this._changed){let m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(let C in this._updatedSources){let O=this._updatedSources[C];if(O==="reload")this._reloadSource(C);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(C)}}this._updateTilesForChangedImages();for(let C in this._updatedPaintProps)this._layers[C].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}let d={};for(let m in this.sourceCaches){let y=this.sourceCaches[m];d[m]=y.used,y.used=!1}for(let m of this._order){let y=this._layers[m];y.recalculate(t,this._availableImages),!y.isHidden(t.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let m in d){let y=this.sourceCaches[m];d[m]!==y.used&&y.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(t),this.z=t.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){let t=Object.keys(this._changedImages);if(t.length){for(let u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(t){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){let u=this.sourceCaches[t.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);this.terrain=new yr(this,u,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=d=>{d.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=d=>{d.tile&&(d.sourceId===t.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(d.sourceId,d.tile.tileID)):d.source.type==="geojson"&&this.terrain.rememberForRerender(d.sourceId,d.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:t}))}setState(t){if(this._checkLoaded(),xr(this,a.validateStyle(t)))return!1;(t=a.clone$1(t)).layers=_t(t.layers);let u=function(m,y){if(!m)return[{command:Ct.setStyle,args:[y]}];let C=[];try{if(!T(m.version,y.version))return[{command:Ct.setStyle,args:[y]}];T(m.center,y.center)||C.push({command:Ct.setCenter,args:[y.center]}),T(m.zoom,y.zoom)||C.push({command:Ct.setZoom,args:[y.zoom]}),T(m.bearing,y.bearing)||C.push({command:Ct.setBearing,args:[y.bearing]}),T(m.pitch,y.pitch)||C.push({command:Ct.setPitch,args:[y.pitch]}),T(m.sprite,y.sprite)||C.push({command:Ct.setSprite,args:[y.sprite]}),T(m.glyphs,y.glyphs)||C.push({command:Ct.setGlyphs,args:[y.glyphs]}),T(m.transition,y.transition)||C.push({command:Ct.setTransition,args:[y.transition]}),T(m.light,y.light)||C.push({command:Ct.setLight,args:[y.light]});let O={},I=[];(function(J,ne,ge,Re){let Pe;for(Pe in ne=ne||{},J=J||{})Object.prototype.hasOwnProperty.call(J,Pe)&&(Object.prototype.hasOwnProperty.call(ne,Pe)||ct(Pe,ge,Re));for(Pe in ne)Object.prototype.hasOwnProperty.call(ne,Pe)&&(Object.prototype.hasOwnProperty.call(J,Pe)?T(J[Pe],ne[Pe])||(J[Pe].type==="geojson"&&ne[Pe].type==="geojson"&&we(J,ne,Pe)?ge.push({command:Ct.setGeoJSONSourceData,args:[Pe,ne[Pe].data]}):mt(Pe,ne,ge,Re)):kt(Pe,ne,ge))})(m.sources,y.sources,I,O);let j=[];m.layers&&m.layers.forEach(J=>{O[J.source]?C.push({command:Ct.removeLayer,args:[J.id]}):j.push(J)}),C=C.concat(I),function(J,ne,ge){ne=ne||[];let Re=(J=J||[]).map(We),Pe=ne.map(We),Me=J.reduce(Qe,{}),nt=ne.reduce(Qe,{}),ut=Re.slice(),vt=Object.create(null),Be,St,xt,Dt,It,Nt,Ot;for(Be=0,St=0;Be<Re.length;Be++)xt=Re[Be],Object.prototype.hasOwnProperty.call(nt,xt)?St++:(ge.push({command:Ct.removeLayer,args:[xt]}),ut.splice(ut.indexOf(xt,St),1));for(Be=0,St=0;Be<Pe.length;Be++)xt=Pe[Pe.length-1-Be],ut[ut.length-1-Be]!==xt&&(Object.prototype.hasOwnProperty.call(Me,xt)?(ge.push({command:Ct.removeLayer,args:[xt]}),ut.splice(ut.lastIndexOf(xt,ut.length-St),1)):St++,Nt=ut[ut.length-Be],ge.push({command:Ct.addLayer,args:[nt[xt],Nt]}),ut.splice(ut.length-Be,0,xt),vt[xt]=!0);for(Be=0;Be<Pe.length;Be++)if(xt=Pe[Be],Dt=Me[xt],It=nt[xt],!vt[xt]&&!T(Dt,It))if(T(Dt.source,It.source)&&T(Dt["source-layer"],It["source-layer"])&&T(Dt.type,It.type)){for(Ot in me(Dt.layout,It.layout,ge,xt,null,Ct.setLayoutProperty),me(Dt.paint,It.paint,ge,xt,null,Ct.setPaintProperty),T(Dt.filter,It.filter)||ge.push({command:Ct.setFilter,args:[xt,It.filter]}),T(Dt.minzoom,It.minzoom)&&T(Dt.maxzoom,It.maxzoom)||ge.push({command:Ct.setLayerZoomRange,args:[xt,It.minzoom,It.maxzoom]}),Dt)Object.prototype.hasOwnProperty.call(Dt,Ot)&&Ot!=="layout"&&Ot!=="paint"&&Ot!=="filter"&&Ot!=="metadata"&&Ot!=="minzoom"&&Ot!=="maxzoom"&&(Ot.indexOf("paint.")===0?me(Dt[Ot],It[Ot],ge,xt,Ot.slice(6),Ct.setPaintProperty):T(Dt[Ot],It[Ot])||ge.push({command:Ct.setLayerProperty,args:[xt,Ot,It[Ot]]}));for(Ot in It)Object.prototype.hasOwnProperty.call(It,Ot)&&!Object.prototype.hasOwnProperty.call(Dt,Ot)&&Ot!=="layout"&&Ot!=="paint"&&Ot!=="filter"&&Ot!=="metadata"&&Ot!=="minzoom"&&Ot!=="maxzoom"&&(Ot.indexOf("paint.")===0?me(Dt[Ot],It[Ot],ge,xt,Ot.slice(6),Ct.setPaintProperty):T(Dt[Ot],It[Ot])||ge.push({command:Ct.setLayerProperty,args:[xt,Ot,It[Ot]]}))}else ge.push({command:Ct.removeLayer,args:[xt]}),Nt=ut[ut.lastIndexOf(xt)+1],ge.push({command:Ct.addLayer,args:[It,Nt]})}(j,y.layers,C)}catch(O){console.warn("Unable to compute style diff:",O),C=[{command:Ct.setStyle,args:[y]}]}return C}(this.serialize(),t).filter(m=>!(m.command in Zr));if(u.length===0)return!1;let d=u.filter(m=>!(m.command in Tr));if(d.length>0)throw new Error(`Unimplemented: ${d.map(m=>m.command).join(", ")}.`);return u.forEach(m=>{m.command!=="setTransition"&&this[m.command].apply(this,m.args)}),this.stylesheet=t,!0}addImage(t,u){if(this.getImage(t))return this.fire(new a.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,u),this._afterImageUpdated(t)}updateImage(t,u){this.imageManager.updateImage(t,u)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,u,d={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${t}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);let m=this.sourceCaches[t]=new dt(t,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:m.serialize(),sourceId:t})),m.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===t)return this.fire(new a.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${d}" is using it.`)));let u=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,u){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);let d=this.sourceCaches[t].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,u,d={}){this._checkLoaded();let m=t.id;if(this.getLayer(m))return void this.fire(new a.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let y;if(t.type==="custom"){if(xr(this,a.validateCustomStyleLayer(t)))return;y=a.createStyleLayer(t)}else{if(typeof t.source=="object"&&(this.addSource(m,t.source),t=a.clone$1(t),t=a.extend(t,{source:m})),this._validate(a.validateStyle.layer,`layers.${m}`,t,{arrayIndex:-1},d))return;y=a.createStyleLayer(t),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}}),this._serializedLayers[y.id]=y.serialize()}let C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){let O=this._removedLayers[m];delete this._removedLayers[m],O.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(t,u){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===u)return;let d=this._order.indexOf(t);this._order.splice(d,1);let m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${u}".`))):(this._order.splice(m,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();let u=this._layers[t];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));u.setEventedParent(null);let d=this._order.indexOf(t);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=u,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],u.onRemove&&u.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,u,d){this._checkLoaded();let m=this.getLayer(t);m?m.minzoom===u&&m.maxzoom===d||(u!=null&&(m.minzoom=u),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,u,d={}){this._checkLoaded();let m=this.getLayer(t);if(m){if(!T(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(a.validateStyle.filter,`layers.${m.id}.filter`,u,null,d)||(m.filter=a.clone$1(u),this._updateLayer(m)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,u,d,m={}){this._checkLoaded();let y=this.getLayer(t);y?T(y.getLayoutProperty(u),d)||(y.setLayoutProperty(u,d,m),this._updateLayer(y)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,u){let d=this.getLayer(t);if(d)return d.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,u,d,m={}){this._checkLoaded();let y=this.getLayer(t);y?T(y.getPaintProperty(u),d)||(y.setPaintProperty(u,d,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,u){return this.getLayer(t).getPaintProperty(u)}setFeatureState(t,u){this._checkLoaded();let d=t.source,m=t.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));let C=y.getSource().type;C==="geojson"&&m?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(t.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,t.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,u){this._checkLoaded();let d=t.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));let y=m.getSource().type,C=y==="vector"?t.sourceLayer:void 0;y!=="vector"||C?u&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,t.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();let u=t.source,d=t.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||d?(t.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,t.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,t=>t.serialize()),layers:this._serializeLayers(this._order)},t=>t!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){let u=C=>this._layers[C].type==="fill-extrusion",d={},m=[];for(let C=this._order.length-1;C>=0;C--){let O=this._order[C];if(u(O)){d[O]=C;for(let I of t){let j=I[O];if(j)for(let J of j)m.push(J)}}}m.sort((C,O)=>O.intersectionZ-C.intersectionZ);let y=[];for(let C=this._order.length-1;C>=0;C--){let O=this._order[C];if(u(O))for(let I=m.length-1;I>=0;I--){let j=m[I].feature;if(d[j.layer.id]<C)break;y.push(j),m.pop()}else for(let I of t){let j=I[O];if(j)for(let J of j)y.push(J.feature)}}return y}queryRenderedFeatures(t,u,d){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);let m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(let C of u.layers){let O=this._layers[C];if(!O)return this.fire(new a.ErrorEvent(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];m[O.source]=!0}}let y=[];u.availableImages=this._availableImages;for(let C in this.sourceCaches)u.layers&&!m[C]||y.push($e(this.sourceCaches[C],this._layers,this._serializedLayers,t,u,d));return this.placement&&y.push(function(C,O,I,j,J,ne,ge){let Re={},Pe=ne.queryRenderedSymbols(j),Me=[];for(let nt of Object.keys(Pe).map(Number))Me.push(ge[nt]);Me.sort(Ke);for(let nt of Me){let ut=nt.featureIndex.lookupSymbolFeatures(Pe[nt.bucketInstanceId],O,nt.bucketIndex,nt.sourceLayerIndex,J.filter,J.layers,J.availableImages,C);for(let vt in ut){let Be=Re[vt]=Re[vt]||[],St=ut[vt];St.sort((xt,Dt)=>{let It=nt.featureSortOrder;if(It){let Nt=It.indexOf(xt.featureIndex);return It.indexOf(Dt.featureIndex)-Nt}return Dt.featureIndex-xt.featureIndex});for(let xt of St)Be.push(xt)}}for(let nt in Re)Re[nt].forEach(ut=>{let vt=ut.feature,Be=I[C[nt].source].getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=Be});return Re}(this._layers,this._serializedLayers,this.sourceCaches,t,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(t,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);let d=this.sourceCaches[t];return d?function(m,y){let C=m.getRenderableIds().map(j=>m.getTileByID(j)),O=[],I={};for(let j=0;j<C.length;j++){let J=C[j],ne=J.tileID.canonical.key;I[ne]||(I[ne]=!0,J.querySourceFeatures(O,y))}return O}(d,u):[]}addSourceType(t,u,d){return cn.getSourceType(t)?d(new Error(`A source type called "${t}" already exists.`)):(cn.setSourceType(t,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:u.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(t,u={}){this._checkLoaded();let d=this.light.getLight(),m=!1;for(let C in t)if(!T(t[C],d[C])){m=!0;break}if(!m)return;let y={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,u),this.light.updateTransitions(y)}_validate(t,u,d,m,y={}){return(!y||y.validate!==!1)&&xr(this,t.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:d,styleSpec:a.spec},m)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(let t in this._layers)this._layers[t].setEventedParent(null);for(let t in this.sourceCaches){let u=this.sourceCaches[t];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(let u in this.sourceCaches)this.sourceCaches[u].update(t,this.terrain)}_generateCollisionBoxes(){for(let t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,u,d,m,y=!1){let C=!1,O=!1,I={};for(let j of this._order){let J=this._layers[j];if(J.type!=="symbol")continue;if(!I[J.source]){let ge=this.sourceCaches[J.source];I[J.source]=ge.getRenderableIds(!0).map(Re=>ge.getTileByID(Re)).sort((Re,Pe)=>Pe.tileID.overscaledZ-Re.tileID.overscaledZ||(Re.tileID.isLessThan(Pe.tileID)?-1:1))}let ne=this.crossTileSymbolIndex.addLayer(J,I[J.source],t.center.lng);C=C||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ne(t,this.terrain,this._order,y,u,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),O=!0),C&&this.pauseablePlacement.placement.setStale()),O||C)for(let j of this._order){let J=this._layers[j];J.type==="symbol"&&this.placement.updateLayerOpacities(J,I[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(let t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();let m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(t,u,d){this.glyphManager.getGlyphs(u.stacks,d)}getResource(t,u,d){return a.makeRequest(u,d)}}cn.getSourceType=function(f){return ke[f]},cn.setSourceType=function(f,t){ke[f]=t},cn.registerForPluginStateChange=a.registerForPluginStateChange;var In="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";let Ai={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",In),terrainDepth:Lr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",In),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",In)};function Lr(f,t){let u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=t.match(/attribute ([\w]+) ([\w]+)/g),m=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=y?y.concat(m):m,O={};return{fragmentSource:f=f.replace(u,(I,j,J,ne,ge)=>(O[ge]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
varying ${J} ${ne} ${ge};
#else
uniform ${J} ${ne} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${J} ${ne} ${ge} = u_${ge};
#endif
`)),vertexSource:t=t.replace(u,(I,j,J,ne,ge)=>{let Re=ne==="float"?"vec2":"vec4",Pe=ge.match(/color/)?"color":Re;return O[ge]?j==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${J} ${Re} a_${ge};
varying ${J} ${ne} ${ge};
#else
uniform ${J} ${ne} u_${ge};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${J} ${ne} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${Pe}(a_${ge}, u_${ge}_t);
#else
    ${J} ${ne} ${ge} = u_${ge};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${J} ${Re} a_${ge};
#else
uniform ${J} ${ne} u_${ge};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${J} ${ne} ${ge} = a_${ge};
#else
    ${J} ${ne} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${J} ${ne} ${ge} = unpack_mix_${Pe}(a_${ge}, u_${ge}_t);
#else
    ${J} ${ne} ${ge} = u_${ge};
#endif
`}),staticAttributes:d,staticUniforms:C}}class Vi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,u,d,m,y,C,O,I,j){this.context=t;let J=this.boundPaintVertexBuffers.length!==m.length;for(let ne=0;!J&&ne<m.length;ne++)this.boundPaintVertexBuffers[ne]!==m[ne]&&(J=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===d&&!J&&this.boundIndexBuffer===y&&this.boundVertexOffset===C&&this.boundDynamicVertexBuffer===O&&this.boundDynamicVertexBuffer2===I&&this.boundDynamicVertexBuffer3===j?(t.bindVertexArrayOES.set(this.vao),O&&O.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind(),j&&j.bind()):this.freshBind(u,d,m,y,C,O,I,j)}freshBind(t,u,d,m,y,C,O,I){let j,J=t.numAttributes,ne=this.context,ge=ne.gl;if(ne.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ne.extVertexArrayObject.createVertexArrayOES(),ne.bindVertexArrayOES.set(this.vao),j=0,this.boundProgram=t,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=I;else{j=ne.currentNumAttributes||0;for(let Re=J;Re<j;Re++)ge.disableVertexAttribArray(Re)}u.enableAttributes(ge,t);for(let Re of d)Re.enableAttributes(ge,t);C&&C.enableAttributes(ge,t),O&&O.enableAttributes(ge,t),I&&I.enableAttributes(ge,t),u.bind(),u.setVertexAttribPointers(ge,t,y);for(let Re of d)Re.bind(),Re.setVertexAttribPointers(ge,t,y);C&&(C.bind(),C.setVertexAttribPointers(ge,t,y)),m&&m.bind(),O&&(O.bind(),O.setVertexAttribPointers(ge,t,y)),I&&(I.bind(),I.setVertexAttribPointers(ge,t,y)),ne.currentNumAttributes=J}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function io(f){let t=[];for(let u=0;u<f.length;u++){if(f[u]===null)continue;let d=f[u].split(" ");t.push(d.pop())}return t}class To{constructor(t,u,d,m,y,C,O){let I=t.gl;this.program=I.createProgram();let j=io(d.staticAttributes),J=m?m.getBinderAttributes():[],ne=j.concat(J),ge=Ai.prelude.staticUniforms?io(Ai.prelude.staticUniforms):[],Re=d.staticUniforms?io(d.staticUniforms):[],Pe=m?m.getBinderUniforms():[],Me=ge.concat(Re).concat(Pe),nt=[];for(let It of Me)nt.indexOf(It)<0&&nt.push(It);let ut=m?m.defines():[];C&&ut.push("#define OVERDRAW_INSPECTOR;"),O&&ut.push("#define TERRAIN3D;");let vt=ut.concat(Ai.prelude.fragmentSource,d.fragmentSource).join(`
`),Be=ut.concat(Ai.prelude.vertexSource,d.vertexSource).join(`
`),St=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(St,vt),I.compileShader(St),I.attachShader(this.program,St);let xt=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(xt,Be),I.compileShader(xt),I.attachShader(this.program,xt),this.attributes={};let Dt={};this.numAttributes=ne.length;for(let It=0;It<this.numAttributes;It++)ne[It]&&(I.bindAttribLocation(this.program,It,ne[It]),this.attributes[ne[It]]=It);I.linkProgram(this.program),I.deleteShader(xt),I.deleteShader(St);for(let It=0;It<nt.length;It++){let Nt=nt[It];if(Nt&&!Dt[Nt]){let Ot=I.getUniformLocation(this.program,Nt);Ot&&(Dt[Nt]=Ot)}}this.fixedUniforms=y(t,Dt),this.terrainUniforms=((It,Nt)=>({u_depth:new a.Uniform1i(It,Nt.u_depth),u_terrain:new a.Uniform1i(It,Nt.u_terrain),u_terrain_dim:new a.Uniform1f(It,Nt.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(It,Nt.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(It,Nt.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(It,Nt.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(It,Nt.u_terrain_exaggeration)}))(t,Dt),this.binderUniforms=m?m.getUniforms(t,Dt):[]}draw(t,u,d,m,y,C,O,I,j,J,ne,ge,Re,Pe,Me,nt,ut,vt){let Be=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(d),t.setStencilMode(m),t.setColorMode(y),t.setCullFace(C),I){t.activeTexture.set(Be.TEXTURE2),Be.bindTexture(Be.TEXTURE_2D,I.depthTexture),t.activeTexture.set(Be.TEXTURE3),Be.bindTexture(Be.TEXTURE_2D,I.texture);for(let xt in this.terrainUniforms)this.terrainUniforms[xt].set(I[xt])}for(let xt in this.fixedUniforms)this.fixedUniforms[xt].set(O[xt]);Me&&Me.setUniforms(t,this.binderUniforms,Re,{zoom:Pe});let St=0;switch(u){case Be.LINES:St=2;break;case Be.TRIANGLES:St=3;break;case Be.LINE_STRIP:St=1}for(let xt of ge.get()){let Dt=xt.vaos||(xt.vaos={});(Dt[j]||(Dt[j]=new Vi)).bind(t,this,J,Me?Me.getPaintVertexBuffers():[],ne,xt.vertexOffset,nt,ut,vt),Be.drawElements(u,xt.primitiveLength*St,Be.UNSIGNED_SHORT,xt.primitiveOffset*St*2)}}}function vi(f,t,u){let d=1/yt(u,1,t.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,t.transform.tileZoom)/m,C=y*(u.tileID.canonical.x+u.tileID.wrap*m),O=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[C>>16,O>>16],u_pixel_coord_lower:[65535&C,65535&O]}}let Bi=(f,t,u,d)=>{let m=t.style.light,y=m.properties.get("position"),C=[y.x,y.y,y.z],O=a.create$1();m.properties.get("anchor")==="viewport"&&a.fromRotation(O,-t.transform.angle),a.transformMat3(C,C,O);let I=m.properties.get("color");return{u_matrix:f,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+u,u_opacity:d}},Ni=(f,t,u,d,m,y,C)=>a.extend(Bi(f,t,u,d),vi(y,t,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),Ui=f=>({u_matrix:f}),oo=(f,t,u,d)=>a.extend(Ui(f),vi(u,t,d)),Eo=(f,t)=>({u_matrix:f,u_world:t}),Po=(f,t,u,d,m)=>a.extend(oo(f,t,u,d),{u_world:m}),Aa=(f,t,u,d)=>{let m=f.transform,y,C;if(d.paint.get("circle-pitch-alignment")==="map"){let O=yt(u,1,m.zoom);y=!0,C=[O,O]}else y=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(t.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:C}},ur=(f,t,u)=>{let d=yt(u,1,t.zoom),m=Math.pow(2,t.zoom-u.tileID.overscaledZ),y=u.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[t.pixelsToGLUnits[0]/(d*m),t.pixelsToGLUnits[1]/(d*m)],u_overscale_factor:y}},Sr=(f,t,u=1)=>({u_matrix:f,u_color:t,u_overlay:0,u_overlay_scale:u}),Or=f=>({u_matrix:f}),Kt=(f,t,u,d)=>({u_matrix:f,u_extrude_scale:yt(t,1,u),u_intensity:d});function pn(f,t){let u=Math.pow(2,t.canonical.z),d=t.canonical.y;return[new a.MercatorCoordinate(0,d/u).toLngLat().lat,new a.MercatorCoordinate(0,(d+1)/u).toLngLat().lat]}let Rr=(f,t,u,d)=>{let m=f.transform;return{u_matrix:Jo(f,t,u,d),u_ratio:1/yt(t,1,m.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Sn=(f,t,u,d,m)=>a.extend(Rr(f,t,u,m),{u_image:0,u_image_height:d}),vn=(f,t,u,d,m)=>{let y=f.transform,C=Yr(t,y);return{u_matrix:Jo(f,t,u,m),u_texsize:t.imageAtlasTexture.size,u_ratio:1/yt(t,1,y.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[C,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Wn=(f,t,u,d,m,y)=>{let C=f.lineAtlas,O=Yr(t,f.transform),I=u.layout.get("line-cap")==="round",j=C.getDash(d.from,I),J=C.getDash(d.to,I),ne=j.width*m.fromScale,ge=J.width*m.toScale;return a.extend(Rr(f,t,u,y),{u_patternscale_a:[O/ne,-j.height/2],u_patternscale_b:[O/ge,-J.height/2],u_sdfgamma:C.width/(256*Math.min(ne,ge)*f.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:J.y,u_mix:m.t})};function Yr(f,t){return 1/yt(f,1,t.tileZoom)}function Jo(f,t,u,d){return f.translatePosMatrix(d?d.posMatrix:t.tileID.posMatrix,t,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}let Vl=(f,t,u,d,m)=>{return{u_matrix:f,u_tl_parent:t,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Bl(m.paint.get("raster-hue-rotate"))};var y,C};function Bl(f){f*=Math.PI/180;let t=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*t-u+1)/3,(Math.sqrt(3)*t-u+1)/3]}let Ms=(f,t,u,d,m,y,C,O,I,j)=>{let J=m.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:J.width/J.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:C,u_coord_matrix:O,u_is_text:+I,u_pitch_with_map:+d,u_texsize:j,u_texture:0}},Ia=(f,t,u,d,m,y,C,O,I,j,J)=>{let ne=m.transform;return a.extend(Ms(f,t,u,d,m,y,C,O,I,j),{u_gamma_scale:d?Math.cos(ne._pitch)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+J})},Nl=(f,t,u,d,m,y,C,O,I,j)=>a.extend(Ia(f,t,u,d,m,y,C,O,!0,I,!0),{u_texsize_icon:j,u_texture_icon:1}),mh=(f,t,u)=>({u_matrix:f,u_opacity:t,u_color:u}),gh=(f,t,u,d,m,y)=>a.extend(function(C,O,I,j){let J=I.imageManager.getPattern(C.from.toString()),ne=I.imageManager.getPattern(C.to.toString()),{width:ge,height:Re}=I.imageManager.getPixelSize(),Pe=Math.pow(2,j.tileID.overscaledZ),Me=j.tileSize*Math.pow(2,I.transform.tileZoom)/Pe,nt=Me*(j.tileID.canonical.x+j.tileID.wrap*Pe),ut=Me*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[ge,Re],u_mix:O.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/yt(j,1,I.transform.tileZoom),u_pixel_coord_upper:[nt>>16,ut>>16],u_pixel_coord_lower:[65535&nt,65535&ut]}}(d,y,u,m),{u_matrix:f,u_opacity:t}),Ds={fillExtrusion:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_lightpos:new a.Uniform3f(f,t.u_lightpos),u_lightintensity:new a.Uniform1f(f,t.u_lightintensity),u_lightcolor:new a.Uniform3f(f,t.u_lightcolor),u_vertical_gradient:new a.Uniform1f(f,t.u_vertical_gradient),u_opacity:new a.Uniform1f(f,t.u_opacity)}),fillExtrusionPattern:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_lightpos:new a.Uniform3f(f,t.u_lightpos),u_lightintensity:new a.Uniform1f(f,t.u_lightintensity),u_lightcolor:new a.Uniform3f(f,t.u_lightcolor),u_vertical_gradient:new a.Uniform1f(f,t.u_vertical_gradient),u_height_factor:new a.Uniform1f(f,t.u_height_factor),u_image:new a.Uniform1i(f,t.u_image),u_texsize:new a.Uniform2f(f,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(f,t.u_scale),u_fade:new a.Uniform1f(f,t.u_fade),u_opacity:new a.Uniform1f(f,t.u_opacity)}),fill:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix)}),fillPattern:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_image:new a.Uniform1i(f,t.u_image),u_texsize:new a.Uniform2f(f,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(f,t.u_scale),u_fade:new a.Uniform1f(f,t.u_fade)}),fillOutline:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_world:new a.Uniform2f(f,t.u_world)}),fillOutlinePattern:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_world:new a.Uniform2f(f,t.u_world),u_image:new a.Uniform1i(f,t.u_image),u_texsize:new a.Uniform2f(f,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(f,t.u_scale),u_fade:new a.Uniform1f(f,t.u_fade)}),circle:(f,t)=>({u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(f,t.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(f,t.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(f,t.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(f,t.u_matrix)}),collisionBox:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(f,t.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(f,t.u_extrude_scale),u_overscale_factor:new a.Uniform1f(f,t.u_overscale_factor)}),collisionCircle:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_inv_matrix:new a.UniformMatrix4f(f,t.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(f,t.u_viewport_size)}),debug:(f,t)=>({u_color:new a.UniformColor(f,t.u_color),u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_overlay:new a.Uniform1i(f,t.u_overlay),u_overlay_scale:new a.Uniform1f(f,t.u_overlay_scale)}),clippingMask:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix)}),heatmap:(f,t)=>({u_extrude_scale:new a.Uniform1f(f,t.u_extrude_scale),u_intensity:new a.Uniform1f(f,t.u_intensity),u_matrix:new a.UniformMatrix4f(f,t.u_matrix)}),heatmapTexture:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_world:new a.Uniform2f(f,t.u_world),u_image:new a.Uniform1i(f,t.u_image),u_color_ramp:new a.Uniform1i(f,t.u_color_ramp),u_opacity:new a.Uniform1f(f,t.u_opacity)}),hillshade:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_image:new a.Uniform1i(f,t.u_image),u_latrange:new a.Uniform2f(f,t.u_latrange),u_light:new a.Uniform2f(f,t.u_light),u_shadow:new a.UniformColor(f,t.u_shadow),u_highlight:new a.UniformColor(f,t.u_highlight),u_accent:new a.UniformColor(f,t.u_accent)}),hillshadePrepare:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_image:new a.Uniform1i(f,t.u_image),u_dimension:new a.Uniform2f(f,t.u_dimension),u_zoom:new a.Uniform1f(f,t.u_zoom),u_unpack:new a.Uniform4f(f,t.u_unpack)}),line:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_ratio:new a.Uniform1f(f,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,t.u_units_to_pixels)}),lineGradient:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_ratio:new a.Uniform1f(f,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,t.u_units_to_pixels),u_image:new a.Uniform1i(f,t.u_image),u_image_height:new a.Uniform1f(f,t.u_image_height)}),linePattern:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_texsize:new a.Uniform2f(f,t.u_texsize),u_ratio:new a.Uniform1f(f,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_image:new a.Uniform1i(f,t.u_image),u_units_to_pixels:new a.Uniform2f(f,t.u_units_to_pixels),u_scale:new a.Uniform3f(f,t.u_scale),u_fade:new a.Uniform1f(f,t.u_fade)}),lineSDF:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_ratio:new a.Uniform1f(f,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,t.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(f,t.u_patternscale_a),u_patternscale_b:new a.Uniform2f(f,t.u_patternscale_b),u_sdfgamma:new a.Uniform1f(f,t.u_sdfgamma),u_image:new a.Uniform1i(f,t.u_image),u_tex_y_a:new a.Uniform1f(f,t.u_tex_y_a),u_tex_y_b:new a.Uniform1f(f,t.u_tex_y_b),u_mix:new a.Uniform1f(f,t.u_mix)}),raster:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_tl_parent:new a.Uniform2f(f,t.u_tl_parent),u_scale_parent:new a.Uniform1f(f,t.u_scale_parent),u_buffer_scale:new a.Uniform1f(f,t.u_buffer_scale),u_fade_t:new a.Uniform1f(f,t.u_fade_t),u_opacity:new a.Uniform1f(f,t.u_opacity),u_image0:new a.Uniform1i(f,t.u_image0),u_image1:new a.Uniform1i(f,t.u_image1),u_brightness_low:new a.Uniform1f(f,t.u_brightness_low),u_brightness_high:new a.Uniform1f(f,t.u_brightness_high),u_saturation_factor:new a.Uniform1f(f,t.u_saturation_factor),u_contrast_factor:new a.Uniform1f(f,t.u_contrast_factor),u_spin_weights:new a.Uniform3f(f,t.u_spin_weights)}),symbolIcon:(f,t)=>({u_is_size_zoom_constant:new a.Uniform1i(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,t.u_size_t),u_size:new a.Uniform1f(f,t.u_size),u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,t.u_pitch),u_rotate_symbol:new a.Uniform1i(f,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,t.u_fade_change),u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,t.u_coord_matrix),u_is_text:new a.Uniform1i(f,t.u_is_text),u_pitch_with_map:new a.Uniform1i(f,t.u_pitch_with_map),u_texsize:new a.Uniform2f(f,t.u_texsize),u_texture:new a.Uniform1i(f,t.u_texture)}),symbolSDF:(f,t)=>({u_is_size_zoom_constant:new a.Uniform1i(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,t.u_size_t),u_size:new a.Uniform1f(f,t.u_size),u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,t.u_pitch),u_rotate_symbol:new a.Uniform1i(f,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,t.u_fade_change),u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,t.u_coord_matrix),u_is_text:new a.Uniform1i(f,t.u_is_text),u_pitch_with_map:new a.Uniform1i(f,t.u_pitch_with_map),u_texsize:new a.Uniform2f(f,t.u_texsize),u_texture:new a.Uniform1i(f,t.u_texture),u_gamma_scale:new a.Uniform1f(f,t.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(f,t.u_is_halo)}),symbolTextAndIcon:(f,t)=>({u_is_size_zoom_constant:new a.Uniform1i(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,t.u_size_t),u_size:new a.Uniform1f(f,t.u_size),u_camera_to_center_distance:new a.Uniform1f(f,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,t.u_pitch),u_rotate_symbol:new a.Uniform1i(f,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,t.u_fade_change),u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,t.u_coord_matrix),u_is_text:new a.Uniform1i(f,t.u_is_text),u_pitch_with_map:new a.Uniform1i(f,t.u_pitch_with_map),u_texsize:new a.Uniform2f(f,t.u_texsize),u_texsize_icon:new a.Uniform2f(f,t.u_texsize_icon),u_texture:new a.Uniform1i(f,t.u_texture),u_texture_icon:new a.Uniform1i(f,t.u_texture_icon),u_gamma_scale:new a.Uniform1f(f,t.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(f,t.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(f,t.u_is_halo)}),background:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_opacity:new a.Uniform1f(f,t.u_opacity),u_color:new a.UniformColor(f,t.u_color)}),backgroundPattern:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_opacity:new a.Uniform1f(f,t.u_opacity),u_image:new a.Uniform1i(f,t.u_image),u_pattern_tl_a:new a.Uniform2f(f,t.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(f,t.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(f,t.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(f,t.u_pattern_br_b),u_texsize:new a.Uniform2f(f,t.u_texsize),u_mix:new a.Uniform1f(f,t.u_mix),u_pattern_size_a:new a.Uniform2f(f,t.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(f,t.u_pattern_size_b),u_scale_a:new a.Uniform1f(f,t.u_scale_a),u_scale_b:new a.Uniform1f(f,t.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(f,t.u_tile_units_to_pixels)}),terrain:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_texture:new a.Uniform1i(f,t.u_texture)}),terrainDepth:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix)}),terrainCoords:(f,t)=>({u_matrix:new a.UniformMatrix4f(f,t.u_matrix),u_texture:new a.Uniform1i(f,t.u_texture),u_terrain_coords_id:new a.Uniform1f(f,t.u_terrain_coords_id)})};class As{constructor(t,u,d){this.context=t;let m=t.gl;this.buffer=m.createBuffer(),this.dynamicDraw=Boolean(d),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){let u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Is={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zs{constructor(t,u,d,m){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=t;let y=t.gl;this.buffer=y.createBuffer(),t.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);let u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,u){for(let d=0;d<this.attributes.length;d++){let m=u.attributes[this.attributes[d].name];m!==void 0&&t.enableVertexAttribArray(m)}}setVertexAttribPointers(t,u,d){for(let m=0;m<this.attributes.length;m++){let y=this.attributes[m],C=u.attributes[y.name];C!==void 0&&t.vertexAttribPointer(C,y.components,t[Is[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jr{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ul extends jr{getDefault(){return a.Color.transparent}set(t){let u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class yh extends jr{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class qo extends jr{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Qo extends jr{getDefault(){return[!0,!0,!0,!0]}set(t){let u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class $l extends jr{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Hn extends jr{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ks extends jr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){let u=this.current;(t.func!==u.func||t.ref!==u.ref||t.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class za extends jr{getDefault(){let t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){let u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class ka extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;t?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ls extends jr{getDefault(){return[0,1]}set(t){let u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Rs extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;t?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=t,this.dirty=!1}}class La extends jr{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class js extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;t?u.enable(u.BLEND):u.disable(u.BLEND),this.current=t,this.dirty=!1}}class Fs extends jr{getDefault(){let t=this.gl;return[t.ONE,t.ZERO]}set(t){let u=this.current;(t[0]!==u[0]||t[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ra extends jr{getDefault(){return a.Color.transparent}set(t){let u=this.current;(t.r!==u.r||t.g!==u.g||t.b!==u.b||t.a!==u.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Wl extends jr{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Hl extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;t?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=t,this.dirty=!1}}class Oo extends jr{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class vh extends jr{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class bh extends jr{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class xh extends jr{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class _h extends jr{getDefault(){let t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){let u=this.current;(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class wh extends jr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Ch extends jr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Vs extends jr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.bindTexture(u.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ja extends jr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Bs extends jr{getDefault(){return null}set(t){let u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ns extends jr{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class Mo extends jr{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Gl extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Kl extends jr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Fa extends jr{constructor(t,u){super(t),this.context=t,this.parent=u}getDefault(){return null}}class ao extends Fa{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Zl extends Fa{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Do{constructor(t,u,d,m){this.context=t,this.width=u,this.height=d;let y=t.gl,C=this.framebuffer=y.createFramebuffer();if(this.colorAttachment=new ao(t,C),m&&(this.depthAttachment=new Zl(t,C)),y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let t=this.context.gl,u=this.colorAttachment.get();if(u&&t.deleteTexture(u),this.depthAttachment){let d=this.depthAttachment.get();d&&t.deleteRenderbuffer(d)}t.deleteFramebuffer(this.framebuffer)}}class qr{constructor(t,u,d){this.blendFunction=t,this.blendColor=u,this.mask=d}}qr.Replace=[1,0],qr.disabled=new qr(qr.Replace,a.Color.transparent,[!1,!1,!1,!1]),qr.unblended=new qr(qr.Replace,a.Color.transparent,[!0,!0,!0,!0]),qr.alphaBlended=new qr([1,771],a.Color.transparent,[!0,!0,!0,!0]);class Yl{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ul(this),this.clearDepth=new yh(this),this.clearStencil=new qo(this),this.colorMask=new Qo(this),this.depthMask=new $l(this),this.stencilMask=new Hn(this),this.stencilFunc=new ks(this),this.stencilOp=new za(this),this.stencilTest=new ka(this),this.depthRange=new Ls(this),this.depthTest=new Rs(this),this.depthFunc=new La(this),this.blend=new js(this),this.blendFunc=new Fs(this),this.blendColor=new Ra(this),this.blendEquation=new Wl(this),this.cullFace=new Hl(this),this.cullFaceSide=new Oo(this),this.frontFace=new vh(this),this.program=new bh(this),this.activeTexture=new xh(this),this.viewport=new _h(this),this.bindFramebuffer=new wh(this),this.bindRenderbuffer=new Ch(this),this.bindTexture=new Vs(this),this.bindVertexBuffer=new ja(this),this.bindElementBuffer=new Bs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ns(this),this.pixelStoreUnpack=new Mo(this),this.pixelStoreUnpackPremultiplyAlpha=new Gl(this),this.pixelStoreUnpackFlipY=new Kl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,u){return new As(this,t,u)}createVertexBuffer(t,u,d){return new zs(this,t,u,d)}createRenderbuffer(t,u,d){let m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,t,u,d),this.bindRenderbuffer.set(null),y}createFramebuffer(t,u,d){return new Do(this,t,u,d)}clear({color:t,depth:u}){let d=this.gl,m=0;t&&(m|=d.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(m|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d.clear(m)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){T(t.blendFunction,qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Mr{constructor(t,u,d){this.func=t,this.mask=u,this.range=d}}Mr.ReadOnly=!1,Mr.ReadWrite=!0,Mr.disabled=new Mr(519,Mr.ReadOnly,[0,1]);let Fr=7680;class Jr{constructor(t,u,d,m,y,C){this.test=t,this.ref=u,this.mask=d,this.fail=m,this.depthFail=y,this.pass=C}}Jr.disabled=new Jr({func:519,mask:0},0,0,Fr,Fr,Fr);class en{constructor(t,u,d){this.enable=t,this.mode=u,this.frontFace=d}}let ea;function Ao(f,t,u,d,m,y,C){let O=f.context,I=O.gl,j=f.useProgram("collisionBox"),J=[],ne=0,ge=0;for(let Be=0;Be<d.length;Be++){let St=d[Be],xt=t.getTile(St),Dt=xt.getBucket(u);if(!Dt)continue;let It=St.posMatrix;m[0]===0&&m[1]===0||(It=f.translatePosMatrix(St.posMatrix,xt,m,y));let Nt=C?Dt.textCollisionBox:Dt.iconCollisionBox,Ot=Dt.collisionCircleArray;if(Ot.length>0){let ir=a.create(),qt=It;a.mul(ir,Dt.placementInvProjMatrix,f.transform.glCoordMatrix),a.mul(ir,ir,Dt.placementViewportMatrix),J.push({circleArray:Ot,circleOffset:ge,transform:qt,invTransform:ir,coord:St}),ne+=Ot.length/4,ge=ne}Nt&&j.draw(O,I.LINES,Mr.disabled,Jr.disabled,f.colorModeForRenderPass(),en.disabled,ur(It,f.transform,xt),f.style.terrain&&f.style.terrain.getTerrainData(St),u.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,null,f.transform.zoom,null,null,Nt.collisionVertexBuffer)}if(!C||!J.length)return;let Re=f.useProgram("collisionCircle"),Pe=new a.CollisionCircleLayoutArray;Pe.resize(4*ne),Pe._trim();let Me=0;for(let Be of J)for(let St=0;St<Be.circleArray.length/4;St++){let xt=4*St,Dt=Be.circleArray[xt+0],It=Be.circleArray[xt+1],Nt=Be.circleArray[xt+2],Ot=Be.circleArray[xt+3];Pe.emplace(Me++,Dt,It,Nt,Ot,0),Pe.emplace(Me++,Dt,It,Nt,Ot,1),Pe.emplace(Me++,Dt,It,Nt,Ot,2),Pe.emplace(Me++,Dt,It,Nt,Ot,3)}(!ea||ea.length<2*ne)&&(ea=function(Be){let St=2*Be,xt=new a.QuadTriangleArray;xt.resize(St),xt._trim();for(let Dt=0;Dt<St;Dt++){let It=6*Dt;xt.uint16[It+0]=4*Dt+0,xt.uint16[It+1]=4*Dt+1,xt.uint16[It+2]=4*Dt+2,xt.uint16[It+3]=4*Dt+2,xt.uint16[It+4]=4*Dt+3,xt.uint16[It+5]=4*Dt+0}return xt}(ne));let nt=O.createIndexBuffer(ea,!0),ut=O.createVertexBuffer(Pe,a.collisionCircleLayout.members,!0);for(let Be of J){let St={u_matrix:Be.transform,u_inv_matrix:Be.invTransform,u_camera_to_center_distance:(vt=f.transform).cameraToCenterDistance,u_viewport_size:[vt.width,vt.height]};Re.draw(O,I.TRIANGLES,Mr.disabled,Jr.disabled,f.colorModeForRenderPass(),en.disabled,St,f.style.terrain&&f.style.terrain.getTerrainData(Be.coord),u.id,ut,nt,a.SegmentVector.simpleSegment(0,2*Be.circleOffset,Be.circleArray.length,Be.circleArray.length/2),null,f.transform.zoom,null,null,null)}var vt;ut.destroy(),nt.destroy()}en.disabled=new en(!1,1029,2305),en.backCCW=new en(!0,1029,2305);let Sh=a.identity(new Float32Array(16));function Th(f,t,u,d,m,y){let{horizontalAlign:C,verticalAlign:O}=a.getAnchorAlignment(f),I=-(C-.5)*t,j=-(O-.5)*u,J=a.evaluateVariableOffset(f,d);return new a.pointGeometry((I/m+J[0])*y,(j/m+J[1])*y)}function Xl(f,t,u,d,m,y,C,O,I,j,J){let ne=f.text.placedSymbolArray,ge=f.text.dynamicLayoutVertexArray,Re=f.icon.dynamicLayoutVertexArray,Pe={};ge.clear();for(let Me=0;Me<ne.length;Me++){let nt=ne.get(Me),ut=f.allowVerticalPlacement&&!nt.placedOrientation,vt=nt.hidden||!nt.crossTileID||ut?null:d[nt.crossTileID];if(vt){let Be=new a.pointGeometry(nt.anchorX,nt.anchorY),St=Oe(Be,u?C:y,J),xt=qe(m.cameraToCenterDistance,St.signedDistanceFromCamera),Dt=a.evaluateSizeForFeature(f.textSizeData,I,nt)*xt/a.ONE_EM;u&&(Dt*=f.tilePixelRatio/O);let{width:It,height:Nt,anchor:Ot,textOffset:ir,textBoxScale:qt}=vt,or=Th(Ot,It,Nt,ir,qt,Dt),_r=u?Oe(Be.add(or),y,J).point:St.point.add(t?or.rotate(-m.angle):or),wr=f.allowVerticalPlacement&&nt.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let mr=0;mr<nt.numGlyphs;mr++)a.addDynamicAttributes(ge,_r,wr);j&&nt.associatedIconIndex>=0&&(Pe[nt.associatedIconIndex]={shiftedAnchor:_r,angle:wr})}else ze(nt.numGlyphs,ge)}if(j){Re.clear();let Me=f.icon.placedSymbolArray;for(let nt=0;nt<Me.length;nt++){let ut=Me.get(nt);if(ut.hidden)ze(ut.numGlyphs,Re);else{let vt=Pe[nt];if(vt)for(let Be=0;Be<ut.numGlyphs;Be++)a.addDynamicAttributes(Re,vt.shiftedAnchor,vt.angle);else ze(ut.numGlyphs,Re)}}f.icon.dynamicLayoutVertexBuffer.updateData(Re)}f.text.dynamicLayoutVertexBuffer.updateData(ge)}function Eh(f,t,u){return u.iconsInText&&t?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Va(f,t,u,d,m,y,C,O,I,j,J,ne){let ge=f.context,Re=ge.gl,Pe=f.transform,Me=O==="map",nt=I==="map",ut=O!=="viewport"&&u.layout.get("symbol-placement")!=="point",vt=Me&&!nt&&!ut,Be=!u.layout.get("symbol-sort-key").isConstant(),St=!1,xt=f.depthModeForSublayer(0,Mr.ReadOnly),Dt=u.layout.get("text-variable-anchor"),It=[];for(let Nt of d){let Ot=t.getTile(Nt),ir=Ot.getBucket(u);if(!ir)continue;let qt=m?ir.text:ir.icon;if(!qt||!qt.segments.get().length)continue;let or=qt.programConfigurations.get(u.id),_r=m||ir.sdfIcons,wr=m?ir.textSizeData:ir.iconSizeData,mr=nt||Pe.pitch!==0,Br=f.useProgram(Eh(_r,m,ir),or),Nr=a.evaluateSizeForZoom(wr,Pe.zoom),Ir=f.style.terrain&&f.style.terrain.getTerrainData(Nt),kr,$r,bn,_i,ui=[0,0],wi=null;if(m){if($r=Ot.glyphAtlasTexture,bn=Re.LINEAR,kr=Ot.glyphAtlasTexture.size,ir.iconsInText){ui=Ot.imageAtlasTexture.size,wi=Ot.imageAtlasTexture;let oi=wr.kind==="composite"||wr.kind==="camera";_i=mr||f.options.rotating||f.options.zooming||oi?Re.LINEAR:Re.NEAREST}}else{let oi=u.layout.get("icon-size").constantOr(0)!==1||ir.iconsNeedLinear;$r=Ot.imageAtlasTexture,bn=_r||f.options.rotating||f.options.zooming||oi||mr?Re.LINEAR:Re.NEAREST,kr=Ot.imageAtlasTexture.size}let Yi=yt(Ot,1,f.transform.zoom),ii=ft(Nt.posMatrix,nt,Me,f.transform,Yi),Fn=Rt(Nt.posMatrix,nt,Me,f.transform,Yi),ki=Dt&&ir.hasTextData(),Ka=u.layout.get("icon-text-fit")!=="none"&&ki&&ir.hasIconData();if(ut){let oi=f.style.terrain?(rl,jo)=>f.style.terrain.getElevation(Nt,rl,jo):null,co=u.layout.get("text-rotation-alignment")==="map";ae(ir,Nt.posMatrix,f,m,ii,Fn,nt,j,co,oi)}let mn=f.translatePosMatrix(Nt.posMatrix,Ot,y,C),Er=ut||m&&Dt||Ka?Sh:ii,Vr=f.translatePosMatrix(Fn,Ot,y,C,!0),xn=_r&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,_n;_n=_r?ir.iconsInText?Nl(wr.kind,Nr,vt,nt,f,mn,Er,Vr,kr,ui):Ia(wr.kind,Nr,vt,nt,f,mn,Er,Vr,m,kr,!0):Ms(wr.kind,Nr,vt,nt,f,mn,Er,Vr,m,kr);let rn={program:Br,buffers:qt,uniformValues:_n,atlasTexture:$r,atlasTextureIcon:wi,atlasInterpolation:bn,atlasInterpolationIcon:_i,isSDF:_r,hasHalo:xn};if(Be&&ir.canOverlap){St=!0;let oi=qt.segments.get();for(let co of oi)It.push({segments:new a.SegmentVector([co]),sortKey:co.sortKey,state:rn,terrainData:Ir})}else It.push({segments:qt.segments,sortKey:0,state:rn,terrainData:Ir})}St&&It.sort((Nt,Ot)=>Nt.sortKey-Ot.sortKey);for(let Nt of It){let Ot=Nt.state;if(ge.activeTexture.set(Re.TEXTURE0),Ot.atlasTexture.bind(Ot.atlasInterpolation,Re.CLAMP_TO_EDGE),Ot.atlasTextureIcon&&(ge.activeTexture.set(Re.TEXTURE1),Ot.atlasTextureIcon&&Ot.atlasTextureIcon.bind(Ot.atlasInterpolationIcon,Re.CLAMP_TO_EDGE)),Ot.isSDF){let ir=Ot.uniformValues;Ot.hasHalo&&(ir.u_is_halo=1,ta(Ot.buffers,Nt.segments,u,f,Ot.program,xt,J,ne,ir,Nt.terrainData)),ir.u_is_halo=0}ta(Ot.buffers,Nt.segments,u,f,Ot.program,xt,J,ne,Ot.uniformValues,Nt.terrainData)}}function ta(f,t,u,d,m,y,C,O,I,j){let J=d.context;m.draw(J,J.gl.TRIANGLES,y,C,O,en.disabled,I,j,u.id,f.layoutVertexBuffer,f.indexBuffer,t,u.paint,d.transform.zoom,f.programConfigurations.get(u.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function ra(f,t,u,d,m,y,C){let O=f.context.gl,I=u.paint.get("fill-pattern"),j=I&&I.constantOr(1),J=u.getCrossfadeParameters(),ne,ge,Re,Pe,Me;C?(ge=j&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=O.LINES):(ge=j?"fillPattern":"fill",ne=O.TRIANGLES);for(let nt of d){let ut=t.getTile(nt);if(j&&!ut.patternsLoaded())continue;let vt=ut.getBucket(u);if(!vt)continue;let Be=vt.programConfigurations.get(u.id),St=f.useProgram(ge,Be),xt=f.style.terrain&&f.style.terrain.getTerrainData(nt);j&&(f.context.activeTexture.set(O.TEXTURE0),ut.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Be.updatePaintBuffers(J));let Dt=I.constantOr(null);if(Dt&&ut.imageAtlas){let Ot=ut.imageAtlas,ir=Ot.patternPositions[Dt.to.toString()],qt=Ot.patternPositions[Dt.from.toString()];ir&&qt&&Be.setConstantPatternPositions(ir,qt)}let It=xt?nt:null,Nt=f.translatePosMatrix(It?It.posMatrix:nt.posMatrix,ut,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){Pe=vt.indexBuffer2,Me=vt.segments2;let Ot=[O.drawingBufferWidth,O.drawingBufferHeight];Re=ge==="fillOutlinePattern"&&j?Po(Nt,f,J,ut,Ot):Eo(Nt,Ot)}else Pe=vt.indexBuffer,Me=vt.segments,Re=j?oo(Nt,f,J,ut):Ui(Nt);St.draw(f.context,ne,m,f.stencilModeForClipping(nt),y,en.disabled,Re,xt,u.id,vt.layoutVertexBuffer,Pe,Me,u.paint,f.transform.zoom,Be)}}function na(f,t,u,d,m,y,C){let O=f.context,I=O.gl,j=u.paint.get("fill-extrusion-pattern"),J=j.constantOr(1),ne=u.getCrossfadeParameters(),ge=u.paint.get("fill-extrusion-opacity");for(let Re of d){let Pe=t.getTile(Re),Me=Pe.getBucket(u);if(!Me)continue;let nt=f.style.terrain&&f.style.terrain.getTerrainData(Re),ut=Me.programConfigurations.get(u.id),vt=f.useProgram(J?"fillExtrusionPattern":"fillExtrusion",ut);J&&(f.context.activeTexture.set(I.TEXTURE0),Pe.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ut.updatePaintBuffers(ne));let Be=j.constantOr(null);if(Be&&Pe.imageAtlas){let It=Pe.imageAtlas,Nt=It.patternPositions[Be.to.toString()],Ot=It.patternPositions[Be.from.toString()];Nt&&Ot&&ut.setConstantPatternPositions(Nt,Ot)}let St=f.translatePosMatrix(Re.posMatrix,Pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),xt=u.paint.get("fill-extrusion-vertical-gradient"),Dt=J?Ni(St,f,xt,ge,Re,ne,Pe):Bi(St,f,xt,ge);vt.draw(O,O.gl.TRIANGLES,m,y,C,en.backCCW,Dt,nt,u.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,u.paint,f.transform.zoom,ut,f.style.terrain&&Me.centroidVertexBuffer)}}function Us(f,t,u,d,m,y,C){let O=f.context,I=O.gl,j=u.fbo;if(!j)return;let J=f.useProgram("hillshade"),ne=f.style.terrain&&f.style.terrain.getTerrainData(t);O.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,j.colorAttachment.get()),J.draw(O,I.TRIANGLES,m,y,C,en.disabled,((ge,Re,Pe,Me)=>{let nt=Pe.paint.get("hillshade-shadow-color"),ut=Pe.paint.get("hillshade-highlight-color"),vt=Pe.paint.get("hillshade-accent-color"),Be=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Be-=ge.transform.angle);let St=!ge.options.moving;return{u_matrix:Me?Me.posMatrix:ge.transform.calculatePosMatrix(Re.tileID.toUnwrapped(),St),u_image:0,u_latrange:pn(0,Re.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),Be],u_shadow:nt,u_highlight:ut,u_accent:vt}})(f,u,d,ne?t:null),ne,d.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function Jl(f,t,u,d,m,y){let C=f.context,O=C.gl,I=t.dem;if(I&&I.data){let j=I.dim,J=I.stride,ne=I.getPixels();if(C.activeTexture.set(O.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||f.getTileTexture(J),t.demTexture){let Re=t.demTexture;Re.update(ne,{premultiply:!1}),Re.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else t.demTexture=new D(C,ne,O.RGBA,{premultiply:!1}),t.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);C.activeTexture.set(O.TEXTURE0);let ge=t.fbo;if(!ge){let Re=new D(C,{width:j,height:j,data:null},O.RGBA);Re.bind(O.LINEAR,O.CLAMP_TO_EDGE),ge=t.fbo=C.createFramebuffer(j,j,!0),ge.colorAttachment.set(Re.texture)}C.bindFramebuffer.set(ge.framebuffer),C.viewport.set([0,0,j,j]),f.useProgram("hillshadePrepare").draw(C,O.TRIANGLES,d,m,y,en.disabled,((Re,Pe)=>{let Me=Pe.stride,nt=a.create();return a.ortho(nt,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(nt,nt,[0,-a.EXTENT,0]),{u_matrix:nt,u_image:1,u_dimension:[Me,Me],u_zoom:Re.overscaledZ,u_unpack:Pe.getUnpackVector()}})(t.tileID,I),null,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Ba(f,t,u,d,m,y){let C=d.paint.get("raster-fade-duration");if(!y&&C>0){let O=a.exported.now(),I=(O-f.timeAdded)/C,j=t?(O-t.timeAdded)/C:-1,J=u.getSource(),ne=m.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),ge=!t||Math.abs(t.tileID.overscaledZ-ne)>Math.abs(f.tileID.overscaledZ-ne),Re=ge&&f.refreshedUponExpiration?1:a.clamp(ge?I:1-j,0,1);return f.refreshedUponExpiration&&I>=1&&(f.refreshedUponExpiration=!1),t?{opacity:1,mix:1-Re}:{opacity:Re,mix:0}}return{opacity:1,mix:0}}let Na=new a.Color(1,0,0,1),li=new a.Color(0,1,0,1),ql=new a.Color(0,0,1,1),$s=new a.Color(1,0,1,1),Ql=new a.Color(0,1,1,1);function so(f,t,u,d){Io(f,0,t+u/2,f.transform.width,u,d)}function ia(f,t,u,d){Io(f,t-u/2,0,u,f.transform.height,d)}function Io(f,t,u,d,m,y){let C=f.context,O=C.gl;O.enable(O.SCISSOR_TEST),O.scissor(t*f.pixelRatio,u*f.pixelRatio,d*f.pixelRatio,m*f.pixelRatio),C.clear({color:y}),O.disable(O.SCISSOR_TEST)}function Ph(f,t,u){let d=f.context,m=d.gl,y=u.posMatrix,C=f.useProgram("debug"),O=Mr.disabled,I=Jr.disabled,j=f.colorModeForRenderPass(),J="$debug",ne=f.style.terrain&&f.style.terrain.getTerrainData(u);d.activeTexture.set(m.TEXTURE0),f.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE);let ge=t.getTileByID(u.key).latestRawTileData,Re=Math.floor((ge&&ge.byteLength||0)/1024),Pe=t.getTile(u).tileSize,Me=512/Math.min(Pe,512)*(u.overscaledZ/f.transform.zoom)*.5,nt=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(nt+=` => ${u.overscaledZ}`),function(ut,vt){ut.initDebugOverlayCanvas();let Be=ut.debugOverlayCanvas,St=ut.context.gl,xt=ut.debugOverlayCanvas.getContext("2d");xt.clearRect(0,0,Be.width,Be.height),xt.shadowColor="white",xt.shadowBlur=2,xt.lineWidth=1.5,xt.strokeStyle="white",xt.textBaseline="top",xt.font="bold 36px Open Sans, sans-serif",xt.fillText(vt,5,5),xt.strokeText(vt,5,5),ut.debugOverlayTexture.update(Be),ut.debugOverlayTexture.bind(St.LINEAR,St.CLAMP_TO_EDGE)}(f,`${nt} ${Re}kB`),C.draw(d,m.TRIANGLES,O,I,qr.alphaBlended,en.disabled,Sr(y,a.Color.transparent,Me),null,J,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),C.draw(d,m.LINE_STRIP,O,I,j,en.disabled,Sr(y,a.Color.red),ne,J,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function Ua(f,t,u){let d=f.context,m=d.gl,y=f.colorModeForRenderPass(),C=new Mr(m.LEQUAL,Mr.ReadWrite,f.depthRangeFor3D),O=f.useProgram("terrain"),I=t.getTerrainMesh(),j=t.getTerrainData(u.tileID);d.bindFramebuffer.set(null),d.viewport.set([0,0,f.width,f.height]),d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get());let J=f.transform.calculatePosMatrix(u.tileID.toUnwrapped());O.draw(d,m.TRIANGLES,C,Jr.disabled,y,en.backCCW,{u_matrix:J,u_texture:0},j,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}function eu(f,t,u,d){let m=f.context,y=u.tileSize*t.qualityFactor;u.textures[d]||(u.textures[d]=f.getTileTexture(y)||new D(m,{width:y,height:y,data:null},m.gl.RGBA),u.textures[d].bind(m.gl.LINEAR,m.gl.CLAMP_TO_EDGE),d===0&&t.sourceCache.renderHistory.unshift(u.tileID.key));let C=t.getRTTFramebuffer();C.colorAttachment.set(u.textures[d].texture),m.bindFramebuffer.set(C.framebuffer),m.viewport.set([0,0,y,y])}class tu{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){let t=this.painter.style,u=t.terrain;for(let d in t.sourceCaches){this._coordsDescendingInv[d]={};let m=t.sourceCaches[d].getVisibleCoordinates();for(let y of m){let C=u.sourceCache.getTerrainCoords(y);for(let O in C)this._coordsDescendingInv[d][O]||(this._coordsDescendingInv[d][O]=[]),this._coordsDescendingInv[d][O].push(C[O])}}for(let d of t._order){let m=t._layers[d],y=m.source;if(this._renderToTexture[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(let C in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][C]=this._coordsDescendingInv[y][C].map(O=>O.key).sort().join()}}return this._renderableTiles.forEach(d=>{for(let m in this._coordsDescendingInvStr){let y=this._coordsDescendingInvStr[m][d.tileID.key];y&&y!==d.textureCoords[m]&&d.clearTextures(this.painter),u.needsRerender(m,d.tileID)&&d.clearTextures(this.painter)}this._rerender[d.tileID.key]=!d.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(t){let u=t.type,d=this.painter,m=d.style._order,y=d.currentLayer,C=y+1===m.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(m[y]),!C))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&C){this._prevType=u;let O=this._stacks.length-1,I=this._stacks[O]||[];for(let j of this._renderableTiles){if(eu(d,d.style.terrain,j,O),this._rerender[j.tileID.key]){d.context.clear({color:a.Color.transparent});for(let J=0;J<I.length;J++){let ne=d.style._layers[I[J]],ge=ne.source?this._coordsDescendingInv[ne.source][j.tileID.key]:[j.tileID];d._renderTileClippingMasks(ne,ge),d.renderLayer(d,d.style.sourceCaches[ne.source],ne,ge),ne.source&&(j.textureCoords[ne.source]=this._coordsDescendingInvStr[ne.source][j.tileID.key])}}Ua(d,d.style.terrain,j)}if(u==="hillshade"){this._stacks.push([m[y]]);for(let j of this._renderableTiles){let J=this._coordsDescendingInv[t.source][j.tileID.key];eu(d,d.style.terrain,j,this._stacks.length-1),d.context.clear({color:a.Color.transparent}),d._renderTileClippingMasks(t,J),d.renderLayer(d,d.style.sourceCaches[t.source],t,J),Ua(d,d.style.terrain,j)}return!0}return this._renderToTexture[u]}return!1}}let oa={symbol:function(f,t,u,d,m){if(f.renderPass!=="translucent")return;let y=Jr.disabled,C=f.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(O,I,j,J,ne,ge,Re){let Pe=I.transform,Me=ne==="map",nt=ge==="map";for(let ut of O){let vt=J.getTile(ut),Be=vt.getBucket(j);if(!Be||!Be.text||!Be.text.segments.get().length)continue;let St=a.evaluateSizeForZoom(Be.textSizeData,Pe.zoom),xt=yt(vt,1,I.transform.zoom),Dt=ft(ut.posMatrix,nt,Me,I.transform,xt),It=j.layout.get("icon-text-fit")!=="none"&&Be.hasIconData();if(St){let Nt=Math.pow(2,Pe.zoom-vt.tileID.overscaledZ);Xl(Be,Me,nt,Re,Pe,Dt,ut.posMatrix,Nt,St,It,I.style.terrain?(Ot,ir)=>I.style.terrain.getElevation(ut,Ot,ir):null)}}}(d,f,u,t,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),m),u.paint.get("icon-opacity").constantOr(1)!==0&&Va(f,t,u,d,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),y,C),u.paint.get("text-opacity").constantOr(1)!==0&&Va(f,t,u,d,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),y,C),t.map.showCollisionBoxes&&(Ao(f,t,u,d,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Ao(f,t,u,d,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,t,u,d){if(f.renderPass!=="translucent")return;let m=u.paint.get("circle-opacity"),y=u.paint.get("circle-stroke-width"),C=u.paint.get("circle-stroke-opacity"),O=!u.layout.get("circle-sort-key").isConstant();if(m.constantOr(1)===0&&(y.constantOr(1)===0||C.constantOr(1)===0))return;let I=f.context,j=I.gl,J=f.depthModeForSublayer(0,Mr.ReadOnly),ne=Jr.disabled,ge=f.colorModeForRenderPass(),Re=[];for(let Pe=0;Pe<d.length;Pe++){let Me=d[Pe],nt=t.getTile(Me),ut=nt.getBucket(u);if(!ut)continue;let vt=ut.programConfigurations.get(u.id),Be=f.useProgram("circle",vt),St=ut.layoutVertexBuffer,xt=ut.indexBuffer,Dt=f.style.terrain&&f.style.terrain.getTerrainData(Me),It={programConfiguration:vt,program:Be,layoutVertexBuffer:St,indexBuffer:xt,uniformValues:Aa(f,Me,nt,u),terrainData:Dt};if(O){let Nt=ut.segments.get();for(let Ot of Nt)Re.push({segments:new a.SegmentVector([Ot]),sortKey:Ot.sortKey,state:It})}else Re.push({segments:ut.segments,sortKey:0,state:It})}O&&Re.sort((Pe,Me)=>Pe.sortKey-Me.sortKey);for(let Pe of Re){let{programConfiguration:Me,program:nt,layoutVertexBuffer:ut,indexBuffer:vt,uniformValues:Be,terrainData:St}=Pe.state;nt.draw(I,j.TRIANGLES,J,ne,ge,en.disabled,Be,St,u.id,ut,vt,Pe.segments,u.paint,f.transform.zoom,Me)}},heatmap:function(f,t,u,d){if(u.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){let m=f.context,y=m.gl,C=Jr.disabled,O=new qr([y.ONE,y.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(I,j,J){let ne=I.gl;I.activeTexture.set(ne.TEXTURE1),I.viewport.set([0,0,j.width/4,j.height/4]);let ge=J.heatmapFbo;if(ge)ne.bindTexture(ne.TEXTURE_2D,ge.colorAttachment.get()),I.bindFramebuffer.set(ge.framebuffer);else{let Re=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,Re),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),ge=J.heatmapFbo=I.createFramebuffer(j.width/4,j.height/4,!1),function(Pe,Me,nt,ut){let vt=Pe.gl;vt.texImage2D(vt.TEXTURE_2D,0,vt.RGBA,Me.width/4,Me.height/4,0,vt.RGBA,Pe.extRenderToTextureHalfFloat?Pe.extTextureHalfFloat.HALF_FLOAT_OES:vt.UNSIGNED_BYTE,null),ut.colorAttachment.set(nt)}(I,j,Re,ge)}})(m,f,u),m.clear({color:a.Color.transparent});for(let I=0;I<d.length;I++){let j=d[I];if(t.hasRenderableParent(j))continue;let J=t.getTile(j),ne=J.getBucket(u);if(!ne)continue;let ge=ne.programConfigurations.get(u.id),Re=f.useProgram("heatmap",ge),{zoom:Pe}=f.transform;Re.draw(m,y.TRIANGLES,Mr.disabled,C,O,en.disabled,Kt(j.posMatrix,J,Pe,u.paint.get("heatmap-intensity")),null,u.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,u.paint,f.transform.zoom,ge)}m.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(m,y){let C=m.context,O=C.gl,I=y.heatmapFbo;if(!I)return;C.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,I.colorAttachment.get()),C.activeTexture.set(O.TEXTURE1);let j=y.colorRampTexture;j||(j=y.colorRampTexture=new D(C,y.colorRamp,O.RGBA)),j.bind(O.LINEAR,O.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(C,O.TRIANGLES,Mr.disabled,Jr.disabled,m.colorModeForRenderPass(),en.disabled,((J,ne,ge,Re)=>{let Pe=a.create();a.ortho(Pe,0,J.width,J.height,0,0,1);let Me=J.context.gl;return{u_matrix:Pe,u_world:[Me.drawingBufferWidth,Me.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ne.paint.get("heatmap-opacity")}})(m,y),null,y.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments,y.paint,m.transform.zoom)}(f,u))},line:function(f,t,u,d){if(f.renderPass!=="translucent")return;let m=u.paint.get("line-opacity"),y=u.paint.get("line-width");if(m.constantOr(1)===0||y.constantOr(1)===0)return;let C=f.depthModeForSublayer(0,Mr.ReadOnly),O=f.colorModeForRenderPass(),I=u.paint.get("line-dasharray"),j=u.paint.get("line-pattern"),J=j.constantOr(1),ne=u.paint.get("line-gradient"),ge=u.getCrossfadeParameters(),Re=J?"linePattern":I?"lineSDF":ne?"lineGradient":"line",Pe=f.context,Me=Pe.gl,nt=!0;for(let ut of d){let vt=t.getTile(ut);if(J&&!vt.patternsLoaded())continue;let Be=vt.getBucket(u);if(!Be)continue;let St=Be.programConfigurations.get(u.id),xt=f.context.program.get(),Dt=f.useProgram(Re,St),It=nt||Dt.program!==xt,Nt=f.style.terrain&&f.style.terrain.getTerrainData(ut),Ot=j.constantOr(null);if(Ot&&vt.imageAtlas){let or=vt.imageAtlas,_r=or.patternPositions[Ot.to.toString()],wr=or.patternPositions[Ot.from.toString()];_r&&wr&&St.setConstantPatternPositions(_r,wr)}let ir=Nt?ut:null,qt=J?vn(f,vt,u,ge,ir):I?Wn(f,vt,u,I,ge,ir):ne?Sn(f,vt,u,Be.lineClipsArray.length,ir):Rr(f,vt,u,ir);if(J)Pe.activeTexture.set(Me.TEXTURE0),vt.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),St.updatePaintBuffers(ge);else if(I&&(It||f.lineAtlas.dirty))Pe.activeTexture.set(Me.TEXTURE0),f.lineAtlas.bind(Pe);else if(ne){let or=Be.gradients[u.id],_r=or.texture;if(u.gradientVersion!==or.version){let wr=256;if(u.stepInterpolant){let mr=t.getSource().maxzoom,Br=ut.canonical.z===mr?Math.ceil(1<<f.transform.maxZoom-ut.canonical.z):1;wr=a.clamp(a.nextPowerOfTwo(Be.maxLineLength/a.EXTENT*1024*Br),256,Pe.maxTextureSize)}or.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:wr,image:or.gradient||void 0,clips:Be.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new D(Pe,or.gradient,Me.RGBA),or.version=u.gradientVersion,_r=or.texture}Pe.activeTexture.set(Me.TEXTURE0),_r.bind(u.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}Dt.draw(Pe,Me.TRIANGLES,C,f.stencilModeForClipping(ut),O,en.disabled,qt,Nt,u.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,u.paint,f.transform.zoom,St,Be.layoutVertexBuffer2),nt=!1}},fill:function(f,t,u,d){let m=u.paint.get("fill-color"),y=u.paint.get("fill-opacity");if(y.constantOr(1)===0)return;let C=f.colorModeForRenderPass(),O=u.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!O.constantOr(1)&&m.constantOr(a.Color.transparent).a===1&&y.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){let j=f.depthModeForSublayer(1,f.renderPass==="opaque"?Mr.ReadWrite:Mr.ReadOnly);ra(f,t,u,d,j,C,!1)}if(f.renderPass==="translucent"&&u.paint.get("fill-antialias")){let j=f.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Mr.ReadOnly);ra(f,t,u,d,j,C,!0)}},"fill-extrusion":function(f,t,u,d){let m=u.paint.get("fill-extrusion-opacity");if(m!==0&&f.renderPass==="translucent"){let y=new Mr(f.context.gl.LEQUAL,Mr.ReadWrite,f.depthRangeFor3D);if(m!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))na(f,t,u,d,y,Jr.disabled,qr.disabled),na(f,t,u,d,y,f.stencilModeFor3D(),f.colorModeForRenderPass());else{let C=f.colorModeForRenderPass();na(f,t,u,d,y,Jr.disabled,C)}}},hillshade:function(f,t,u,d){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;let m=f.context,y=f.depthModeForSublayer(0,Mr.ReadOnly),C=f.colorModeForRenderPass(),[O,I]=f.renderPass==="translucent"?f.stencilConfigForOverlap(d):[{},d];for(let j of I){let J=t.getTile(j);J.needsHillshadePrepare!==void 0&&J.needsHillshadePrepare&&f.renderPass==="offscreen"?Jl(f,J,u,y,Jr.disabled,C):f.renderPass==="translucent"&&Us(f,j,J,u,y,O[j.overscaledZ],C)}m.viewport.set([0,0,f.width,f.height])},raster:function(f,t,u,d){if(f.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!d.length)return;let m=f.context,y=m.gl,C=t.getSource(),O=f.useProgram("raster"),I=f.colorModeForRenderPass(),[j,J]=C instanceof te?[{},d]:f.stencilConfigForOverlap(d),ne=J[J.length-1].overscaledZ,ge=!f.options.moving;for(let Re of J){let Pe=f.depthModeForSublayer(Re.overscaledZ-ne,u.paint.get("raster-opacity")===1?Mr.ReadWrite:Mr.ReadOnly,y.LESS),Me=t.getTile(Re);Me.registerFadeDuration(u.paint.get("raster-fade-duration"));let nt=t.findLoadedParent(Re,0),ut=Ba(Me,nt,t,u,f.transform,f.style.terrain),vt,Be,St=u.paint.get("raster-resampling")==="nearest"?y.NEAREST:y.LINEAR;m.activeTexture.set(y.TEXTURE0),Me.texture.bind(St,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(y.TEXTURE1),nt?(nt.texture.bind(St,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),vt=Math.pow(2,nt.tileID.overscaledZ-Me.tileID.overscaledZ),Be=[Me.tileID.canonical.x*vt%1,Me.tileID.canonical.y*vt%1]):Me.texture.bind(St,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST);let xt=f.style.terrain&&f.style.terrain.getTerrainData(Re),Dt=xt?Re:null,It=Dt?Dt.posMatrix:f.transform.calculatePosMatrix(Re.toUnwrapped(),ge),Nt=Vl(It,Be||[0,0],vt||1,ut,u);C instanceof te?O.draw(m,y.TRIANGLES,Pe,Jr.disabled,I,en.disabled,Nt,xt,u.id,C.boundsBuffer,f.quadTriangleIndexBuffer,C.boundsSegments):O.draw(m,y.TRIANGLES,Pe,j[Re.overscaledZ],I,en.disabled,Nt,xt,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,t,u,d){let m=u.paint.get("background-color"),y=u.paint.get("background-opacity");if(y===0)return;let C=f.context,O=C.gl,I=f.transform,j=I.tileSize,J=u.paint.get("background-pattern");if(f.isPatternMissing(J))return;let ne=!J&&m.a===1&&y===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==ne)return;let ge=Jr.disabled,Re=f.depthModeForSublayer(0,ne==="opaque"?Mr.ReadWrite:Mr.ReadOnly),Pe=f.colorModeForRenderPass(),Me=f.useProgram(J?"backgroundPattern":"background"),nt=d||I.coveringTiles({tileSize:j,terrain:f.style.terrain});J&&(C.activeTexture.set(O.TEXTURE0),f.imageManager.bind(f.context));let ut=u.getCrossfadeParameters();for(let vt of nt){let Be=d?vt.posMatrix:f.transform.calculatePosMatrix(vt.toUnwrapped()),St=J?gh(Be,y,f,J,{tileID:vt,tileSize:j},ut):mh(Be,y,m),xt=f.style.terrain&&f.style.terrain.getTerrainData(vt);Me.draw(C,O.TRIANGLES,Re,ge,Pe,en.disabled,St,xt,u.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,t,u){for(let d=0;d<u.length;d++)Ph(f,t,u[d])},custom:function(f,t,u){let d=f.context,m=u.implementation;if(f.renderPass==="offscreen"){let y=m.prerender;y&&(f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),y.call(m,d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),d.setStencilMode(Jr.disabled);let y=m.renderingMode==="3d"?new Mr(f.context.gl.LEQUAL,Mr.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Mr.ReadOnly);d.setDepthMode(y),m.render(d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState(),d.bindFramebuffer.set(null)}}};class Ws{constructor(t,u){this.context=new Yl(t),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=dt.maxUnderzooming+dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zt,this.gpuTimers={}}resize(t,u,d){if(this.width=t*d,this.height=u*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let t=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(u,dr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);let d=new a.PosArray;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=t.createVertexBuffer(d,dr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);let m=new a.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(a.EXTENT,0,a.EXTENT,0),m.emplaceBack(0,a.EXTENT,0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(m,_e.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);let y=new a.PosArray;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(y,dr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);let C=new a.LineStripIndexArray;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(C);let O=new a.TriangleIndexArray;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(O),this.emptyTexture=new D(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);let I=this.context.gl;this.stencilClearMode=new Jr({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){let t=this.context,u=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.create();a.ortho(d,0,this.width,this.height,0,0,1),a.scale(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,u.TRIANGLES,Mr.disabled,this.stencilClearMode,qr.disabled,en.disabled,Or(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,u){if(this.currentStencilSource===t.source||!t.isTileClipped()||!u||!u.length)return;this.currentStencilSource=t.source;let d=this.context,m=d.gl;this.nextStencilID+u.length>256&&this.clearStencil(),d.setColorMode(qr.disabled),d.setDepthMode(Mr.disabled);let y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let C of u){let O=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,I=this.style.terrain&&this.style.terrain.getTerrainData(C);y.draw(d,m.TRIANGLES,Mr.disabled,new Jr({func:m.ALWAYS,mask:0},O,255,m.KEEP,m.KEEP,m.REPLACE),qr.disabled,en.disabled,Or(C.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let t=this.nextStencilID++,u=this.context.gl;return new Jr({func:u.NOTEQUAL,mask:255},t,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(t){let u=this.context.gl;return new Jr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(t){let u=this.context.gl,d=t.sort((C,O)=>O.overscaledZ-C.overscaledZ),m=d[d.length-1].overscaledZ,y=d[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let C={};for(let O=0;O<y;O++)C[O+m]=new Jr({func:u.GEQUAL,mask:255},O+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=y,[C,d]}return[{[m]:Jr.disabled},d]}colorModeForRenderPass(){let t=this.context.gl;return this._showOverdrawInspector?new qr([t.CONSTANT_COLOR,t.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qr.unblended:qr.alphaBlended}depthModeForSublayer(t,u,d){if(!this.opaquePassEnabledForLayer())return Mr.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Mr(d||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,u){this.style=t,this.options=u,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();let d=this.style._order,m=this.style.sourceCaches,y=this.style.terrain&&new tu(this);for(let j in m){let J=m[j];J.used&&J.prepare(this.context)}let C={},O={},I={};for(let j in m){let J=m[j];C[j]=J.getVisibleCoordinates(),O[j]=C[j].slice().reverse(),I[j]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<d.length;j++)if(this.style._layers[d[j]].is3D()){this.opaquePassCutoff=j;break}if(y){this.opaquePassCutoff=0;let j=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||j.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(J,ne){let ge=J.context,Re=ge.gl,Pe=qr.unblended,Me=new Mr(Re.LEQUAL,Mr.ReadWrite,[0,1]),nt=ne.getTerrainMesh(),ut=ne.sourceCache.getRenderableTiles(),vt=J.useProgram("terrainDepth");ge.bindFramebuffer.set(ne.getFramebuffer("depth").framebuffer),ge.viewport.set([0,0,J.width/devicePixelRatio,J.height/devicePixelRatio]),ge.clear({color:a.Color.transparent,depth:1});for(let Be of ut){let St=ne.getTerrainData(Be.tileID),xt=J.transform.calculatePosMatrix(Be.tileID.toUnwrapped());vt.draw(ge,Re.TRIANGLES,Me,Jr.disabled,Pe,en.backCCW,{u_matrix:xt},St,"terrain",nt.vertexBuffer,nt.indexBuffer,nt.segments)}ge.bindFramebuffer.set(null),ge.viewport.set([0,0,J.width,J.height])}(this,this.style.terrain),function(J,ne){let ge=J.context,Re=ge.gl,Pe=qr.unblended,Me=new Mr(Re.LEQUAL,Mr.ReadWrite,[0,1]),nt=ne.getTerrainMesh(),ut=ne.getCoordsTexture(),vt=ne.sourceCache.getRenderableTiles(),Be=J.useProgram("terrainCoords");ge.bindFramebuffer.set(ne.getFramebuffer("coords").framebuffer),ge.viewport.set([0,0,J.width/devicePixelRatio,J.height/devicePixelRatio]),ge.clear({color:a.Color.transparent,depth:1}),ne.coordsIndex=[];for(let St of vt){let xt=ne.getTerrainData(St.tileID);ge.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,ut.texture);let Dt=J.transform.calculatePosMatrix(St.tileID.toUnwrapped());Be.draw(ge,Re.TRIANGLES,Me,Jr.disabled,Pe,en.backCCW,{u_matrix:Dt,u_terrain_coords_id:(255-ne.coordsIndex.length)/255,u_texture:0},xt,"terrain",nt.vertexBuffer,nt.indexBuffer,nt.segments),ne.coordsIndex.push(St.tileID.key)}ge.bindFramebuffer.set(null),ge.viewport.set([0,0,J.width,J.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(let j of d){let J=this.style._layers[j];if(!J.hasOffscreenPass()||J.isHidden(this.transform.zoom))continue;let ne=O[J.source];(J.type==="custom"||ne.length)&&this.renderLayer(this,m[J.source],J,ne)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!y)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){let j=this.style._layers[d[this.currentLayer]],J=m[j.source],ne=C[j.source];this._renderTileClippingMasks(j,ne),this.renderLayer(this,J,j,ne)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){let j=this.style._layers[d[this.currentLayer]],J=m[j.source];if(y&&y.renderLayer(j))continue;let ne=(j.type==="symbol"?I:O)[j.source];this._renderTileClippingMasks(j,C[j.source]),this.renderLayer(this,J,j,ne)}if(this.options.showTileBoundaries){let j,J;Object.values(this.style._layers).forEach(ne=>{ne.source&&!ne.isHidden(this.transform.zoom)&&(ne.source!==(J&&J.id)&&(J=this.style.sourceCaches[ne.source]),(!j||j.getSource().maxzoom<J.getSource().maxzoom)&&(j=J))}),j&&oa.debug(this,j,j.getVisibleCoordinates())}this.options.showPadding&&function(j){let J=j.transform.padding;so(j,j.transform.height-(J.top||0),3,Na),so(j,J.bottom||0,3,li),ia(j,J.left||0,3,ql),ia(j,j.transform.width-(J.right||0),3,$s);let ne=j.transform.centerPoint;(function(ge,Re,Pe,Me){Io(ge,Re-1,Pe-10,2,20,Me),Io(ge,Re-10,Pe-1,20,2,Me)})(j,ne.x,j.transform.height-ne.y,Ql)}(this),this.context.setDefault()}renderLayer(t,u,d,m){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(m||[]).length)&&(this.id=d.id,this.gpuTimingStart(d),oa[d.type](t,u,d,m,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;let u=this.context.extTimerQuery,d=this.gpuTimers[t.id];d||(d=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),d.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;let t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){let t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){let u={};for(let d in t){let m=t[d],y=this.context.extTimerQuery,C=y.getQueryObjectEXT(m.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(m.query),u[d]=C}return u}translatePosMatrix(t,u,d,m,y){if(!d[0]&&!d[1])return t;let C=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){let j=Math.sin(C),J=Math.cos(C);d=[d[0]*J-d[1]*j,d[0]*j+d[1]*J]}let O=[y?d[0]:yt(u,d[0],this.transform.zoom),y?d[1]:yt(u,d[1],this.transform.zoom),0],I=new Float32Array(16);return a.translate(I,t,O),I}saveTileTexture(t){let u=this._tileTextures[t.size[0]];u?u.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){let u=this._tileTextures[t];return u&&u.length>0?u.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;let u=this.imageManager.getPattern(t.from.toString()),d=this.imageManager.getPattern(t.to.toString());return!u||!d}useProgram(t,u){this.cache=this.cache||{};let d=t+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new To(this.context,t,Ai[t],u,Ds[t],this._showOverdrawInspector,this.style.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new D(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class $a{constructor(t,u){this.points=t,this.planes=u}static fromInvProjectionMatrix(t,u,d){let m=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let I=1/(O=a.transformMat4([],O,t))[3]/u*m;return a.mul$1(O,O,[I,I,1/O[3],I])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let I=a.sub([],y[O[0]],y[O[1]]),j=a.sub([],y[O[2]],y[O[1]]),J=a.normalize([],a.cross([],I,j)),ne=-a.dot(J,y[O[1]]);return J.concat(ne)});return new $a(y,C)}}class aa{constructor(t,u){this.min=t,this.max=u,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(t){let u=[t%2==0,t<2],d=a.clone$2(this.min),m=a.clone$2(this.max);for(let y=0;y<u.length;y++)d[y]=u[y]?this.min[y]:this.center[y],m[y]=u[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new aa(d,m)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){let u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],d=!0;for(let m=0;m<t.planes.length;m++){let y=t.planes[m],C=0;for(let O=0;O<u.length;O++)a.dot$1(y,u[O])>=0&&C++;if(C===0)return 0;C!==u.length&&(d=!1)}if(d)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let O=0;O<t.points.length;O++){let I=t.points[O][m]-this.min[m];y=Math.min(y,I),C=Math.max(C,I)}if(C<0||y>this.max[m]-this.min[m])return 0}return 1}}class zo{constructor(t=0,u=0,d=0,m=0){if(isNaN(t)||t<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=u,this.left=d,this.right=m}interpolate(t,u,d){return u.top!=null&&t.top!=null&&(this.top=a.number(t.top,u.top,d)),u.bottom!=null&&t.bottom!=null&&(this.bottom=a.number(t.bottom,u.bottom,d)),u.left!=null&&t.left!=null&&(this.left=a.number(t.left,u.left,d)),u.right!=null&&t.right!=null&&(this.right=a.number(t.right,u.right,d)),this}getCenter(t,u){let d=a.clamp((this.left+t-this.right)/2,0,t),m=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.pointGeometry(d,m)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new zo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class sa{constructor(t,u,d,m,y){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=y===void 0||!!y,this._minZoom=t||0,this._maxZoom=u||22,this._minPitch=d==null?0:d,this._maxPitch=m==null?60:m,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new zo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){let t=new sa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){let u=-a.wrap(t,-180,180)*Math.PI/180;var d;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(d=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d),function(m,y,C){var O=y[0],I=y[1],j=y[2],J=y[3],ne=Math.sin(C),ge=Math.cos(C);m[0]=O*ge+j*ne,m[1]=I*ge+J*ne,m[2]=O*-ne+j*ge,m[3]=I*-ne+J*ge}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){let u=a.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){let u=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,u,d){this._unmodified=!1,this._edgeInsets.interpolate(t,u,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){let u=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(t){let u=[new a.UnwrappedTileID(0,t)];if(this._renderWorldCopies){let d=this.pointCoordinate(new a.pointGeometry(0,0)),m=this.pointCoordinate(new a.pointGeometry(this.width,0)),y=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new a.pointGeometry(0,this.height)),O=Math.floor(Math.min(d.x,m.x,y.x,C.x)),I=Math.floor(Math.max(d.x,m.x,y.x,C.x)),j=1;for(let J=O-j;J<=I+j;J++)J!==0&&u.push(new a.UnwrappedTileID(J,t))}return u}coveringTiles(t){var u,d;let m=this.coveringZoomLevel(t),y=m;if(t.minzoom!==void 0&&m<t.minzoom)return[];t.maxzoom!==void 0&&m>t.maxzoom&&(m=t.maxzoom);let C=this.pointCoordinate(this.getCameraPoint()),O=a.MercatorCoordinate.fromLngLat(this.center),I=Math.pow(2,m),j=[I*C.x,I*C.y,0],J=[I*O.x,I*O.y,0],ne=$a.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m),ge=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ge=m);let Re=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,Pe=Be=>({aabb:new aa([Be*I,0,0],[(Be+1)*I,I,0]),zoom:0,x:0,y:0,wrap:Be,fullyVisible:!1}),Me=[],nt=[],ut=m,vt=t.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let Be=1;Be<=3;Be++)Me.push(Pe(-Be)),Me.push(Pe(Be));for(Me.push(Pe(0));Me.length>0;){let Be=Me.pop(),St=Be.x,xt=Be.y,Dt=Be.fullyVisible;if(!Dt){let or=Be.aabb.intersects(ne);if(or===0)continue;Dt=or===2}let It=t.terrain?j:J,Nt=Be.aabb.distanceX(It),Ot=Be.aabb.distanceY(It),ir=Math.max(Math.abs(Nt),Math.abs(Ot)),qt=Re+(1<<ut-Be.zoom)-2;if(Be.zoom===ut||ir>qt&&Be.zoom>=ge){let or=ut-Be.zoom,_r=j[0]-.5-(St<<or),wr=j[1]-.5-(xt<<or);nt.push({tileID:new a.OverscaledTileID(Be.zoom===ut?vt:Be.zoom,Be.wrap,Be.zoom,St,xt),distanceSq:a.sqrLen([J[0]-.5-St,J[1]-.5-xt]),tileDistanceToCamera:Math.sqrt(_r*_r+wr*wr)})}else for(let or=0;or<4;or++){let _r=(St<<1)+or%2,wr=(xt<<1)+(or>>1),mr=Be.zoom+1,Br=Be.aabb.quadrant(or);if(t.terrain){let Nr=new a.OverscaledTileID(mr,Be.wrap,mr,_r,wr),Ir=t.terrain.getMinMaxElevation(Nr),kr=(u=Ir.minElevation)!==null&&u!==void 0?u:this.elevation,$r=(d=Ir.maxElevation)!==null&&d!==void 0?d:this.elevation;Br=new aa([Br.min[0],Br.min[1],kr],[Br.max[0],Br.max[1],$r])}Me.push({aabb:Br,zoom:mr,x:_r,y:wr,wrap:Be.wrap,fullyVisible:Dt})}}return nt.sort((Be,St)=>Be.distanceSq-St.distanceSq).map(Be=>Be.tileID)}resize(t,u){this.width=t,this.height=u,this.pixelsToGLUnits=[2/t,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){let u=a.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(t.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(t){return new a.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(t,u){let d=a.MercatorCoordinate.fromLngLat(t),m=(1<<this.tileZoom)*a.EXTENT,y=d.x*m,C=d.y*m,O=Math.floor(y/a.EXTENT),I=Math.floor(C/a.EXTENT),j=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,O,I);return u.getElevation(j,y%a.EXTENT,C%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){let u=this.pointLocation(this.centerPoint,t),d=this.getElevation(u,t);if(!(this.elevation-d))return;let m=this.getCameraPosition(),y=a.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),C=a.MercatorCoordinate.fromLngLat(u,d),O=y.x-C.x,I=y.y-C.y,j=y.z-C.z,J=Math.sqrt(O*O+I*I+j*j),ne=this.scaleZoom(this.cameraToCenterDistance/J/this.tileSize);this._elevation=d,this._center=u,this.zoom=ne}setLocationAtPoint(t,u){let d=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(t),C=new a.MercatorCoordinate(y.x-(d.x-m.x),y.y-(d.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,u){return u?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,u){return this.coordinateLocation(this.pointCoordinate(t,u))}locationCoordinate(t){return a.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,u){if(u){let ge=u.pointCoordinate(t);if(ge!=null)return ge}let d=[t.x,t.y,0,1],m=[t.x,t.y,1,1];a.transformMat4(d,d,this.pixelMatrixInverse),a.transformMat4(m,m,this.pixelMatrixInverse);let y=d[3],C=m[3],O=d[1]/y,I=m[1]/C,j=d[2]/y,J=m[2]/C,ne=j===J?0:(0-j)/(J-j);return new a.MercatorCoordinate(a.number(d[0]/y,m[0]/C,ne)/this.worldSize,a.number(O,I,ne)/this.worldSize)}coordinatePoint(t,u=0,d=this.pixelMatrix){let m=[t.x*this.worldSize,t.y*this.worldSize,u,1];return a.transformMat4(m,m,d),new a.pointGeometry(m[0]/m[3],m[1]/m[3])}getBounds(){let t=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,t))).extend(this.pointLocation(new a.pointGeometry(this.width,t))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,u=!1){let d=t.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[d])return m[d];let y=t.canonical,C=this.worldSize/this.zoomScale(y.z),O=y.x+Math.pow(2,y.z)*t.wrap,I=a.identity(new Float64Array(16));return a.translate(I,I,[O*C,y.y*C,0]),a.scale(I,I,[C/a.EXTENT,C/a.EXTENT,1]),a.multiply(I,u?this.alignedProjMatrix:this.projMatrix,I),m[d]=new Float32Array(I),m[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,u,d,m,y=-90,C=90,O=-180,I=180,j=this.size,J=this._unmodified;if(this.latRange){let Re=this.latRange;y=a.mercatorYfromLat(Re[1])*this.worldSize,C=a.mercatorYfromLat(Re[0])*this.worldSize,t=C-y<j.y?j.y/(C-y):0}if(this.lngRange){let Re=this.lngRange;O=a.wrap(a.mercatorXfromLng(Re[0])*this.worldSize,0,this.worldSize),I=a.wrap(a.mercatorXfromLng(Re[1])*this.worldSize,0,this.worldSize),I<O&&(I+=this.worldSize),u=I-O<j.x?j.x/(I-O):0}let ne=this.point,ge=Math.max(u||0,t||0);if(ge)return this.center=this.unproject(new a.pointGeometry(u?(I+O)/2:ne.x,t?(C+y)/2:ne.y)),this.zoom+=this.scaleZoom(ge),this._unmodified=J,void(this._constraining=!1);if(this.latRange){let Re=ne.y,Pe=j.y/2;Re-Pe<y&&(m=y+Pe),Re+Pe>C&&(m=C-Pe)}if(this.lngRange){let Re=(O+I)/2,Pe=a.wrap(ne.x,Re-this.worldSize/2,Re+this.worldSize/2),Me=j.x/2;Pe-Me<O&&(d=O+Me),Pe+Me>I&&(d=I-Me)}d===void 0&&m===void 0||(this.center=this.unproject(new a.pointGeometry(d!==void 0?d:ne.x,m!==void 0?m:ne.y)).wrap()),this._unmodified=J,this._constraining=!1}_calcMatrices(){if(!this.height)return;let t=this.centerOffset,u=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=a.identity(new Float64Array(16));a.scale(m,m,[this.width/2,-this.height/2,1]),a.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=a.identity(new Float64Array(16)),a.scale(m,m,[1,-1,1]),a.translate(m,m,[-1,-1,0]),a.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);let y=Math.PI/2+this._pitch,C=this._fov*(.5+t.y/this.height),O=Math.sin(C)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-y-C,.01,Math.PI-.01)),I=this.getHorizon(),j=2*Math.atan(I/this.cameraToCenterDistance)*(.5+t.y/(2*I)),J=Math.sin(j)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-y-j,.01,Math.PI-.01)),ne=Math.cos(Math.PI/2-this._pitch)*O+this.cameraToSeaLevelDistance,ge=Math.cos(Math.PI/2-this._pitch)*J+this.cameraToSeaLevelDistance,Re=1.01*Math.min(ne,ge),Pe=this.height/50;m=new Float64Array(16),a.perspective(m,this._fov,this.width/this.height,Pe,Re),m[8]=2*-t.x/this.width,m[9]=2*t.y/this.height,a.scale(m,m,[1,-1,1]),a.translate(m,m,[0,0,-this.cameraToCenterDistance]),a.rotateX(m,m,this._pitch),a.rotateZ(m,m,this.angle),a.translate(m,m,[-u,-d,0]),this.mercatorMatrix=a.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),a.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,m),a.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=a.invert([],m),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,m);let Me=this.width%2/2,nt=this.height%2/2,ut=Math.cos(this.angle),vt=Math.sin(this.angle),Be=u-Math.round(u)+ut*Me+vt*nt,St=d-Math.round(d)+ut*nt+vt*Me,xt=new Float64Array(m);if(a.translate(xt,xt,[Be>.5?Be-1:Be,St>.5?St-1:St,0]),this.alignedProjMatrix=xt,m=a.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let t=this.pointCoordinate(new a.pointGeometry(0,0)),u=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,t))}getCameraQueryGeometry(t){let u=this.getCameraPoint();if(t.length===1)return[t[0],u];{let d=u.x,m=u.y,y=u.x,C=u.y;for(let O of t)d=Math.min(d,O.x),m=Math.min(m,O.y),y=Math.max(y,O.x),C=Math.max(C,O.y);return[new a.pointGeometry(d,m),new a.pointGeometry(y,m),new a.pointGeometry(y,C),new a.pointGeometry(d,C),new a.pointGeometry(d,m)]}}}class ru{constructor(t){this._hashName=t&&encodeURIComponent(t),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,d){let m=!1,y=null,C=()=>{y=null,m&&(u(),y=setTimeout(C,300),m=!1)};return()=>(m=!0,y||C(),y)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){let u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),C=Math.round(u.lng*y)/y,O=Math.round(u.lat*y)/y,I=this._map.getBearing(),j=this._map.getPitch(),J="";if(J+=t?`/${C}/${O}/${d}`:`${d}/${O}/${C}`,(I||j)&&(J+="/"+Math.round(10*I)/10),j&&(J+=`/${Math.round(j)}`),this._hashName){let ne=this._hashName,ge=!1,Re=window.location.hash.slice(1).split("&").map(Pe=>{let Me=Pe.split("=")[0];return Me===ne?(ge=!0,`${Me}=${J}`):Pe}).filter(Pe=>Pe);return ge||Re.push(`${ne}=${J}`),`#${Re.join("&")}`}return`#${J}`}_getCurrentHash(){let t=window.location.hash.replace("#","");if(this._hashName){let u;return t.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(u=d)}),(u&&u[1]||"").split("/")}return t.split("/")}_onHashChange(){let t=this._getCurrentHash();if(t.length>=3&&!t.some(u=>isNaN(u))){let u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:u,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){let t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(u){}}}let la={linearity:.3,easing:a.bezier(0,0,.3,1)},nu=a.extend({deceleration:2500,maxSpeed:1400},la),iu=a.extend({deceleration:20,maxSpeed:1400},la),ou=a.extend({deceleration:1e3,maxSpeed:360},la),ko=a.extend({deceleration:1e3,maxSpeed:90},la);class au{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:t})}_drainInertiaBuffer(){let t=this._inertiaBuffer,u=a.exported.now();for(;t.length>0&&u-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let u={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)u.zoom+=y.zoomDelta||0,u.bearing+=y.bearingDelta||0,u.pitch+=y.pitchDelta||0,y.panDelta&&u.pan._add(y.panDelta),y.around&&(u.around=y.around),y.pinchAround&&(u.pinchAround=y.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){let y=ca(u.pan.mag(),d,a.extend({},nu,t||{}));m.offset=u.pan.mult(y.amount/u.pan.mag()),m.center=this._map.transform.center,ua(m,y)}if(u.zoom){let y=ca(u.zoom,d,iu);m.zoom=this._map.transform.zoom+y.amount,ua(m,y)}if(u.bearing){let y=ca(u.bearing,d,ou);m.bearing=this._map.transform.bearing+a.clamp(y.amount,-179,179),ua(m,y)}if(u.pitch){let y=ca(u.pitch,d,ko);m.pitch=this._map.transform.pitch+y.amount,ua(m,y)}if(m.zoom||m.bearing){let y=u.pinchAround===void 0?u.around:u.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.extend(m,{noMoveStart:!0})}}function ua(f,t){(!f.duration||f.duration<t.duration)&&(f.duration=t.duration,f.easing=t.easing)}function ca(f,t,u){let{maxSpeed:d,linearity:m,deceleration:y}=u,C=a.clamp(f*m/(t/1e3),-d,d),O=Math.abs(C)/(y*m);return{easing:u.easing,duration:1e3*O,amount:C*(O/2)}}class Gn extends a.Event{constructor(t,u,d,m={}){let y=x.mousePos(u.getCanvasContainer(),d),C=u.unproject(y);super(t,a.extend({point:y,lngLat:C,originalEvent:d},m)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ha extends a.Event{constructor(t,u,d){let m=t==="touchend"?d.changedTouches:d.touches,y=x.touchPos(u.getCanvasContainer(),m),C=y.map(I=>u.unproject(I)),O=y.reduce((I,j,J,ne)=>I.add(j.div(ne.length)),new a.pointGeometry(0,0));super(t,{points:y,point:O,lngLats:C,lngLat:u.unproject(O),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Kn extends a.Event{constructor(t,u,d){super(t,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Oh{constructor(t,u){this._map=t,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Kn(t.type,this._map,t))}mousedown(t,u){return this._mousedownPos=u,this._firePreventable(new Gn(t.type,this._map,t))}mouseup(t){this._map.fire(new Gn(t.type,this._map,t))}click(t,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Gn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Gn(t.type,this._map,t))}mouseover(t){this._map.fire(new Gn(t.type,this._map,t))}mouseout(t){this._map.fire(new Gn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ha(t.type,this._map,t))}touchmove(t){this._map.fire(new ha(t.type,this._map,t))}touchend(t){this._map.fire(new ha(t.type,this._map,t))}touchcancel(t){this._map.fire(new ha(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $i{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Gn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Gn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class su{constructor(t,u){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,u){this.isEnabled()&&t.shiftKey&&t.button===0&&(x.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(t,u){if(!this._active)return;let d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=d,this._box||(this._box=x.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));let y=Math.min(m.x,d.x),C=Math.max(m.x,d.x),O=Math.min(m.y,d.y),I=Math.max(m.y,d.y);x.setTransform(this._box,`translate(${y}px,${O}px)`),this._box.style.width=C-y+"px",this._box.style.height=I-O+"px"}mouseupWindow(t,u){if(!this._active||t.button!==0)return;let d=this._startPos,m=u;if(this.reset(),x.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:y=>y.fitScreenCoordinates(d,m,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,u){return this._map.fire(new a.Event(t,{originalEvent:u}))}}function Ii(f,t){if(f.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${t.length}`);let u={};for(let d=0;d<f.length;d++)u[f[d].identifier]=t[d];return u}class da{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){let y=new a.pointGeometry(0,0);for(let C of m)y._add(C);return y.div(m.length)}(u),this.touches=Ii(d,u)))}touchmove(t,u,d){if(this.aborted||!this.centroid)return;let m=Ii(d,u);for(let y in this.touches){let C=this.touches[y],O=m[y];(!O||O.dist(C)>30)&&(this.aborted=!0)}}touchend(t,u,d){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Hs{constructor(t){this.singleTap=new da(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,u,d){this.singleTap.touchstart(t,u,d)}touchmove(t,u,d){this.singleTap.touchmove(t,u,d)}touchend(t,u,d){let m=this.singleTap.touchend(t,u,d);if(m){let y=t.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(y&&C||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Mh{constructor(){this._zoomIn=new Hs({numTouches:1,numTaps:2}),this._zoomOut=new Hs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,u,d){this._zoomIn.touchstart(t,u,d),this._zoomOut.touchstart(t,u,d)}touchmove(t,u,d){this._zoomIn.touchmove(t,u,d),this._zoomOut.touchmove(t,u,d)}touchend(t,u,d){let m=this._zoomIn.touchend(t,u,d),y=this._zoomOut.touchend(t,u,d);return m?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(m)},{originalEvent:t})}):y?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(y)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}let Dh={0:1,2:2};class Wa{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,u){return!1}_move(t,u){return{}}mousedown(t,u){if(this._lastPoint)return;let d=x.mouseButton(t);this._correctButton(t,d)&&(this._lastPoint=u,this._eventButton=d)}mousemoveWindow(t,u){let d=this._lastPoint;if(d){if(t.preventDefault(),function(m,y){let C=Dh[y];return m.buttons===void 0||(m.buttons&C)!==C}(t,this._eventButton))this.reset();else if(this._moved||!(u.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(d,u)}}mouseupWindow(t){this._lastPoint&&x.mouseButton(t)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fa extends Wa{mousedown(t,u){super.mousedown(t,u),this._lastPoint&&(this._active=!0)}_correctButton(t,u){return u===0&&!t.ctrlKey}_move(t,u){return{around:u,panDelta:u.sub(t)}}}class zi extends Wa{_correctButton(t,u){return u===0&&t.ctrlKey||u===2}_move(t,u){let d=.8*(u.x-t.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(t){t.preventDefault()}}class sr extends Wa{_correctButton(t,u){return u===0&&t.ctrlKey||u===2}_move(t,u){let d=-.5*(u.y-t.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(t){t.preventDefault()}}class lu{constructor(t,u){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(t,u,d){return this._calculateTransform(t,u,d)}touchmove(t,u,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,u,d)}touchend(t,u,d){this._calculateTransform(t,u,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,u,d){d.length>0&&(this._active=!0);let m=Ii(d,u),y=new a.pointGeometry(0,0),C=new a.pointGeometry(0,0),O=0;for(let j in m){let J=m[j],ne=this._touches[j];ne&&(y._add(J),C._add(J.sub(ne)),O++,m[j]=J)}if(this._touches=m,O<this._minTouches||!C.mag())return;let I=C.div(O);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(O),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,u,d){return{}}touchstart(t,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(t,u,d){if(!this._firstTwoTouches)return;t.preventDefault();let[m,y]=this._firstTwoTouches,C=Wi(d,u,m),O=Wi(d,u,y);if(!C||!O)return;let I=this._aroundCenter?null:C.add(O).div(2);return this._move([C,O],I,t)}touchend(t,u,d){if(!this._firstTwoTouches)return;let[m,y]=this._firstTwoTouches,C=Wi(d,u,m),O=Wi(d,u,y);C&&O||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wi(f,t,u){for(let d=0;d<f.length;d++)if(f[d].identifier===u)return t[d]}function Gs(f,t){return Math.log(f/t)/Math.LN2}class tr extends lo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,u){let d=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Gs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gs(this._distance,d),pinchAround:u}}}function Ha(f,t){return 180*f.angleWith(t)/Math.PI}class Ah extends lo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,u){let d=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ha(this._vector,d),pinchAround:u}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());let u=25/(Math.PI*this._minDiameter)*360,d=Ha(t,this._startVector);return Math.abs(d)<u}}function Ks(f){return Math.abs(f.y)>Math.abs(f.x)}class Zs extends lo{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,u,d){super.touchstart(t,u,d),this._currentTouchCount=d.length}_start(t){this._lastPoints=t,Ks(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,u,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;let m=t[0].sub(this._lastPoints[0]),y=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,d.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(t,u,d){if(this._valid!==void 0)return this._valid;let m=t.mag()>=2,y=u.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let C=t.y>0==u.y>0;return Ks(t)&&Ks(u)&&C}}let uu={panStep:100,bearingStep:15,pitchStep:10};class cu{constructor(){let t=uu;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let u=0,d=0,m=0,y=0,C=0;switch(t.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:t.shiftKey?d=-1:(t.preventDefault(),y=-1);break;case 39:t.shiftKey?d=1:(t.preventDefault(),y=1);break;case 38:t.shiftKey?m=1:(t.preventDefault(),C=-1);break;case 40:t.shiftKey?m=-1:(t.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:O=>{let I=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Ih,zoom:u?Math.round(I)+u*(t.shiftKey?2:1):I,bearing:O.getBearing()+d*this._bearingStep,pitch:O.getPitch()+m*this._pitchStep,offset:[-y*this._panStep,-C*this._panStep],center:O.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ih(f){return f*(2-f)}let hu=4.000244140625;class Ys{constructor(t,u){this._map=t,this._el=t.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}let u=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,d=a.exported.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%hu==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),t.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=t,this._delta-=u,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let u=x.mousePos(this._el,t);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let t=this._map.transform;if(this._delta!==0){let O=this._type==="wheel"&&Math.abs(this._delta)>hu?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&I!==0&&(I=1/I);let j=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(j*I))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let u=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,d=this._startZoom,m=this._easing,y,C=!1;if(this._type==="wheel"&&d&&m){let O=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),I=m(O);y=a.number(d,u,I),O<1?this._frameId||(this._frameId=!0):C=!0}else y=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:y-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let u=a.ease;if(this._prevEase){let d=this._prevEase,m=(a.exported.now()-d.start)/d.duration,y=d.easing(m+.01)-d.easing(m),C=.27/Math.sqrt(y*y+1e-4)*.01,O=Math.sqrt(.0729-C*C);u=a.bezier(C,O,.25,1)}return this._prevEase={start:a.exported.now(),duration:t,easing:u},u}reset(){this._active=!1}}class Xs{constructor(t,u){this._clickZoom=t,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Js{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,u){return t.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(t.shiftKey?-1:1),around:d.unproject(u)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qs{constructor(){this._tap=new Hs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,u,d){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=u[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(t,u,d))}touchmove(t,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let m=u[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,t.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(t,u,d)}touchend(t,u,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(t,u,d)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jn{constructor(t,u,d){this._el=t,this._mousePan=u,this._touchPan=d}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hi{constructor(t,u,d){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=u,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class du{constructor(t,u,d,m){this._el=t,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}let Lo=f=>f.zoom||f.drag||f.pitch||f.rotate;class Qs extends a.Event{}function pa(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class fu{constructor(t,u){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new au(t),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,y,C]of this._listeners)x.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(let[t,u,d]of this._listeners)x.removeEventListener(t,u,t===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(t){let u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new Oh(u,t));let m=u.boxZoom=new su(u,t);this._add("boxZoom",m);let y=new Mh,C=new Js;u.doubleClickZoom=new Xs(C,y),this._add("tapZoom",y),this._add("clickZoom",C);let O=new qs;this._add("tapDragZoom",O);let I=u.touchPitch=new Zs(u);this._add("touchPitch",I);let j=new zi(t),J=new sr(t);u.dragRotate=new Hi(t,j,J),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]);let ne=new fa(t),ge=new lu(t,u);u.dragPan=new jn(d,ne,ge),this._add("mousePan",ne),this._add("touchPan",ge,["touchZoom","touchRotate"]);let Re=new Ah,Pe=new tr;u.touchZoomRotate=new du(d,Pe,Re,O),this._add("touchRotate",Re,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]);let Me=u.scrollZoom=new Ys(u,this);this._add("scrollZoom",Me,["mousePan"]);let nt=u.keyboard=new cu;this._add("keyboard",nt),this._add("blockableMapEvent",new $i(u));for(let ut of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[ut]&&u[ut].enable(t[ut])}_add(t,u,d){this._handlers.push({handlerName:t,handler:u,allowed:d}),this._handlersById[t]=u}stop(t){if(!this._updatingCamera){for(let{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(let{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Lo(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,u,d){for(let m in t)if(m!==d&&(!u||u.indexOf(m)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){let u=[];for(let d of t)this._el.contains(d.target)&&u.push(d);return u}handleEvent(t,u){if(t.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let d=t.type==="renderFrame"?void 0:t,m={needsRenderFrame:!1},y={},C={},O=t.touches,I=O?this._getMapTouches(O):void 0,j=I?x.touchPos(this._el,I):x.mousePos(this._el,t);for(let{handlerName:ge,handler:Re,allowed:Pe}of this._handlers){if(!Re.isEnabled())continue;let Me;this._blockedByActive(C,Pe,ge)?Re.reset():Re[u||t.type]&&(Me=Re[u||t.type](t,j,I),this.mergeHandlerResult(m,y,Me,ge,d),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()),(Me||Re.isActive())&&(C[ge]=Re)}let J={};for(let ge in this._previousActiveHandlers)C[ge]||(J[ge]=d);this._previousActiveHandlers=C,(Object.keys(J).length||pa(m))&&(this._changes.push([m,y,J]),this._triggerRenderFrame()),(Object.keys(C).length||pa(m))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:ne}=m;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))}mergeHandlerResult(t,u,d,m,y){if(!d)return;a.extend(t,d);let C={handlerName:m,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(u.zoom=C),d.panDelta!==void 0&&(u.drag=C),d.pitchDelta!==void 0&&(u.pitch=C),d.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){let t={},u={},d={};for(let[m,y,C]of this._changes)m.panDelta&&(t.panDelta=(t.panDelta||new a.pointGeometry(0,0))._add(m.panDelta)),m.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(t.around=m.around),m.pinchAround!==void 0&&(t.pinchAround=m.pinchAround),m.noInertia&&(t.noInertia=m.noInertia),a.extend(u,y),a.extend(d,C);this._updateMapTransform(t,u,d),this._changes=[]}_updateMapTransform(t,u,d){let m=this._map,y=m.transform,C=m.style&&m.style.terrain;if(!(pa(t)||C&&this._drag))return this._fireEvents(u,d,!0);let{panDelta:O,zoomDelta:I,bearingDelta:j,pitchDelta:J,around:ne,pinchAround:ge}=t;ge!==void 0&&(ne=ge),m._stop(!0),ne=ne||m.transform.centerPoint;let Re=y.pointLocation(O?ne.sub(O):ne);j&&(y.bearing+=j),J&&(y.pitch+=J),I&&(y.zoom+=I),C?u.drag&&!this._drag?(this._drag={center:y.centerPoint,lngLat:y.pointLocation(ne),point:ne,handlerName:u.drag.handlerName},m.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&d[this._drag.handlerName]?(m.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(y.center=y.pointLocation(y.centerPoint.sub(O))):y.setLocationAtPoint(Re,ne),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(u,d,!0)}_fireEvents(t,u,d){let m=Lo(this._eventsInProgress),y=Lo(t),C={};for(let J in t){let{originalEvent:ne}=t[J];this._eventsInProgress[J]||(C[`${J}start`]=ne),this._eventsInProgress[J]=t[J]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(let J in C)this._fireEvent(J,C[J]);y&&this._fireEvent("move",y.originalEvent);for(let J in t){let{originalEvent:ne}=t[J];this._fireEvent(J,ne)}let O={},I;for(let J in this._eventsInProgress){let{handlerName:ne,originalEvent:ge}=this._eventsInProgress[J];this._handlersById[ne].isActive()||(delete this._eventsInProgress[J],I=u[ne]||ge,O[`${J}end`]=I)}for(let J in O)this._fireEvent(J,O[J]);let j=Lo(this._eventsInProgress);if(d&&(m||y)&&!j){this._updatingCamera=!0;let J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;J?(ne(J.bearing||this._map.getBearing())&&(J.bearing=0),this._map.easeTo(J,{originalEvent:I})):(this._map.fire(new a.Event("moveend",{originalEvent:I})),ne(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,u){this._map.fire(new a.Event(t,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Qs("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}let ni={extend:(f,...t)=>a.extend(f,...t),run(f){f()},logToElement(f,t=!1,u="log"){let d=window.document.getElementById(u);d&&(t&&(d.innerHTML=""),d.innerHTML+=`<br>${f}`)}};class tn extends a.Evented{constructor(t,u){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,u){return this.jumpTo({center:t},u)}panBy(t,u,d){return t=a.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,a.extend({offset:t},u),d)}panTo(t,u,d){return this.easeTo(a.extend({center:t},u),d)}getZoom(){return this.transform.zoom}setZoom(t,u){return this.jumpTo({zoom:t},u),this}zoomTo(t,u,d){return this.easeTo(a.extend({zoom:t},u),d)}zoomIn(t,u){return this.zoomTo(this.getZoom()+1,t,u),this}zoomOut(t,u){return this.zoomTo(this.getZoom()-1,t,u),this}getBearing(){return this.transform.bearing}setBearing(t,u){return this.jumpTo({bearing:t},u),this}getPadding(){return this.transform.padding}setPadding(t,u){return this.jumpTo({padding:t},u),this}rotateTo(t,u,d){return this.easeTo(a.extend({bearing:t},u),d)}resetNorth(t,u){return this.rotateTo(0,a.extend({duration:1e3},t),u),this}resetNorthPitch(t,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},t),u),this}snapToNorth(t,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,u):this}getPitch(){return this.transform.pitch}setPitch(t,u){return this.jumpTo({pitch:t},u),this}cameraForBounds(t,u){t=a.LngLatBounds.convert(t);let d=u&&u.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),d,u)}_cameraForBoxAndBearing(t,u,d,m){let y={top:0,bottom:0,right:0,left:0};if(typeof(m=a.extend({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let xt=m.padding;m.padding={top:xt,bottom:xt,right:xt,left:xt}}m.padding=a.extend(y,m.padding);let C=this.transform,O=C.padding,I=C.project(a.LngLat.convert(t)),j=C.project(a.LngLat.convert(u)),J=I.rotate(-d*Math.PI/180),ne=j.rotate(-d*Math.PI/180),ge=new a.pointGeometry(Math.max(J.x,ne.x),Math.max(J.y,ne.y)),Re=new a.pointGeometry(Math.min(J.x,ne.x),Math.min(J.y,ne.y)),Pe=ge.sub(Re),Me=(C.width-(O.left+O.right+m.padding.left+m.padding.right))/Pe.x,nt=(C.height-(O.top+O.bottom+m.padding.top+m.padding.bottom))/Pe.y;if(nt<0||Me<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let ut=Math.min(C.scaleZoom(C.scale*Math.min(Me,nt)),m.maxZoom),vt=a.pointGeometry.convert(m.offset),Be=new a.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(d*Math.PI/180),St=vt.add(Be).mult(C.scale/C.zoomScale(ut));return{center:C.unproject(I.add(j).div(2).sub(St)),zoom:ut,bearing:d}}fitBounds(t,u,d){return this._fitInternal(this.cameraForBounds(t,u),u,d)}fitScreenCoordinates(t,u,d,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(t)),this.transform.pointLocation(a.pointGeometry.convert(u)),d,m),m,y)}_fitInternal(t,u,d){return t?(delete(u=a.extend(t,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(t,u){this.stop();let d=this.transform,m=!1,y=!1,C=!1;return"zoom"in t&&d.zoom!==+t.zoom&&(m=!0,d.zoom=+t.zoom),t.center!==void 0&&(d.center=a.LngLat.convert(t.center)),"bearing"in t&&d.bearing!==+t.bearing&&(y=!0,d.bearing=+t.bearing),"pitch"in t&&d.pitch!==+t.pitch&&(C=!0,d.pitch=+t.pitch),t.padding==null||d.isPaddingEqual(t.padding)||(d.padding=t.padding),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),m&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),y&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),C&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(t,u,d,m=0){let y=a.MercatorCoordinate.fromLngLat(t,u),C=a.MercatorCoordinate.fromLngLat(d,m),O=C.x-y.x,I=C.y-y.y,j=C.z-y.z,J=Math.hypot(O,I,j);if(J===0)throw new Error("Can't calculate camera options with same From and To");let ne=Math.hypot(O,I),ge=this.transform.scaleZoom(this.transform.cameraToCenterDistance/J/this.transform.tileSize),Re=180*Math.atan2(O,-I)/Math.PI,Pe=180*Math.acos(ne/J)/Math.PI;return Pe=j<0?90-Pe:90+Pe,{center:C.toLngLat(),zoom:ge,pitch:Pe,bearing:Re}}easeTo(t,u){this._stop(!1,t.easeId),((t=a.extend({offset:[0,0],duration:500,easing:a.ease},t)).animate===!1||!t.essential&&a.exported.prefersReducedMotion)&&(t.duration=0);let d=this.transform,m=this.getZoom(),y=this.getBearing(),C=this.getPitch(),O=this.getPadding(),I="zoom"in t?+t.zoom:m,j="bearing"in t?this._normalizeBearing(t.bearing,y):y,J="pitch"in t?+t.pitch:C,ne="padding"in t?t.padding:d.padding,ge=a.pointGeometry.convert(t.offset),Re=d.centerPoint.add(ge),Pe=d.pointLocation(Re),Me=a.LngLat.convert(t.center||Pe);this._normalizeCenter(Me);let nt=d.project(Pe),ut=d.project(Me).sub(nt),vt=d.zoomScale(I-m),Be,St;t.around&&(Be=a.LngLat.convert(t.around),St=d.locationPoint(Be));let xt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==m,this._rotating=this._rotating||y!==j,this._pitching=this._pitching||J!==C,this._padding=!d.isPaddingEqual(ne),this._easeId=t.easeId,this._prepareEase(u,t.noMoveStart,xt),this._ease(Dt=>{if(this._zooming&&(d.zoom=a.number(m,I,Dt)),this._rotating&&(d.bearing=a.number(y,j,Dt)),this._pitching&&(d.pitch=a.number(C,J,Dt)),this._padding&&(d.interpolatePadding(O,ne,Dt),Re=d.centerPoint.add(ge)),Be)d.setLocationAtPoint(Be,St);else{let It=d.zoomScale(d.zoom-m),Nt=I>m?Math.min(2,vt):Math.max(.5,vt),Ot=Math.pow(Nt,1-Dt),ir=d.unproject(nt.add(ut.mult(Dt*Ot)).mult(It));d.setLocationAtPoint(d.renderWorldCopies?ir.wrap():ir,Re)}this._fireMoveEvents(u)},Dt=>{this._afterEase(u,Dt)},t),this}_prepareEase(t,u,d={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),u||d.moving||this.fire(new a.Event("movestart",t)),this._zooming&&!d.zooming&&this.fire(new a.Event("zoomstart",t)),this._rotating&&!d.rotating&&this.fire(new a.Event("rotatestart",t)),this._pitching&&!d.pitching&&this.fire(new a.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new a.Event("move",t)),this._zooming&&this.fire(new a.Event("zoom",t)),this._rotating&&this.fire(new a.Event("rotate",t)),this._pitching&&this.fire(new a.Event("pitch",t))}_afterEase(t,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));let d=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new a.Event("zoomend",t)),m&&this.fire(new a.Event("rotateend",t)),y&&this.fire(new a.Event("pitchend",t)),this.fire(new a.Event("moveend",t))}flyTo(t,u){if(!t.essential&&a.exported.prefersReducedMotion){let mr=a.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(mr,u)}this.stop(),t=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},t);let d=this.transform,m=this.getZoom(),y=this.getBearing(),C=this.getPitch(),O=this.getPadding(),I="zoom"in t?a.clamp(+t.zoom,d.minZoom,d.maxZoom):m,j="bearing"in t?this._normalizeBearing(t.bearing,y):y,J="pitch"in t?+t.pitch:C,ne="padding"in t?t.padding:d.padding,ge=d.zoomScale(I-m),Re=a.pointGeometry.convert(t.offset),Pe=d.centerPoint.add(Re),Me=d.pointLocation(Pe),nt=a.LngLat.convert(t.center||Me);this._normalizeCenter(nt);let ut=d.project(Me),vt=d.project(nt).sub(ut),Be=t.curve,St=Math.max(d.width,d.height),xt=St/ge,Dt=vt.mag();if("minZoom"in t){let mr=a.clamp(Math.min(t.minZoom,m,I),d.minZoom,d.maxZoom),Br=St/d.zoomScale(mr-m);Be=Math.sqrt(Br/Dt*2)}let It=Be*Be;function Nt(mr){let Br=(xt*xt-St*St+(mr?-1:1)*It*It*Dt*Dt)/(2*(mr?xt:St)*It*Dt);return Math.log(Math.sqrt(Br*Br+1)-Br)}function Ot(mr){return(Math.exp(mr)-Math.exp(-mr))/2}function ir(mr){return(Math.exp(mr)+Math.exp(-mr))/2}let qt=Nt(0),or=function(mr){return ir(qt)/ir(qt+Be*mr)},_r=function(mr){return St*((ir(qt)*(Ot(Br=qt+Be*mr)/ir(Br))-Ot(qt))/It)/Dt;var Br},wr=(Nt(1)-qt)/Be;if(Math.abs(Dt)<1e-6||!isFinite(wr)){if(Math.abs(St-xt)<1e-6)return this.easeTo(t,u);let mr=xt<St?-1:1;wr=Math.abs(Math.log(xt/St))/Be,_r=function(){return 0},or=function(Br){return Math.exp(mr*Be*Br)}}return t.duration="duration"in t?+t.duration:1e3*wr/("screenSpeed"in t?+t.screenSpeed/Be:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=y!==j,this._pitching=J!==C,this._padding=!d.isPaddingEqual(ne),this._prepareEase(u,!1),this._ease(mr=>{let Br=mr*wr,Nr=1/or(Br);d.zoom=mr===1?I:m+d.scaleZoom(Nr),this._rotating&&(d.bearing=a.number(y,j,mr)),this._pitching&&(d.pitch=a.number(C,J,mr)),this._padding&&(d.interpolatePadding(O,ne,mr),Pe=d.centerPoint.add(Re));let Ir=mr===1?nt:d.unproject(ut.add(vt.mult(_r(Br))).mult(Nr));d.setLocationAtPoint(d.renderWorldCopies?Ir.wrap():Ir,Pe),this._fireMoveEvents(u)},()=>this._afterEase(u),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!t){let d=this.handlers;d&&d.stop(!1)}return this}_ease(t,u,d){d.animate===!1||d.duration===0?(t(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=d,this._onEaseFrame=t,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){let t=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,u){t=a.wrap(t,-180,180);let d=Math.abs(t-u);return Math.abs(t-360-u)<d&&(t-=360),Math.abs(t+360-u)<d&&(t+=360),t}_normalizeCenter(t){let u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;let d=t.lng-u.center.lng;t.lng+=d>180?-360:d<-180?360:0}}class ma{constructor(t={}){this.options=t,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,u){let d=this._map._getUIString(`AttributionControl.${u}`);t.title=d,t.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||t.sourceDataType!=="metadata"&&t.sourceDataType!=="visibility"&&t.dataType!=="style"&&t.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let u=this._map.style.sourceCaches;for(let m in u){let y=u[m];if(y.used||y.usedForTerrain){let C=y.getSource();C.attribution&&t.indexOf(C.attribution)<0&&t.push(C.attribution)}}t=t.filter(m=>String(m).trim()),t.sort((m,y)=>m.length-y.length),t=t.filter((m,y)=>{for(let C=y+1;C<t.length;C++)if(t[C].indexOf(m)>=0)return!1;return!0});let d=t.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,t.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ga{constructor(t={}){this.options=t,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl mapboxgl-ctrl");let u=x.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){let t=this._container.children;if(t.length){let u=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class pu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){let u=++this._id;return this._queue.push({callback:t,id:u,cancelled:!1}),u}remove(t){let u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(let m of d)if(m.id===t)return void(m.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let u=this._currentlyRunning=this._queue;this._queue=[];for(let d of u)if(!d.cancelled&&(d.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}let mu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},gu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},zh={showCompass:!0,showZoom:!0,visualizePitch:!1};class bi{constructor(t,u,d=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new zi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,d&&(this.mousePitch=new sr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(u,"mousedown",this.mousedown),x.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(u,"touchmove",this.touchmove),x.addEventListener(u,"touchend",this.touchend),x.addEventListener(u,"touchcancel",this.reset)}down(t,u){this.mouseRotate.mousedown(t,u),this.mousePitch&&this.mousePitch.mousedown(t,u),x.disableDrag()}move(t,u){let d=this.map,m=this.mouseRotate.mousemoveWindow(t,u);if(m&&m.bearingDelta&&d.setBearing(d.getBearing()+m.bearingDelta),this.mousePitch){let y=this.mousePitch.mousemoveWindow(t,u);y&&y.pitchDelta&&d.setPitch(d.getPitch()+y.pitchDelta)}}off(){let t=this.element;x.removeEventListener(t,"mousedown",this.mousedown),x.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(t,"touchmove",this.touchmove),x.removeEventListener(t,"touchend",this.touchend),x.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(a.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),x.mousePos(this.element,t)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,x.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ga(f,t,u){if(f=new a.LngLat(f.lng,f.lat),t){let d=new a.LngLat(f.lng-360,f.lat),m=new a.LngLat(f.lng+360,f.lat),y=u.locationPoint(f).distSqr(t);u.locationPoint(d).distSqr(t)<y?f=d:u.locationPoint(m).distSqr(t)<y&&(f=m)}for(;Math.abs(f.lng-u.center.lng)>180;){let d=u.locationPoint(f);if(d.x>=0&&d.y>=0&&d.x<=u.width&&d.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}let hr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vr(f,t,u){let d=f.classList;for(let m in hr)d.remove(`maplibregl-${u}-anchor-${m}`,`mapboxgl-${u}-anchor-${m}`);d.add(`maplibregl-${u}-anchor-${t}`,`mapboxgl-${u}-anchor-${t}`)}class Ro extends a.Evented{constructor(t,u){if(super(),(t instanceof HTMLElement||u)&&(t=a.extend({element:t},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=a.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");let d=x.createNS("http://www.w3.org/2000/svg","svg"),m=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${m}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${m}`);let C=x.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");let O=x.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");let I=x.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");let j=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let vt of j){let Be=x.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",vt.rx),Be.setAttributeNS(null,"ry",vt.ry),I.appendChild(Be)}let J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);let ne=x.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(ne);let ge=x.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"fill","#000000");let Re=x.createNS("http://www.w3.org/2000/svg","path");Re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ge.appendChild(Re);let Pe=x.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");let Me=x.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(8.0, 8.0)");let nt=x.createNS("http://www.w3.org/2000/svg","circle");nt.setAttributeNS(null,"fill","#000000"),nt.setAttributeNS(null,"opacity","0.25"),nt.setAttributeNS(null,"cx","5.5"),nt.setAttributeNS(null,"cy","5.5"),nt.setAttributeNS(null,"r","5.4999962");let ut=x.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Me.appendChild(nt),Me.appendChild(ut),O.appendChild(I),O.appendChild(J),O.appendChild(ge),O.appendChild(Pe),O.appendChild(Me),d.appendChild(O),d.setAttributeNS(null,"height",m*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=a.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),vr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){let m=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){let u=t.code,d=t.charCode||t.keyCode;u!=="Space"&&u!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(t){let u=t.originalEvent.target,d=this._element;this._popup&&(u===d||d.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){let t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ga(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),t&&t.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${hr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{let m=this._map.unproject(this._pos),y=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=m.distanceTo(this._lngLat)>20*y?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(t){return this._offset=a.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){let u=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}let el={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Gi,Tn=0,Ki=!1,xi={maxWidth:100,unit:"metric"};function yu(f,t,u){let d=u&&u.maxWidth||100,m=f._container.clientHeight/2,y=f.unproject([0,m]),C=f.unproject([d,m]),O=y.distanceTo(C);if(u&&u.unit==="imperial"){let I=3.2808*O;I>5280?Zi(t,d,I/5280,f._getUIString("ScaleControl.Miles")):Zi(t,d,I,f._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Zi(t,d,O/1852,f._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Zi(t,d,O/1e3,f._getUIString("ScaleControl.Kilometers")):Zi(t,d,O,f._getUIString("ScaleControl.Meters"))}function Zi(f,t,u,d){let m=function(y){let C=Math.pow(10,`${Math.floor(y)}`.length-1),O=y/C;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(I){let j=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*j)/j}(O),C*O}(u);f.style.width=t*(m/u)+"px",f.innerHTML=`${m}&nbsp;${d}`}let sn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tl(f){if(f){if(typeof f=="number"){let t=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,f),"top-left":new a.pointGeometry(t,t),"top-right":new a.pointGeometry(-t,t),bottom:new a.pointGeometry(0,-f),"bottom-left":new a.pointGeometry(t,-t),"bottom-right":new a.pointGeometry(-t,-t),left:new a.pointGeometry(f,0),right:new a.pointGeometry(-f,0)}}if(f instanceof a.pointGeometry||Array.isArray(f)){let t=a.pointGeometry.convert(f);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.pointGeometry.convert(f.center||[0,0]),top:a.pointGeometry.convert(f.top||[0,0]),"top-left":a.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(f["top-right"]||[0,0]),bottom:a.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(f["bottom-right"]||[0,0]),left:a.pointGeometry.convert(f.left||[0,0]),right:a.pointGeometry.convert(f.right||[0,0])}}return tl(new a.pointGeometry(0,0))}let uo={supported:b,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends tn{constructor(f){var t;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(f=a.extend({},gu,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new sa(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new pu,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},mu,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(t=f.pixelRatio)!==null&&t!==void 0?t:devicePixelRatio,this._requestManager=new M(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new fu(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new ru(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,a.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new ma({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new Ga,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(f,t){if(t===void 0&&(t=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let u=f.onAdd(this);this._controls.push(f);let d=this._controlPositions[t];return t.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let t=this._controls.indexOf(f);return t>-1&&this._controls.splice(t,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,t,u,d){return d==null&&this.style.terrain&&(d=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(f,t,u,d)}resize(f){let t=this._containerDimensions(),u=t[0],d=t[1];this._resizeCanvas(u,d,this.getPixelRatio()),this.transform.resize(u,d),this.painter.resize(u,d,this.getPixelRatio());let m=!this._moving;return m&&(this.stop(),this.fire(new a.Event("movestart",f)).fire(new a.Event("move",f))),this.fire(new a.Event("resize",f)),m&&this.fire(new a.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){let[t,u]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(t,u,f),this.painter.resize(t,u,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(a.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?60:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(a.LngLat.convert(f),this.style&&this.style.terrain)}unproject(f){return this.transform.pointLocation(a.pointGeometry.convert(f),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,t,u){if(f==="mouseenter"||f==="mouseover"){let d=!1;return{layer:t,listener:u,delegates:{mousemove:y=>{let C=this.getLayer(t)?this.queryRenderedFeatures(y.point,{layers:[t]}):[];C.length?d||(d=!0,u.call(this,new Gn(f,this,y.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(f==="mouseleave"||f==="mouseout"){let d=!1;return{layer:t,listener:u,delegates:{mousemove:C=>{(this.getLayer(t)?this.queryRenderedFeatures(C.point,{layers:[t]}):[]).length?d=!0:d&&(d=!1,u.call(this,new Gn(f,this,C.originalEvent)))},mouseout:C=>{d&&(d=!1,u.call(this,new Gn(f,this,C.originalEvent)))}}}}{let d=m=>{let y=this.getLayer(t)?this.queryRenderedFeatures(m.point,{layers:[t]}):[];y.length&&(m.features=y,u.call(this,m),delete m.features)};return{layer:t,listener:u,delegates:{[f]:d}}}}on(f,t,u){if(u===void 0)return super.on(f,t);let d=this._createDelegatedListener(f,t,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(d);for(let m in d.delegates)this.on(m,d.delegates[m]);return this}once(f,t,u){if(u===void 0)return super.once(f,t);let d=this._createDelegatedListener(f,t,u);for(let m in d.delegates)this.once(m,d.delegates[m]);return this}off(f,t,u){return u===void 0?super.off(f,t):(this._delegatedListeners&&this._delegatedListeners[f]&&(d=>{let m=this._delegatedListeners[f];for(let y=0;y<m.length;y++){let C=m[y];if(C.layer===t&&C.listener===u){for(let O in C.delegates)this.off(O,C.delegates[O]);return m.splice(y,1),this}}})(),this)}queryRenderedFeatures(f,t){if(!this.style)return[];let u;if(t!==void 0||f===void 0||f instanceof a.pointGeometry||Array.isArray(f)||(t=f,f=void 0),t=t||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof f[0]=="number")u=[a.pointGeometry.convert(f)];else{let d=a.pointGeometry.convert(f[0]),m=a.pointGeometry.convert(f[1]);u=[d,new a.pointGeometry(m.x,d.y),m,new a.pointGeometry(d.x,m.y),d]}return this.style.queryRenderedFeatures(u,t,this.transform)}querySourceFeatures(f,t){return this.style.querySourceFeatures(f,t)}setStyle(f,t){return(t=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(f,t))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){let t=this._locale[f];if(t==null)throw new Error(`Missing UI string '${f}'`);return t}_updateStyle(f,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new cn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new cn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,t){if(typeof f=="string"){let u=this._requestManager.transformRequest(f,a.ResourceType.Style);a.getJSON(u,(d,m)=>{d?this.fire(new a.ErrorEvent(d)):m&&this._updateDiff(m,t)})}else typeof f=="object"&&this._updateDiff(f,t)}_updateDiff(f,t){try{this.style.setState(f)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(f,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(f,t){return this._lazyInitEmptyStyle(),this.style.addSource(f,t),this._update(!0)}isSourceLoaded(f){let t=this.style&&this.style.sourceCaches[f];if(t!==void 0)return t.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){return this.style.setTerrain(f),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){let f=this.style&&this.style.sourceCaches;for(let t in f){let u=f[t]._tiles;for(let d in u){let m=u[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(f,t,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,t,u)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,t,{pixelRatio:u=1,sdf:d=!1,stretchX:m,stretchY:y,content:C}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||a.isImageBitmap(t)){let{width:O,height:I,data:j}=a.exported.getImageData(t);this.style.addImage(f,{data:new a.RGBAImage({width:O,height:I},j),pixelRatio:u,stretchX:m,stretchY:y,content:C,sdf:d,version:0})}else{if(t.width===void 0||t.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:I,data:j}=t,J=t;this.style.addImage(f,{data:new a.RGBAImage({width:O,height:I},new Uint8Array(j)),pixelRatio:u,stretchX:m,stretchY:y,content:C,sdf:d,version:0,userImage:J}),J.onAdd&&J.onAdd(this,f)}}}updateImage(f,t){let u=this.style.getImage(f);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=t instanceof HTMLImageElement||a.isImageBitmap(t)?a.exported.getImageData(t):t,{width:m,height:y,data:C}=d;if(m===void 0||y===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||y!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));let O=!(t instanceof HTMLImageElement||a.isImageBitmap(t));u.data.replace(C,O),this.style.updateImage(f,u)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,t){a.getImage(this._requestManager.transformRequest(f,a.ResourceType.Image),t)}listImages(){return this.style.listImages()}addLayer(f,t){return this._lazyInitEmptyStyle(),this.style.addLayer(f,t),this._update(!0)}moveLayer(f,t){return this.style.moveLayer(f,t),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,t,u){return this.style.setLayerZoomRange(f,t,u),this._update(!0)}setFilter(f,t,u={}){return this.style.setFilter(f,t,u),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,t,u,d={}){return this.style.setPaintProperty(f,t,u,d),this._update(!0)}getPaintProperty(f,t){return this.style.getPaintProperty(f,t)}setLayoutProperty(f,t,u,d={}){return this.style.setLayoutProperty(f,t,u,d),this._update(!0)}getLayoutProperty(f,t){return this.style.getLayoutProperty(f,t)}setLight(f,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,t){return this.style.setFeatureState(f,t),this._update()}removeFeatureState(f,t){return this.style.removeFeatureState(f,t),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,t=0;return this._container&&(f=this._container.clientWidth||400,t=this._container.clientHeight||300),[f,t]}_setupContainer(){let f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");let t=this._canvasContainer=x.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");let u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());let d=this._controlContainer=x.create("div","maplibregl-control-container mapboxgl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{m[y]=x.create("div",`maplibregl-ctrl-${y} mapboxgl-ctrl-${y}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){let f=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=x.create("div","maplibregl-cooperative-gesture-screen",f);let t="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",t="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",d=>{d.key===t&&(this._metaPress=!0)}),document.addEventListener("keyup",d=>{d.key===t&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",d=>{this._onCooperativeGesture(d,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(f,t,u){this._canvas.width=u*f,this._canvas.height=u*t,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${t}px`}_setupPainter(){let f=a.extend({},b.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);t?(this.painter=new Ws(t,this.transform),a.exported$1.testSupport(t)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,t,u){return!t&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let t,u=0,d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(t=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,t),u=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let C=this.transform.zoom,O=a.exported.now();this.style.zoomHistory.update(C,O);let I=new a.EvaluationParameters(C,{now:O,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=I.crossFadingFactor();j===1&&j===this._crossFadingFactor||(m=!0,this._crossFadingFactor=j),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){let C=a.exported.now()-u;d.endQueryEXT(d.TIME_ELAPSED_EXT,t),setTimeout(()=>{let O=d.getQueryObjectEXT(t,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(t),this.fire(new a.Event("gpu-timing-frame",{cpuTime:C,gpuTime:O}))},50)}if(this.listens("gpu-timing-layer")){let C=this.painter.collectGpuTimers();setTimeout(()=>{let O=this.painter.queryGpuTimers(C);this.fire(new a.Event("gpu-timing-layer",{layerTimes:O}))},50)}let y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(let t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));let f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._cooperativeGestures&&x.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(f=>{a.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,t){a.setCacheLimits(f,t)}get version(){return"2.4.0"}},NavigationControl:class{constructor(f){this.options=a.extend({},zh,f),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){let f=this._map.getZoom(),t=f===this._map.getMaxZoom(),u=f===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){let f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,t){let u=x.create("button",f,this._container);return u.type="button",u.addEventListener("click",t),u}_setButtonTitle(f,t){let u=this._map._getUIString(`NavigationControl.${t}`);f.title=u,f.setAttribute("aria-label",u)}},GeolocateControl:class extends a.Evented{constructor(f){super(),this.options=a.extend({},el,f),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var t;return this._map=f,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,Gi!==void 0?t(Gi):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Gi=u.state!=="denied",t(Gi)}):(Gi=!!window.navigator.geolocation,t(Gi)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Tn=0,Ki=!1}_isOutOfMapMaxBounds(f){let t=this._map.getMaxBounds(),u=f.coords;return t&&(u.longitude<t.getWest()||u.longitude>t.getEast()||u.latitude<t.getSouth()||u.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",f)),this._finish()}}_updateCamera(f){let t=new a.LngLat(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,d=this._map.getBearing(),m=a.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(u),m,{geolocateSource:!0})}_updateMarker(f){if(f){let t=new a.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){let f=this._map._container.clientHeight/2,t=this._map.unproject([0,f]),u=this._map.unproject([1,f]),d=t.distanceTo(u),m=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Ki)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");let t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{let t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ro(this._dotElement),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ro({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||this._watchState!=="ACTIVE_LOCK"||t.originalEvent&&t.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Tn--,Ki=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Tn++,Tn>1?(f={maximumAge:6e5,timeout:0},Ki=!0):(f=this.options.positionOptions,Ki=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ma,LogoControl:Ga,ScaleControl:class{constructor(f){this.options=a.extend({},xi,f),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){yu(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,yu(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){let f=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){let f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(f){this.options=f,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(f){super(),this.options=a.extend(Object.create(sn),f),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=a.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){let t=document.createDocumentFragment(),u=document.createElement("body"),d;for(u.innerHTML=f;d=u.firstChild,d;)t.appendChild(d);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=x.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(y=>this._container.classList.add(y)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ga(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;let t=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat),u=this.options.anchor,d=tl(this.options.offset);if(!u){let y=this._container.offsetWidth,C=this._container.offsetHeight,O;O=t.y+d.bottom.y<C?["top"]:t.y>this._map.transform.height-C?["bottom"]:[],t.x<y/2?O.push("left"):t.x>this._map.transform.width-y/2&&O.push("right"),u=O.length===0?"bottom":O.join("-")}let m=t.add(d[u]).round();x.setTransform(this._container,`${hr[u]} translate(${m.x}px,${m.y}px)`),vr(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let f=this._container.querySelector(hn);f&&f.focus()}_onClose(){this.remove()}},Marker:Ro,Style:cn,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Ae,GeoJSONSource:Ee,ImageSource:te,RasterDEMTileSource:je,RasterTileSource:lt,VectorTileSource:et,VideoSource:ce,prewarm:function(){Ye().acquire(Ht)},clearPrewarmedResources:function(){let f=oe;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Ht),oe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Jt.workerCount},set workerCount(f){Jt.workerCount=f},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){a.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){a.clearTileCache(f)},workerUrl:"",addProtocol(f,t){a.config.REGISTERED_PROTOCOLS[f]=t},removeProtocol(f){delete a.config.REGISTERED_PROTOCOLS[f]}};return ni.extend(uo,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),uo});var c=n;return c})});var jc=Xt((KO,s1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */s1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=15)}({15:function(s,i,n){"use strict";n.r(i),n.d(i,"toPx",function(){return a}),n.d(i,"toDimension",function(){return b}),n.d(i,"arrayToCSSProp",function(){return w}),n.d(i,"toMargin",function(){return _}),n.d(i,"toPadding",function(){return T});var l=n(16),c=n.n(l),a=function x(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return c()(M)?"".concat(M,"px"):M||x(A)},b=function(M){var A=M.width,D=M.height,E="";return A&&(E="width: ".concat(a(A),";")),D&&(E="".concat(E).concat(A?`
`:"","height: ").concat(a(D),";")),E},w=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0];return Array.isArray(A)?`
            `.concat(M,": ").concat(a(A[0])," ").concat(a(A[1])," ").concat(a(A[2])," ").concat(a(A[3]),`;
        `):"".concat(M,": ").concat(a(A),";")},_=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0];return w("margin",M)},T=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0];return w("padding",M)}},16:function(s,i){s.exports=ig()}})});var Fc=Xt((ZO,l1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */l1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=53)}({0:function(s,i){s.exports=Un()},1:function(s,i){s.exports=Wr()},17:function(s,i){s.exports=f_()},2:function(s,i){s.exports=_l()},3:function(s,i){s.exports=zr()},37:function(s,i){s.exports=E_()},4:function(s,i){s.exports=hg()},5:function(s,i){s.exports=os()},53:function(s,i,n){"use strict";n.r(i);var l=n(5),c=n.n(l),a=n(6),b=n.n(a),w=n(17),_=n.n(w),T=n(8),x=n.n(T),M=n(9),A=n.n(M),D=n(4),E=n.n(D),$=n(2),Y=n.n($),G=n(3),le=n.n(G),K=n(1),F=n.n(K),Q=n(0),L=n.n(Q),k=n(37),re=n.n(k);function de(tt){var je=Ie();return function(){var _e=E()(tt),te;if(je){var ce=E()(this).constructor;te=Reflect.construct(_e,arguments,ce)}else te=_e.apply(this,arguments);return A()(this,te)}}function Ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var et={position:"absolute",width:0,height:0,visibility:"hidden",display:"none"},lt=function(tt){x()(Ee,tt);var je=de(Ee);function Ee(_e){var te;return c()(this,Ee),te=je.call(this,_e),Y()(_()(te),"getElement",function(){var ce=te.el&&te.el.parentElement;return ce}),Y()(_()(te),"handleResize",function(ce){ce.forEach(function(Ae){var ke=Ae.contentRect,Ce=ke.width,$e=ke.height;te.animationFrameID=window.requestAnimationFrame(function(){te.setState({width:Ce,height:$e})})})}),Y()(_()(te),"renderChildren",function(){var ce=te.state,Ae=ce.width,ke=ce.height,Ce=te.props.children;return Ae!=null&&ke!=null&&le()(Ce)?Ce({width:Ae,height:ke}):null}),te.state={width:null,height:null},te.animationFrameID=null,te.ro=new re.a(te.handleResize),te}return b()(Ee,[{key:"componentDidMount",value:function(){var te=this.getElement();te&&this.ro.observe(te)}},{key:"componentWillUnmount",value:function(){var te=this.getElement();te&&this.ro.unobserve(te),window&&this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID)}},{key:"render",value:function(){var te=this;return F.a.createElement(F.a.Fragment,null,F.a.createElement("div",{key:"resize-detector",style:et,ref:function(Ae){te.el=Ae}}),this.renderChildren())}}]),Ee}(K.PureComponent);lt.propTypes={children:L.a.any},lt.defaultProps={children:null},i.default=lt},6:function(s,i){s.exports=as()},8:function(s,i){s.exports=ug()},9:function(s,i){s.exports=cg()}})});var Vc=Xt((YO,u1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */u1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=33)}({33:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TimezoneContextConsumer=i.TimezoneContextProvider=void 0;var l=n(7),c=l.createContext({});c.displayName="data-splunk-visualization-version-TimezoneContext-".concat("25.3.6 - 6b2578d73"),i.TimezoneContextProvider=c.Provider,i.TimezoneContextConsumer=c.Consumer,i.default=c},7:function(s,i){s.exports=Wr()}})});var Bc=Xt((XO,c1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */c1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=48)}({3:function(s,i){s.exports=zr()},48:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.pickFieldFromJSONSchema=void 0;var l=n(3),c=function(b){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default";return Object.keys(b).reduce(function(_,T){if(l.has(b[T],w))_[T]=b[T][w];else if(l.get(b,[T,"type"])==="object"&&l.has(b[T],"properties")){var x=i.pickFieldFromJSONSchema(b[T].properties,w);l.isEmpty(x)||(_[T]=x)}return _},{})};i.pickFieldFromJSONSchema=c}})});var Nc=Xt((JO,h1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */h1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=51)}([function(s,i){s.exports=os()},function(s,i){s.exports=as()},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.DataPoint=void 0;var a=n(11),b=function(){function w(_,T){l(this,w),this.field=_,this.setValue(T)}return c(w,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(T){this.value=a.TypeSafeValue.from(T)}},{key:"getRawValue",value:function(){return this.value.toRawValue()}},{key:"getCoercedValue",value:function(){return this.value.toRawCoercedValue()}},{key:"getField",value:function(){return w.fromRaw(this.field)}},{key:"getType",value:function(){return this.value.type}}],[{key:"isDataPoint",value:function(T){return T instanceof w}},{key:"fromRaw",value:function(T){return new w("",a.TypeSafeValue.fromRaw(T))}}]),w}();i.DataPoint=b},function(s,i,n){"use strict";var l=n(26),c=n(13),a=n(0),b=n(1);Object.defineProperty(i,"__esModule",{value:!0});var w=n(5),_=n(27),T=n(23),x=n(19),M=n(11),A=n(2),D=n(29),E=n(20),$=n(28),Y=n(22),G=function(){function le(){a(this,le)}return b(le,[{key:"executeOptions",value:function(F,Q,L){var k=w.cloneDeep(F),re=new D.OptionScopes(k,Q,L);return this.eval(k,re),le.rawTree(k.options)}},{key:"eval",value:function(F,Q){var L=this,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(Q.pushLocalScope(F),Q.addToVisitedList(k),Array.isArray(F))F.forEach(function(de,Ie){k.push(Ie.toString()),F[Ie]=L.eval(F[Ie],Q,k),k.pop()});else if(w.isPlainObject(F))Object.keys(F).forEach(function(de){k.push(de),F[de]=L.eval(F[de],Q,k),k.pop()});else if($.default.isDslString(F)){Q.popLocalScope();var re=this.evalDsl(F,Q);return Q.removeFromVisitedList(k),re}return Q.popLocalScope(),Q.removeFromVisitedList(k),F}},{key:"evalDsl",value:function(F,Q){try{var L=E.DslParser.parse($.default.withoutArrow(F));return this.execOptionsPipeline(L,Q,Q.frames.primary)}catch(k){console.log("dsl error: ".concat(k.message));return}}},{key:"execOptionsPipeline",value:function(F,Q,L){var k=this,re=L;return F.forEach(function(de,Ie){if(de.type==="method")re=k.executeMethod(de,re,Q.context);else if(de.type==="identifier")re=Q.resolve(de.v.toString()).val;else if(_.LITERAL_TYPES.includes(de.type)){var et=M.TypeSafeValue.from({type:de.type,value:de.v});re=new A.DataPoint("",et)}var lt=Ie===F.length-1;if(!lt&&re&&!x.isDataPrimitive(re))try{re=Y.Helper.dataPrimitiveFromRaw(re)}catch(je){var tt=de.v?de.v:de.name;throw new Error("Output of '".concat(tt,"' cannot be piped because it is not a DataFrame, DataPoint, or DataSeries"))}}),re}},{key:"executeMethod",value:function(F,Q,L){var k=F;if(!Q)throw new Error("Pipeline composition error: method ".concat(k.name," has no subject"));var re=this.args(k.args,L),de=Q[k.name];return de?Q=de.apply(Q,re):Q=this.applyFormatter(Q,k.name,re),Q}},{key:"applyFormatter",value:function(F,Q,L){var k=T.formatterClasses[Q];if(k)return l(k,c(L)).format(F);throw Error("No such method or formatter function: '".concat(Q,"'"))}},{key:"applyLiteral",value:function(F,Q){var L=Q.type,k=Q.v;F.setValue({type:L,value:k})}},{key:"args",value:function(F,Q){var L=this;return F.reduce(function(k,re){var de=L.getArg(re,Q);return k.push(de),k},[])}},{key:"getArg",value:function(F,Q){if(F.type==="identifier"){var L=Q[F.v];if(!L)throw Error("Could not resolve ".concat(F.v," in context. Did you mean one of '[").concat(Object.keys(Q).toString(),"]'"));return L}return F.v}}],[{key:"rawTree",value:function(F){if(Array.isArray(F))return F.forEach(function(L,k){F[k]=le.rawTree(F[k])}),F;if(w.isPlainObject(F))return Object.keys(F).forEach(function(L){F[L]=le.rawTree(F[L])}),F;var Q=x.isDataPrimitive(F)?F.getRawValue():F;return Q}},{key:"isObject",value:function(F){return Object(F)===F}}]),le}();i.default=G},function(s,i,n){"use strict";var l=n(18);Object.defineProperty(i,"__esModule",{value:!0}),i.inferDataTypeFromData=i.dataPointValues=i.inferDataTypeFromDataPoints=i.getDataTypeForMeta=i.canInferTypeFromMeta=i.getDataTypeForPoint=i.isString=i.isTime=i.isGeoJsonObject=i.isNumber=void 0;var c=n(15),a=n(5),b=n(16),w=n(2);function _(L){return L!==null&&!a.isBoolean(L)&&L!==""&&a.isFinite(+L)&&a.isNumber(+L)}i.isNumber=_;function T(L){if(!L)return!1;var k;try{k=a.isObject(L)?L:JSON.parse(L)}catch(re){return!1}return k==null?!1:Object.prototype.hasOwnProperty.call(k,"coordinates")&&k.coordinates!=null&&Array.isArray(k.coordinates)&&Object.prototype.hasOwnProperty.call(k,"type")&&k.type==="MultiPolygon"}i.isGeoJsonObject=T;function x(L){if(!L)return!1;var k=["YYYY-MM-DD",c.default.ISO_8601,"YYYY-MM-DDTHH:mm","YYYY-MM-DDTHH:mm:ss.SSS","YYYY-MM-DDTHH:mm:ss","YYYY-MM-DD HH:MM","YYYY-MM-DD HH:MM:SS","YYYY-MM-DD HH:MM:SS.SSS"];return typeof L=="string"?c.default(L,k,!0).isValid():c.default(L).isValid()}i.isTime=x;function M(L){return typeof L=="string"&&L.length>0}i.isString=M;var A=function(k,re){return i.canInferTypeFromMeta(re)?i.getDataTypeForMeta(re):E(k)};i.getDataTypeForPoint=A;var D=function(k){return Array.isArray(k)?k.length>1&&k[0]==="##__SPARKLINE__##"?"sparkline":"array":T(k)?"geojson":a.isObject(k)?"unknown":_(k)?"number":b.isColor(k)?"color":x(k)?"time":M(k)?"string":k===null?"null":"unknown"},E=a.memoize(D),$={str:"string",num:"number"},Y=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.name,de=k.type,Ie=de===void 0?"":de;return $[Ie]!==void 0||re==="_time"};i.canInferTypeFromMeta=Y;var G=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.name,de=k.type;if(re==="_time")return"time";var Ie=$[de];return Ie!==void 0?Ie:"unknown"};i.getDataTypeForMeta=G;var le=function(k){var re=Object.keys(k).filter(function(tt){return k[tt]>0});if(re.length===0)return"unknown";if(re.length===1)return re[0];for(var de=["geojson","sparkline","array","string","color","number","time","null","unknown"],Ie=function(je){var Ee=de[je];if(re.find(function(_e){return _e===Ee}))return{v:Ee}},et=0;et<de.length;et+=1){var lt=Ie(et);if(l(lt)==="object")return lt.v}return"unknown"},K=function(k){if(!k)return"unknown";var re={time:0,number:0,string:0,color:0,unknown:0,array:0,sparkline:0,null:0,geojson:0};return k.forEach(function(de){re[de.getType()]+=1}),le(re)};i.inferDataTypeFromDataPoints=K;var F=function(k){return k.map(function(re){return w.DataPoint.isDataPoint(re)?re:w.DataPoint.fromRaw(re)})};i.dataPointValues=F;var Q=function(k){return i.inferDataTypeFromDataPoints(i.dataPointValues(k))};i.inferDataTypeFromData=Q},function(s,i){s.exports=zr()},function(s,i){s.exports=ug()},function(s,i){s.exports=cg()},function(s,i){s.exports=hg()},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.AbstractFormatter=void 0;var a=n(12),b=n(10),w=n(2),_=function(){function T(){l(this,T)}return c(T,[{key:"format",value:function(M){var A=this;if(M instanceof a.DataFrame){var D=[];return M.series.forEach(function(E,$){D.push(A.formatSeries(E,$))}),new a.DataFrame(D)}return M instanceof b.DataSeries?this.formatSeries(M):this.formatPoint(M)}},{key:"formatSeries",value:function(M){var A=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=[];return M.points.forEach(function($,Y){E.push(A.formatPoint($,M,D,Y))}),new b.DataSeries(E)}},{key:"formatPoint",value:function(M,A){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,$=M.field,Y=new w.DataPoint($,{type:M.getValue().type,value:M.getValue().coercedValue}),G=this.formatTypedValue(Y,A,D,E);return new w.DataPoint($,G)}},{key:"makeArrays2D",value:function(M){if(Array.isArray(M))return Array.isArray(M[0])?M:[M];throw new Error("argument wasn't array")}}]),T}();i.AbstractFormatter=_},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.DataSeries=void 0;var a=n(2),b=n(4),w=function(){function _(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments.length>1?arguments[1]:void 0;l(this,_),this.points=T,T.length>0&&(this.field=T[0].field),this.type=x}return c(_,[{key:"firstPoint",value:function(){return this.points[0]}},{key:"lastPoint",value:function(){return this.points.slice(-1)[0]}},{key:"pointsByIndexes",value:function(){for(var x=this,M=[],A=arguments.length,D=new Array(A),E=0;E<A;E++)D[E]=arguments[E];return D.forEach(function($){var Y=x.points[$];Y!=null&&M.push(Y)}),new _(M)}},{key:"pointByIndex",value:function(x){var M=x;if(M<0&&(M=this.points.length+M),M<0||M>=this.points.length)return null;var A=this.points[M],D=A.field,E=A.getValue(),$=E.type,Y=E.value;return new a.DataPoint(D,{type:$,value:Y})}},{key:"delta",value:function(x){var M=this.lastPoint();if(M!==void 0){var A=M.field,D=M.getValue(),E=D.type,$=D.value;E!=="number"&&console.warn("delta cannot be computed for non-numerical data series of type ".concat(E));var Y=null,G;if(x>=0?Y=this.points[x]:Y=this.points.slice().reverse()[Math.abs(x)-1],Y==null)console.warn("invalid index");else{var le=Y.getValue(),K=le.value;G=$-K}return new a.DataPoint(A,{type:E,value:G})}}},{key:"setValue",value:function(x){this.points.forEach(function(M){M.setValue(x)}),this.type=this.points[0].getType()}},{key:"getValue",value:function(){var x=[];return this.points.forEach(function(M){x.push(M.getValue())}),x}},{key:"getRawValue",value:function(){var x=[];return this.points.forEach(function(M){x.push(M.getRawValue())}),x}},{key:"getField",value:function(){var x=this.lastPoint();return x.getField()}},{key:"getType",value:function(){return this.type===void 0&&(this.type=b.inferDataTypeFromDataPoints(this.points)),this.type}},{key:"min",value:function(){return this.reduce(function(x,M){return x<M})}},{key:"max",value:function(){return this.reduce(function(x,M){return x>M})}},{key:"reduce",value:function(x){return this.points.reduce(function(M,A){return!M||x(A.getValue().value,M.getValue().value)?A:M},void 0)}}],[{key:"isDataSeries",value:function(x){return x instanceof _}},{key:"fromRaw",value:function(x){return new _(x.map(function(M){return a.DataPoint.fromRaw(M)}))}}]),_}();i.DataSeries=w},function(s,i,n){"use strict";var l=n(17),c=n(0),a=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.TypeSafeValue=void 0;var b=n(4),w=n(14),_=function(){function T(x,M,A){c(this,T),this.isTypeSafe=!0,this.type=x,this.value=M,this.coercedValue=A}return a(T,[{key:"toRawCoercedValue",value:function(){switch(this.type){case"time":case"sparkline":case"array":case"number":case"string":case"color":case"geojson":default:return this.coercedValue}}},{key:"toRawValue",value:function(){switch(this.type){case"time":case"sparkline":case"array":case"number":case"string":case"color":case"geojson":default:return this.value}}}],[{key:"from",value:function(M){if(M.isTypeSafe)return M;var A=M.value,D=M.type,E=T.coerceValue(M),$=l(E,1),Y=$[0];return new T(D,A,Y)}},{key:"fromRaw",value:function(M){var A=b.getDataTypeForPoint(M);return new T(A,M,M)}},{key:"coerceValue",value:function(M){var A=M.type,D=M.value,E=null;try{switch(A){case"number":{E=Number(D);break}case"time":{var $=b.isTime(D);if(D instanceof Date)E=D;else if(!$)E="Invalid Date";else{var Y=w.formatTimeWithTimezoneCorrection(D);E=Y}break}case"string":{E=D.toString();break}case"color":{E=D;break}case"sparkline":{E=D;break}case"array":{E=D;break}case"null":{E=D;break}case"geojson":{E=D;break}default:E=""}}catch(G){}return[E]}}]),T}();i.TypeSafeValue=_},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.DataFrame=void 0;var a=n(2),b=n(10),w=n(4),_=function(){function T(x){l(this,T),this.series=Array.isArray(x)?x:[x]}return c(T,[{key:"frameBySeriesIndexes",value:function(){for(var M=this,A=[],D=arguments.length,E=new Array(D),$=0;$<D;$++)E[$]=arguments[$];return E.forEach(function(Y){var G=M.series[Y];G!=null&&A.push(G)}),new T(A)}},{key:"seriesByIndex",value:function(M){return this.series[M]}},{key:"frameBySeriesIndexRange",value:function(M,A){return new T(this.series.slice(M,A))}},{key:"frameBySeriesNames",value:function(){for(var M=this,A=[],D=arguments.length,E=new Array(D),$=0;$<D;$++)E[$]=arguments[$];return E.forEach(function(Y){var G=M.seriesByName(Y);G&&A.push(G)}),new T(A)}},{key:"frameWithoutSeriesNames",value:function(){for(var M=arguments.length,A=new Array(M),D=0;D<M;D++)A[D]=arguments[D];return A==null?new T(this.series):new T(this.series.filter(function(E){return!A.includes(E.field)&&!E.field.startsWith("_")}))}},{key:"frameBySeriesNamesOrIndexes",value:function(){for(var M=this,A=[],D=arguments.length,E=new Array(D),$=0;$<D;$++)E[$]=arguments[$];return E.forEach(function(Y){var G=Number(Y);if(Number.isNaN(G)){var le=M.seriesByName(Y);le&&A.push(le)}else{var K=M.series[G];K&&A.push(K)}}),new T(A)}},{key:"frameBySeriesTypes",value:function(){for(var M=arguments.length,A=new Array(M),D=0;D<M;D++)A[D]=arguments[D];return new T(this.series.filter(function(E){return A.includes(E.getType())}))}},{key:"seriesByName",value:function(M){return this.series.find(function(A){return M===A.field})}},{key:"seriesByType",value:function(M){return this.series.find(function(A){var D=A.getType();return D===M})}},{key:"seriesByTypes",value:function(){for(var M=arguments.length,A=new Array(M),D=0;D<M;D++)A[D]=arguments[D];return this.series.find(function(E){return A.some(function($){return E.getType()===$})})}},{key:"seriesByPrioritizedTypes",value:function(){for(var M,A=arguments.length,D=new Array(A),E=0;E<A;E++)D[E]=arguments[E];for(var $=0,Y=D;$<Y.length;$++){var G=Y[$],le=this.seriesByType(G);if(Array.isArray(le==null?void 0:le.points)&&((M=le==null?void 0:le.points)===null||M===void 0?void 0:M.length))return le}return this.series[0]}},{key:"setValue",value:function(M){this.series.forEach(function(A){return A.setValue(M)})}},{key:"getRawValue",value:function(){var M=[];return this.series.forEach(function(A){M.push(A.getRawValue())}),M}},{key:"getValue",value:function(){var M=[];return this.series.forEach(function(A){M.push(A.getValue())}),M}},{key:"getField",value:function(){var M=this.series.map(function(A){return A.getField()});return new b.DataSeries(M)}},{key:"getType",value:function(){return this.series.map(function(M){return M.getType()})}},{key:"min",value:function(){return this.minOrMax("min")}},{key:"max",value:function(){return this.minOrMax("max")}},{key:"minOrMax",value:function(M){var A=new b.DataSeries;return this.series.forEach(function(D){var E=D[M]();E&&A.points.push(E)}),A[M]()}}],[{key:"isDataFrame",value:function(M){return M instanceof T}},{key:"fromJsonCols",value:function(M){if(!M||M.data===null)return new T([]);var A=M.data,D=A.fields,E=D===void 0?[]:D,$=A.columns,Y=$===void 0?[]:$;if(Y.length!==E.length)throw new Error("number of columns (".concat(Y.length,") does not match number of fields (").concat(E.length,")"));var G=[];return Y.forEach(function(le,K){var F=[],Q=E[K],L=Q.name||Q,k=Q==null?void 0:Q.type;le.forEach(function(re){var de=w.getDataTypeForPoint(re,{name:L,type:k});F.push(new a.DataPoint(L,{value:re,type:de}))}),G.push(new b.DataSeries(F))}),new T(G)}},{key:"fromRaw",value:function(M){var A=[];return M.forEach(function(D){A.push(b.DataSeries.fromRaw(D))}),new T(A)}},{key:"fromDataPrimitive",value:function(M){if(T.isDataFrame(M))return M;if(b.DataSeries.isDataSeries(M))return new T([M]);if(a.DataPoint.isDataPoint(M))return new T([new b.DataSeries([M])])}}]),T}();i.DataFrame=_},function(s,i){s.exports=Uu()},function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.formatTimeWithTimezoneCorrection=i.setDefaultValue=void 0;var l=n(15),c=n(4),a=function(T){return c.isNumber(T)?T:T||""};i.setDefaultValue=a;var b=function(T){return l.default.getDefaultSplunkTimezone()?l.default.newSplunkTime({time:T}):l.default(T)},w=function(T){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.defaultFormat,M=l.default.parseZone(T).utcOffset(),A=b(T).utcOffset(M);return A.format(x)};i.formatTimeWithTimezoneCorrection=w},function(s,i){s.exports=is()},function(s,i){s.exports=wl()},function(s,i){s.exports=_d()},function(s,i){s.exports=xd()},function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isDataPrimitive=void 0;var l=n(12),c=n(2),a=n(10);function b(w){return l.DataFrame.isDataFrame(w)||a.DataSeries.isDataSeries(w)||c.DataPoint.isDataPoint(w)}i.isDataPrimitive=b},function(s,i,n){"use strict";var l=n(13),c=n(0),a=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.DslParser=void 0;var b=n(24),w=n(25),_=function(){function T(){c(this,T)}return a(T,null,[{key:"parse",value:function(M){if(T.cache[M])return l(T.cache[M]);var A=new b.Parser(w);return A.feed(M),A.results.length>1&&console.warn("Ambiguous parse of '".concat(M,"'")),A.results.length===0&&console.warn("No parsed results for '".concat(M,"'")),T.cache[M]=l(A.results[0]),A.results[0]}}]),T}();i.DslParser=_,_.cache={}},function(s,i){s.exports=og()},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.Helper=void 0;var a=n(12),b=n(10),w=n(2),_=n(3),T=function(){function x(){l(this,x)}return c(x,null,[{key:"isRawDataFrame",value:function(A){return Array.isArray(A)&&x.isRawDataSeries(A[0])}},{key:"isRawDataSeries",value:function(A){return Array.isArray(A)&&!_.default.isObject(A[0])}},{key:"isRawDataPoint",value:function(A){return!_.default.isObject(A)}},{key:"dataPrimitiveFromRaw",value:function(A){if(x.isRawDataFrame(A))return a.DataFrame.fromRaw(A);if(x.isRawDataSeries(A))return b.DataSeries.fromRaw(A);if(x.isRawDataPoint(A))return w.DataPoint.fromRaw(A);throw new Error("raw value does not resemble DataFrame, DataSeries, or DataPoint")}}]),x}();i.Helper=T},function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.formatterClasses=void 0;var l=n(30),c=n(31),a=n(32),b=n(33),w=n(34),_=n(35),T=n(36),x=n(37),M=n(39),A=n(40),D=n(41),E=n(43),$=n(44),Y=n(45);i.formatterClasses={gradient:w.Gradient,matchValue:a.MatchValue,prefix:c.Prefix,rangeValue:b.RangeValue,pick:_.Pick,multiFormat:E.MultiFormat,type:T.Type,formatByType:x.FormatByType,frame:M.Frame,prepend:A.Prepend,objects:D.Objects,setColorChannel:l.SetColorChannel,maxContrast:$.MaxContrast,renameSeries:Y.RenameSeries}},function(s,i){s.exports=m_()},function(s,i,n){var l=n(13);function c(w,_){var T;if(typeof Symbol=="undefined"||w[Symbol.iterator]==null){if(Array.isArray(w)||(T=a(w))||_&&w&&typeof w.length=="number"){T&&(w=T);var x=0,M=function(){};return{s:M,n:function(){return x>=w.length?{done:!0}:{done:!1,value:w[x++]}},e:function(Y){throw Y},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,D=!1,E;return{s:function(){T=w[Symbol.iterator]()},n:function(){var Y=T.next();return A=Y.done,Y},e:function(Y){D=!0,E=Y},f:function(){try{!A&&T.return!=null&&T.return()}finally{if(D)throw E}}}}function a(w,_){if(!!w){if(typeof w=="string")return b(w,_);var T=Object.prototype.toString.call(w).slice(8,-1);if(T==="Object"&&w.constructor&&(T=w.constructor.name),T==="Map"||T==="Set")return Array.from(w);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return b(w,_)}}function b(w,_){(_==null||_>w.length)&&(_=w.length);for(var T=0,x=new Array(_);T<_;T++)x[T]=w[T];return x}(function(){function w(T){return T[0]}var _={Lexer:void 0,ParserRules:[{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","wschar"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(x){return null}},{name:"__$ebnf$1",symbols:["wschar"]},{name:"__$ebnf$1",symbols:["__$ebnf$1","wschar"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"__",symbols:["__$ebnf$1"],postprocess:function(x){return null}},{name:"wschar",symbols:[/[ \t\n\v\f]/],postprocess:w},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(x){return x[1].join("")}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(x){return x[1].join("")}},{name:"btstring$ebnf$1",symbols:[]},{name:"btstring$ebnf$1",symbols:["btstring$ebnf$1",/[^`]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"btstring",symbols:[{literal:"`"},"btstring$ebnf$1",{literal:"`"}],postprocess:function(x){return x[1].join("")}},{name:"dstrchar",symbols:[/[^\\"\n]/],postprocess:w},{name:"dstrchar",symbols:[{literal:"\\"},"strescape"],postprocess:function(x){return JSON.parse('"'+x.join("")+'"')}},{name:"sstrchar",symbols:[/[^\\'\n]/],postprocess:w},{name:"sstrchar",symbols:[{literal:"\\"},"strescape"],postprocess:function(x){return JSON.parse('"'+x.join("")+'"')}},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(x){return x.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(x){return"'"}},{name:"strescape",symbols:[/["\\\/bfnrt]/],postprocess:w},{name:"strescape",symbols:[{literal:"u"},/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/],postprocess:function(x){return x.join("")}},{name:"unsigned_int$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_int$ebnf$1",symbols:["unsigned_int$ebnf$1",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"unsigned_int",symbols:["unsigned_int$ebnf$1"],postprocess:function(x){return parseInt(x[0].join(""))}},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"-"}]},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"+"}]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:w},{name:"int$ebnf$1",symbols:[],postprocess:function(x){return null}},{name:"int$ebnf$2",symbols:[/[0-9]/]},{name:"int$ebnf$2",symbols:["int$ebnf$2",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"int",symbols:["int$ebnf$1","int$ebnf$2"],postprocess:function(x){return x[0]?parseInt(x[0][0]+x[1].join("")):parseInt(x[1].join(""))}},{name:"unsigned_decimal$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$1",symbols:["unsigned_decimal$ebnf$1",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:["unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1",symbols:[{literal:"."},"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1"]},{name:"unsigned_decimal$ebnf$2",symbols:["unsigned_decimal$ebnf$2$subexpression$1"],postprocess:w},{name:"unsigned_decimal$ebnf$2",symbols:[],postprocess:function(x){return null}},{name:"unsigned_decimal",symbols:["unsigned_decimal$ebnf$1","unsigned_decimal$ebnf$2"],postprocess:function(x){return parseFloat(x[0].join("")+(x[1]?"."+x[1][1].join(""):""))}},{name:"decimal$ebnf$1",symbols:[{literal:"-"}],postprocess:w},{name:"decimal$ebnf$1",symbols:[],postprocess:function(x){return null}},{name:"decimal$ebnf$2",symbols:[/[0-9]/]},{name:"decimal$ebnf$2",symbols:["decimal$ebnf$2",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:["decimal$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"decimal$ebnf$3$subexpression$1",symbols:[{literal:"."},"decimal$ebnf$3$subexpression$1$ebnf$1"]},{name:"decimal$ebnf$3",symbols:["decimal$ebnf$3$subexpression$1"],postprocess:w},{name:"decimal$ebnf$3",symbols:[],postprocess:function(x){return null}},{name:"decimal",symbols:["decimal$ebnf$1","decimal$ebnf$2","decimal$ebnf$3"],postprocess:function(x){return parseFloat((x[0]||"")+x[1].join("")+(x[2]?"."+x[2][1].join(""):""))}},{name:"percentage",symbols:["decimal",{literal:"%"}],postprocess:function(x){return x[0]/100}},{name:"jsonfloat$ebnf$1",symbols:[{literal:"-"}],postprocess:w},{name:"jsonfloat$ebnf$1",symbols:[],postprocess:function(x){return null}},{name:"jsonfloat$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$2",symbols:["jsonfloat$ebnf$2",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:["jsonfloat$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1",symbols:[{literal:"."},"jsonfloat$ebnf$3$subexpression$1$ebnf$1"]},{name:"jsonfloat$ebnf$3",symbols:["jsonfloat$ebnf$3$subexpression$1"],postprocess:w},{name:"jsonfloat$ebnf$3",symbols:[],postprocess:function(x){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[/[+-]/],postprocess:w},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[],postprocess:function(x){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:["jsonfloat$ebnf$4$subexpression$1$ebnf$2",/[0-9]/],postprocess:function(x){return x[0].concat([x[1]])}},{name:"jsonfloat$ebnf$4$subexpression$1",symbols:[/[eE]/,"jsonfloat$ebnf$4$subexpression$1$ebnf$1","jsonfloat$ebnf$4$subexpression$1$ebnf$2"]},{name:"jsonfloat$ebnf$4",symbols:["jsonfloat$ebnf$4$subexpression$1"],postprocess:w},{name:"jsonfloat$ebnf$4",symbols:[],postprocess:function(x){return null}},{name:"jsonfloat",symbols:["jsonfloat$ebnf$1","jsonfloat$ebnf$2","jsonfloat$ebnf$3","jsonfloat$ebnf$4"],postprocess:function(x){return parseFloat((x[0]||"")+x[1].join("")+(x[2]?"."+x[2][1].join(""):"")+(x[3]?"e"+(x[3][1]||"+")+x[3][2].join(""):""))}},{name:"Pipeline$ebnf$1",symbols:[]},{name:"Pipeline$ebnf$1$subexpression$1",symbols:[{literal:"|"},"Expr"]},{name:"Pipeline$ebnf$1",symbols:["Pipeline$ebnf$1","Pipeline$ebnf$1$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Pipeline",symbols:["Expr","Pipeline$ebnf$1"],postprocess:function(x){return[x[0]].concat(l(x[1].map(function(M){return M[1]})))}},{name:"Expr",symbols:["_","Identifier","_"],postprocess:function(x){return x[1]}},{name:"Expr",symbols:["_","Method","_"],postprocess:function(x){return x[1]}},{name:"Expr",symbols:["_","Literal","_"],postprocess:function(x){return x[1]}},{name:"Method$ebnf$1",symbols:["Arg"],postprocess:w},{name:"Method$ebnf$1",symbols:[],postprocess:function(x){return null}},{name:"Method$ebnf$2",symbols:[]},{name:"Method$ebnf$2$subexpression$1",symbols:["_",{literal:","},"_","Arg"]},{name:"Method$ebnf$2",symbols:["Method$ebnf$2","Method$ebnf$2$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Method",symbols:["Identifier",{literal:"("},"_","Method$ebnf$1","Method$ebnf$2","_",{literal:")"}],postprocess:function(x){var M=x[3],A=x[4],D=[];M&&D.push(M),A&&(D=D.concat(A.map(function($){return $[3]})));var E={type:"method",name:x[0].v,args:D};return E}},{name:"Arg",symbols:["Identifier"],postprocess:function(x){return x[0]}},{name:"Arg",symbols:["Literal"],postprocess:function(x){return x[0]}},{name:"Identifier$ebnf$1",symbols:[]},{name:"Identifier$ebnf$1$subexpression$1",symbols:["Letter"]},{name:"Identifier$ebnf$1$subexpression$1",symbols:["Digit"]},{name:"Identifier$ebnf$1",symbols:["Identifier$ebnf$1","Identifier$ebnf$1$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Identifier",symbols:["Letter","Identifier$ebnf$1"],postprocess:function(x){return{type:"identifier",v:x[0]+x[1].join("")}}},{name:"Identifier$ebnf$2",symbols:[]},{name:"Identifier$ebnf$2$subexpression$1",symbols:["Letter"]},{name:"Identifier$ebnf$2$subexpression$1",symbols:["Digit"]},{name:"Identifier$ebnf$2",symbols:["Identifier$ebnf$2","Identifier$ebnf$2$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Identifier$ebnf$3$subexpression$1$ebnf$1",symbols:[]},{name:"Identifier$ebnf$3$subexpression$1$ebnf$1$subexpression$1",symbols:["Letter"]},{name:"Identifier$ebnf$3$subexpression$1$ebnf$1$subexpression$1",symbols:["Digit"]},{name:"Identifier$ebnf$3$subexpression$1$ebnf$1",symbols:["Identifier$ebnf$3$subexpression$1$ebnf$1","Identifier$ebnf$3$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Identifier$ebnf$3$subexpression$1",symbols:["Dot","Letter","Identifier$ebnf$3$subexpression$1$ebnf$1"]},{name:"Identifier$ebnf$3",symbols:["Identifier$ebnf$3$subexpression$1"]},{name:"Identifier$ebnf$3$subexpression$2$ebnf$1",symbols:[]},{name:"Identifier$ebnf$3$subexpression$2$ebnf$1$subexpression$1",symbols:["Letter"]},{name:"Identifier$ebnf$3$subexpression$2$ebnf$1$subexpression$1",symbols:["Digit"]},{name:"Identifier$ebnf$3$subexpression$2$ebnf$1",symbols:["Identifier$ebnf$3$subexpression$2$ebnf$1","Identifier$ebnf$3$subexpression$2$ebnf$1$subexpression$1"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Identifier$ebnf$3$subexpression$2",symbols:["Dot","Letter","Identifier$ebnf$3$subexpression$2$ebnf$1"]},{name:"Identifier$ebnf$3",symbols:["Identifier$ebnf$3","Identifier$ebnf$3$subexpression$2"],postprocess:function(x){return x[0].concat([x[1]])}},{name:"Identifier",symbols:["Letter","Identifier$ebnf$2","Identifier$ebnf$3"],postprocess:function(x){function M(D){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],Y=c(D),G;try{for(Y.s();!(G=Y.n()).done;){var le=G.value;le instanceof Array&&E>0?M(le,E-1,$):$.push(le)}}catch(K){Y.e(K)}finally{Y.f()}return $}var A=M(x,1/0);return{type:"identifier",v:A.join("")}}},{name:"Literal",symbols:["jsonfloat"],postprocess:function(x){return{type:"number",v:x[0]}}},{name:"Literal",symbols:["dqstring"],postprocess:function(x){return{type:"string",v:x[0]}}},{name:"Literal",symbols:["sqstring"],postprocess:function(x){return{type:"string",v:x[0]}}},{name:"Literal",symbols:["btstring"],postprocess:function(x){return{type:"string",v:x[0]}}},{name:"Letter",symbols:[/[a-zA-Z_]/],postprocess:function(x){return x[0]}},{name:"Digit",symbols:[/[0-9]/],postprocess:function(x){return x[0]}},{name:"Dot",symbols:[/[\.]/],postprocess:function(x){return x[0]}}],ParserStart:"Pipeline"};typeof s.exports!="undefined"?s.exports=_:window.grammar=_})()},function(s,i){s.exports=p_()},function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LITERAL_TYPES=void 0,i.LITERAL_TYPES=["number","string"]},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0});var a=n(20),b=function(){function w(){l(this,w)}return c(w,null,[{key:"parseOptions",value:function(T){var x={simpleOptions:{},expressions:{},context:T.context},M=T.options;return Object.keys(M).forEach(function(A){var D=M[A];w.isDslString(D)?x.expressions[A]=a.DslParser.parse(w.withoutArrow(D)):x.simpleOptions[A]=D}),x}},{key:"isDslString",value:function(T){return T?T.toString().trim().startsWith(">"):!1}},{key:"withoutArrow",value:function(T){return T.toString().match(/\s*>\s*(.+$)/)[1].trim()}},{key:"parse",value:function(T){var x=T.dimensions,M=T.context,A={dimensions:{},context:M};return Object.keys(x).forEach(function(D){var E={value:[]},$=null;if(typeof x[D]=="string")$=x[D];else{var Y=x[D];$=Y.value}E.value=a.DslParser.parse($),A.dimensions[D]=E}),A}}]),w}();i.default=b},function(s,i,n){"use strict";var l=n(26),c=n(13),a=n(0),b=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.OptionScopes=void 0;var w=n(5),_=n(3),T=function(){function x(M,A,D){a(this,x),this.local=[],this.visitedPaths=new Set,this.context=M.context,this.executedOptions=M.options,this.frames=A,this.themeFunc=D,this.local.push(this.executedOptions)}return b(x,[{key:"resolve",value:function(A){var D=A.split("."),E=null;return x.isQualified(D)?E=this.resolveQualifiedIdentifier(D):E=this.resolveUnqualifiedIdentifier(D),w.cloneDeep(E)}},{key:"resolveUnqualifiedIdentifier",value:function(A){for(var D=x.SCOPES,E,$=0;$<D.length;$+=1){var Y=[D[$]].concat(c(A));if(E=this.resolveQualifiedIdentifier(Y),E.val)break}return E}},{key:"resolveQualifiedIdentifier",value:function(A){var D={context:this.context,options:this.executedOptions,datasources:this.frames,local:this.local[this.local.length-1]},E=null,$=A[0];if($==="themes"&&this.themeFunc){var Y=A[1];E=this.themeFunc(Y)}else E=w.get(D,A),E&&(E=new _.default().eval(E,this,A));return{location:$,val:E}}},{key:"pushLocalScope",value:function(A){this.local.push(A)}},{key:"popLocalScope",value:function(){this.local.pop()}},{key:"addToVisitedList",value:function(A){var D=A.join(".");if(this.visitedPaths.has(D))throw new Error("Circular reference ".concat(D,", path history: ").concat(l(Array,c(this.visitedPaths)).toString()));this.visitedPaths.add(D)}},{key:"removeFromVisitedList",value:function(A){this.visitedPaths.delete(A.join("."))}}],[{key:"isQualified",value:function(A){var D=A[0];return x.SCOPES.includes(D)}}]),x}();i.OptionScopes=T,T.SCOPES=["local","context","datasources","options","themes"]},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _($){var Y=T();return function(){var le=w($),K;if(Y){var F=w(this).constructor;K=Reflect.construct(le,arguments,F)}else K=le.apply(this,arguments);return b(this,K)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.SetColorChannel=void 0;var x=n(21),M=n(5),A=n(9),D=n(3),E=function($){a(G,$);var Y=_(G);function G(le){var K;return l(this,G),K=Y.call(this),K.config=D.default.rawTree(le),K}return c(G,[{key:"formatTypedValue",value:function(K){var F=K.getValue(),Q=F.value,L=F.type;if(L!=="color")return{type:L,value:Q};var k=M.get(this,"config.channel"),re=M.get(this,"config.value");(!k||Q==null)&&console.warn("SetColorChannel requires channel (ex: hsv.v, rgb.r) and value configuration to be set. It will return the same color when missing.");try{return{type:"color",value:x(Q.toString()).set(k,re).hex()}}catch(de){return console.warn(de),{type:"color",value:Q}}}}]),G}(A.AbstractFormatter);i.SetColorChannel=E},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(D){var E=T();return function(){var Y=w(D),G;if(E){var le=w(this).constructor;G=Reflect.construct(Y,arguments,le)}else G=Y.apply(this,arguments);return b(this,G)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.Prefix=void 0;var x=n(9),M=n(3),A=function(D){a($,D);var E=_($);function $(Y){var G;return l(this,$),G=E.call(this),G.prefix=M.default.rawTree(Y),G}return c($,[{key:"formatTypedValue",value:function(G){var le=G.getValue(),K=le.value,F=this.prefix+K.toString();return{value:F,type:"string"}}}]),$}(x.AbstractFormatter);i.Prefix=A},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(Y){var G=T();return function(){var K=w(Y),F;if(G){var Q=w(this).constructor;F=Reflect.construct(K,arguments,Q)}else F=K.apply(this,arguments);return b(this,F)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.MatchValue=void 0;var x=n(5),M=n(4),A=n(14),D=n(9),E=n(3),$=function(Y){a(le,Y);var G=_(le);function le(K){var F,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return l(this,le),F=G.call(this),F.matches=E.default.rawTree(K),F.defaultValue=Q===void 0?void 0:A.setDefaultValue(Q),F}return c(le,[{key:"formatTypedValue",value:function(F){var Q=F.getValue(),L=Q.value,k=x.isUndefined(this.defaultValue)?L||"":this.defaultValue,re=function(tt){return tt.match?M.isNumber(L)?parseFloat(tt.match)===parseFloat(L):tt.match===L:!1},de=x.find(this.matches,re),Ie=x.isUndefined(de)?k:de.value,et=M.getDataTypeForPoint(Ie);return{value:Ie,type:et}}}]),le}(D.AbstractFormatter);i.MatchValue=$},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(G){var le=T();return function(){var F=w(G),Q;if(le){var L=w(this).constructor;Q=Reflect.construct(F,arguments,L)}else Q=F.apply(this,arguments);return b(this,Q)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(G){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.RangeValue=void 0;var x=n(5),M=n(9),A=n(4),D=n(14),E=n(3),$=Object.prototype.hasOwnProperty,Y=function(G){a(K,G);var le=_(K);function K(F,Q){var L;return l(this,K),L=le.call(this),L.ranges=E.default.rawTree(F),L.defaultValue=D.setDefaultValue(Q),L}return c(K,[{key:"formatTypedValue",value:function(Q){var L=Q.getValue(),k=L.type,re=L.value;k!=="number"&&console.warn("type '".concat(k,"' with value '").concat(re,"' is not a valid input to rangeValue"));var de,Ie=x.isUndefined(this.defaultValue)&&!A.isNumber(re)?re:this.defaultValue;if(A.isNumber(re)){for(var et=parseFloat(re),lt=0;lt<this.ranges.length;lt+=1)if($.call(this.ranges[lt],"from")&&!$.call(this.ranges[lt],"to")&&et>=this.ranges[lt].from||et>=this.ranges[lt].from&&et<this.ranges[lt].to||$.call(this.ranges[lt],"to")&&!$.call(this.ranges[lt],"from")&&et<this.ranges[lt].to){de=this.ranges[lt].value;break}}var tt=x.isUndefined(de)?Ie:de,je=A.getDataTypeForPoint(tt);return{type:je,value:tt}}}]),K}(M.AbstractFormatter);i.RangeValue=Y},function(s,i,n){"use strict";var l=n(13),c=n(0),a=n(1),b=n(6),w=n(7),_=n(8);function T($){var Y=x();return function(){var le=_($),K;if(Y){var F=_(this).constructor;K=Reflect.construct(le,arguments,F)}else K=le.apply(this,arguments);return w(this,K)}}function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.Gradient=void 0;var M=n(21),A=n(9),D=n(3),E=function($){b(G,$);var Y=T(G);function G(le){var K;return c(this,G),K=Y.call(this),K.config=D.default.rawTree(le)||{},K}return a(G,[{key:"formatTypedValue",value:function(K,F){var Q=K.getValue(),L=Q.type,k=Q.value;if(L!=="number")throw new Error("type '".concat(L,"' with value '").concat(k,"' is not a valid input to gradient"));var re=this.config.colors||["rgba(123,86,219,0.4)","rgba(123,86,219,1)"],de=this.config.stops||[];if(re.length===1&&(re=["white"].concat(l(re))),de.length)de.length===1&&de.push(de[0]);else{if(!F||!F.points||!F.points.length)de=[0,1];else{var Ie=Number(F.min().getRawValue()),et=Number(F.max().getRawValue());de.push(Ie);for(var lt=1;lt<re.length-1;lt+=1)de.push(Ie+lt*(et-Ie)/(re.length-1));de.push(et)}if(de.length!==re.length)throw new Error("Could not format gradient color. Please provide data or config stops in gradient formatting.")}if(de.sort(function(Ce,$e){return Ce-$e}),de.length!==re.length)throw new Error("gradient stops and colors must have the same number of elements.");var tt,je=k>de[de.length-1],Ee=k<de[0];if(je||Ee){var _e=je?de.length-1:0;return tt=M(re[_e]).hex().toUpperCase(),{type:"color",value:tt}}for(var te=1;te<de.length;te+=1){if(Number.isNaN(Number(de[te])))return console.warn("Could not format gradient color: stops are required to be numbers. Falling back to first color."),tt=M(re[0]).hex().toUpperCase()||"#000",{type:"color",value:tt};var ce=de[te];if(k<=ce){var Ae=de[te-1],ke=0;return ce===Ae?ke=k===0?0:1:ke=(k-Ae)/(ce-Ae),tt=M.scale([re[te-1],re[te]])(ke).hex().toUpperCase(),{type:"color",value:tt}}}return console.warn("Could not format value for gradient: ".concat(k)),tt=M(re[0]).hex().toUpperCase()||"#000",{type:"color",value:tt}}}]),G}(A.AbstractFormatter);i.Gradient=E},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(E){var $=T();return function(){var G=w(E),le;if($){var K=w(this).constructor;le=Reflect.construct(G,arguments,K)}else le=G.apply(this,arguments);return b(this,le)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.Pick=void 0;var x=n(9),M=n(11),A=n(3),D=function(E){a(Y,E);var $=_(Y);function Y(G){var le;return l(this,Y),le=$.call(this),le.config=A.default.rawTree(G),le}return c(Y,[{key:"formatTypedValue",value:function(le,K){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,L;return Array.isArray(this.config)?L=this.config[Q%this.config.length]:L=this.config[K.field],M.TypeSafeValue.fromRaw(L)}}]),Y}(x.AbstractFormatter);i.Pick=D},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(D){var E=T();return function(){var Y=w(D),G;if(E){var le=w(this).constructor;G=Reflect.construct(Y,arguments,le)}else G=Y.apply(this,arguments);return b(this,G)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.Type=void 0;var x=n(9),M=n(11),A=function(D){a($,D);var E=_($);function $(){return l(this,$),E.apply(this,arguments)}return c($,[{key:"formatTypedValue",value:function(G){return G&&G.getRawValue()===null?M.TypeSafeValue.from({type:"string",value:"null"}):M.TypeSafeValue.fromRaw(M.TypeSafeValue.fromRaw(G.getRawValue()).type)}}]),$}(x.AbstractFormatter);i.Type=A},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(F){var Q=T();return function(){var k=w(F),re;if(Q){var de=w(this).constructor;re=Reflect.construct(k,arguments,de)}else re=k.apply(this,arguments);return b(this,re)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.FormatByType=void 0;var x=n(5),M=n(14),A=n(9),D=n(11),E=n(38),$=["before","after"],Y=function(Q,L){var k={prefix:!x.isEmpty(L.unit)&&L.unitPosition==="before"?"".concat(L.unit," "):void 0,postfix:!x.isEmpty(L.unit)&&L.unitPosition!=="before"?" ".concat(L.unit):void 0,mantissa:typeof L.precision=="number"?L.precision:void 0},re=x.defaultsDeep({},x.omitBy(k,x.isUndefined),x.omit(L,["unit","unitPosition","precision"]));return E(Q).format(re)},G=function(Q,L){return x.isEmpty(L.unit)?"".concat(Q):L.unitPosition==="before"?"".concat(L.unit," ").concat(Q):"".concat(Q," ").concat(L.unit)},le=function(Q,L,k){return typeof k.format=="string"&&!x.isEmpty(k.format)?M.formatTimeWithTimezoneCorrection(Q,k.format):L.toString()},K=function(F){a(L,F);var Q=_(L);function L(k){var re;return l(this,L),re=Q.call(this),re.config={number:{},string:{},time:{format:""}},re.config=x.defaultsDeep({},k,re.config),re}return c(L,[{key:"formatTypedValue",value:function(re){var de=this.config,Ie=de.number,et=de.string,lt=de.time,tt=re.getValue();switch(tt.type){case"number":return new D.TypeSafeValue("string",Y(re.getRawValue(),Ie),tt.value);case"string":return new D.TypeSafeValue("string",G(tt.value,et),tt.value);case"time":return new D.TypeSafeValue("string",le(tt.coercedValue,tt.value,lt),tt.value);default:return re.getValue()}}}]),L}(A.AbstractFormatter);i.FormatByType=K},function(s,i){s.exports=g_()},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.Frame=void 0;var a=n(12),b=n(10),w=n(19),_=n(2),T=n(22),x=n(3),M=function(){function A(){l(this,A),this.args=[];for(var D=arguments.length,E=new Array(D),$=0;$<D;$++)E[$]=arguments[$];this.args=E.map(function(Y){return w.isDataPrimitive(Y)?Y:T.Helper.dataPrimitiveFromRaw(x.default.rawTree(Y))})}return c(A,[{key:"format",value:function(E){var $=[];return this.args.forEach(function(Y){if(b.DataSeries.isDataSeries(Y))$.push(Y);else if(a.DataFrame.isDataFrame(Y))$=$.concat(Y.series);else if(_.DataPoint.isDataPoint(Y))$.push(new b.DataSeries([Y]));else throw new Error("frame formatter args incorrect")}),new a.DataFrame($)}}]),A}();i.Frame=M},function(s,i,n){"use strict";var l=n(13),c=n(0),a=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.Prepend=void 0;var b=n(2),w=n(19),_=n(10),T=n(12),x=n(22),M=n(3),A=function(){function D(E){c(this,D),this.prependMe=w.isDataPrimitive(E)?E:x.Helper.dataPrimitiveFromRaw(M.default.rawTree(E))}return a(D,[{key:"format",value:function($){if(T.DataFrame.isDataFrame($))return this.prependToFrame($);if(_.DataSeries.isDataSeries($))return this.prependToSeries($);throw new Error("Can only prepend to DataFrame or DataSeries")}},{key:"prependToFrame",value:function($){if(T.DataFrame.isDataFrame(this.prependMe))return this.prependFrameToFrame($);if(_.DataSeries.isDataSeries(this.prependMe))return this.prependASeriesToEachSeriesOfFrame($);if(b.DataPoint.isDataPoint(this.prependMe))return this.prependAPointToEachSeriesOfFrame($);throw new Error("'prepend' formatter only accepts DataFrame, DataSeries, or DataPoint as argument")}},{key:"prependToSeries",value:function($){if(T.DataFrame.isDataFrame(this.prependMe))throw new Error("cannot prepend a DataFrame to a DataSeries");if(_.DataSeries.isDataSeries(this.prependMe))return this.prependSeriesToSeries($,this.prependMe);if(b.DataPoint.isDataPoint(this.prependMe))return this.prependPointToSeries($);throw new Error("'prepend' to series formatter only DataSeries, or DataPoint as argument")}},{key:"prependAPointToEachSeriesOfFrame",value:function($){var Y=this;return new T.DataFrame($.series.map(function(G){return Y.prependPointToSeries(G)}))}},{key:"prependASeriesToEachSeriesOfFrame",value:function($){var Y=this;return new T.DataFrame($.series.map(function(G){return Y.prependSeriesToSeries(G,Y.prependMe)}))}},{key:"prependFrameToFrame",value:function($){var Y=this,G=this.prependMe.series.length,le=$.series.length;if(G!==le)throw new Error("can't prepend a frame with ".concat(G," columns to a field with ").concat(le," columns"));return new T.DataFrame($.series.map(function(K,F){return Y.prependSeriesToSeries(K,Y.prependMe.seriesByIndex(F))}))}},{key:"prependSeriesToSeries",value:function($,Y){var G=$.field,le=$.points.length>0?$.points[0].getValue().type:void 0,K=Y.points.length>0?Y.points[0].getValue().type:void 0;if(le&&K&&le!==K)throw new Error("cannot prepend ".concat(K," to ").concat(le));return new _.DataSeries(Y.points.map(function(F){return new b.DataPoint(G,F.getValue())}).concat($.points))}},{key:"prependPointToSeries",value:function($){var Y=$.field,G=$.firstPoint().getValue(),le=G.type,K=this.prependMe.getValue(),F=K.type;if(le!==F)throw new Error("cannot prepend point of type ".concat(F," to series of type ").concat(le));var Q=new b.DataPoint(Y,K);return new _.DataSeries([Q].concat(l($.points)))}}]),D}();i.Prepend=A},function(s,i,n){"use strict";var l=n(42),c=n(0),a=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.Objects=void 0;var b=n(5),w=n(2),_=n(10),T=n(12),x=n(3),M=function(){function A(D){c(this,A),this.config=x.default.rawTree(D)}return a(A,[{key:"format",value:function(E){if(T.DataFrame.isDataFrame(E)){for(var $=this.seriesToObjects(E.series[0]),Y=1;Y<E.series.length;Y+=1)for(var G=this.seriesToObjects(E.series[Y]),le=0;le<$.length;le+=1)$[le]=b.merge($[le],G[le]);return $}if(_.DataSeries.isDataSeries(E))return this.seriesToObjects(E);if(w.DataPoint.isDataPoint(E))return[l({},E.field,E.getRawValue())];throw new Error("'objects' formatter only allowed on DataFrame, DataPoint, or DataSeries")}},{key:"seriesToObjects",value:function(E){var $=this;return E.points.reduce(function(Y,G){var le=G.field;return $.config&&$.config.rename&&(le=$.config.rename[le]||le),Y.push(l({},le,G.getRawValue())),Y},[])}}]),A}();i.Objects=M},function(s,i){s.exports=_l()},function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.MultiFormat=void 0;var a=n(23),b=n(3),w=function(){function _(T){l(this,_),this.config=b.default.rawTree(T)}return c(_,[{key:"format",value:function(x){var M=this,A=x.seriesByName(this.config.nameField),D=x.seriesByName(this.config.valueField);return A.points.map(function(E,$){var Y=M.config.formatters[E.getRawValue()],G=Y.type,le=Y.config,K=a.formatterClasses[G],F=D.pointByIndex($);if(!K)throw new Error('unknown formatter type "'.concat(G,'" was specified'));return new K(le).format(F,D)})}}]),_}();i.MultiFormat=w},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(Y){var G=T();return function(){var K=w(Y),F;if(G){var Q=w(this).constructor;F=Reflect.construct(K,arguments,Q)}else F=K.apply(this,arguments);return b(this,F)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.MaxContrast=void 0;var x=n(21),M=n(5),A=n(16),D=n(9),E=n(3),$=function(Y){a(le,Y);var G=_(le);function le(K){var F;return l(this,le),F=G.call(this),F.config=E.default.rawTree(K),F}return c(le,[{key:"formatTypedValue",value:function(F){var Q=F.getValue(),L=Q.value,k=Q.type;if(k!=="color"||!A.isColor(L))return{type:k,value:L};var re=M.get(this,"config.colors"),de=M.get(this,"config.default");if(!Array.isArray(re)||re.length===0)return A.isColor(de)?{type:"color",value:de}:{type:k,value:L};if(L==="transparent"&&A.isColor(de))return{type:"color",value:de};try{return{type:"color",value:M.chain(re).map(function(Ie){return{color:Ie,contrast:x.contrast(L,Ie)}}).maxBy("contrast").value().color}}catch(Ie){return console.warn(Ie),{type:"color",value:de||L}}}}]),le}(D.AbstractFormatter);i.MaxContrast=$},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(46),b=n(6),w=n(7),_=n(8);function T(E){var $=x();return function(){var G=_(E),le;if($){var K=_(this).constructor;le=Reflect.construct(G,arguments,K)}else le=G.apply(this,arguments);return w(this,le)}}function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.RenameSeries=void 0;var M=n(2),A=n(47),D=function(E){b(Y,E);var $=T(Y);function Y(G){var le;return l(this,Y),le=$.call(this,G),le.newFieldName=G,le}return c(Y,[{key:"formatPoint",value:function(le,K){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return F===0&&typeof this.newFieldName=="string"&&this.newFieldName.length>0?new M.DataPoint(this.newFieldName,this.formatTypedValue(le,K,F,Q)):a(_(Y.prototype),"formatPoint",this).call(this,le,K,F,Q)}}]),Y}(A.Default);i.RenameSeries=D},function(s,i){s.exports=y_()},function(s,i,n){"use strict";var l=n(0),c=n(1),a=n(6),b=n(7),w=n(8);function _(E){var $=T();return function(){var G=w(E),le;if($){var K=w(this).constructor;le=Reflect.construct(G,arguments,K)}else le=G.apply(this,arguments);return b(this,le)}}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.Default=void 0;var x=n(9),M=n(3),A=n(11),D=function(E){a(Y,E);var $=_(Y);function Y(G){var le;return l(this,Y),le=$.call(this),le.defaultVal=M.default.rawTree(G),le}return c(Y,[{key:"formatTypedValue",value:function(le,K){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return le.getRawValue()===void 0?A.TypeSafeValue.fromRaw(this.defaultVal):le.getValue()}}]),Y}(x.AbstractFormatter);i.Default=D},,,,function(s,i,n){"use strict";var l=n(0),c=n(1);Object.defineProperty(i,"__esModule",{value:!0}),i.Options=void 0;var a=n(5),b=n(12),w=n(3),_=function(){function T(){l(this,T)}return c(T,null,[{key:"evaluate",value:function(M,A,D){var E=a.mapValues(A,function($){return b.DataFrame.fromJsonCols($)});return new w.default().executeOptions(M,E,D)}}]),T}();i.Options=_}])});var Uc=Xt((qO,d1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */d1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=52)}({1:function(s,i){s.exports=Wr()},22:function(s,i,n){"use strict";n.r(i),n.d(i,"createTestSchema",function(){return l}),n.d(i,"TOKEN_PATTERN",function(){return b}),n.d(i,"rgbColorPattern",function(){return w}),n.d(i,"rgbaColorPattern",function(){return _}),n.d(i,"colorPattern",function(){return T}),n.d(i,"colorPatternWithRGBA",function(){return x}),n.d(i,"COLOR_OR_TOKEN_PATTERN",function(){return M}),n.d(i,"COLOR_OR_TOKEN_PATTERN_WITH_RGBA",function(){return A}),n.d(i,"DYNAMIC_OPTIONS_DSL_PATTERN",function(){return D}),n.d(i,"getPattern",function(){return E}),i.default={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var l=function(Y){return{$schema:"http://json-schema.org/draft-07/schema#",$id:"http://www.splunk.com/dashboard.schema.json",title:"Dashboard Definition",description:"Dashboard Definition",type:"object",properties:Y}},c=/(\w+:)?/.source,a=/([^$|:]+?)(\|[|\w]+)?/.source,b=/\$/.source+c+a+/\$/.source,w=/^rgb\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,_=/^rgba\(\s*(\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d*(?:\.\d+)?)\)$/,T="^#[0-9a-fA-F]{6}$|transparent",x="".concat(T,"|").concat(w.source,"|").concat(_.source),M="".concat(T,"|").concat(b),A="".concat(x,"|").concat(b),D=/^>.*/.source,E=function(Y){return Y.reduce(function(G,le){return"".concat(G,"|^").concat(le,"$")},b)}},23:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=["transparent","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]},29:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.sanitizeArrayOfColors=i.isArrayOfColors=i.isColor=void 0;var l=n(22),c=n(23);function a(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(typeof _!="string")return!1;if(_.charAt(0)==="#")return _=_.substring(1),[3,4,6,8].indexOf(_.length)>-1&&!Number.isNaN(parseInt(_,16));var T=_.trim();return l.rgbColorPattern.test(T)||l.rgbaColorPattern.test(T)?!0:c.default.includes(_.toLowerCase())}i.isColor=a;var b=function(T){return Array.isArray(T)&&T.every(a)};i.isArrayOfColors=b;var w=function(T,x){return T.map(function(M){return a(M)?M:x})};i.sanitizeArrayOfColors=w},3:function(s,i){s.exports=zr()},52:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.withSanitizedProps=i.sanitize=void 0;var l=n(1),c=n(3),a=n(29),b={backgroundColor:a.isColor,deltaColor:a.isColor,trendColor:a.isColor,fontColor:a.isColor,fillColor:a.isColor,gaugeColor:a.isColor,majorColor:a.isColor,radialBackgroundColor:a.isColor,radialStrokeColor:a.isColor,sparklineFillColor:a.isColor,sparklineStrokeColor:a.isColor,strokeColor:a.isColor,strokeHighlightColor:a.isColor,headerBackgroundColor:a.isColor,rowBackgroundColorOdd:a.isColor,rowBackgroundColorEven:a.isColor,headerTextColor:a.isColor,rowTextColorOdd:a.isColor,rowTextColorEven:a.isColor,color:a.isColor,textColor:a.isColor,defaultFontColor:a.isColor,defaultBlockFontColor:a.isColor,sparklineAreaColor:a.isColor,iconColor:a.isColor,areaColor:a.isColor,nodeColor:a.isColor,nodeHighlightColor:a.isColor,linkColor:a.isColor,nodeTextColor:a.isColor,nodeTextHighlightColor:a.isColor};function w(x,M){var A=Object.prototype.hasOwnProperty;return A.call(b,x)?b[x](M):!0}function _(x){return Object.keys(x).reduce(function(M,A){return A==="options"&&c.isPlainObject(x.options)?M[A]=_(x.options):w(A,x[A])&&(M[A]=x[A]),M},{})}i.sanitize=_;function T(x){var M=function(D){var E=_(D);return l.createElement(x,Object.assign({},E))};return M}i.withSanitizedProps=T}})});var p1=Xt((QO,f1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */f1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=29)}({29:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.testTileConfig=i.MapContextConsumer=i.MapContextProvider=void 0;var l=n(7),c=l.createContext({defaultTileConfig:[]});c.displayName="data-splunk-visualization-version-MapContext-".concat("25.3.6 - 6b2578d73"),i.MapContextProvider=c.Provider,i.MapContextConsumer=c.Consumer,i.default=c,i.testTileConfig=[{name:"Carto Base Map - Light",key:"carto.base.map.light",theme:"light",sources:{"base-tiles":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"base-layer",type:"raster",source:"base-tiles",minzoom:0,maxzoom:12}]},{name:"Cart Base Map - dark",key:"carto.base.map.dark",theme:"dark",sources:{"base-tiles":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"base-layer",type:"raster",source:"base-tiles",minzoom:0,maxzoom:12}]}]},7:function(s,i){s.exports=Wr()}})});var Df=Xt(($c,m1)=>{(function(s,i){typeof $c=="object"&&typeof m1!="undefined"?i($c):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis!="undefined"?globalThis:s||self,i(s.d3=s.d3||{}))})($c,function(s){"use strict";function i(B,V){return B<V?-1:B>V?1:B>=V?0:NaN}function n(B){let V=B,U=B;B.length===1&&(V=(Ne,Pt)=>B(Ne)-Pt,U=l(B));function ee(Ne,Pt,At,jt){for(At==null&&(At=0),jt==null&&(jt=Ne.length);At<jt;){let $t=At+jt>>>1;U(Ne[$t],Pt)<0?At=$t+1:jt=$t}return At}function ue(Ne,Pt,At,jt){for(At==null&&(At=0),jt==null&&(jt=Ne.length);At<jt;){let $t=At+jt>>>1;U(Ne[$t],Pt)>0?jt=$t:At=$t+1}return At}function Te(Ne,Pt,At,jt){At==null&&(At=0),jt==null&&(jt=Ne.length);let $t=ee(Ne,Pt,At,jt-1);return $t>At&&V(Ne[$t-1],Pt)>-V(Ne[$t],Pt)?$t-1:$t}return{left:ee,center:Te,right:ue}}function l(B){return(V,U)=>i(B(V),U)}function c(B){return B===null?NaN:+B}function*a(B,V){if(V===void 0)for(let U of B)U!=null&&(U=+U)>=U&&(yield U);else{let U=-1;for(let ee of B)(ee=V(ee,++U,B))!=null&&(ee=+ee)>=ee&&(yield ee)}}let b=n(i),w=b.right,_=b.left,T=n(c).center;function x(B,V){let U=0;if(V===void 0)for(let ee of B)ee!=null&&(ee=+ee)>=ee&&++U;else{let ee=-1;for(let ue of B)(ue=V(ue,++ee,B))!=null&&(ue=+ue)>=ue&&++U}return U}function M(B){return B.length|0}function A(B){return!(B>0)}function D(B){return typeof B!="object"||"length"in B?B:Array.from(B)}function E(B){return V=>B(...V)}function $(...B){let V=typeof B[B.length-1]=="function"&&E(B.pop());B=B.map(D);let U=B.map(M),ee=B.length-1,ue=new Array(ee+1).fill(0),Te=[];if(ee<0||U.some(A))return Te;for(;;){Te.push(ue.map((Pt,At)=>B[At][Pt]));let Ne=ee;for(;++ue[Ne]===U[Ne];){if(Ne===0)return V?Te.map(V):Te;ue[Ne--]=0}}}function Y(B,V){var U=0,ee=0;return Float64Array.from(B,V===void 0?ue=>U+=+ue||0:ue=>U+=+V(ue,ee++,B)||0)}function G(B,V){return V<B?-1:V>B?1:V>=B?0:NaN}function le(B,V){let U=0,ee,ue=0,Te=0;if(V===void 0)for(let Ne of B)Ne!=null&&(Ne=+Ne)>=Ne&&(ee=Ne-ue,ue+=ee/++U,Te+=ee*(Ne-ue));else{let Ne=-1;for(let Pt of B)(Pt=V(Pt,++Ne,B))!=null&&(Pt=+Pt)>=Pt&&(ee=Pt-ue,ue+=ee/++U,Te+=ee*(Pt-ue))}if(U>1)return Te/(U-1)}function K(B,V){let U=le(B,V);return U&&Math.sqrt(U)}function F(B,V){let U,ee;if(V===void 0)for(let ue of B)ue!=null&&(U===void 0?ue>=ue&&(U=ee=ue):(U>ue&&(U=ue),ee<ue&&(ee=ue)));else{let ue=-1;for(let Te of B)(Te=V(Te,++ue,B))!=null&&(U===void 0?Te>=Te&&(U=ee=Te):(U>Te&&(U=Te),ee<Te&&(ee=Te)))}return[U,ee]}class Q{constructor(){this._partials=new Float64Array(32),this._n=0}add(V){let U=this._partials,ee=0;for(let ue=0;ue<this._n&&ue<32;ue++){let Te=U[ue],Ne=V+Te,Pt=Math.abs(V)<Math.abs(Te)?V-(Ne-Te):Te-(Ne-V);Pt&&(U[ee++]=Pt),V=Ne}return U[ee]=V,this._n=ee+1,this}valueOf(){let V=this._partials,U=this._n,ee,ue,Te,Ne=0;if(U>0){for(Ne=V[--U];U>0&&(ee=Ne,ue=V[--U],Ne=ee+ue,Te=ue-(Ne-ee),!Te););U>0&&(Te<0&&V[U-1]<0||Te>0&&V[U-1]>0)&&(ue=Te*2,ee=Ne+ue,ue==ee-Ne&&(Ne=ee))}return Ne}}function L(B,V){let U=new Q;if(V===void 0)for(let ee of B)(ee=+ee)&&U.add(ee);else{let ee=-1;for(let ue of B)(ue=+V(ue,++ee,B))&&U.add(ue)}return+U}function k(B,V){let U=new Q,ee=-1;return Float64Array.from(B,V===void 0?ue=>U.add(+ue||0):ue=>U.add(+V(ue,++ee,B)||0))}class re extends Map{constructor(V,U=tt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:U}}),V!=null)for(let[ee,ue]of V)this.set(ee,ue)}get(V){return super.get(Ie(this,V))}has(V){return super.has(Ie(this,V))}set(V,U){return super.set(et(this,V),U)}delete(V){return super.delete(lt(this,V))}}class de extends Set{constructor(V,U=tt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:U}}),V!=null)for(let ee of V)this.add(ee)}has(V){return super.has(Ie(this,V))}add(V){return super.add(et(this,V))}delete(V){return super.delete(lt(this,V))}}function Ie({_intern:B,_key:V},U){let ee=V(U);return B.has(ee)?B.get(ee):U}function et({_intern:B,_key:V},U){let ee=V(U);return B.has(ee)?B.get(ee):(B.set(ee,U),U)}function lt({_intern:B,_key:V},U){let ee=V(U);return B.has(ee)&&(U=B.get(U),B.delete(ee)),U}function tt(B){return B!==null&&typeof B=="object"?B.valueOf():B}function je(B){return B}function Ee(B,...V){return $e(B,je,je,V)}function _e(B,...V){return $e(B,Array.from,je,V)}function te(B,V,...U){return $e(B,je,V,U)}function ce(B,V,...U){return $e(B,Array.from,V,U)}function Ae(B,...V){return $e(B,je,Ce,V)}function ke(B,...V){return $e(B,Array.from,Ce,V)}function Ce(B){if(B.length!==1)throw new Error("duplicate key");return B[0]}function $e(B,V,U,ee){return function ue(Te,Ne){if(Ne>=ee.length)return U(Te);let Pt=new re,At=ee[Ne++],jt=-1;for(let $t of Te){let Zt=At($t,++jt,Te),dr=Pt.get(Zt);dr?dr.push($t):Pt.set(Zt,[$t])}for(let[$t,Zt]of Pt)Pt.set($t,ue(Zt,Ne));return V(Pt)}(B,0)}function Ke(B,V){return Array.from(V,U=>B[U])}function Ve(B,...V){if(typeof B[Symbol.iterator]!="function")throw new TypeError("values is not iterable");B=Array.from(B);let[U=i]=V;if(U.length===1||V.length>1){let ee=Uint32Array.from(B,(ue,Te)=>Te);return V.length>1?(V=V.map(ue=>B.map(ue)),ee.sort((ue,Te)=>{for(let Ne of V){let Pt=i(Ne[ue],Ne[Te]);if(Pt)return Pt}})):(U=B.map(U),ee.sort((ue,Te)=>i(U[ue],U[Te]))),Ke(B,ee)}return B.sort(U)}function rt(B,V,U){return(V.length===1?Ve(te(B,V,U),([ee,ue],[Te,Ne])=>i(ue,Ne)||i(ee,Te)):Ve(Ee(B,U),([ee,ue],[Te,Ne])=>V(ue,Ne)||i(ee,Te))).map(([ee])=>ee)}var it=Array.prototype,dt=it.slice;function bt(B){return function(){return B}}var Wt=Math.sqrt(50),Ht=Math.sqrt(10),Jt=Math.sqrt(2);function Mt(B,V,U){var ee,ue=-1,Te,Ne,Pt;if(V=+V,B=+B,U=+U,B===V&&U>0)return[B];if((ee=V<B)&&(Te=B,B=V,V=Te),(Pt=oe(B,V,U))===0||!isFinite(Pt))return[];if(Pt>0){let At=Math.round(B/Pt),jt=Math.round(V/Pt);for(At*Pt<B&&++At,jt*Pt>V&&--jt,Ne=new Array(Te=jt-At+1);++ue<Te;)Ne[ue]=(At+ue)*Pt}else{Pt=-Pt;let At=Math.round(B*Pt),jt=Math.round(V*Pt);for(At/Pt<B&&++At,jt/Pt>V&&--jt,Ne=new Array(Te=jt-At+1);++ue<Te;)Ne[ue]=(At+ue)/Pt}return ee&&Ne.reverse(),Ne}function oe(B,V,U){var ee=(V-B)/Math.max(0,U),ue=Math.floor(Math.log(ee)/Math.LN10),Te=ee/Math.pow(10,ue);return ue>=0?(Te>=Wt?10:Te>=Ht?5:Te>=Jt?2:1)*Math.pow(10,ue):-Math.pow(10,-ue)/(Te>=Wt?10:Te>=Ht?5:Te>=Jt?2:1)}function Ye(B,V,U){var ee=Math.abs(V-B)/Math.max(0,U),ue=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)),Te=ee/ue;return Te>=Wt?ue*=10:Te>=Ht?ue*=5:Te>=Jt&&(ue*=2),V<B?-ue:ue}function st(B,V,U){let ee;for(;;){let ue=oe(B,V,U);if(ue===ee||ue===0||!isFinite(ue))return[B,V];ue>0?(B=Math.floor(B/ue)*ue,V=Math.ceil(V/ue)*ue):ue<0&&(B=Math.ceil(B*ue)/ue,V=Math.floor(V*ue)/ue),ee=ue}}function _t(B){return Math.ceil(Math.log(x(B))/Math.LN2)+1}function Ct(){var B=je,V=F,U=_t;function ee(ue){Array.isArray(ue)||(ue=Array.from(ue));var Te,Ne=ue.length,Pt,At=new Array(Ne);for(Te=0;Te<Ne;++Te)At[Te]=B(ue[Te],Te,ue);var jt=V(At),$t=jt[0],Zt=jt[1],dr=U(At,$t,Zt);if(!Array.isArray(dr)){let Tr=Zt,Zr=+dr;if(V===F&&([$t,Zt]=st($t,Zt,Zr)),dr=Mt($t,Zt,Zr),dr[dr.length-1]>=Zt)if(Tr>=Zt&&V===F){let Ar=oe($t,Zt,Zr);isFinite(Ar)&&(Ar>0?Zt=(Math.floor(Zt/Ar)+1)*Ar:Ar<0&&(Zt=(Math.ceil(Zt*-Ar)+1)/-Ar))}else dr.pop()}for(var lr=dr.length;dr[0]<=$t;)dr.shift(),--lr;for(;dr[lr-1]>Zt;)dr.pop(),--lr;var yr=new Array(lr+1),xr;for(Te=0;Te<=lr;++Te)xr=yr[Te]=[],xr.x0=Te>0?dr[Te-1]:$t,xr.x1=Te<lr?dr[Te]:Zt;for(Te=0;Te<Ne;++Te)Pt=At[Te],$t<=Pt&&Pt<=Zt&&yr[w(dr,Pt,0,lr)].push(ue[Te]);return yr}return ee.value=function(ue){return arguments.length?(B=typeof ue=="function"?ue:bt(ue),ee):B},ee.domain=function(ue){return arguments.length?(V=typeof ue=="function"?ue:bt([ue[0],ue[1]]),ee):V},ee.thresholds=function(ue){return arguments.length?(U=typeof ue=="function"?ue:Array.isArray(ue)?bt(dt.call(ue)):bt(ue),ee):U},ee}function kt(B,V){let U;if(V===void 0)for(let ee of B)ee!=null&&(U<ee||U===void 0&&ee>=ee)&&(U=ee);else{let ee=-1;for(let ue of B)(ue=V(ue,++ee,B))!=null&&(U<ue||U===void 0&&ue>=ue)&&(U=ue)}return U}function ct(B,V){let U;if(V===void 0)for(let ee of B)ee!=null&&(U>ee||U===void 0&&ee>=ee)&&(U=ee);else{let ee=-1;for(let ue of B)(ue=V(ue,++ee,B))!=null&&(U>ue||U===void 0&&ue>=ue)&&(U=ue)}return U}function mt(B,V,U=0,ee=B.length-1,ue=i){for(;ee>U;){if(ee-U>600){let At=ee-U+1,jt=V-U+1,$t=Math.log(At),Zt=.5*Math.exp(2*$t/3),dr=.5*Math.sqrt($t*Zt*(At-Zt)/At)*(jt-At/2<0?-1:1),lr=Math.max(U,Math.floor(V-jt*Zt/At+dr)),yr=Math.min(ee,Math.floor(V+(At-jt)*Zt/At+dr));mt(B,V,lr,yr,ue)}let Te=B[V],Ne=U,Pt=ee;for(we(B,U,V),ue(B[ee],Te)>0&&we(B,U,ee);Ne<Pt;){for(we(B,Ne,Pt),++Ne,--Pt;ue(B[Ne],Te)<0;)++Ne;for(;ue(B[Pt],Te)>0;)--Pt}ue(B[U],Te)===0?we(B,U,Pt):(++Pt,we(B,Pt,ee)),Pt<=V&&(U=Pt+1),V<=Pt&&(ee=Pt-1)}return B}function we(B,V,U){let ee=B[V];B[V]=B[U],B[U]=ee}function me(B,V,U){if(B=Float64Array.from(a(B,U)),!!(ee=B.length)){if((V=+V)<=0||ee<2)return ct(B);if(V>=1)return kt(B);var ee,ue=(ee-1)*V,Te=Math.floor(ue),Ne=kt(mt(B,Te).subarray(0,Te+1)),Pt=ct(B.subarray(Te+1));return Ne+(Pt-Ne)*(ue-Te)}}function We(B,V,U=c){if(!!(ee=B.length)){if((V=+V)<=0||ee<2)return+U(B[0],0,B);if(V>=1)return+U(B[ee-1],ee-1,B);var ee,ue=(ee-1)*V,Te=Math.floor(ue),Ne=+U(B[Te],Te,B),Pt=+U(B[Te+1],Te+1,B);return Ne+(Pt-Ne)*(ue-Te)}}function Qe(B,V,U){return Math.ceil((U-V)/(2*(me(B,.75)-me(B,.25))*Math.pow(x(B),-1/3)))}function He(B,V,U){return Math.ceil((U-V)/(3.5*K(B)*Math.pow(x(B),-1/3)))}function fe(B,V){let U,ee=-1,ue=-1;if(V===void 0)for(let Te of B)++ue,Te!=null&&(U<Te||U===void 0&&Te>=Te)&&(U=Te,ee=ue);else for(let Te of B)(Te=V(Te,++ue,B))!=null&&(U<Te||U===void 0&&Te>=Te)&&(U=Te,ee=ue);return ee}function De(B,V){let U=0,ee=0;if(V===void 0)for(let ue of B)ue!=null&&(ue=+ue)>=ue&&(++U,ee+=ue);else{let ue=-1;for(let Te of B)(Te=V(Te,++ue,B))!=null&&(Te=+Te)>=Te&&(++U,ee+=Te)}if(U)return ee/U}function ft(B,V){return me(B,.5,V)}function*Rt(B){for(let V of B)yield*V}function Oe(B){return Array.from(Rt(B))}function qe(B,V){let U,ee=-1,ue=-1;if(V===void 0)for(let Te of B)++ue,Te!=null&&(U>Te||U===void 0&&Te>=Te)&&(U=Te,ee=ue);else for(let Te of B)(Te=V(Te,++ue,B))!=null&&(U>Te||U===void 0&&Te>=Te)&&(U=Te,ee=ue);return ee}function H(B,V=ae){let U=[],ee,ue=!1;for(let Te of B)ue&&U.push(V(ee,Te)),ee=Te,ue=!0;return U}function ae(B,V){return[B,V]}function ve(B,V,U){B=+B,V=+V,U=(ue=arguments.length)<2?(V=B,B=0,1):ue<3?1:+U;for(var ee=-1,ue=Math.max(0,Math.ceil((V-B)/U))|0,Te=new Array(ue);++ee<ue;)Te[ee]=B+ee*U;return Te}function N(B,V=i){let U,ee=!1;if(V.length===1){let ue;for(let Te of B){let Ne=V(Te);(ee?i(Ne,ue)<0:i(Ne,Ne)===0)&&(U=Te,ue=Ne,ee=!0)}}else for(let ue of B)(ee?V(ue,U)<0:V(ue,ue)===0)&&(U=ue,ee=!0);return U}function ie(B,V=i){if(V.length===1)return qe(B,V);let U,ee=-1,ue=-1;for(let Te of B)++ue,(ee<0?V(Te,Te)===0:V(Te,U)<0)&&(U=Te,ee=ue);return ee}function Ze(B,V=i){let U,ee=!1;if(V.length===1){let ue;for(let Te of B){let Ne=V(Te);(ee?i(Ne,ue)>0:i(Ne,Ne)===0)&&(U=Te,ue=Ne,ee=!0)}}else for(let ue of B)(ee?V(ue,U)>0:V(ue,ue)===0)&&(U=ue,ee=!0);return U}function X(B,V=i){if(V.length===1)return fe(B,V);let U,ee=-1,ue=-1;for(let Te of B)++ue,(ee<0?V(Te,Te)===0:V(Te,U)>0)&&(U=Te,ee=ue);return ee}function Le(B,V){let U=ie(B,V);return U<0?void 0:U}var ze=Je(Math.random);function Je(B){return function(U,ee=0,ue=U.length){let Te=ue-(ee=+ee);for(;Te;){let Ne=B()*Te--|0,Pt=U[Te+ee];U[Te+ee]=U[Ne+ee],U[Ne+ee]=Pt}return U}}function ot(B,V){let U=0;if(V===void 0)for(let ee of B)(ee=+ee)&&(U+=ee);else{let ee=-1;for(let ue of B)(ue=+V(ue,++ee,B))&&(U+=ue)}return U}function gt(B){if(!(Te=B.length))return[];for(var V=-1,U=ct(B,yt),ee=new Array(U);++V<U;)for(var ue=-1,Te,Ne=ee[V]=new Array(Te);++ue<Te;)Ne[ue]=B[ue][V];return ee}function yt(B){return B.length}function Lt(){return gt(arguments)}function Vt(B,V){if(typeof V!="function")throw new TypeError("test is not a function");let U=-1;for(let ee of B)if(!V(ee,++U,B))return!1;return!0}function zt(B,V){if(typeof V!="function")throw new TypeError("test is not a function");let U=-1;for(let ee of B)if(V(ee,++U,B))return!0;return!1}function Se(B,V){if(typeof V!="function")throw new TypeError("test is not a function");let U=[],ee=-1;for(let ue of B)V(ue,++ee,B)&&U.push(ue);return U}function Xe(B,V){if(typeof B[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof V!="function")throw new TypeError("mapper is not a function");return Array.from(B,(U,ee)=>V(U,ee,B))}function at(B,V,U){if(typeof V!="function")throw new TypeError("reducer is not a function");let ee=B[Symbol.iterator](),ue,Te,Ne=-1;if(arguments.length<3){if({done:ue,value:U}=ee.next(),ue)return;++Ne}for(;{done:ue,value:Te}=ee.next(),!ue;)U=V(U,Te,++Ne,B);return U}function Et(B){if(typeof B[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(B).reverse()}function pr(B,...V){B=new Set(B);for(let U of V)for(let ee of U)B.delete(ee);return B}function pe(B,V){let U=V[Symbol.iterator](),ee=new Set;for(let ue of B){if(ee.has(ue))return!1;let Te,Ne;for(;({value:Te,done:Ne}=U.next())&&!Ne;){if(Object.is(ue,Te))return!1;ee.add(Te)}}return!0}function R(B){return B instanceof Set?B:new Set(B)}function Z(B,...V){B=new Set(B),V=V.map(R);e:for(let U of B)for(let ee of V)if(!ee.has(U)){B.delete(U);continue e}return B}function he(B,V){let U=B[Symbol.iterator](),ee=new Set;for(let ue of V){if(ee.has(ue))continue;let Te,Ne;for(;{value:Te,done:Ne}=U.next();){if(Ne)return!1;if(ee.add(Te),Object.is(ue,Te))break}}return!0}function xe(B,V){return he(V,B)}function Fe(...B){let V=new Set;for(let U of B)for(let ee of U)V.add(ee);return V}s.Adder=Q,s.InternMap=re,s.InternSet=de,s.ascending=i,s.bin=Ct,s.bisect=w,s.bisectCenter=T,s.bisectLeft=_,s.bisectRight=w,s.bisector=n,s.count=x,s.cross=$,s.cumsum=Y,s.descending=G,s.deviation=K,s.difference=pr,s.disjoint=pe,s.every=Vt,s.extent=F,s.fcumsum=k,s.filter=Se,s.fsum=L,s.greatest=Ze,s.greatestIndex=X,s.group=Ee,s.groupSort=rt,s.groups=_e,s.histogram=Ct,s.index=Ae,s.indexes=ke,s.intersection=Z,s.least=N,s.leastIndex=ie,s.map=Xe,s.max=kt,s.maxIndex=fe,s.mean=De,s.median=ft,s.merge=Oe,s.min=ct,s.minIndex=qe,s.nice=st,s.pairs=H,s.permute=Ke,s.quantile=me,s.quantileSorted=We,s.quickselect=mt,s.range=ve,s.reduce=at,s.reverse=Et,s.rollup=te,s.rollups=ce,s.scan=Le,s.shuffle=ze,s.shuffler=Je,s.some=zt,s.sort=Ve,s.subset=xe,s.sum=ot,s.superset=he,s.thresholdFreedmanDiaconis=Qe,s.thresholdScott=He,s.thresholdSturges=_t,s.tickIncrement=oe,s.tickStep=Ye,s.ticks=Mt,s.transpose=gt,s.union=Fe,s.variance=le,s.zip=Lt,Object.defineProperty(s,"__esModule",{value:!0})})});var y1=Xt((Wc,g1)=>{(function(s,i){typeof Wc=="object"&&typeof g1!="undefined"?i(Wc):typeof define=="function"&&define.amd?define(["exports"],i):(s=s||self,i(s.d3=s.d3||{}))})(Wc,function(s){"use strict";function i(H,ae,ve){H.prototype=ae.prototype=ve,ve.constructor=H}function n(H,ae){var ve=Object.create(H.prototype);for(var N in ae)ve[N]=ae[N];return ve}function l(){}var c=.7,a=1/c,b="\\s*([+-]?\\d+)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T=/^#([0-9a-f]{3,8})$/,x=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),M=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),A=new RegExp("^rgba\\("+[b,b,b,w]+"\\)$"),D=new RegExp("^rgba\\("+[_,_,_,w]+"\\)$"),E=new RegExp("^hsl\\("+[w,_,_]+"\\)$"),$=new RegExp("^hsla\\("+[w,_,_,w]+"\\)$"),Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i(l,F,{copy:function(H){return Object.assign(new this.constructor,this,H)},displayable:function(){return this.rgb().displayable()},hex:G,formatHex:G,formatHsl:le,formatRgb:K,toString:K});function G(){return this.rgb().formatHex()}function le(){return je(this).formatHsl()}function K(){return this.rgb().formatRgb()}function F(H){var ae,ve;return H=(H+"").trim().toLowerCase(),(ae=T.exec(H))?(ve=ae[1].length,ae=parseInt(ae[1],16),ve===6?Q(ae):ve===3?new de(ae>>8&15|ae>>4&240,ae>>4&15|ae&240,(ae&15)<<4|ae&15,1):ve===8?L(ae>>24&255,ae>>16&255,ae>>8&255,(ae&255)/255):ve===4?L(ae>>12&15|ae>>8&240,ae>>8&15|ae>>4&240,ae>>4&15|ae&240,((ae&15)<<4|ae&15)/255):null):(ae=x.exec(H))?new de(ae[1],ae[2],ae[3],1):(ae=M.exec(H))?new de(ae[1]*255/100,ae[2]*255/100,ae[3]*255/100,1):(ae=A.exec(H))?L(ae[1],ae[2],ae[3],ae[4]):(ae=D.exec(H))?L(ae[1]*255/100,ae[2]*255/100,ae[3]*255/100,ae[4]):(ae=E.exec(H))?tt(ae[1],ae[2]/100,ae[3]/100,1):(ae=$.exec(H))?tt(ae[1],ae[2]/100,ae[3]/100,ae[4]):Y.hasOwnProperty(H)?Q(Y[H]):H==="transparent"?new de(NaN,NaN,NaN,0):null}function Q(H){return new de(H>>16&255,H>>8&255,H&255,1)}function L(H,ae,ve,N){return N<=0&&(H=ae=ve=NaN),new de(H,ae,ve,N)}function k(H){return H instanceof l||(H=F(H)),H?(H=H.rgb(),new de(H.r,H.g,H.b,H.opacity)):new de}function re(H,ae,ve,N){return arguments.length===1?k(H):new de(H,ae,ve,N==null?1:N)}function de(H,ae,ve,N){this.r=+H,this.g=+ae,this.b=+ve,this.opacity=+N}i(de,re,n(l,{brighter:function(H){return H=H==null?a:Math.pow(a,H),new de(this.r*H,this.g*H,this.b*H,this.opacity)},darker:function(H){return H=H==null?c:Math.pow(c,H),new de(this.r*H,this.g*H,this.b*H,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ie,formatHex:Ie,formatRgb:et,toString:et}));function Ie(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)}function et(){var H=this.opacity;return H=isNaN(H)?1:Math.max(0,Math.min(1,H)),(H===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(H===1?")":", "+H+")")}function lt(H){return H=Math.max(0,Math.min(255,Math.round(H)||0)),(H<16?"0":"")+H.toString(16)}function tt(H,ae,ve,N){return N<=0?H=ae=ve=NaN:ve<=0||ve>=1?H=ae=NaN:ae<=0&&(H=NaN),new _e(H,ae,ve,N)}function je(H){if(H instanceof _e)return new _e(H.h,H.s,H.l,H.opacity);if(H instanceof l||(H=F(H)),!H)return new _e;if(H instanceof _e)return H;H=H.rgb();var ae=H.r/255,ve=H.g/255,N=H.b/255,ie=Math.min(ae,ve,N),Ze=Math.max(ae,ve,N),X=NaN,Le=Ze-ie,ze=(Ze+ie)/2;return Le?(ae===Ze?X=(ve-N)/Le+(ve<N)*6:ve===Ze?X=(N-ae)/Le+2:X=(ae-ve)/Le+4,Le/=ze<.5?Ze+ie:2-Ze-ie,X*=60):Le=ze>0&&ze<1?0:X,new _e(X,Le,ze,H.opacity)}function Ee(H,ae,ve,N){return arguments.length===1?je(H):new _e(H,ae,ve,N==null?1:N)}function _e(H,ae,ve,N){this.h=+H,this.s=+ae,this.l=+ve,this.opacity=+N}i(_e,Ee,n(l,{brighter:function(H){return H=H==null?a:Math.pow(a,H),new _e(this.h,this.s,this.l*H,this.opacity)},darker:function(H){return H=H==null?c:Math.pow(c,H),new _e(this.h,this.s,this.l*H,this.opacity)},rgb:function(){var H=this.h%360+(this.h<0)*360,ae=isNaN(H)||isNaN(this.s)?0:this.s,ve=this.l,N=ve+(ve<.5?ve:1-ve)*ae,ie=2*ve-N;return new de(te(H>=240?H-240:H+120,ie,N),te(H,ie,N),te(H<120?H+240:H-120,ie,N),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var H=this.opacity;return H=isNaN(H)?1:Math.max(0,Math.min(1,H)),(H===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(H===1?")":", "+H+")")}}));function te(H,ae,ve){return(H<60?ae+(ve-ae)*H/60:H<180?ve:H<240?ae+(ve-ae)*(240-H)/60:ae)*255}let ce=Math.PI/180,Ae=180/Math.PI,ke=18,Ce=.96422,$e=1,Ke=.82521,Ve=4/29,rt=6/29,it=3*rt*rt,dt=rt*rt*rt;function bt(H){if(H instanceof Jt)return new Jt(H.l,H.a,H.b,H.opacity);if(H instanceof ct)return mt(H);H instanceof de||(H=k(H));var ae=st(H.r),ve=st(H.g),N=st(H.b),ie=Mt((.2225045*ae+.7168786*ve+.0606169*N)/$e),Ze,X;return ae===ve&&ve===N?Ze=X=ie:(Ze=Mt((.4360747*ae+.3850649*ve+.1430804*N)/Ce),X=Mt((.0139322*ae+.0971045*ve+.7141733*N)/Ke)),new Jt(116*ie-16,500*(Ze-ie),200*(ie-X),H.opacity)}function Wt(H,ae){return new Jt(H,0,0,ae==null?1:ae)}function Ht(H,ae,ve,N){return arguments.length===1?bt(H):new Jt(H,ae,ve,N==null?1:N)}function Jt(H,ae,ve,N){this.l=+H,this.a=+ae,this.b=+ve,this.opacity=+N}i(Jt,Ht,n(l,{brighter:function(H){return new Jt(this.l+ke*(H==null?1:H),this.a,this.b,this.opacity)},darker:function(H){return new Jt(this.l-ke*(H==null?1:H),this.a,this.b,this.opacity)},rgb:function(){var H=(this.l+16)/116,ae=isNaN(this.a)?H:H+this.a/500,ve=isNaN(this.b)?H:H-this.b/200;return ae=Ce*oe(ae),H=$e*oe(H),ve=Ke*oe(ve),new de(Ye(3.1338561*ae-1.6168667*H-.4906146*ve),Ye(-.9787684*ae+1.9161415*H+.033454*ve),Ye(.0719453*ae-.2289914*H+1.4052427*ve),this.opacity)}}));function Mt(H){return H>dt?Math.pow(H,1/3):H/it+Ve}function oe(H){return H>rt?H*H*H:it*(H-Ve)}function Ye(H){return 255*(H<=.0031308?12.92*H:1.055*Math.pow(H,1/2.4)-.055)}function st(H){return(H/=255)<=.04045?H/12.92:Math.pow((H+.055)/1.055,2.4)}function _t(H){if(H instanceof ct)return new ct(H.h,H.c,H.l,H.opacity);if(H instanceof Jt||(H=bt(H)),H.a===0&&H.b===0)return new ct(NaN,0<H.l&&H.l<100?0:NaN,H.l,H.opacity);var ae=Math.atan2(H.b,H.a)*Ae;return new ct(ae<0?ae+360:ae,Math.sqrt(H.a*H.a+H.b*H.b),H.l,H.opacity)}function Ct(H,ae,ve,N){return arguments.length===1?_t(H):new ct(ve,ae,H,N==null?1:N)}function kt(H,ae,ve,N){return arguments.length===1?_t(H):new ct(H,ae,ve,N==null?1:N)}function ct(H,ae,ve,N){this.h=+H,this.c=+ae,this.l=+ve,this.opacity=+N}function mt(H){if(isNaN(H.h))return new Jt(H.l,0,0,H.opacity);var ae=H.h*ce;return new Jt(H.l,Math.cos(ae)*H.c,Math.sin(ae)*H.c,H.opacity)}i(ct,kt,n(l,{brighter:function(H){return new ct(this.h,this.c,this.l+ke*(H==null?1:H),this.opacity)},darker:function(H){return new ct(this.h,this.c,this.l-ke*(H==null?1:H),this.opacity)},rgb:function(){return mt(this).rgb()}}));var we=-.14861,me=1.78277,We=-.29227,Qe=-.90649,He=1.97294,fe=He*Qe,De=He*me,ft=me*We-Qe*we;function Rt(H){if(H instanceof qe)return new qe(H.h,H.s,H.l,H.opacity);H instanceof de||(H=k(H));var ae=H.r/255,ve=H.g/255,N=H.b/255,ie=(ft*N+fe*ae-De*ve)/(ft+fe-De),Ze=N-ie,X=(He*(ve-ie)-We*Ze)/Qe,Le=Math.sqrt(X*X+Ze*Ze)/(He*ie*(1-ie)),ze=Le?Math.atan2(X,Ze)*Ae-120:NaN;return new qe(ze<0?ze+360:ze,Le,ie,H.opacity)}function Oe(H,ae,ve,N){return arguments.length===1?Rt(H):new qe(H,ae,ve,N==null?1:N)}function qe(H,ae,ve,N){this.h=+H,this.s=+ae,this.l=+ve,this.opacity=+N}i(qe,Oe,n(l,{brighter:function(H){return H=H==null?a:Math.pow(a,H),new qe(this.h,this.s,this.l*H,this.opacity)},darker:function(H){return H=H==null?c:Math.pow(c,H),new qe(this.h,this.s,this.l*H,this.opacity)},rgb:function(){var H=isNaN(this.h)?0:(this.h+120)*ce,ae=+this.l,ve=isNaN(this.s)?0:this.s*ae*(1-ae),N=Math.cos(H),ie=Math.sin(H);return new de(255*(ae+ve*(we*N+me*ie)),255*(ae+ve*(We*N+Qe*ie)),255*(ae+ve*(He*N)),this.opacity)}})),s.color=F,s.cubehelix=Oe,s.gray=Wt,s.hcl=kt,s.hsl=Ee,s.lab=Ht,s.lch=Ct,s.rgb=re,Object.defineProperty(s,"__esModule",{value:!0})})});var b1=Xt((Hc,v1)=>{(function(s,i){typeof Hc=="object"&&typeof v1!="undefined"?i(Hc,y1()):typeof define=="function"&&define.amd?define(["exports","d3-color"],i):(s=s||self,i(s.d3=s.d3||{},s.d3))})(Hc,function(s,i){"use strict";function n(we,me,We,Qe,He){var fe=we*we,De=fe*we;return((1-3*we+3*fe-De)*me+(4-6*fe+3*De)*We+(1+3*we+3*fe-3*De)*Qe+De*He)/6}function l(we){var me=we.length-1;return function(We){var Qe=We<=0?We=0:We>=1?(We=1,me-1):Math.floor(We*me),He=we[Qe],fe=we[Qe+1],De=Qe>0?we[Qe-1]:2*He-fe,ft=Qe<me-1?we[Qe+2]:2*fe-He;return n((We-Qe/me)*me,De,He,fe,ft)}}function c(we){var me=we.length;return function(We){var Qe=Math.floor(((We%=1)<0?++We:We)*me),He=we[(Qe+me-1)%me],fe=we[Qe%me],De=we[(Qe+1)%me],ft=we[(Qe+2)%me];return n((We-Qe/me)*me,He,fe,De,ft)}}var a=we=>()=>we;function b(we,me){return function(We){return we+We*me}}function w(we,me,We){return we=Math.pow(we,We),me=Math.pow(me,We)-we,We=1/We,function(Qe){return Math.pow(we+Qe*me,We)}}function _(we,me){var We=me-we;return We?b(we,We>180||We<-180?We-360*Math.round(We/360):We):a(isNaN(we)?me:we)}function T(we){return(we=+we)==1?x:function(me,We){return We-me?w(me,We,we):a(isNaN(me)?We:me)}}function x(we,me){var We=me-we;return We?b(we,We):a(isNaN(we)?me:we)}var M=function we(me){var We=T(me);function Qe(He,fe){var De=We((He=i.rgb(He)).r,(fe=i.rgb(fe)).r),ft=We(He.g,fe.g),Rt=We(He.b,fe.b),Oe=x(He.opacity,fe.opacity);return function(qe){return He.r=De(qe),He.g=ft(qe),He.b=Rt(qe),He.opacity=Oe(qe),He+""}}return Qe.gamma=we,Qe}(1);function A(we){return function(me){var We=me.length,Qe=new Array(We),He=new Array(We),fe=new Array(We),De,ft;for(De=0;De<We;++De)ft=i.rgb(me[De]),Qe[De]=ft.r||0,He[De]=ft.g||0,fe[De]=ft.b||0;return Qe=we(Qe),He=we(He),fe=we(fe),ft.opacity=1,function(Rt){return ft.r=Qe(Rt),ft.g=He(Rt),ft.b=fe(Rt),ft+""}}}var D=A(l),E=A(c);function $(we,me){me||(me=[]);var We=we?Math.min(me.length,we.length):0,Qe=me.slice(),He;return function(fe){for(He=0;He<We;++He)Qe[He]=we[He]*(1-fe)+me[He]*fe;return Qe}}function Y(we){return ArrayBuffer.isView(we)&&!(we instanceof DataView)}function G(we,me){return(Y(me)?$:le)(we,me)}function le(we,me){var We=me?me.length:0,Qe=we?Math.min(We,we.length):0,He=new Array(Qe),fe=new Array(We),De;for(De=0;De<Qe;++De)He[De]=et(we[De],me[De]);for(;De<We;++De)fe[De]=me[De];return function(ft){for(De=0;De<Qe;++De)fe[De]=He[De](ft);return fe}}function K(we,me){var We=new Date;return we=+we,me=+me,function(Qe){return We.setTime(we*(1-Qe)+me*Qe),We}}function F(we,me){return we=+we,me=+me,function(We){return we*(1-We)+me*We}}function Q(we,me){var We={},Qe={},He;(we===null||typeof we!="object")&&(we={}),(me===null||typeof me!="object")&&(me={});for(He in me)He in we?We[He]=et(we[He],me[He]):Qe[He]=me[He];return function(fe){for(He in We)Qe[He]=We[He](fe);return Qe}}var L=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k=new RegExp(L.source,"g");function re(we){return function(){return we}}function de(we){return function(me){return we(me)+""}}function Ie(we,me){var We=L.lastIndex=k.lastIndex=0,Qe,He,fe,De=-1,ft=[],Rt=[];for(we=we+"",me=me+"";(Qe=L.exec(we))&&(He=k.exec(me));)(fe=He.index)>We&&(fe=me.slice(We,fe),ft[De]?ft[De]+=fe:ft[++De]=fe),(Qe=Qe[0])===(He=He[0])?ft[De]?ft[De]+=He:ft[++De]=He:(ft[++De]=null,Rt.push({i:De,x:F(Qe,He)})),We=k.lastIndex;return We<me.length&&(fe=me.slice(We),ft[De]?ft[De]+=fe:ft[++De]=fe),ft.length<2?Rt[0]?de(Rt[0].x):re(me):(me=Rt.length,function(Oe){for(var qe=0,H;qe<me;++qe)ft[(H=Rt[qe]).i]=H.x(Oe);return ft.join("")})}function et(we,me){var We=typeof me,Qe;return me==null||We==="boolean"?a(me):(We==="number"?F:We==="string"?(Qe=i.color(me))?(me=Qe,M):Ie:me instanceof i.color?M:me instanceof Date?K:Y(me)?$:Array.isArray(me)?le:typeof me.valueOf!="function"&&typeof me.toString!="function"||isNaN(me)?Q:F)(we,me)}function lt(we){var me=we.length;return function(We){return we[Math.max(0,Math.min(me-1,Math.floor(We*me)))]}}function tt(we,me){var We=_(+we,+me);return function(Qe){var He=We(Qe);return He-360*Math.floor(He/360)}}function je(we,me){return we=+we,me=+me,function(We){return Math.round(we*(1-We)+me*We)}}var Ee=180/Math.PI,_e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function te(we,me,We,Qe,He,fe){var De,ft,Rt;return(De=Math.sqrt(we*we+me*me))&&(we/=De,me/=De),(Rt=we*We+me*Qe)&&(We-=we*Rt,Qe-=me*Rt),(ft=Math.sqrt(We*We+Qe*Qe))&&(We/=ft,Qe/=ft,Rt/=ft),we*Qe<me*We&&(we=-we,me=-me,Rt=-Rt,De=-De),{translateX:He,translateY:fe,rotate:Math.atan2(me,we)*Ee,skewX:Math.atan(Rt)*Ee,scaleX:De,scaleY:ft}}var ce;function Ae(we){let me=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(we+"");return me.isIdentity?_e:te(me.a,me.b,me.c,me.d,me.e,me.f)}function ke(we){return we==null||(ce||(ce=document.createElementNS("http://www.w3.org/2000/svg","g")),ce.setAttribute("transform",we),!(we=ce.transform.baseVal.consolidate()))?_e:(we=we.matrix,te(we.a,we.b,we.c,we.d,we.e,we.f))}function Ce(we,me,We,Qe){function He(Oe){return Oe.length?Oe.pop()+" ":""}function fe(Oe,qe,H,ae,ve,N){if(Oe!==H||qe!==ae){var ie=ve.push("translate(",null,me,null,We);N.push({i:ie-4,x:F(Oe,H)},{i:ie-2,x:F(qe,ae)})}else(H||ae)&&ve.push("translate("+H+me+ae+We)}function De(Oe,qe,H,ae){Oe!==qe?(Oe-qe>180?qe+=360:qe-Oe>180&&(Oe+=360),ae.push({i:H.push(He(H)+"rotate(",null,Qe)-2,x:F(Oe,qe)})):qe&&H.push(He(H)+"rotate("+qe+Qe)}function ft(Oe,qe,H,ae){Oe!==qe?ae.push({i:H.push(He(H)+"skewX(",null,Qe)-2,x:F(Oe,qe)}):qe&&H.push(He(H)+"skewX("+qe+Qe)}function Rt(Oe,qe,H,ae,ve,N){if(Oe!==H||qe!==ae){var ie=ve.push(He(ve)+"scale(",null,",",null,")");N.push({i:ie-4,x:F(Oe,H)},{i:ie-2,x:F(qe,ae)})}else(H!==1||ae!==1)&&ve.push(He(ve)+"scale("+H+","+ae+")")}return function(Oe,qe){var H=[],ae=[];return Oe=we(Oe),qe=we(qe),fe(Oe.translateX,Oe.translateY,qe.translateX,qe.translateY,H,ae),De(Oe.rotate,qe.rotate,H,ae),ft(Oe.skewX,qe.skewX,H,ae),Rt(Oe.scaleX,Oe.scaleY,qe.scaleX,qe.scaleY,H,ae),Oe=qe=null,function(ve){for(var N=-1,ie=ae.length,Ze;++N<ie;)H[(Ze=ae[N]).i]=Ze.x(ve);return H.join("")}}}var $e=Ce(Ae,"px, ","px)","deg)"),Ke=Ce(ke,", ",")",")"),Ve=1e-12;function rt(we){return((we=Math.exp(we))+1/we)/2}function it(we){return((we=Math.exp(we))-1/we)/2}function dt(we){return((we=Math.exp(2*we))-1)/(we+1)}var bt=function we(me,We,Qe){function He(fe,De){var ft=fe[0],Rt=fe[1],Oe=fe[2],qe=De[0],H=De[1],ae=De[2],ve=qe-ft,N=H-Rt,ie=ve*ve+N*N,Ze,X;if(ie<Ve)X=Math.log(ae/Oe)/me,Ze=function(yt){return[ft+yt*ve,Rt+yt*N,Oe*Math.exp(me*yt*X)]};else{var Le=Math.sqrt(ie),ze=(ae*ae-Oe*Oe+Qe*ie)/(2*Oe*We*Le),Je=(ae*ae-Oe*Oe-Qe*ie)/(2*ae*We*Le),ot=Math.log(Math.sqrt(ze*ze+1)-ze),gt=Math.log(Math.sqrt(Je*Je+1)-Je);X=(gt-ot)/me,Ze=function(yt){var Lt=yt*X,Vt=rt(ot),zt=Oe/(We*Le)*(Vt*dt(me*Lt+ot)-it(ot));return[ft+zt*ve,Rt+zt*N,Oe*Vt/rt(me*Lt+ot)]}}return Ze.duration=X*1e3*me/Math.SQRT2,Ze}return He.rho=function(fe){var De=Math.max(.001,+fe),ft=De*De,Rt=ft*ft;return we(De,ft,Rt)},He}(Math.SQRT2,2,4);function Wt(we){return function(me,We){var Qe=we((me=i.hsl(me)).h,(We=i.hsl(We)).h),He=x(me.s,We.s),fe=x(me.l,We.l),De=x(me.opacity,We.opacity);return function(ft){return me.h=Qe(ft),me.s=He(ft),me.l=fe(ft),me.opacity=De(ft),me+""}}}var Ht=Wt(_),Jt=Wt(x);function Mt(we,me){var We=x((we=i.lab(we)).l,(me=i.lab(me)).l),Qe=x(we.a,me.a),He=x(we.b,me.b),fe=x(we.opacity,me.opacity);return function(De){return we.l=We(De),we.a=Qe(De),we.b=He(De),we.opacity=fe(De),we+""}}function oe(we){return function(me,We){var Qe=we((me=i.hcl(me)).h,(We=i.hcl(We)).h),He=x(me.c,We.c),fe=x(me.l,We.l),De=x(me.opacity,We.opacity);return function(ft){return me.h=Qe(ft),me.c=He(ft),me.l=fe(ft),me.opacity=De(ft),me+""}}}var Ye=oe(_),st=oe(x);function _t(we){return function me(We){We=+We;function Qe(He,fe){var De=we((He=i.cubehelix(He)).h,(fe=i.cubehelix(fe)).h),ft=x(He.s,fe.s),Rt=x(He.l,fe.l),Oe=x(He.opacity,fe.opacity);return function(qe){return He.h=De(qe),He.s=ft(qe),He.l=Rt(Math.pow(qe,We)),He.opacity=Oe(qe),He+""}}return Qe.gamma=me,Qe}(1)}var Ct=_t(_),kt=_t(x);function ct(we,me){me===void 0&&(me=we,we=et);for(var We=0,Qe=me.length-1,He=me[0],fe=new Array(Qe<0?0:Qe);We<Qe;)fe[We]=we(He,He=me[++We]);return function(De){var ft=Math.max(0,Math.min(Qe-1,Math.floor(De*=Qe)));return fe[ft](De-ft)}}function mt(we,me){for(var We=new Array(me),Qe=0;Qe<me;++Qe)We[Qe]=we(Qe/(me-1));return We}s.interpolate=et,s.interpolateArray=G,s.interpolateBasis=l,s.interpolateBasisClosed=c,s.interpolateCubehelix=Ct,s.interpolateCubehelixLong=kt,s.interpolateDate=K,s.interpolateDiscrete=lt,s.interpolateHcl=Ye,s.interpolateHclLong=st,s.interpolateHsl=Ht,s.interpolateHslLong=Jt,s.interpolateHue=tt,s.interpolateLab=Mt,s.interpolateNumber=F,s.interpolateNumberArray=$,s.interpolateObject=Q,s.interpolateRgb=M,s.interpolateRgbBasis=D,s.interpolateRgbBasisClosed=E,s.interpolateRound=je,s.interpolateString=Ie,s.interpolateTransformCss=$e,s.interpolateTransformSvg=Ke,s.interpolateZoom=bt,s.piecewise=ct,s.quantize=mt,Object.defineProperty(s,"__esModule",{value:!0})})});var _1=Xt((Gc,x1)=>{(function(s,i){typeof Gc=="object"&&typeof x1!="undefined"?i(Gc):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis!="undefined"?globalThis:s||self,i(s.d3=s.d3||{}))})(Gc,function(s){"use strict";function i(k){return Math.abs(k=Math.round(k))>=1e21?k.toLocaleString("en").replace(/,/g,""):k.toString(10)}function n(k,re){if((de=(k=re?k.toExponential(re-1):k.toExponential()).indexOf("e"))<0)return null;var de,Ie=k.slice(0,de);return[Ie.length>1?Ie[0]+Ie.slice(2):Ie,+k.slice(de+1)]}function l(k){return k=n(Math.abs(k)),k?k[1]:NaN}function c(k,re){return function(de,Ie){for(var et=de.length,lt=[],tt=0,je=k[0],Ee=0;et>0&&je>0&&(Ee+je+1>Ie&&(je=Math.max(1,Ie-Ee)),lt.push(de.substring(et-=je,et+je)),!((Ee+=je+1)>Ie));)je=k[tt=(tt+1)%k.length];return lt.reverse().join(re)}}function a(k){return function(re){return re.replace(/[0-9]/g,function(de){return k[+de]})}}var b=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(k){if(!(re=b.exec(k)))throw new Error("invalid format: "+k);var re;return new _({fill:re[1],align:re[2],sign:re[3],symbol:re[4],zero:re[5],width:re[6],comma:re[7],precision:re[8]&&re[8].slice(1),trim:re[9],type:re[10]})}w.prototype=_.prototype;function _(k){this.fill=k.fill===void 0?" ":k.fill+"",this.align=k.align===void 0?">":k.align+"",this.sign=k.sign===void 0?"-":k.sign+"",this.symbol=k.symbol===void 0?"":k.symbol+"",this.zero=!!k.zero,this.width=k.width===void 0?void 0:+k.width,this.comma=!!k.comma,this.precision=k.precision===void 0?void 0:+k.precision,this.trim=!!k.trim,this.type=k.type===void 0?"":k.type+""}_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T(k){e:for(var re=k.length,de=1,Ie=-1,et;de<re;++de)switch(k[de]){case".":Ie=et=de;break;case"0":Ie===0&&(Ie=de),et=de;break;default:if(!+k[de])break e;Ie>0&&(Ie=0);break}return Ie>0?k.slice(0,Ie)+k.slice(et+1):k}var x;function M(k,re){var de=n(k,re);if(!de)return k+"";var Ie=de[0],et=de[1],lt=et-(x=Math.max(-8,Math.min(8,Math.floor(et/3)))*3)+1,tt=Ie.length;return lt===tt?Ie:lt>tt?Ie+new Array(lt-tt+1).join("0"):lt>0?Ie.slice(0,lt)+"."+Ie.slice(lt):"0."+new Array(1-lt).join("0")+n(k,Math.max(0,re+lt-1))[0]}function A(k,re){var de=n(k,re);if(!de)return k+"";var Ie=de[0],et=de[1];return et<0?"0."+new Array(-et).join("0")+Ie:Ie.length>et+1?Ie.slice(0,et+1)+"."+Ie.slice(et+1):Ie+new Array(et-Ie.length+2).join("0")}var D={"%":(k,re)=>(k*100).toFixed(re),b:k=>Math.round(k).toString(2),c:k=>k+"",d:i,e:(k,re)=>k.toExponential(re),f:(k,re)=>k.toFixed(re),g:(k,re)=>k.toPrecision(re),o:k=>Math.round(k).toString(8),p:(k,re)=>A(k*100,re),r:A,s:M,X:k=>Math.round(k).toString(16).toUpperCase(),x:k=>Math.round(k).toString(16)};function E(k){return k}var $=Array.prototype.map,Y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function G(k){var re=k.grouping===void 0||k.thousands===void 0?E:c($.call(k.grouping,Number),k.thousands+""),de=k.currency===void 0?"":k.currency[0]+"",Ie=k.currency===void 0?"":k.currency[1]+"",et=k.decimal===void 0?".":k.decimal+"",lt=k.numerals===void 0?E:a($.call(k.numerals,String)),tt=k.percent===void 0?"%":k.percent+"",je=k.minus===void 0?"\u2212":k.minus+"",Ee=k.nan===void 0?"NaN":k.nan+"";function _e(ce){ce=w(ce);var Ae=ce.fill,ke=ce.align,Ce=ce.sign,$e=ce.symbol,Ke=ce.zero,Ve=ce.width,rt=ce.comma,it=ce.precision,dt=ce.trim,bt=ce.type;bt==="n"?(rt=!0,bt="g"):D[bt]||(it===void 0&&(it=12),dt=!0,bt="g"),(Ke||Ae==="0"&&ke==="=")&&(Ke=!0,Ae="0",ke="=");var Wt=$e==="$"?de:$e==="#"&&/[boxX]/.test(bt)?"0"+bt.toLowerCase():"",Ht=$e==="$"?Ie:/[%p]/.test(bt)?tt:"",Jt=D[bt],Mt=/[defgprs%]/.test(bt);it=it===void 0?6:/[gprs]/.test(bt)?Math.max(1,Math.min(21,it)):Math.max(0,Math.min(20,it));function oe(Ye){var st=Wt,_t=Ht,Ct,kt,ct;if(bt==="c")_t=Jt(Ye)+_t,Ye="";else{Ye=+Ye;var mt=Ye<0||1/Ye<0;if(Ye=isNaN(Ye)?Ee:Jt(Math.abs(Ye),it),dt&&(Ye=T(Ye)),mt&&+Ye==0&&Ce!=="+"&&(mt=!1),st=(mt?Ce==="("?Ce:je:Ce==="-"||Ce==="("?"":Ce)+st,_t=(bt==="s"?Y[8+x/3]:"")+_t+(mt&&Ce==="("?")":""),Mt){for(Ct=-1,kt=Ye.length;++Ct<kt;)if(ct=Ye.charCodeAt(Ct),48>ct||ct>57){_t=(ct===46?et+Ye.slice(Ct+1):Ye.slice(Ct))+_t,Ye=Ye.slice(0,Ct);break}}}rt&&!Ke&&(Ye=re(Ye,1/0));var we=st.length+Ye.length+_t.length,me=we<Ve?new Array(Ve-we+1).join(Ae):"";switch(rt&&Ke&&(Ye=re(me+Ye,me.length?Ve-_t.length:1/0),me=""),ke){case"<":Ye=st+Ye+_t+me;break;case"=":Ye=st+me+Ye+_t;break;case"^":Ye=me.slice(0,we=me.length>>1)+st+Ye+_t+me.slice(we);break;default:Ye=me+st+Ye+_t;break}return lt(Ye)}return oe.toString=function(){return ce+""},oe}function te(ce,Ae){var ke=_e((ce=w(ce),ce.type="f",ce)),Ce=Math.max(-8,Math.min(8,Math.floor(l(Ae)/3)))*3,$e=Math.pow(10,-Ce),Ke=Y[8+Ce/3];return function(Ve){return ke($e*Ve)+Ke}}return{format:_e,formatPrefix:te}}var le;K({thousands:",",grouping:[3],currency:["$",""]});function K(k){return le=G(k),s.format=le.format,s.formatPrefix=le.formatPrefix,le}function F(k){return Math.max(0,-l(Math.abs(k)))}function Q(k,re){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(l(re)/3)))*3-l(Math.abs(k)))}function L(k,re){return k=Math.abs(k),re=Math.abs(re)-k,Math.max(0,l(re)-l(k))+1}s.FormatSpecifier=_,s.formatDefaultLocale=K,s.formatLocale=G,s.formatSpecifier=w,s.precisionFixed=F,s.precisionPrefix=Q,s.precisionRound=L,Object.defineProperty(s,"__esModule",{value:!0})})});var Af=Xt((Kc,w1)=>{(function(s,i){typeof Kc=="object"&&typeof w1!="undefined"?i(Kc,Df()):typeof define=="function"&&define.amd?define(["exports","d3-array"],i):(s=typeof globalThis!="undefined"?globalThis:s||self,i(s.d3=s.d3||{},s.d3))})(Kc,function(s,i){"use strict";var n=new Date,l=new Date;function c(N,ie,Ze,X){function Le(ze){return N(ze=arguments.length===0?new Date:new Date(+ze)),ze}return Le.floor=function(ze){return N(ze=new Date(+ze)),ze},Le.ceil=function(ze){return N(ze=new Date(ze-1)),ie(ze,1),N(ze),ze},Le.round=function(ze){var Je=Le(ze),ot=Le.ceil(ze);return ze-Je<ot-ze?Je:ot},Le.offset=function(ze,Je){return ie(ze=new Date(+ze),Je==null?1:Math.floor(Je)),ze},Le.range=function(ze,Je,ot){var gt=[],yt;if(ze=Le.ceil(ze),ot=ot==null?1:Math.floor(ot),!(ze<Je)||!(ot>0))return gt;do gt.push(yt=new Date(+ze)),ie(ze,ot),N(ze);while(yt<ze&&ze<Je);return gt},Le.filter=function(ze){return c(function(Je){if(Je>=Je)for(;N(Je),!ze(Je);)Je.setTime(Je-1)},function(Je,ot){if(Je>=Je)if(ot<0)for(;++ot<=0;)for(;ie(Je,-1),!ze(Je););else for(;--ot>=0;)for(;ie(Je,1),!ze(Je););})},Ze&&(Le.count=function(ze,Je){return n.setTime(+ze),l.setTime(+Je),N(n),N(l),Math.floor(Ze(n,l))},Le.every=function(ze){return ze=Math.floor(ze),!isFinite(ze)||!(ze>0)?null:ze>1?Le.filter(X?function(Je){return X(Je)%ze===0}:function(Je){return Le.count(0,Je)%ze===0}):Le}),Le}var a=c(function(){},function(N,ie){N.setTime(+N+ie)},function(N,ie){return ie-N});a.every=function(N){return N=Math.floor(N),!isFinite(N)||!(N>0)?null:N>1?c(function(ie){ie.setTime(Math.floor(ie/N)*N)},function(ie,Ze){ie.setTime(+ie+Ze*N)},function(ie,Ze){return(Ze-ie)/N}):a};var b=a.range;let w=1e3,_=w*60,T=_*60,x=T*24,M=x*7,A=x*30,D=x*365;var E=c(function(N){N.setTime(N-N.getMilliseconds())},function(N,ie){N.setTime(+N+ie*w)},function(N,ie){return(ie-N)/w},function(N){return N.getUTCSeconds()}),$=E.range,Y=c(function(N){N.setTime(N-N.getMilliseconds()-N.getSeconds()*w)},function(N,ie){N.setTime(+N+ie*_)},function(N,ie){return(ie-N)/_},function(N){return N.getMinutes()}),G=Y.range,le=c(function(N){N.setTime(N-N.getMilliseconds()-N.getSeconds()*w-N.getMinutes()*_)},function(N,ie){N.setTime(+N+ie*T)},function(N,ie){return(ie-N)/T},function(N){return N.getHours()}),K=le.range,F=c(N=>N.setHours(0,0,0,0),(N,ie)=>N.setDate(N.getDate()+ie),(N,ie)=>(ie-N-(ie.getTimezoneOffset()-N.getTimezoneOffset())*_)/x,N=>N.getDate()-1),Q=F.range;function L(N){return c(function(ie){ie.setDate(ie.getDate()-(ie.getDay()+7-N)%7),ie.setHours(0,0,0,0)},function(ie,Ze){ie.setDate(ie.getDate()+Ze*7)},function(ie,Ze){return(Ze-ie-(Ze.getTimezoneOffset()-ie.getTimezoneOffset())*_)/M})}var k=L(0),re=L(1),de=L(2),Ie=L(3),et=L(4),lt=L(5),tt=L(6),je=k.range,Ee=re.range,_e=de.range,te=Ie.range,ce=et.range,Ae=lt.range,ke=tt.range,Ce=c(function(N){N.setDate(1),N.setHours(0,0,0,0)},function(N,ie){N.setMonth(N.getMonth()+ie)},function(N,ie){return ie.getMonth()-N.getMonth()+(ie.getFullYear()-N.getFullYear())*12},function(N){return N.getMonth()}),$e=Ce.range,Ke=c(function(N){N.setMonth(0,1),N.setHours(0,0,0,0)},function(N,ie){N.setFullYear(N.getFullYear()+ie)},function(N,ie){return ie.getFullYear()-N.getFullYear()},function(N){return N.getFullYear()});Ke.every=function(N){return!isFinite(N=Math.floor(N))||!(N>0)?null:c(function(ie){ie.setFullYear(Math.floor(ie.getFullYear()/N)*N),ie.setMonth(0,1),ie.setHours(0,0,0,0)},function(ie,Ze){ie.setFullYear(ie.getFullYear()+Ze*N)})};var Ve=Ke.range,rt=c(function(N){N.setUTCSeconds(0,0)},function(N,ie){N.setTime(+N+ie*_)},function(N,ie){return(ie-N)/_},function(N){return N.getUTCMinutes()}),it=rt.range,dt=c(function(N){N.setUTCMinutes(0,0,0)},function(N,ie){N.setTime(+N+ie*T)},function(N,ie){return(ie-N)/T},function(N){return N.getUTCHours()}),bt=dt.range,Wt=c(function(N){N.setUTCHours(0,0,0,0)},function(N,ie){N.setUTCDate(N.getUTCDate()+ie)},function(N,ie){return(ie-N)/x},function(N){return N.getUTCDate()-1}),Ht=Wt.range;function Jt(N){return c(function(ie){ie.setUTCDate(ie.getUTCDate()-(ie.getUTCDay()+7-N)%7),ie.setUTCHours(0,0,0,0)},function(ie,Ze){ie.setUTCDate(ie.getUTCDate()+Ze*7)},function(ie,Ze){return(Ze-ie)/M})}var Mt=Jt(0),oe=Jt(1),Ye=Jt(2),st=Jt(3),_t=Jt(4),Ct=Jt(5),kt=Jt(6),ct=Mt.range,mt=oe.range,we=Ye.range,me=st.range,We=_t.range,Qe=Ct.range,He=kt.range,fe=c(function(N){N.setUTCDate(1),N.setUTCHours(0,0,0,0)},function(N,ie){N.setUTCMonth(N.getUTCMonth()+ie)},function(N,ie){return ie.getUTCMonth()-N.getUTCMonth()+(ie.getUTCFullYear()-N.getUTCFullYear())*12},function(N){return N.getUTCMonth()}),De=fe.range,ft=c(function(N){N.setUTCMonth(0,1),N.setUTCHours(0,0,0,0)},function(N,ie){N.setUTCFullYear(N.getUTCFullYear()+ie)},function(N,ie){return ie.getUTCFullYear()-N.getUTCFullYear()},function(N){return N.getUTCFullYear()});ft.every=function(N){return!isFinite(N=Math.floor(N))||!(N>0)?null:c(function(ie){ie.setUTCFullYear(Math.floor(ie.getUTCFullYear()/N)*N),ie.setUTCMonth(0,1),ie.setUTCHours(0,0,0,0)},function(ie,Ze){ie.setUTCFullYear(ie.getUTCFullYear()+Ze*N)})};var Rt=ft.range;function Oe(N,ie,Ze,X,Le,ze){let Je=[[E,1,w],[E,5,5*w],[E,15,15*w],[E,30,30*w],[ze,1,_],[ze,5,5*_],[ze,15,15*_],[ze,30,30*_],[Le,1,T],[Le,3,3*T],[Le,6,6*T],[Le,12,12*T],[X,1,x],[X,2,2*x],[Ze,1,M],[ie,1,A],[ie,3,3*A],[N,1,D]];function ot(yt,Lt,Vt){let zt=Lt<yt;zt&&([yt,Lt]=[Lt,yt]);let Se=Vt&&typeof Vt.range=="function"?Vt:gt(yt,Lt,Vt),Xe=Se?Se.range(yt,+Lt+1):[];return zt?Xe.reverse():Xe}function gt(yt,Lt,Vt){let zt=Math.abs(Lt-yt)/Vt,Se=i.bisector(([,,Et])=>Et).right(Je,zt);if(Se===Je.length)return N.every(i.tickStep(yt/D,Lt/D,Vt));if(Se===0)return a.every(Math.max(i.tickStep(yt,Lt,Vt),1));let[Xe,at]=Je[zt/Je[Se-1][2]<Je[Se][2]/zt?Se-1:Se];return Xe.every(at)}return[ot,gt]}let[qe,H]=Oe(ft,fe,Mt,Wt,dt,rt),[ae,ve]=Oe(Ke,Ce,k,F,le,Y);s.timeDay=F,s.timeDays=Q,s.timeFriday=lt,s.timeFridays=Ae,s.timeHour=le,s.timeHours=K,s.timeInterval=c,s.timeMillisecond=a,s.timeMilliseconds=b,s.timeMinute=Y,s.timeMinutes=G,s.timeMonday=re,s.timeMondays=Ee,s.timeMonth=Ce,s.timeMonths=$e,s.timeSaturday=tt,s.timeSaturdays=ke,s.timeSecond=E,s.timeSeconds=$,s.timeSunday=k,s.timeSundays=je,s.timeThursday=et,s.timeThursdays=ce,s.timeTickInterval=ve,s.timeTicks=ae,s.timeTuesday=de,s.timeTuesdays=_e,s.timeWednesday=Ie,s.timeWednesdays=te,s.timeWeek=k,s.timeWeeks=je,s.timeYear=Ke,s.timeYears=Ve,s.utcDay=Wt,s.utcDays=Ht,s.utcFriday=Ct,s.utcFridays=Qe,s.utcHour=dt,s.utcHours=bt,s.utcMillisecond=a,s.utcMilliseconds=b,s.utcMinute=rt,s.utcMinutes=it,s.utcMonday=oe,s.utcMondays=mt,s.utcMonth=fe,s.utcMonths=De,s.utcSaturday=kt,s.utcSaturdays=He,s.utcSecond=E,s.utcSeconds=$,s.utcSunday=Mt,s.utcSundays=ct,s.utcThursday=_t,s.utcThursdays=We,s.utcTickInterval=H,s.utcTicks=qe,s.utcTuesday=Ye,s.utcTuesdays=we,s.utcWednesday=st,s.utcWednesdays=me,s.utcWeek=Mt,s.utcWeeks=ct,s.utcYear=ft,s.utcYears=Rt,Object.defineProperty(s,"__esModule",{value:!0})})});var S1=Xt((Zc,C1)=>{(function(s,i){typeof Zc=="object"&&typeof C1!="undefined"?i(Zc,Af()):typeof define=="function"&&define.amd?define(["exports","d3-time"],i):(s=s||self,i(s.d3=s.d3||{},s.d3))})(Zc,function(s,i){"use strict";function n(Se){if(0<=Se.y&&Se.y<100){var Xe=new Date(-1,Se.m,Se.d,Se.H,Se.M,Se.S,Se.L);return Xe.setFullYear(Se.y),Xe}return new Date(Se.y,Se.m,Se.d,Se.H,Se.M,Se.S,Se.L)}function l(Se){if(0<=Se.y&&Se.y<100){var Xe=new Date(Date.UTC(-1,Se.m,Se.d,Se.H,Se.M,Se.S,Se.L));return Xe.setUTCFullYear(Se.y),Xe}return new Date(Date.UTC(Se.y,Se.m,Se.d,Se.H,Se.M,Se.S,Se.L))}function c(Se,Xe,at){return{y:Se,m:Xe,d:at,H:0,M:0,S:0,L:0}}function a(Se){var Xe=Se.dateTime,at=Se.date,Et=Se.time,pr=Se.periods,pe=Se.days,R=Se.shortDays,Z=Se.months,he=Se.shortMonths,xe=A(pr),Fe=D(pr),B=A(pe),V=D(pe),U=A(R),ee=D(R),ue=A(Z),Te=D(Z),Ne=A(he),Pt=D(he),At={a:Lr,A:Vi,b:io,B:To,c:null,d:ce,e:ce,f:Ke,g:Ye,G:_t,H:Ae,I:ke,j:Ce,L:$e,m:Ve,M:rt,p:vi,q:Bi,Q:Le,s:ze,S:it,u:dt,U:bt,V:Ht,w:Jt,W:Mt,x:null,X:null,y:oe,Y:st,Z:Ct,"%":X},jt={a:Ni,A:Ui,b:oo,B:Eo,c:null,d:kt,e:kt,f:We,g:ve,G:ie,H:ct,I:mt,j:we,L:me,m:Qe,M:He,p:Po,q:Aa,Q:Le,s:ze,S:fe,u:De,U:ft,V:Oe,w:qe,W:H,x:null,X:null,y:ae,Y:N,Z:Ze,"%":X},$t={a:xr,A:Tr,b:Zr,B:Ar,c:cn,d:re,e:re,f:je,g:F,G:K,H:Ie,I:Ie,j:de,L:tt,m:k,M:et,p:yr,q:L,Q:_e,s:te,S:lt,u:$,U:Y,V:G,w:E,W:le,x:In,X:Ai,y:F,Y:K,Z:Q,"%":Ee};At.x=Zt(at,At),At.X=Zt(Et,At),At.c=Zt(Xe,At),jt.x=Zt(at,jt),jt.X=Zt(Et,jt),jt.c=Zt(Xe,jt);function Zt(ur,Sr){return function(Or){var Kt=[],pn=-1,Rr=0,Sn=ur.length,vn,Wn,Yr;for(Or instanceof Date||(Or=new Date(+Or));++pn<Sn;)ur.charCodeAt(pn)===37&&(Kt.push(ur.slice(Rr,pn)),(Wn=b[vn=ur.charAt(++pn)])!=null?vn=ur.charAt(++pn):Wn=vn==="e"?" ":"0",(Yr=Sr[vn])&&(vn=Yr(Or,Wn)),Kt.push(vn),Rr=pn+1);return Kt.push(ur.slice(Rr,pn)),Kt.join("")}}function dr(ur,Sr){return function(Or){var Kt=c(1900,void 0,1),pn=lr(Kt,ur,Or+="",0),Rr,Sn;if(pn!=Or.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(Kt.s*1e3+("L"in Kt?Kt.L:0));if(Sr&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+Kt.p*12),Kt.m===void 0&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(Rr=l(c(Kt.y,0,1)),Sn=Rr.getUTCDay(),Rr=Sn>4||Sn===0?i.utcMonday.ceil(Rr):i.utcMonday(Rr),Rr=i.utcDay.offset(Rr,(Kt.V-1)*7),Kt.y=Rr.getUTCFullYear(),Kt.m=Rr.getUTCMonth(),Kt.d=Rr.getUTCDate()+(Kt.w+6)%7):(Rr=n(c(Kt.y,0,1)),Sn=Rr.getDay(),Rr=Sn>4||Sn===0?i.timeMonday.ceil(Rr):i.timeMonday(Rr),Rr=i.timeDay.offset(Rr,(Kt.V-1)*7),Kt.y=Rr.getFullYear(),Kt.m=Rr.getMonth(),Kt.d=Rr.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),Sn="Z"in Kt?l(c(Kt.y,0,1)).getUTCDay():n(c(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+Kt.W*7-(Sn+5)%7:Kt.w+Kt.U*7-(Sn+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,l(Kt)):n(Kt)}}function lr(ur,Sr,Or,Kt){for(var pn=0,Rr=Sr.length,Sn=Or.length,vn,Wn;pn<Rr;){if(Kt>=Sn)return-1;if(vn=Sr.charCodeAt(pn++),vn===37){if(vn=Sr.charAt(pn++),Wn=$t[vn in b?Sr.charAt(pn++):vn],!Wn||(Kt=Wn(ur,Or,Kt))<0)return-1}else if(vn!=Or.charCodeAt(Kt++))return-1}return Kt}function yr(ur,Sr,Or){var Kt=xe.exec(Sr.slice(Or));return Kt?(ur.p=Fe.get(Kt[0].toLowerCase()),Or+Kt[0].length):-1}function xr(ur,Sr,Or){var Kt=U.exec(Sr.slice(Or));return Kt?(ur.w=ee.get(Kt[0].toLowerCase()),Or+Kt[0].length):-1}function Tr(ur,Sr,Or){var Kt=B.exec(Sr.slice(Or));return Kt?(ur.w=V.get(Kt[0].toLowerCase()),Or+Kt[0].length):-1}function Zr(ur,Sr,Or){var Kt=Ne.exec(Sr.slice(Or));return Kt?(ur.m=Pt.get(Kt[0].toLowerCase()),Or+Kt[0].length):-1}function Ar(ur,Sr,Or){var Kt=ue.exec(Sr.slice(Or));return Kt?(ur.m=Te.get(Kt[0].toLowerCase()),Or+Kt[0].length):-1}function cn(ur,Sr,Or){return lr(ur,Xe,Sr,Or)}function In(ur,Sr,Or){return lr(ur,at,Sr,Or)}function Ai(ur,Sr,Or){return lr(ur,Et,Sr,Or)}function Lr(ur){return R[ur.getDay()]}function Vi(ur){return pe[ur.getDay()]}function io(ur){return he[ur.getMonth()]}function To(ur){return Z[ur.getMonth()]}function vi(ur){return pr[+(ur.getHours()>=12)]}function Bi(ur){return 1+~~(ur.getMonth()/3)}function Ni(ur){return R[ur.getUTCDay()]}function Ui(ur){return pe[ur.getUTCDay()]}function oo(ur){return he[ur.getUTCMonth()]}function Eo(ur){return Z[ur.getUTCMonth()]}function Po(ur){return pr[+(ur.getUTCHours()>=12)]}function Aa(ur){return 1+~~(ur.getUTCMonth()/3)}return{format:function(ur){var Sr=Zt(ur+="",At);return Sr.toString=function(){return ur},Sr},parse:function(ur){var Sr=dr(ur+="",!1);return Sr.toString=function(){return ur},Sr},utcFormat:function(ur){var Sr=Zt(ur+="",jt);return Sr.toString=function(){return ur},Sr},utcParse:function(ur){var Sr=dr(ur+="",!0);return Sr.toString=function(){return ur},Sr}}}var b={"-":"",_:" ",0:"0"},w=/^\s*\d+/,_=/^%/,T=/[\\^$*+?|[\]().{}]/g;function x(Se,Xe,at){var Et=Se<0?"-":"",pr=(Et?-Se:Se)+"",pe=pr.length;return Et+(pe<at?new Array(at-pe+1).join(Xe)+pr:pr)}function M(Se){return Se.replace(T,"\\$&")}function A(Se){return new RegExp("^(?:"+Se.map(M).join("|")+")","i")}function D(Se){return new Map(Se.map((Xe,at)=>[Xe.toLowerCase(),at]))}function E(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+1));return Et?(Se.w=+Et[0],at+Et[0].length):-1}function $(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+1));return Et?(Se.u=+Et[0],at+Et[0].length):-1}function Y(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.U=+Et[0],at+Et[0].length):-1}function G(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.V=+Et[0],at+Et[0].length):-1}function le(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.W=+Et[0],at+Et[0].length):-1}function K(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+4));return Et?(Se.y=+Et[0],at+Et[0].length):-1}function F(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.y=+Et[0]+(+Et[0]>68?1900:2e3),at+Et[0].length):-1}function Q(Se,Xe,at){var Et=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Xe.slice(at,at+6));return Et?(Se.Z=Et[1]?0:-(Et[2]+(Et[3]||"00")),at+Et[0].length):-1}function L(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+1));return Et?(Se.q=Et[0]*3-3,at+Et[0].length):-1}function k(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.m=Et[0]-1,at+Et[0].length):-1}function re(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.d=+Et[0],at+Et[0].length):-1}function de(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+3));return Et?(Se.m=0,Se.d=+Et[0],at+Et[0].length):-1}function Ie(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.H=+Et[0],at+Et[0].length):-1}function et(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.M=+Et[0],at+Et[0].length):-1}function lt(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+2));return Et?(Se.S=+Et[0],at+Et[0].length):-1}function tt(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+3));return Et?(Se.L=+Et[0],at+Et[0].length):-1}function je(Se,Xe,at){var Et=w.exec(Xe.slice(at,at+6));return Et?(Se.L=Math.floor(Et[0]/1e3),at+Et[0].length):-1}function Ee(Se,Xe,at){var Et=_.exec(Xe.slice(at,at+1));return Et?at+Et[0].length:-1}function _e(Se,Xe,at){var Et=w.exec(Xe.slice(at));return Et?(Se.Q=+Et[0],at+Et[0].length):-1}function te(Se,Xe,at){var Et=w.exec(Xe.slice(at));return Et?(Se.s=+Et[0],at+Et[0].length):-1}function ce(Se,Xe){return x(Se.getDate(),Xe,2)}function Ae(Se,Xe){return x(Se.getHours(),Xe,2)}function ke(Se,Xe){return x(Se.getHours()%12||12,Xe,2)}function Ce(Se,Xe){return x(1+i.timeDay.count(i.timeYear(Se),Se),Xe,3)}function $e(Se,Xe){return x(Se.getMilliseconds(),Xe,3)}function Ke(Se,Xe){return $e(Se,Xe)+"000"}function Ve(Se,Xe){return x(Se.getMonth()+1,Xe,2)}function rt(Se,Xe){return x(Se.getMinutes(),Xe,2)}function it(Se,Xe){return x(Se.getSeconds(),Xe,2)}function dt(Se){var Xe=Se.getDay();return Xe===0?7:Xe}function bt(Se,Xe){return x(i.timeSunday.count(i.timeYear(Se)-1,Se),Xe,2)}function Wt(Se){var Xe=Se.getDay();return Xe>=4||Xe===0?i.timeThursday(Se):i.timeThursday.ceil(Se)}function Ht(Se,Xe){return Se=Wt(Se),x(i.timeThursday.count(i.timeYear(Se),Se)+(i.timeYear(Se).getDay()===4),Xe,2)}function Jt(Se){return Se.getDay()}function Mt(Se,Xe){return x(i.timeMonday.count(i.timeYear(Se)-1,Se),Xe,2)}function oe(Se,Xe){return x(Se.getFullYear()%100,Xe,2)}function Ye(Se,Xe){return Se=Wt(Se),x(Se.getFullYear()%100,Xe,2)}function st(Se,Xe){return x(Se.getFullYear()%1e4,Xe,4)}function _t(Se,Xe){var at=Se.getDay();return Se=at>=4||at===0?i.timeThursday(Se):i.timeThursday.ceil(Se),x(Se.getFullYear()%1e4,Xe,4)}function Ct(Se){var Xe=Se.getTimezoneOffset();return(Xe>0?"-":(Xe*=-1,"+"))+x(Xe/60|0,"0",2)+x(Xe%60,"0",2)}function kt(Se,Xe){return x(Se.getUTCDate(),Xe,2)}function ct(Se,Xe){return x(Se.getUTCHours(),Xe,2)}function mt(Se,Xe){return x(Se.getUTCHours()%12||12,Xe,2)}function we(Se,Xe){return x(1+i.utcDay.count(i.utcYear(Se),Se),Xe,3)}function me(Se,Xe){return x(Se.getUTCMilliseconds(),Xe,3)}function We(Se,Xe){return me(Se,Xe)+"000"}function Qe(Se,Xe){return x(Se.getUTCMonth()+1,Xe,2)}function He(Se,Xe){return x(Se.getUTCMinutes(),Xe,2)}function fe(Se,Xe){return x(Se.getUTCSeconds(),Xe,2)}function De(Se){var Xe=Se.getUTCDay();return Xe===0?7:Xe}function ft(Se,Xe){return x(i.utcSunday.count(i.utcYear(Se)-1,Se),Xe,2)}function Rt(Se){var Xe=Se.getUTCDay();return Xe>=4||Xe===0?i.utcThursday(Se):i.utcThursday.ceil(Se)}function Oe(Se,Xe){return Se=Rt(Se),x(i.utcThursday.count(i.utcYear(Se),Se)+(i.utcYear(Se).getUTCDay()===4),Xe,2)}function qe(Se){return Se.getUTCDay()}function H(Se,Xe){return x(i.utcMonday.count(i.utcYear(Se)-1,Se),Xe,2)}function ae(Se,Xe){return x(Se.getUTCFullYear()%100,Xe,2)}function ve(Se,Xe){return Se=Rt(Se),x(Se.getUTCFullYear()%100,Xe,2)}function N(Se,Xe){return x(Se.getUTCFullYear()%1e4,Xe,4)}function ie(Se,Xe){var at=Se.getUTCDay();return Se=at>=4||at===0?i.utcThursday(Se):i.utcThursday.ceil(Se),x(Se.getUTCFullYear()%1e4,Xe,4)}function Ze(){return"+0000"}function X(){return"%"}function Le(Se){return+Se}function ze(Se){return Math.floor(+Se/1e3)}var Je;ot({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ot(Se){return Je=a(Se),s.timeFormat=Je.format,s.timeParse=Je.parse,s.utcFormat=Je.utcFormat,s.utcParse=Je.utcParse,Je}var gt="%Y-%m-%dT%H:%M:%S.%LZ";function yt(Se){return Se.toISOString()}var Lt=Date.prototype.toISOString?yt:s.utcFormat(gt);function Vt(Se){var Xe=new Date(Se);return isNaN(Xe)?null:Xe}var zt=+new Date("2000-01-01T00:00:00.000Z")?Vt:s.utcParse(gt);s.isoFormat=Lt,s.isoParse=zt,s.timeFormatDefaultLocale=ot,s.timeFormatLocale=a,Object.defineProperty(s,"__esModule",{value:!0})})});var E1=Xt((Yc,T1)=>{(function(s,i){typeof Yc=="object"&&typeof T1!="undefined"?i(Yc,Df(),b1(),_1(),Af(),S1()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-interpolate","d3-format","d3-time","d3-time-format"],i):(s=typeof globalThis!="undefined"?globalThis:s||self,i(s.d3=s.d3||{},s.d3,s.d3,s.d3,s.d3,s.d3))})(Yc,function(s,i,n,l,c,a){"use strict";function b(X,Le){switch(arguments.length){case 0:break;case 1:this.range(X);break;default:this.range(Le).domain(X);break}return this}function w(X,Le){switch(arguments.length){case 0:break;case 1:{typeof X=="function"?this.interpolator(X):this.range(X);break}default:{this.domain(X),typeof Le=="function"?this.interpolator(Le):this.range(Le);break}}return this}let _=Symbol("implicit");function T(){var X=new Map,Le=[],ze=[],Je=_;function ot(gt){var yt=gt+"",Lt=X.get(yt);if(!Lt){if(Je!==_)return Je;X.set(yt,Lt=Le.push(gt))}return ze[(Lt-1)%ze.length]}return ot.domain=function(gt){if(!arguments.length)return Le.slice();Le=[],X=new Map;for(let yt of gt){let Lt=yt+"";X.has(Lt)||X.set(Lt,Le.push(yt))}return ot},ot.range=function(gt){return arguments.length?(ze=Array.from(gt),ot):ze.slice()},ot.unknown=function(gt){return arguments.length?(Je=gt,ot):Je},ot.copy=function(){return T(Le,ze).unknown(Je)},b.apply(ot,arguments),ot}function x(){var X=T().unknown(void 0),Le=X.domain,ze=X.range,Je=0,ot=1,gt,yt,Lt=!1,Vt=0,zt=0,Se=.5;delete X.unknown;function Xe(){var at=Le().length,Et=ot<Je,pr=Et?ot:Je,pe=Et?Je:ot;gt=(pe-pr)/Math.max(1,at-Vt+zt*2),Lt&&(gt=Math.floor(gt)),pr+=(pe-pr-gt*(at-Vt))*Se,yt=gt*(1-Vt),Lt&&(pr=Math.round(pr),yt=Math.round(yt));var R=i.range(at).map(function(Z){return pr+gt*Z});return ze(Et?R.reverse():R)}return X.domain=function(at){return arguments.length?(Le(at),Xe()):Le()},X.range=function(at){return arguments.length?([Je,ot]=at,Je=+Je,ot=+ot,Xe()):[Je,ot]},X.rangeRound=function(at){return[Je,ot]=at,Je=+Je,ot=+ot,Lt=!0,Xe()},X.bandwidth=function(){return yt},X.step=function(){return gt},X.round=function(at){return arguments.length?(Lt=!!at,Xe()):Lt},X.padding=function(at){return arguments.length?(Vt=Math.min(1,zt=+at),Xe()):Vt},X.paddingInner=function(at){return arguments.length?(Vt=Math.min(1,at),Xe()):Vt},X.paddingOuter=function(at){return arguments.length?(zt=+at,Xe()):zt},X.align=function(at){return arguments.length?(Se=Math.max(0,Math.min(1,at)),Xe()):Se},X.copy=function(){return x(Le(),[Je,ot]).round(Lt).paddingInner(Vt).paddingOuter(zt).align(Se)},b.apply(Xe(),arguments)}function M(X){var Le=X.copy;return X.padding=X.paddingOuter,delete X.paddingInner,delete X.paddingOuter,X.copy=function(){return M(Le())},X}function A(){return M(x.apply(null,arguments).paddingInner(1))}function D(X){return function(){return X}}function E(X){return+X}var $=[0,1];function Y(X){return X}function G(X,Le){return(Le-=X=+X)?function(ze){return(ze-X)/Le}:D(isNaN(Le)?NaN:.5)}function le(X,Le){var ze;return X>Le&&(ze=X,X=Le,Le=ze),function(Je){return Math.max(X,Math.min(Le,Je))}}function K(X,Le,ze){var Je=X[0],ot=X[1],gt=Le[0],yt=Le[1];return ot<Je?(Je=G(ot,Je),gt=ze(yt,gt)):(Je=G(Je,ot),gt=ze(gt,yt)),function(Lt){return gt(Je(Lt))}}function F(X,Le,ze){var Je=Math.min(X.length,Le.length)-1,ot=new Array(Je),gt=new Array(Je),yt=-1;for(X[Je]<X[0]&&(X=X.slice().reverse(),Le=Le.slice().reverse());++yt<Je;)ot[yt]=G(X[yt],X[yt+1]),gt[yt]=ze(Le[yt],Le[yt+1]);return function(Lt){var Vt=i.bisect(X,Lt,1,Je)-1;return gt[Vt](ot[Vt](Lt))}}function Q(X,Le){return Le.domain(X.domain()).range(X.range()).interpolate(X.interpolate()).clamp(X.clamp()).unknown(X.unknown())}function L(){var X=$,Le=$,ze=n.interpolate,Je,ot,gt,yt=Y,Lt,Vt,zt;function Se(){var at=Math.min(X.length,Le.length);return yt!==Y&&(yt=le(X[0],X[at-1])),Lt=at>2?F:K,Vt=zt=null,Xe}function Xe(at){return at==null||isNaN(at=+at)?gt:(Vt||(Vt=Lt(X.map(Je),Le,ze)))(Je(yt(at)))}return Xe.invert=function(at){return yt(ot((zt||(zt=Lt(Le,X.map(Je),n.interpolateNumber)))(at)))},Xe.domain=function(at){return arguments.length?(X=Array.from(at,E),Se()):X.slice()},Xe.range=function(at){return arguments.length?(Le=Array.from(at),Se()):Le.slice()},Xe.rangeRound=function(at){return Le=Array.from(at),ze=n.interpolateRound,Se()},Xe.clamp=function(at){return arguments.length?(yt=at?!0:Y,Se()):yt!==Y},Xe.interpolate=function(at){return arguments.length?(ze=at,Se()):ze},Xe.unknown=function(at){return arguments.length?(gt=at,Xe):gt},function(at,Et){return Je=at,ot=Et,Se()}}function k(){return L()(Y,Y)}function re(X,Le,ze,Je){var ot=i.tickStep(X,Le,ze),gt;switch(Je=l.formatSpecifier(Je==null?",f":Je),Je.type){case"s":{var yt=Math.max(Math.abs(X),Math.abs(Le));return Je.precision==null&&!isNaN(gt=l.precisionPrefix(ot,yt))&&(Je.precision=gt),l.formatPrefix(Je,yt)}case"":case"e":case"g":case"p":case"r":{Je.precision==null&&!isNaN(gt=l.precisionRound(ot,Math.max(Math.abs(X),Math.abs(Le))))&&(Je.precision=gt-(Je.type==="e"));break}case"f":case"%":{Je.precision==null&&!isNaN(gt=l.precisionFixed(ot))&&(Je.precision=gt-(Je.type==="%")*2);break}}return l.format(Je)}function de(X){var Le=X.domain;return X.ticks=function(ze){var Je=Le();return i.ticks(Je[0],Je[Je.length-1],ze==null?10:ze)},X.tickFormat=function(ze,Je){var ot=Le();return re(ot[0],ot[ot.length-1],ze==null?10:ze,Je)},X.nice=function(ze){ze==null&&(ze=10);var Je=Le(),ot=0,gt=Je.length-1,yt=Je[ot],Lt=Je[gt],Vt,zt,Se=10;for(Lt<yt&&(zt=yt,yt=Lt,Lt=zt,zt=ot,ot=gt,gt=zt);Se-- >0;){if(zt=i.tickIncrement(yt,Lt,ze),zt===Vt)return Je[ot]=yt,Je[gt]=Lt,Le(Je);if(zt>0)yt=Math.floor(yt/zt)*zt,Lt=Math.ceil(Lt/zt)*zt;else if(zt<0)yt=Math.ceil(yt*zt)/zt,Lt=Math.floor(Lt*zt)/zt;else break;Vt=zt}return X},X}function Ie(){var X=k();return X.copy=function(){return Q(X,Ie())},b.apply(X,arguments),de(X)}function et(X){var Le;function ze(Je){return Je==null||isNaN(Je=+Je)?Le:Je}return ze.invert=ze,ze.domain=ze.range=function(Je){return arguments.length?(X=Array.from(Je,E),ze):X.slice()},ze.unknown=function(Je){return arguments.length?(Le=Je,ze):Le},ze.copy=function(){return et(X).unknown(Le)},X=arguments.length?Array.from(X,E):[0,1],de(ze)}function lt(X,Le){X=X.slice();var ze=0,Je=X.length-1,ot=X[ze],gt=X[Je],yt;return gt<ot&&(yt=ze,ze=Je,Je=yt,yt=ot,ot=gt,gt=yt),X[ze]=Le.floor(ot),X[Je]=Le.ceil(gt),X}function tt(X){return Math.log(X)}function je(X){return Math.exp(X)}function Ee(X){return-Math.log(-X)}function _e(X){return-Math.exp(-X)}function te(X){return isFinite(X)?+("1e"+X):X<0?0:X}function ce(X){return X===10?te:X===Math.E?Math.exp:function(Le){return Math.pow(X,Le)}}function Ae(X){return X===Math.E?Math.log:X===10&&Math.log10||X===2&&Math.log2||(X=Math.log(X),function(Le){return Math.log(Le)/X})}function ke(X){return function(Le){return-X(-Le)}}function Ce(X){var Le=X(tt,je),ze=Le.domain,Je=10,ot,gt;function yt(){return ot=Ae(Je),gt=ce(Je),ze()[0]<0?(ot=ke(ot),gt=ke(gt),X(Ee,_e)):X(tt,je),Le}return Le.base=function(Lt){return arguments.length?(Je=+Lt,yt()):Je},Le.domain=function(Lt){return arguments.length?(ze(Lt),yt()):ze()},Le.ticks=function(Lt){var Vt=ze(),zt=Vt[0],Se=Vt[Vt.length-1],Xe;(Xe=Se<zt)&&(at=zt,zt=Se,Se=at);var at=ot(zt),Et=ot(Se),pr,pe,R,Z=Lt==null?10:+Lt,he=[];if(!(Je%1)&&Et-at<Z){if(at=Math.floor(at),Et=Math.ceil(Et),zt>0){for(;at<=Et;++at)for(pe=1,pr=gt(at);pe<Je;++pe)if(R=pr*pe,!(R<zt)){if(R>Se)break;he.push(R)}}else for(;at<=Et;++at)for(pe=Je-1,pr=gt(at);pe>=1;--pe)if(R=pr*pe,!(R<zt)){if(R>Se)break;he.push(R)}he.length*2<Z&&(he=i.ticks(zt,Se,Z))}else he=i.ticks(at,Et,Math.min(Et-at,Z)).map(gt);return Xe?he.reverse():he},Le.tickFormat=function(Lt,Vt){if(Vt==null&&(Vt=Je===10?".0e":","),typeof Vt!="function"&&(Vt=l.format(Vt)),Lt===1/0)return Vt;Lt==null&&(Lt=10);var zt=Math.max(1,Je*Lt/Le.ticks().length);return function(Se){var Xe=Se/gt(Math.round(ot(Se)));return Xe*Je<Je-.5&&(Xe*=Je),Xe<=zt?Vt(Se):""}},Le.nice=function(){return ze(lt(ze(),{floor:function(Lt){return gt(Math.floor(ot(Lt)))},ceil:function(Lt){return gt(Math.ceil(ot(Lt)))}}))},Le}function $e(){var X=Ce(L()).domain([1,10]);return X.copy=function(){return Q(X,$e()).base(X.base())},b.apply(X,arguments),X}function Ke(X){return function(Le){return Math.sign(Le)*Math.log1p(Math.abs(Le/X))}}function Ve(X){return function(Le){return Math.sign(Le)*Math.expm1(Math.abs(Le))*X}}function rt(X){var Le=1,ze=X(Ke(Le),Ve(Le));return ze.constant=function(Je){return arguments.length?X(Ke(Le=+Je),Ve(Le)):Le},de(ze)}function it(){var X=rt(L());return X.copy=function(){return Q(X,it()).constant(X.constant())},b.apply(X,arguments)}function dt(X){return function(Le){return Le<0?-Math.pow(-Le,X):Math.pow(Le,X)}}function bt(X){return X<0?-Math.sqrt(-X):Math.sqrt(X)}function Wt(X){return X<0?-X*X:X*X}function Ht(X){var Le=X(Y,Y),ze=1;function Je(){return ze===1?X(Y,Y):ze===.5?X(bt,Wt):X(dt(ze),dt(1/ze))}return Le.exponent=function(ot){return arguments.length?(ze=+ot,Je()):ze},de(Le)}function Jt(){var X=Ht(L());return X.copy=function(){return Q(X,Jt()).exponent(X.exponent())},b.apply(X,arguments),X}function Mt(){return Jt.apply(null,arguments).exponent(.5)}function oe(X){return Math.sign(X)*X*X}function Ye(X){return Math.sign(X)*Math.sqrt(Math.abs(X))}function st(){var X=k(),Le=[0,1],ze=!1,Je;function ot(gt){var yt=Ye(X(gt));return isNaN(yt)?Je:ze?Math.round(yt):yt}return ot.invert=function(gt){return X.invert(oe(gt))},ot.domain=function(gt){return arguments.length?(X.domain(gt),ot):X.domain()},ot.range=function(gt){return arguments.length?(X.range((Le=Array.from(gt,E)).map(oe)),ot):Le.slice()},ot.rangeRound=function(gt){return ot.range(gt).round(!0)},ot.round=function(gt){return arguments.length?(ze=!!gt,ot):ze},ot.clamp=function(gt){return arguments.length?(X.clamp(gt),ot):X.clamp()},ot.unknown=function(gt){return arguments.length?(Je=gt,ot):Je},ot.copy=function(){return st(X.domain(),Le).round(ze).clamp(X.clamp()).unknown(Je)},b.apply(ot,arguments),de(ot)}function _t(){var X=[],Le=[],ze=[],Je;function ot(){var yt=0,Lt=Math.max(1,Le.length);for(ze=new Array(Lt-1);++yt<Lt;)ze[yt-1]=i.quantileSorted(X,yt/Lt);return gt}function gt(yt){return yt==null||isNaN(yt=+yt)?Je:Le[i.bisect(ze,yt)]}return gt.invertExtent=function(yt){var Lt=Le.indexOf(yt);return Lt<0?[NaN,NaN]:[Lt>0?ze[Lt-1]:X[0],Lt<ze.length?ze[Lt]:X[X.length-1]]},gt.domain=function(yt){if(!arguments.length)return X.slice();X=[];for(let Lt of yt)Lt!=null&&!isNaN(Lt=+Lt)&&X.push(Lt);return X.sort(i.ascending),ot()},gt.range=function(yt){return arguments.length?(Le=Array.from(yt),ot()):Le.slice()},gt.unknown=function(yt){return arguments.length?(Je=yt,gt):Je},gt.quantiles=function(){return ze.slice()},gt.copy=function(){return _t().domain(X).range(Le).unknown(Je)},b.apply(gt,arguments)}function Ct(){var X=0,Le=1,ze=1,Je=[.5],ot=[0,1],gt;function yt(Vt){return Vt!=null&&Vt<=Vt?ot[i.bisect(Je,Vt,0,ze)]:gt}function Lt(){var Vt=-1;for(Je=new Array(ze);++Vt<ze;)Je[Vt]=((Vt+1)*Le-(Vt-ze)*X)/(ze+1);return yt}return yt.domain=function(Vt){return arguments.length?([X,Le]=Vt,X=+X,Le=+Le,Lt()):[X,Le]},yt.range=function(Vt){return arguments.length?(ze=(ot=Array.from(Vt)).length-1,Lt()):ot.slice()},yt.invertExtent=function(Vt){var zt=ot.indexOf(Vt);return zt<0?[NaN,NaN]:zt<1?[X,Je[0]]:zt>=ze?[Je[ze-1],Le]:[Je[zt-1],Je[zt]]},yt.unknown=function(Vt){return arguments.length&&(gt=Vt),yt},yt.thresholds=function(){return Je.slice()},yt.copy=function(){return Ct().domain([X,Le]).range(ot).unknown(gt)},b.apply(de(yt),arguments)}function kt(){var X=[.5],Le=[0,1],ze,Je=1;function ot(gt){return gt!=null&&gt<=gt?Le[i.bisect(X,gt,0,Je)]:ze}return ot.domain=function(gt){return arguments.length?(X=Array.from(gt),Je=Math.min(X.length,Le.length-1),ot):X.slice()},ot.range=function(gt){return arguments.length?(Le=Array.from(gt),Je=Math.min(X.length,Le.length-1),ot):Le.slice()},ot.invertExtent=function(gt){var yt=Le.indexOf(gt);return[X[yt-1],X[yt]]},ot.unknown=function(gt){return arguments.length?(ze=gt,ot):ze},ot.copy=function(){return kt().domain(X).range(Le).unknown(ze)},b.apply(ot,arguments)}function ct(X){return new Date(X)}function mt(X){return X instanceof Date?+X:+new Date(+X)}function we(X,Le,ze,Je,ot,gt,yt,Lt,Vt,zt){var Se=k(),Xe=Se.invert,at=Se.domain,Et=zt(".%L"),pr=zt(":%S"),pe=zt("%I:%M"),R=zt("%I %p"),Z=zt("%a %d"),he=zt("%b %d"),xe=zt("%B"),Fe=zt("%Y");function B(V){return(Vt(V)<V?Et:Lt(V)<V?pr:yt(V)<V?pe:gt(V)<V?R:Je(V)<V?ot(V)<V?Z:he:ze(V)<V?xe:Fe)(V)}return Se.invert=function(V){return new Date(Xe(V))},Se.domain=function(V){return arguments.length?at(Array.from(V,mt)):at().map(ct)},Se.ticks=function(V){var U=at();return X(U[0],U[U.length-1],V==null?10:V)},Se.tickFormat=function(V,U){return U==null?B:zt(U)},Se.nice=function(V){var U=at();return(!V||typeof V.range!="function")&&(V=Le(U[0],U[U.length-1],V==null?10:V)),V?at(lt(U,V)):Se},Se.copy=function(){return Q(Se,we(X,Le,ze,Je,ot,gt,yt,Lt,Vt,zt))},Se}function me(){return b.apply(we(c.timeTicks,c.timeTickInterval,c.timeYear,c.timeMonth,c.timeWeek,c.timeDay,c.timeHour,c.timeMinute,c.timeSecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function We(){return b.apply(we(c.utcTicks,c.utcTickInterval,c.utcYear,c.utcMonth,c.utcWeek,c.utcDay,c.utcHour,c.utcMinute,c.utcSecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qe(){var X=0,Le=1,ze,Je,ot,gt,yt=Y,Lt=!1,Vt;function zt(Xe){return Xe==null||isNaN(Xe=+Xe)?Vt:yt(ot===0?.5:(Xe=(gt(Xe)-ze)*ot,Lt?Math.max(0,Math.min(1,Xe)):Xe))}zt.domain=function(Xe){return arguments.length?([X,Le]=Xe,ze=gt(X=+X),Je=gt(Le=+Le),ot=ze===Je?0:1/(Je-ze),zt):[X,Le]},zt.clamp=function(Xe){return arguments.length?(Lt=!!Xe,zt):Lt},zt.interpolator=function(Xe){return arguments.length?(yt=Xe,zt):yt};function Se(Xe){return function(at){var Et,pr;return arguments.length?([Et,pr]=at,yt=Xe(Et,pr),zt):[yt(0),yt(1)]}}return zt.range=Se(n.interpolate),zt.rangeRound=Se(n.interpolateRound),zt.unknown=function(Xe){return arguments.length?(Vt=Xe,zt):Vt},function(Xe){return gt=Xe,ze=Xe(X),Je=Xe(Le),ot=ze===Je?0:1/(Je-ze),zt}}function He(X,Le){return Le.domain(X.domain()).interpolator(X.interpolator()).clamp(X.clamp()).unknown(X.unknown())}function fe(){var X=de(Qe()(Y));return X.copy=function(){return He(X,fe())},w.apply(X,arguments)}function De(){var X=Ce(Qe()).domain([1,10]);return X.copy=function(){return He(X,De()).base(X.base())},w.apply(X,arguments)}function ft(){var X=rt(Qe());return X.copy=function(){return He(X,ft()).constant(X.constant())},w.apply(X,arguments)}function Rt(){var X=Ht(Qe());return X.copy=function(){return He(X,Rt()).exponent(X.exponent())},w.apply(X,arguments)}function Oe(){return Rt.apply(null,arguments).exponent(.5)}function qe(){var X=[],Le=Y;function ze(Je){if(Je!=null&&!isNaN(Je=+Je))return Le((i.bisect(X,Je,1)-1)/(X.length-1))}return ze.domain=function(Je){if(!arguments.length)return X.slice();X=[];for(let ot of Je)ot!=null&&!isNaN(ot=+ot)&&X.push(ot);return X.sort(i.ascending),ze},ze.interpolator=function(Je){return arguments.length?(Le=Je,ze):Le},ze.range=function(){return X.map((Je,ot)=>Le(ot/(X.length-1)))},ze.quantiles=function(Je){return Array.from({length:Je+1},(ot,gt)=>i.quantile(X,gt/Je))},ze.copy=function(){return qe(Le).domain(X)},w.apply(ze,arguments)}function H(){var X=0,Le=.5,ze=1,Je=1,ot,gt,yt,Lt,Vt,zt=Y,Se,Xe=!1,at;function Et(pe){return isNaN(pe=+pe)?at:(pe=.5+((pe=+Se(pe))-gt)*(Je*pe<Je*gt?Lt:Vt),zt(Xe?Math.max(0,Math.min(1,pe)):pe))}Et.domain=function(pe){return arguments.length?([X,Le,ze]=pe,ot=Se(X=+X),gt=Se(Le=+Le),yt=Se(ze=+ze),Lt=ot===gt?0:.5/(gt-ot),Vt=gt===yt?0:.5/(yt-gt),Je=gt<ot?-1:1,Et):[X,Le,ze]},Et.clamp=function(pe){return arguments.length?(Xe=!!pe,Et):Xe},Et.interpolator=function(pe){return arguments.length?(zt=pe,Et):zt};function pr(pe){return function(R){var Z,he,xe;return arguments.length?([Z,he,xe]=R,zt=n.piecewise(pe,[Z,he,xe]),Et):[zt(0),zt(.5),zt(1)]}}return Et.range=pr(n.interpolate),Et.rangeRound=pr(n.interpolateRound),Et.unknown=function(pe){return arguments.length?(at=pe,Et):at},function(pe){return Se=pe,ot=pe(X),gt=pe(Le),yt=pe(ze),Lt=ot===gt?0:.5/(gt-ot),Vt=gt===yt?0:.5/(yt-gt),Je=gt<ot?-1:1,Et}}function ae(){var X=de(H()(Y));return X.copy=function(){return He(X,ae())},w.apply(X,arguments)}function ve(){var X=Ce(H()).domain([.1,1,10]);return X.copy=function(){return He(X,ve()).base(X.base())},w.apply(X,arguments)}function N(){var X=rt(H());return X.copy=function(){return He(X,N()).constant(X.constant())},w.apply(X,arguments)}function ie(){var X=Ht(H());return X.copy=function(){return He(X,ie()).exponent(X.exponent())},w.apply(X,arguments)}function Ze(){return ie.apply(null,arguments).exponent(.5)}s.scaleBand=x,s.scaleDiverging=ae,s.scaleDivergingLog=ve,s.scaleDivergingPow=ie,s.scaleDivergingSqrt=Ze,s.scaleDivergingSymlog=N,s.scaleIdentity=et,s.scaleImplicit=_,s.scaleLinear=Ie,s.scaleLog=$e,s.scaleOrdinal=T,s.scalePoint=A,s.scalePow=Jt,s.scaleQuantile=_t,s.scaleQuantize=Ct,s.scaleRadial=st,s.scaleSequential=fe,s.scaleSequentialLog=De,s.scaleSequentialPow=Rt,s.scaleSequentialQuantile=qe,s.scaleSequentialSqrt=Oe,s.scaleSequentialSymlog=ft,s.scaleSqrt=Mt,s.scaleSymlog=it,s.scaleThreshold=kt,s.scaleTime=me,s.scaleUtc=We,s.tickFormat=re,Object.defineProperty(s,"__esModule",{value:!0})})});var O1=Xt((eM,P1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */P1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=4)}([function(s,i,n){"use strict";var l=n(1),c=n(2);Object.defineProperty(i,"__esModule",{value:!0}),i.DataPoint=void 0;var a=n(8),b=function(){function w(_,T){l(this,w),this.field=_,this.setValue(T)}return c(w,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(T){this.value=a.TypeSafeValue.from(T)}},{key:"getRawValue",value:function(){return this.value.toRawValue()}},{key:"getCoercedValue",value:function(){return this.value.toRawCoercedValue()}},{key:"getField",value:function(){return w.fromRaw(this.field)}},{key:"getType",value:function(){return this.value.type}}],[{key:"isDataPoint",value:function(T){return T instanceof w}},{key:"fromRaw",value:function(T){return new w("",a.TypeSafeValue.fromRaw(T))}}]),w}();i.DataPoint=b},function(s,i){s.exports=os()},function(s,i){s.exports=as()},,function(s,i,n){"use strict";var l=n(18);Object.defineProperty(i,"__esModule",{value:!0}),i.inferDataTypeFromData=i.dataPointValues=i.inferDataTypeFromDataPoints=i.getDataTypeForMeta=i.canInferTypeFromMeta=i.getDataTypeForPoint=i.isString=i.isTime=i.isGeoJsonObject=i.isNumber=void 0;var c=n(12),a=n(5),b=n(15),w=n(0);function _(L){return L!==null&&!a.isBoolean(L)&&L!==""&&a.isFinite(+L)&&a.isNumber(+L)}i.isNumber=_;function T(L){if(!L)return!1;var k;try{k=a.isObject(L)?L:JSON.parse(L)}catch(re){return!1}return k==null?!1:Object.prototype.hasOwnProperty.call(k,"coordinates")&&k.coordinates!=null&&Array.isArray(k.coordinates)&&Object.prototype.hasOwnProperty.call(k,"type")&&k.type==="MultiPolygon"}i.isGeoJsonObject=T;function x(L){if(!L)return!1;var k=["YYYY-MM-DD",c.default.ISO_8601,"YYYY-MM-DDTHH:mm","YYYY-MM-DDTHH:mm:ss.SSS","YYYY-MM-DDTHH:mm:ss","YYYY-MM-DD HH:MM","YYYY-MM-DD HH:MM:SS","YYYY-MM-DD HH:MM:SS.SSS"];return typeof L=="string"?c.default(L,k,!0).isValid():c.default(L).isValid()}i.isTime=x;function M(L){return typeof L=="string"&&L.length>0}i.isString=M;var A=function(k,re){return i.canInferTypeFromMeta(re)?i.getDataTypeForMeta(re):E(k)};i.getDataTypeForPoint=A;var D=function(k){return Array.isArray(k)?k.length>1&&k[0]==="##__SPARKLINE__##"?"sparkline":"array":T(k)?"geojson":a.isObject(k)?"unknown":_(k)?"number":b.isColor(k)?"color":x(k)?"time":M(k)?"string":k===null?"null":"unknown"},E=a.memoize(D),$={str:"string",num:"number"},Y=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.name,de=k.type,Ie=de===void 0?"":de;return $[Ie]!==void 0||re==="_time"};i.canInferTypeFromMeta=Y;var G=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.name,de=k.type;if(re==="_time")return"time";var Ie=$[de];return Ie!==void 0?Ie:"unknown"};i.getDataTypeForMeta=G;var le=function(k){var re=Object.keys(k).filter(function(tt){return k[tt]>0});if(re.length===0)return"unknown";if(re.length===1)return re[0];for(var de=["geojson","sparkline","array","string","color","number","time","null","unknown"],Ie=function(je){var Ee=de[je];if(re.find(function(_e){return _e===Ee}))return{v:Ee}},et=0;et<de.length;et+=1){var lt=Ie(et);if(l(lt)==="object")return lt.v}return"unknown"},K=function(k){if(!k)return"unknown";var re={time:0,number:0,string:0,color:0,unknown:0,array:0,sparkline:0,null:0,geojson:0};return k.forEach(function(de){re[de.getType()]+=1}),le(re)};i.inferDataTypeFromDataPoints=K;var F=function(k){return k.map(function(re){return w.DataPoint.isDataPoint(re)?re:w.DataPoint.fromRaw(re)})};i.dataPointValues=F;var Q=function(k){return i.inferDataTypeFromDataPoints(i.dataPointValues(k))};i.inferDataTypeFromData=Q},function(s,i){s.exports=zr()},,,function(s,i,n){"use strict";var l=n(17),c=n(1),a=n(2);Object.defineProperty(i,"__esModule",{value:!0}),i.TypeSafeValue=void 0;var b=n(4),w=n(13),_=function(){function T(x,M,A){c(this,T),this.isTypeSafe=!0,this.type=x,this.value=M,this.coercedValue=A}return a(T,[{key:"toRawCoercedValue",value:function(){switch(this.type){case"time":case"sparkline":case"array":case"number":case"string":case"color":case"geojson":default:return this.coercedValue}}},{key:"toRawValue",value:function(){switch(this.type){case"time":case"sparkline":case"array":case"number":case"string":case"color":case"geojson":default:return this.value}}}],[{key:"from",value:function(M){if(M.isTypeSafe)return M;var A=M.value,D=M.type,E=T.coerceValue(M),$=l(E,1),Y=$[0];return new T(D,A,Y)}},{key:"fromRaw",value:function(M){var A=b.getDataTypeForPoint(M);return new T(A,M,M)}},{key:"coerceValue",value:function(M){var A=M.type,D=M.value,E=null;try{switch(A){case"number":{E=Number(D);break}case"time":{var $=b.isTime(D);if(D instanceof Date)E=D;else if(!$)E="Invalid Date";else{var Y=w.formatTimeWithTimezoneCorrection(D);E=Y}break}case"string":{E=D.toString();break}case"color":{E=D;break}case"sparkline":{E=D;break}case"array":{E=D;break}case"null":{E=D;break}case"geojson":{E=D;break}default:E=""}}catch(G){}return[E]}}]),T}();i.TypeSafeValue=_},,,,function(s,i){s.exports=is()},function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.formatTimeWithTimezoneCorrection=i.setDefaultValue=void 0;var l=n(12),c=n(4),a=function(T){return c.isNumber(T)?T:T||""};i.setDefaultValue=a;var b=function(T){return l.default.getDefaultSplunkTimezone()?l.default.newSplunkTime({time:T}):l.default(T)},w=function(T){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.defaultFormat,M=l.default.parseZone(T).utcOffset(),A=b(T).utcOffset(M);return A.format(x)};i.formatTimeWithTimezoneCorrection=w},,function(s,i){s.exports=wl()},,function(s,i){s.exports=_d()},function(s,i){s.exports=xd()}])});var D1=Xt((tM,M1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */M1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=388)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Un()},10:function(s,i){s.exports=Rc()},109:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.convertToArrOfObjects=void 0;var l=function(a,b){if(!a||!a[0].length)return[];for(var w=[],_=function(M){var A={};b.forEach(function(D,E){var $=typeof D=="string"?D:D.name;a[E][M]===""?A[$]=null:A[$]=a[E][M]}),w.push(A)},T=0;T<a[0].length;T+=1)_(T);return w};i.convertToArrOfObjects=l},11:function(s,i){s.exports=os()},116:function(s,i,n){"use strict";var l=n(51),c=this&&this.__rest||function(T,x){var M={};for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&x.indexOf(A)<0&&(M[A]=T[A]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,A=Object.getOwnPropertySymbols(T);D<A.length;D++)x.indexOf(A[D])<0&&Object.prototype.propertyIsEnumerable.call(T,A[D])&&(M[A[D]]=T[A[D]]);return M};Object.defineProperty(i,"__esModule",{value:!0});var a=n(141),b=n(0),w=n(394),_=function(x){var M=x.longitude,A=x.latitude,D=x.areaId,E=x.areaValue,$=x.additionalFields,Y=$===void 0?[]:$,G=x.map,le=x.isChoroplethTooltipOpen,K=x.children,F=c(x,["longitude","latitude","areaId","areaValue","additionalFields","map","isChoroplethTooltipOpen","children"]),Q=b.useRef(),L=b.useRef(),k=b.useState(!1),re=l(k,2),de=re[0],Ie=re[1],et=b.useCallback(function(){return le!==void 0},[le]),lt=b.useCallback(function(){return Ie(!0)},[]),tt=b.useCallback(function(){return Ie(!1)},[]),je=b.useCallback(function(){L.current&&(L.current.remove(),L.current=void 0)},[]);return b.useEffect(function(){try{L.current?L.current.setLngLat([M,A]):(L.current=new a.Marker(Q.current),L.current.setLngLat([M,A]),L.current.addTo(G.current))}catch(Ee){console.error(Ee),je()}},[A,M,G]),b.useEffect(function(){return je},[]),b.createElement("div",{style:{visibility:et()?"hidden":"visible"}},b.createElement("div",Object.assign({style:{visibility:et()?"hidden":"visible"},ref:Q,"data-test":"map-marker",onMouseOver:lt,onMouseLeave:tt,onFocus:lt,onBlur:tt},F),K),b.createElement("div",null,b.createElement(w.default,{open:et()?le:de,anchor:Q.current,latitude:et()?null:A,longitude:et()?null:M,areaId:D,areaValue:E,additionalFields:Y})))};i.default=_},12:function(s,i){s.exports=wl()},13:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(20),b=n(15),w=n(12),_=c.default.div.attrs(function(D){var E=D.width;return{style:{width:b.toPx(E)}}}).withConfig({displayName:"FixedSizeContainer__Item",componentId:"sc-1yhgpod-0"})(["position:relative;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),T=c.default.div.attrs(function(D){var E=D.width,$=D.height;return{style:Object.assign(Object.assign({},E&&{width:b.toPx(E)}),$&&{height:b.toPx($)})}}).withConfig({displayName:"FixedSizeContainer__FixSizeItem",componentId:"sc-1yhgpod-1"})(["position:relative;flex-direction:column;flex:1;display:flex;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),x=c.default.div.withConfig({displayName:"FixedSizeContainer__ItemContent",componentId:"sc-1yhgpod-2"})(["position:relative;min-height:100px;width:100%;"]),M=c.default.div.withConfig({displayName:"FixedSizeContainer__FixSizeItemContent",componentId:"sc-1yhgpod-3"})(["min-height:0px;flex:1;position:relative;box-sizing:border-box;"]),A=function(E){var $=function(G){var le=G.width,K=G.height,F=G.backgroundColor;return K?l.createElement(T,{"data-test":"fix-size-item","data-splunk-visualization-version":"25.3.6 - 6b2578d73",width:le,height:K,backgroundColor:F},l.createElement(M,null,l.createElement(a.default,null,function(Q){var L=Q.width,k=Q.height;return l.createElement(E,Object.assign({},G,{width:L,height:k}))}))):l.createElement(_,{"data-test":"item",width:le,backgroundColor:F},l.createElement(x,null,l.createElement(E,Object.assign({},G))))};return $.displayName="withFixedSizeContainer",$};i.default=A},14:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.extendStaticWrapperProps=void 0;var l=function(a){var b=a.Wrapper,w=a.Visualization,_=["propTypes","defaultProps","config"];_.forEach(function(T){w[T]&&(b[T]=w[T])})};i.extendStaticWrapperProps=l},140:function(s,i){s.exports=og()},141:function(s,i){s.exports=a1()},142:function(s,i,n){"use strict";var l=n(51),c=n(7),a=n(8);Object.defineProperty(i,"__esModule",{value:!0}),i.Bubble=i.PieSegment=i.GEO_BOUND_PREFIX=void 0;var b=n(0),w=n(4),_=n(3),T=n(12),x=n(80),M=n(116);i.GEO_BOUND_PREFIX="_geo_bounds_",i.PieSegment=b.memo(function(E){var $=E.start,Y=E.end,G=E.radius,le=E.color,K=E.themeColor,F=E.segmentMetadata,Q=E.handleBubbleClick,L=F!=null?F:{},k=L.name,re=L.value,de=b.useCallback(function(te){Q(te,k,re)},[k,re,Q]);if(Y-$===1)return b.createElement("circle",{onClick:de,cx:G,cy:G,r:G,fill:le,fillOpacity:.5,strokeWidth:1.5,stroke:le});var Ie=2*Math.PI*($-.25),et=2*Math.PI*(Y-.25),lt=Math.cos(Ie),tt=Math.sin(Ie),je=Math.cos(et),Ee=Math.sin(et),_e=Y-$>.5?1:0;return b.createElement("path",{onClick:de,d:"M ".concat(G," ").concat(G," L ").concat(G+G*lt," ").concat(G+G*tt," A ").concat(G," ").concat(G," 0 ").concat(_e," 1 ").concat(G+G*je," ").concat(G+G*Ee," L ").concat(G," ").concat(G," A 0 0 0 ").concat(_e," 0 ").concat(G," ").concat(G),fill:le,fillOpacity:.8,stroke:K,strokeWidth:2,strokeOpacity:.3})}),i.PieSegment.displayName="MapBubblePieSegment";var A=w.default(M.default).withConfig({displayName:"BubbleLayer__StyledMarkerWrapper",componentId:"sc-8aqbb-0"})(["cursor:pointer;"]);i.Bubble=b.memo(function(E){var $=E.originalValues,Y=E.valueRange,G=E.colors,le=E.themeColor,K=E.isPie,F=E.latitude,Q=E.longitude,L=E.bubbleSize,k=E.additionalFields,re=k===void 0?[]:k,de=E.map,Ie=E.handleMapClick,et=b.useCallback(function(tt,je,Ee){Ie(tt,je,Ee),tt.stopPropagation()},[L]),lt=b.useMemo(function(){var tt=$.every(function(Ae){return Ae===0});if(tt||!$.length)return null;var je=$.map(function(Ae){return Ae>0?Ae:0}),Ee=[],_e=0;je.forEach(function(Ae){Ee.push(_e),_e+=Ae});var te=x.matchBubbleSize(Y,_e),ce=te*2;return b.createElement("svg",{width:ce,height:ce,viewBox:"-3 -3 ".concat(ce+6," ").concat(ce+6)},K?b.createElement("circle",{cx:te,cy:te,r:te,fill:"none",strokeWidth:2,stroke:le,strokeOpacity:.3}):null,je.map(function(Ae,ke){return b.createElement(i.PieSegment,{key:String(ke),start:Ee[ke]/_e,end:(Ee[ke]+Ae)/_e,radius:te,color:G[ke],themeColor:le,segmentMetadata:L[ke],handleBubbleClick:et})}))},[G,K,$,le,Y]);return lt?b.createElement(A,{longitude:Q,latitude:F,additionalFields:[].concat(a(L),a(re)),map:de,"data-test-type":"bubble"},lt):null}),i.Bubble.displayName="MapBubble";var D=function($){var Y=$.bubbleLayer,G=$.themeColorScheme,le=$.map,K=$.zoom,F=$.onMapClick;Y.seriesColors=Y.seriesColors||x.DEFAULT_SERIES_COLORS,Y.bubbleSize=Y.bubbleSize||[];var Q=b.useMemo(function(){return x.bakeBubbleData(Y)},[Y]),L=b.useMemo(function(){return x.getStaticColors(Y.bubbleSize.length,Y.seriesColors)},[Y.bubbleSize.length,Y.seriesColors]),k=Q!=null?Q:{},re=k.data,de=re===void 0?[]:re,Ie=k.dataRange,et=Ie===void 0?[]:Ie,lt=k.resultLimit,tt=k.bubbleSizeFields,je=k.isPie,Ee=Y.additionalTooltipFields,_e=Ee===void 0?[]:Ee,te=Math.round(K),ce=G==="light"?"#ffffff":"#1a1c20",Ae=Y.dataColors,ke=b.useMemo(function(){return de.reduce(function($e,Ke,Ve){return Ke.zoom===te&&$e.push({data:Ke,idx:Ve}),$e},[]).slice(0,lt||x.DEFAULT_RESULT_LIMIT).sort(function($e,Ke){return _.sum(Ke.data.values)-_.sum($e.data.values)})},[de,lt,te]),Ce=b.useCallback(function($e,Ke,Ve,rt){var it,dt,bt,Wt=(bt=(dt=(it=ke[rt])===null||it===void 0?void 0:it.data)===null||dt===void 0?void 0:dt.metadata)!==null&&bt!==void 0?bt:{},Ht=Object.keys(Wt).reduce(function(Jt,Mt){var oe="row.".concat(Mt,".value"),Ye=String(Wt[Mt]);return Object.assign(Object.assign({},Jt),c({},oe,Ye))},{name:Ke,value:String(Ve)});F({e:$e,payload:Ht})},[ke]);return b.createElement(b.Fragment,null,ke.map(function($e,Ke){var Ve=Ae?[ke.map(function(Ht){return T.isColor(Ae[Ht.idx])?Ae[Ht.idx]:x.DEFAULT_CLUSTER_COLOR})[Ke]]:L,rt=l($e.data.coordinates,2),it=rt[0],dt=rt[1],bt=$e.data.values.map(function(Ht,Jt){return{name:tt[Jt],value:Ht,color:Ve[Jt]}}),Wt=Y.metadata?_e.map(function(Ht){return{name:Ht,value:$e.data.metadata[Ht]}}):[];return b.createElement(i.Bubble,{key:String(Ke),originalValues:$e.data.values,valueRange:et,colors:Ve,themeColor:ce,isPie:je,longitude:it,latitude:dt,bubbleSize:bt,additionalFields:Wt,map:le,handleMapClick:function(Jt,Mt,oe){return Ce(Jt,Mt,oe,Ke)}})}))};i.default=D},15:function(s,i){s.exports=jc()},16:function(s,i){s.exports=Sd()},17:function(s,i,n){"use strict";var l=n(8),c=n(7),a=this&&this.__rest||function(K,F){var Q={};for(var L in K)Object.prototype.hasOwnProperty.call(K,L)&&F.indexOf(L)<0&&(Q[L]=K[L]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,L=Object.getOwnPropertySymbols(K);k<L.length;k++)F.indexOf(L[k])<0&&Object.prototype.propertyIsEnumerable.call(K,L[k])&&(Q[L[k]]=K[L[k]]);return Q};Object.defineProperty(i,"__esModule",{value:!0}),i.insertLayout=i.isDynamicOption=i.uncollapseEditorConfig=i.generatePrecisionValues=i.getInitialPreset=i.enhanceOptionsSchemaWithDynamicOptions=i.enhanceConfig=void 0;var b=n(3),w=n(16),_=n(6),T={type:"string",pattern:w.DYNAMIC_OPTIONS_DSL_PATTERN};function x(K){var F={};return Object.keys(K).forEach(function(Q){var L=K[Q],k=L.title,re=L.description,de=L.readOnly,Ie=L.writeOnly,et=L.examples,lt=L.default,tt=L.type,je=L.properties,Ee=L.patternProperties,_e=a(L,["title","description","readOnly","writeOnly","examples","default","type","properties","patternProperties"]),te=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k!==void 0&&{title:k}),re!==void 0&&{description:re}),de!==void 0&&{readOnly:de}),Ie!==void 0&&{writeOnly:Ie}),et!==void 0&&{examples:et}),lt!==void 0&&{default:lt});if(tt==="object"){if(F[Q]=Object.assign(Object.assign(Object.assign(Object.assign({},_e),te),{type:tt}),je&&{properties:x(je)}),Ee){var ce={};Object.keys(Ee).forEach(function(Ae){ce=Object.assign(Object.assign({},ce),x(c({},Ae,Ee[Ae])))}),F[Q].patternProperties=ce}}else F[Q]=Object.assign(Object.assign({},te),{anyOf:[Object.assign(Object.assign({},tt!==void 0&&{type:tt}),_e),T]})}),F}i.enhanceOptionsSchemaWithDynamicOptions=x;function M(K){var F=Object.assign({},K);return K.supports.indexOf(_.VizBehavior.DYNAMIC_OPTIONS)!==-1&&(F.optionsSchema=x(K.optionsSchema)),F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:Q.open||!1})}),F}i.enhanceConfig=M;function A(K){var F=Object.assign({},K);return F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:!0})}),F}i.uncollapseEditorConfig=A;function D(K){return K&&typeof K=="string"&&K.trim().startsWith(">")||!1}i.isDynamicOption=D;function E(K,F){var Q=Object.keys(F);return Q.every(function(L){return F[L]===void 0&&K[L]===void 0||F[L]!==void 0&&K[L]!==void 0})}function $(K,F){var Q=Object.keys(F);return Q.every(function(L){return D(F[L])===D(K[L])})}function Y(K,F,Q){return Q.find(function(L){var k=b.get(L,["value","context"],{}),re=b.get(L,["value","options"],{}),de=Object.keys(k),Ie=Object.keys(re);return de.length===0||Ie.length===0?!1:E(K,k)&&$(F,re)})}i.getInitialPreset=Y;function G(K){return b.range(0,K+1).map(function(F){return{label:"".concat(F," (0").concat(F>0?".":"").concat("0".repeat(F),")"),value:F}})}i.generatePrecisionValues=G;var le=function(F,Q){for(var L=arguments.length,k=new Array(L>2?L-2:0),re=2;re<L;re++)k[re-2]=arguments[re];return[].concat(l(F.slice(0,Q)),k,l(F.slice(Q)))};i.insertLayout=le},19:function(s,i){s.exports=as()},2:function(s,i){s.exports=Ti()},20:function(s,i){s.exports=Fc()},23:function(s,i){s.exports=Vc()},25:function(s,i){s.exports=Pd()},26:function(s,i){s.exports=Bc()},27:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shouldShowIconPlaceholder=void 0;var l=n(0),c=n(1),a=n(3),b=n(2),w=n(10),_=n(13),T=function(D){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$=a.get(D,"primary.data.columns[0]",void 0),Y=$===void 0,G=a.get(D,"primary.data.fields[0]",void 0),le=G===void 0;return E||Y||le};i.shouldShowIconPlaceholder=T;var x={icon:c.func,width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,iconColor:c.string},M=function(D){var E=D.width,$=D.height,Y=D.icon,G=D.iconColor;return Y?l.createElement(Y,{style:{left:"50%",top:"50%",color:G,opacity:.15,position:"absolute",transform:"translate(-50%, -50%)"},width:"50%",height:"50%"}):l.createElement(w.default,{width:E,height:$,level:"warning",message:b._("No DataSource Connected")})};M.propTypes=x,M.defaultProps={width:"100%",height:250},i.default=_.default(M)},28:function(s,i,n){"use strict";var l=n(7);Object.defineProperty(i,"__esModule",{value:!0}),i.getSortingParams=i.SortParamsPropTypes=void 0;var c=n(1),a=n(3),b=n(39);i.SortParamsPropTypes=c.shape({currentSortKey:c.string,currentSortDir:c.oneOf(b.validSortDirs),onSort:c.func});var w=function(T){var x=T.requestParams,M=T.onRequestParamsChange,A,D,E={asc:"desc",desc:"asc",none:"asc"},$;return a.isFunction(M)&&(x&&a.has(x,"sort")&&(A=Object.keys(x.sort).shift(),D=x.sort[A]),$=function(G,le){var K=le.sortKey,F=le.sortDir;if(typeof K=="string"){var Q=a.has(E,F)?E[F]:"none";M(Object.assign(Object.assign({},x),{offset:0,sort:l({},K,Q)}))}else M(x)}),{currentSortKey:A,currentSortDir:D,onSort:$}};i.getSortingParams=w},29:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPaginationParams=i.PaginatorParamsPropTypes=void 0;var l=n(1),c=n(3);i.PaginatorParamsPropTypes=l.shape({isPaging:l.bool,current:l.number,totalPages:l.number,onChange:l.func});var a=function(w){var _=w.requestParams,T=w.meta,x=w.onRequestParamsChange,M=T&&T.totalCount||0,A=_&&_.offset||0,D=_&&_.count,E=typeof D=="number"&&D>0?Math.ceil(M/D):0,$=typeof D=="number"&&D>0?Math.floor(A/D)+1:0,Y=E>1&&c.isFunction(x),G=function(K,F){var Q=F.page,L=F.count,k=c.cloneDeep(_);typeof L=="number"&&(k.count=L,k.offset=0);var re=typeof k.count=="number"?k.count:10;typeof Q=="number"&&Q>0&&(k.count=re,k.offset=(Q-1)*re),x(k)};return{isPaging:Y,current:$,totalPages:E,onChange:c.isFunction(x)?G:c.noop}};i.getPaginationParams=a},3:function(s,i){s.exports=zr()},31:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizCategory=void 0;var l;(function(c){c.SINGLE_VALUE="Single Value",c.TRENDS="Trends",c.COMPARISONS="Comparisons",c.TABLE="Table",c.GAUGE="Gauge",c.DISTRIBUTIONS="Distributions",c.CHOROPLETH="Choropleth Maps",c.SHAPES="Shapes",c.MISC="misc",c.FLOW="Flow",c.CORRELATION="Correlation",c.SPATIAL="Spatial"})(l=i.VizCategory||(i.VizCategory={}))},32:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(3),a=n(33),b=n(34),w=n(35),_=n(23),T=n(36),x=n(4),M=n(25),A=n(26),D=n(37),E=n(6),$=n(28),Y=n(29),G=n(40),le=n(41),K=n(42),F=n(43),Q=function(k){var re=k.ReactViz,de=k.vizConfig,Ie=k.computeVizProps,et=Ie===void 0?function(){}:Ie,lt=k.disableEditModeCover,tt=k.useIconPlaceholder,je=w.withSanitizedProps(re),Ee=A.pickFieldFromJSONSchema(de.optionsSchema,"default"),_e=function(ce){var Ae=ce.mode,ke=ce.hasEventHandlers,Ce=ce.dataSources,$e=ce.options,Ke=ce.context,Ve=Ke===void 0?{}:Ke,rt=ce.width,it=ce.height,dt=ce.onComputedProps,bt=ce.onEventTrigger,Wt=ce.theme,Ht=ce.onRequestParamsChange,Jt=l.useContext(_.default),Mt=Jt.serializedTimezone;Mt&&(T.default.getDefaultSplunkTimezone()||T.default.setDefaultSplunkTimezone(Mt));var oe=function(ie){var Ze,X;return(X=(Ze=de.themes)[ie])===null||X===void 0?void 0:X.call(Ze,ce)},Ye=oe("defaultBackgroundColor"),st=a.default({theme:Wt}),_t=st.family,Ct=st.colorScheme,kt=st.density,ct={};ct=G.useDeepMemo(function(){try{return b.Options.evaluate({context:c.defaultsDeep({},Ve,de.defaultContext),options:M.deepMergeWithArrayPrimitiveOverrides({},$e,Ee)},Ce,oe)}catch(N){return console.error("unexpected error evaluating options:  + ".concat(N.message)),{}}},[_t,Ct,kt,$e,Ve,Ce,Mt]),l.useEffect(function(){dt(ct)});var mt=de.requiredProps,we=mt===void 0?[]:mt,me=de.supports,We=le.missingKeys(we,ct);if(We.length>0&&me.includes(E.VizBehavior.PLACEHOLDER)&&de.key!=="splunk.singlevalue")return l.createElement(le.default,{"data-test":"missing-props-message",width:rt,height:it,missingProps:We,backgroundColor:Ye});var Qe={};if(ke&&Ae==="view"&&de.supports.indexOf(E.VizBehavior.EVENTS)>-1){var He=de.events;Object.keys(He).forEach(function(N){var ie=c.camelCase("on.".concat(N));Qe[ie]=null;var Ze=He[N].payloadKeys,X={};Array.isArray(Ze)&&Ze.length&&Ze.forEach(function(Le){X[Le]=ct[Le]}),Qe[ie]=function(Le){return Le&&Le.payload&&(X=Le.payload),bt({originalEvent:Le,payload:X,type:N})}})}var fe=et(Object.assign(Object.assign(Object.assign(Object.assign({},ce),ct),Qe),{themeFunc:oe})),De={},ft="paginateDataSourceKey",Rt=c.has(ct,ft)&&ct[ft]||"primary";if(de.supports.indexOf(E.VizBehavior.PAGE_AND_SORT)>-1&&c.has(Ce,Rt)){var Oe=c.get(Ce,[Rt,"requestParams"],{}),qe=c.get(Ce,[Rt,"meta"],{}),H=function(ie){return Ht(Rt,ie)},ae=$.getSortingParams({requestParams:Oe,meta:qe,onRequestParamsChange:H}),ve=Y.getPaginationParams({requestParams:Oe,meta:qe,onRequestParamsChange:H});De={sortParams:ae,paginatorParams:ve}}return l.createElement(je,Object.assign({mode:Ae,width:rt,height:it},ct,fe,Qe,De))};return _e.propTypes=Object.assign(Object.assign({},D.default.propTypes),re.propTypes),_e.defaultProps=Object.assign(Object.assign(Object.assign({},D.default.defaultProps),re.defaultProps),{theme:{}}),_e.config=de,x.withTheme(F.default(K.default(_e,lt),tt))};i.default=Q},33:function(s,i){s.exports=wd()},34:function(s,i){s.exports=Nc()},35:function(s,i){s.exports=Uc()},36:function(s,i){s.exports=is()},37:function(s,i,n){"use strict";var l=n(11);Object.defineProperty(i,"__esModule",{value:!0}),i.INITIAL_HEIGHT=i.INITIAL_WIDTH=void 0;var c=n(1),a=n(3),b=n(38);i.INITIAL_WIDTH=250,i.INITIAL_HEIGHT=250;var w=function _(){l(this,_)};w.propTypes={mode:c.oneOf(["view","edit","export"]).isRequired,width:c.oneOfType([c.string,c.number]).isRequired,height:c.oneOfType([c.string,c.number]).isRequired,context:c.object,options:c.object,onOptionsChange:c.func,dataSources:c.objectOf(c.shape({requestParams:c.object,data:c.shape({fields:c.array,columns:c.array}),error:c.shape({level:c.string,message:c.string}),meta:c.object})),onEventTrigger:c.func,hasEventHandlers:c.bool,onComputedProps:c.func,vizActionHandlerRef:c.func,loading:c.bool,theme:c.object,onRequestParamsChange:c.func},w.defaultProps={width:"100%",height:i.INITIAL_HEIGHT,dataSources:{},onEventTrigger:function(){return{}},mode:"view",hasEventHandlers:!1,options:{},context:{},onOptionsChange:function(){return{}},vizActionHandlerRef:function(){return new b.DefaultVizActionHandler},onComputedProps:function(){return{}},loading:!1,onRequestParamsChange:a.noop},i.default=w},38:function(s,i,n){"use strict";var l=n(11),c=n(19);Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultVizActionHandler=void 0;var a=function(){function b(){l(this,b)}return c(b,[{key:"focus",value:function(){}},{key:"snapshot",value:function(){return null}}]),b}();i.DefaultVizActionHandler=a},388:function(s,i,n){"use strict";var l=this&&this.__rest||function(k,re){var de={};for(var Ie in k)Object.prototype.hasOwnProperty.call(k,Ie)&&re.indexOf(Ie)<0&&(de[Ie]=k[Ie]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,Ie=Object.getOwnPropertySymbols(k);et<Ie.length;et++)re.indexOf(Ie[et])<0&&Object.prototype.propertyIsEnumerable.call(k,Ie[et])&&(de[Ie[et]]=k[Ie[et]]);return de};Object.defineProperty(i,"__esModule",{value:!0}),i.PureMap=i.config=i.themes=i.useIconPlaceholder=i.computeVizProps=void 0;var c=n(0),a=n(12),b=n(95),w=n(25),_=n(26),T=n(389);i.PureMap=T.default;var x=n(397);i.config=x.default;var M=n(32),A=n(398),D=n(142),E=n(109),$=function(re,de,Ie,et){var lt=de.indexOf("geobin"),tt=re;lt>-1&&(tt.geobin=Ie.columns[lt]);var je=de.indexOf("geom");je>-1&&(tt.geom=Ie.columns[je].map(function(Ee){return typeof Ee=="string"?JSON.parse(Ee):Ee})),Object.prototype.hasOwnProperty.call(tt,"seriesColors")&&(tt.seriesColors=Array.isArray(tt.seriesColors)?a.sanitizeArrayOfColors(tt.seriesColors):void 0),Object.prototype.hasOwnProperty.call(tt,"dataColors")&&(tt.dataColors=Array.isArray(tt.dataColors)?a.sanitizeArrayOfColors(tt.dataColors):void 0),tt.metadata=et},Y=function(re){var de,Ie,et,lt=re.themeFunc,tt=re.theme,je=re.layers,Ee=re.dataSources,_e=re.onOptionsChange,te=["controlBackgroundColor","controlForegroundColor"],ce={};te.forEach(function(Ke){ce[Ke]=lt(Ke)});var Ae=tt!=null&&tt.splunkThemeV1?tt==null?void 0:tt.splunkThemeV1.colorScheme:"dark",ke=(Ie=(de=Ee==null?void 0:Ee.primary)===null||de===void 0?void 0:de.data)!==null&&Ie!==void 0?Ie:{},Ce=E.convertToArrOfObjects(ke.columns,ke.fields),$e=((et=ke.fields)!==null&&et!==void 0?et:[]).map(function(Ke){return typeof Ke=="string"?Ke:Ke.name});return je==null||je.forEach(function(Ke){return $(Ke,$e,ke,Ce)}),Object.assign(Object.assign(Object.assign(Object.assign({},ce),{themeColorScheme:Ae}),je),{onOptionsChange:_e})};i.computeVizProps=Y;var G=function(re){var de=function(et){var lt,tt,je,Ee,_e=et.dataSources,te=et.options,ce=l(et,["dataSources","options"]);if(!_e||!_e.primary||!_e.primary.data)return c.createElement(re,Object.assign({},ce,{options:te}));var Ae=w.deepMergeWithArrayPrimitiveOverrides({},te,_.pickFieldFromJSONSchema(x.default.optionsSchema,"default"));if(!((lt=Ae.layers)===null||lt===void 0)&&lt[0]){((je=(tt=Ae.layers)===null||tt===void 0?void 0:tt[0])===null||je===void 0?void 0:je.type)==="bubble"&&(Ae.layers[0].bubbleSizeFields=b.getFieldsFromDSL((Ee=Ae.layers[0].bubbleSize)!==null&&Ee!==void 0?Ee:Ae.layers[0].bubbleSize,_e));var ke=_e.primary.data.fields;if(Array.isArray(Ae.layers[0].additionalTooltipFields)&&Array.isArray(ke)&&ke.length){var Ce=Ae.layers[0].bubbleSizeFields,$e=Ce===void 0?[]:Ce;Ae.layers[0].additionalTooltipFields=Ae.layers[0].additionalTooltipFields.filter(function(Ke){return(typeof ke[0]=="string"?ke.includes(Ke):ke.map(function(Ve){return Ve.name}).includes(Ke))&&!$e.includes(Ke)})}}return c.createElement(re,Object.assign({dataSources:_e,options:Ae},ce))};return de.propTypes=re.propTypes,de.defaultProps=re.defaultProps,de.config=re.config,de},le=function(re){var de=function(et){var lt=et.dataSources,tt=l(et,["dataSources"]);if(!lt||!lt.primary||!lt.primary.data)return c.createElement(re,Object.assign({},tt));var je=lt.primary,Ee=je.data,_e=Ee.columns,te=Ee.fields,ce=[],Ae=[];if(te&&_e&&te.length===_e.length){var ke=new Set(te.reduce(function($e,Ke,Ve){var rt=typeof Ke=="string"?Ke:Ke.name.toString();return rt.startsWith("_")&&!rt.startsWith(D.GEO_BOUND_PREFIX)&&$e.push(Ve),$e},[]));Ae=te.filter(function($e,Ke){return!ke.has(Ke)}),ce=_e.filter(function($e,Ke){return!ke.has(Ke)})}var Ce=Object.assign(Object.assign({},lt),{primary:Object.assign(Object.assign({},je),{data:Object.assign(Object.assign({},je.data),{columns:ce,fields:Ae})})});return c.createElement(re,Object.assign({dataSources:Ce},tt))};return de.propTypes=re.propTypes,de.defaultProps=re.defaultProps,de.config=re.config,de},K=function(re){var de=function(et){var lt=et.dataSources,tt=et.options,je=l(et,["dataSources","options"]);if(!lt||!lt.primary||!lt.primary.data)return c.createElement(re,Object.assign({},je));var Ee=A.columnsNullToZeros(x.default,lt,tt);return c.createElement(re,Object.assign({dataSources:Ee,options:tt},je))};return de.propTypes=re.propTypes,de.defaultProps=re.defaultProps,de.config=re.config,de};function F(k,re){return re}i.useIconPlaceholder=F;var Q=le(G(K(M.default({ReactViz:T.default,vizConfig:x.default,computeVizProps:i.computeVizProps,disableEditModeCover:!0,useIconPlaceholder:F})))),L=x.default.themes;i.themes=L,i.default=Q},389:function(s,i,n){"use strict";var l=n(51);Object.defineProperty(i,"__esModule",{value:!0}),i.isLatLng=i.formatColor=i.DEFAULT_ZOOM=i.DEFAULT_SHOW_SCALE=i.DEFAULT_SCALE_UNIT=i.DEFAULT_CONTROL_FOREGROUND_COLOR=i.DEFAULT_CONTROL_BACKGROUND_COLOR=i.DEFAULT_CENTER=void 0;var c=n(0),a=n(3),b=n(0),w=n(1),_=n(140),T=n(141),x=n(390),M=n(391),A=n(80),D=n(393),E=n(396);i.DEFAULT_CENTER=[0,0],i.DEFAULT_CONTROL_BACKGROUND_COLOR="#2b3033",i.DEFAULT_CONTROL_FOREGROUND_COLOR="#B5B5B5",i.DEFAULT_SCALE_UNIT="imperial",i.DEFAULT_SHOW_SCALE=!0,i.DEFAULT_ZOOM=0;var $=function(K){var F=_(K);return{color:_(F.rgb()).hex().replace("#","%23"),opacity:F.alpha()}};i.formatColor=$,M.default.displayName="PureMapContainer";var Y=function(K){var F=K.width,Q=K.height,L=K.backgroundColor,k=K.baseLayerTileServer,re=K.baseLayerTileServerType,de=K.center,Ie=K.controlBackgroundColor,et=K.controlForegroundColor,lt=K.layers,tt=lt===void 0?[]:lt,je=K.scaleUnit,Ee=K.showScale,_e=K.themeColorScheme,te=K.zoom,ce=K.onMapLoad,Ae=K.onMapClick,ke=K.onOptionsChange,Ce=K.mode,$e=b.useContext(x.default),Ke=$e.defaultTileConfig,Ve=$e.customTileConfig,rt=b.useRef(null),it=b.useRef(null),dt=b.useRef(null),bt=b.useRef(null),Wt=b.useMemo(function(){return A.getTilePreset({defaultTileConfig:Ke,customTileConfig:Ve})},[Ke,Ve]),Ht=Wt.tilePreset,Jt=Wt.defaultTileLight,Mt=Wt.defaultTileDark,oe=c.useState(te!=null?te:i.DEFAULT_ZOOM),Ye=l(oe,2),st=Ye[0],_t=Ye[1],Ct=c.useState(!1),kt=l(Ct,2),ct=kt[0],mt=kt[1],we=c.useState(!1),me=l(we,2),We=me[0],Qe=me[1],He=b.useMemo(function(){return A.isValidLatLon(de)?[de[1],de[0]]:i.DEFAULT_CENTER},[de]),fe=b.useMemo(function(){return te===void 0?i.DEFAULT_ZOOM:te},[te]),De=function(N){Qe(N)},ft=function(N){Ce==="edit"&&ke(N)},Rt=b.useCallback(function(ve){var N=function(){var Ze=A.getGlobalLayerBoundaries([tt[0]]);it.current.fitBounds(Ze,{padding:A.MAX_BUBBLE_RADIUS+5,animate:!1})};it.current=new T.Map(Object.assign({container:rt.current,preserveDrawingBuffer:!0,style:ve,center:He,zoom:fe},A.getZoomConstraintsFromTileConfig(ve,k))),it.current.on("load",function(){(tt==null?void 0:tt.length)>0&&de===void 0&&te===void 0&&N(),mt(!0),setTimeout(function(){return ce()},500)}),it.current.on("dragend",function(){var ie=it.current.getCenter();ft({center:[ie.lat,ie.lng]})}),it.current.on("zoomend",function(){_t(it.current.getZoom());var ie=it.current.getCenter();ft({center:[ie.lat,ie.lng],zoom:it.current.getZoom()})}),bt.current=new T.NavigationControl({showCompass:!1}),it.current.addControl(bt.current,"top-left")},[He,fe,tt==null?void 0:tt.length]),Oe=b.useCallback(function(){dt.current=new T.ScaleControl({maxWidth:70,unit:je}),it.current.addControl(dt.current)},[je]),qe=b.useCallback(function(){var ve;Ee&&((ve=dt==null?void 0:dt.current)===null||ve===void 0||ve.setUnit(je))},[je,Ee]);b.useEffect(function(){it.current&&it.current.resize()},[F,Q]),b.useEffect(function(){if(Object.keys(Ht).length===0&&(!k||!re)){console.warn("Map Tile Server configuration is missing or invalid. Please provide a valid configuration");return}var ve=A.getMapStyle({baseLayerTileServer:k,baseLayerTileServerType:re,tilePreset:Ht,colorScheme:_e,defaultTileLight:Jt,defaultTileDark:Mt});if(ve.version=A.MAP_STYLE_VERSION_NUMBER,it.current){var N=it.current.getStyle(),ie=a.omit(ve,["theme","name","key"]);A.compareBaseStyles(N,ie)||(it.current.setStyle(a.omit(ve,["theme","name","key"])),Qe(!0));var Ze=A.getZoomConstraintsFromTileConfig(ve,k),X=Ze.minZoom,Le=Ze.maxZoom;it.current.setMinZoom(X),it.current.setMaxZoom(Le),qe()}else Rt(a.omit(ve,["theme","name","key"])),Oe()},[Ht,Rt,Oe,qe,Jt,Mt,k,re,_e]),b.useEffect(function(){it.current&&it.current.flyTo({center:He,zoom:fe})},[He,fe]),b.useEffect(function(){return function(){it.current&&it.current.remove()}},[]);var H=l(tt,1),ae=H[0];return c.createElement(c.Fragment,null,c.createElement(M.default,{className:"puremap",width:F,height:Q,backgroundColor:L,controlBackgroundColor:Ie,controlForegroundColor:et,controlIconColorEncoded:i.formatColor(et),ref:rt,showScale:Ee},ct&&ae&&(ae.type===A.LAYER_TYPE.Bubble||ae.type===A.LAYER_TYPE.Marker)&&c.createElement(D.default,{clusterLayer:ae,themeColorScheme:_e,map:it,zoom:st,onMapClick:Ae}),ct&&ae&&ae.type===A.LAYER_TYPE.Choropleth&&c.createElement(E.default,{map:it,choroplethLayer:ae,isThemeChanged:We,setIsThemeChanged:De,onMapClick:Ae})))},G=function(K,F,Q){if(!K[F])return null;var L=Math.abs(K[F][0]),k=Math.abs(K[F][1]),re=K[F];if(L>A.MAX_LATITUDE&&k<=A.MAX_LATITUDE)throw new Error("".concat(Q," ").concat(F," may have reversed [lat, lon] ranges."));if(!A.isValidLatLon(re))throw new Error("".concat(Q," ").concat(F," incorrect [lat, lon] ranges."));return null};i.isLatLng=G,Y.propTypes={mode:w.string,width:w.oneOfType([w.string,w.number]),height:w.oneOfType([w.string,w.number]),backgroundColor:w.string,baseLayerTileServer:w.string,baseLayerTileServerType:w.string,center:i.isLatLng,controlBackgroundColor:w.string,controlForegroundColor:w.string,layers:w.arrayOf(w.shape({type:w.string,latitude:w.arrayOf(w.oneOfType([w.string,w.number])),longitude:w.arrayOf(w.oneOfType([w.string,w.number])),label:w.string,showInLegend:w.bool,dataColors:w.oneOfType([w.string,w.arrayOf(w.string)]),seriesColors:w.arrayOf(w.string),additionalTooltipFields:w.arrayOf(w.string),resultLimit:w.number})),scaleUnit:w.string,showScale:w.bool,themeColorScheme:w.string,zoom:w.number,onMapLoad:w.func,onMapClick:w.func,onOptionsChange:w.func},Y.defaultProps={mode:"view",width:800,height:500,backgroundColor:"#0b0c0e",controlBackgroundColor:i.DEFAULT_CONTROL_BACKGROUND_COLOR,controlForegroundColor:i.DEFAULT_CONTROL_FOREGROUND_COLOR,scaleUnit:i.DEFAULT_SCALE_UNIT,showScale:i.DEFAULT_SHOW_SCALE,layers:[],themeColorScheme:"dark",onMapLoad:a.noop,onMapClick:a.noop,onOptionsChange:a.noop},i.default=Y},39:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.validSortDirs=void 0,i.validSortDirs=["asc","desc","none"]},390:function(s,i){s.exports=p1()},391:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(4),c=n(3),a=n(15),b=n(392),w=l.default.div.withConfig({displayName:"PureMapContainer",componentId:"sc-1gjwxfv-0"})([""," overflow:hidden;position:relative;z-index:0;background-color:",";",";.maplibregl-ctrl-top-left{position:absolute;top:12px;left:16px;.maplibregl-ctrl-group{width:40px !important;height:87px !important;border-radius:4px;margin:8px 0px;background-color:",`;box-shadow:0px 26px 103px rgba(0,0,0,0.64),0px 11px 18px rgba(0,0,0,0.32),0px 3px 6px rgba(0,0,0,0.3);& button{width:40px;height:43px;border-top:0;}.mapboxgl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url('data:image/svg+xml;charset=UTF-8,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M9 1C9 0.447715 8.55229 0 8 0C7.44772 0 7 0.447715 7 1V7H1C0.447715 7 0 7.44772 0 8C0 8.55229 0.447715 9 1 9H7V15C7 15.5523 7.44772 16 8 16C8.55229 16 9 15.5523 9 15V9H15C15.5523 9 16 8.55229 16 8C16 7.44772 15.5523 7 15 7H9V1Z" fill="`,'" fill-opacity="',`" /></svg>');}.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url('data:image/svg+xml;charset=UTF-8,<svg width="14" height="3" viewBox="0 0 14 3" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.99707C0 1.44479 0.447715 0.99707 1 0.99707H13C13.5523 0.99707 14 1.44479 14 1.99707C14 2.54936 13.5523 2.99707 13 2.99707H1C0.447715 2.99707 0 2.54936 0 1.99707Z" fill="`,'" fill-opacity="',`" /></svg>');}}}.maplibregl-ctrl-bottom-left{display:`,";position:absolute;z-index:0;bottom:16px;left:12px;width:86px;height:29px;border-radius:4px;margin:0;background-color:",";box-shadow:0px 26px 103px rgba(0,0,0,0.13),0px 11px 18px rgba(0,0,0,0.06),0px 3px 6px rgba(0,0,0,0.06);.maplibregl-ctrl-scale{background-color:",";color:",";border:2px solid ",";border-top:0;border-left:0;border-right:0;padding:0;margin:6px 8px 8px 8px;line-height:13px;letter-spacing:0.02em;font-family:sans-serif;font-size:10px;}}"],b.default,function(_){return _.backgroundColor},function(_){return a.toDimension(c.pick(_,["width","height"]))},function(_){return _.controlBackgroundColor},function(_){return _.controlIconColorEncoded.color},function(_){return _.controlIconColorEncoded.opacity},function(_){return _.controlIconColorEncoded.color},function(_){return _.controlIconColorEncoded.opacity},function(_){return _.showScale?"inline":"none"},function(_){return _.controlBackgroundColor},function(_){return _.controlBackgroundColor},function(_){return _.controlForegroundColor},function(_){return _.controlForegroundColor});i.default=w},392:function(s,i,n){"use strict";n.r(i),i.default=`.mapboxgl-map,.maplibregl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas,.maplibregl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:fullscreen,.maplibregl-map:fullscreen{height:100%;width:100%}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass,.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer,.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active,.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right,.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left,.maplibregl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right,.maplibregl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left,.maplibregl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right,.maplibregl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl,.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl,.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl,.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl,.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl,.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group,.maplibregl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button,.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon,.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon,.maplibregl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner,.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus,.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled,.maplibregl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover,.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-group button:focus:focus-visible,.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible),.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child,.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child,.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child,.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%23333'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain-enabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%2333b5e5'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact,a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib,.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact,.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a,.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover,.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-attrib-empty,.maplibregl-attrib-empty{display:none}.mapboxgl-ctrl-scale,.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.mapboxgl-popup,.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right,.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right,.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left,.maplibregl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right,.maplibregl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip,.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button,.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover,.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.mapboxgl-popup-content,.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content,.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content,.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer,.maplibregl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *,.maplibregl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer,.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer,.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.mapboxgl-marker,.maplibregl-marker{left:0;position:absolute;top:0;will-change:transform}.mapboxgl-user-location-dot,.maplibregl-user-location-dot{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before,.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;background-color:#1da1f2;border-radius:50%;content:"";height:15px;position:absolute;width:15px}.mapboxgl-user-location-dot:after,.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale,.maplibregl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after,.maplibregl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle,.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active,.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom,.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);bottom:0;color:#fff;display:flex;font-size:1.4em;justify-content:center;left:0;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;right:0;top:0;transition:opacity 1s ease 1s}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(max-width:480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}`},393:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(142),a=n(395),b=n(80),w=function(T){var x=T.clusterLayer,M=T.themeColorScheme,A=T.zoom,D=T.map,E=T.onMapClick,$;if((($=D==null?void 0:D.current)===null||$===void 0?void 0:$.isStyleLoaded)&&[x.longitude,x.latitude].every(Array.isArray)){if((x==null?void 0:x.type)===b.LAYER_TYPE.Marker&&!("geobin"in x))return l.createElement(a.default,{markerLayer:x,themeColorScheme:M,map:D,onMapClick:E});if((x==null?void 0:x.type)===b.LAYER_TYPE.Bubble&&"geobin"in x&&"bubbleSize"in x)return l.createElement(c.default,{bubbleLayer:x,themeColorScheme:M,map:D,zoom:A,onMapClick:E})}return null};i.default=w},394:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.convertDegToDMS=void 0;var l=n(0),c=n(4),a=n(84),b=n(2),w=c.default(a.default).withConfig({displayName:"Tooltip__StyledPopover",componentId:"xwewsa-0"})(["width:250px;font-size:12px;"]),_=c.default.table.withConfig({displayName:"Tooltip__StyledTable",componentId:"xwewsa-1"})(["margin:2px 6px 2px 6px;width:calc(100% - 12px);"]),T=c.default.td.withConfig({displayName:"Tooltip__StyledTitleColumn",componentId:"xwewsa-2"})(["opacity:0.85;"]),x=c.default.td.withConfig({displayName:"Tooltip__StyledValueColumn",componentId:"xwewsa-3"})(["text-align:right;"]),M=c.default.div.withConfig({displayName:"Tooltip__StyledColorBlock",componentId:"xwewsa-4"})(["background-color:",";display:inline-block;margin-right:4px;border-radius:2px;width:6px;height:11px;transform:translateY(1px);"],function(E){return E.color}),A=function($,Y){var G=function(re){return re>0?Math.floor(re):Math.ceil(re)},le=Math.abs($),K=G(le),F=G((le-K)*60),Q=Math.round((le-K-F/60)*3600);Q===60&&(F+=1,Q=0),F===60&&(K+=1,F=0);var L;return Y==="longitude"?L=$<0?"W":"E":Y==="latitude"&&(L=$<0?"S":"N"),"".concat(K,"\xB0 ").concat(F,"' ").concat(Q,'" ').concat(L)};i.convertDegToDMS=A;var D=function($){var Y=$.open,G=$.anchor,le=$.latitude,K=$.longitude,F=$.areaId,Q=$.areaValue,L=$.additionalFields,k=L===void 0?[]:L;return l.createElement(w,{open:Y,anchor:G,"data-test":"map-marker-tooltip",defaultPlacement:"above"},l.createElement(_,null,l.createElement("tbody",null,F&&Q&&l.createElement("tr",null,l.createElement(T,{"data-test":"area-id"},F),l.createElement(x,{"data-test":"area-value"},Q)),le&&l.createElement("tr",null,l.createElement(T,null,b._("Latitude")),l.createElement(x,{"data-test":"latitude"},i.convertDegToDMS(le,"latitude"))),K&&l.createElement("tr",null,l.createElement(T,null,b._("Longitude")),l.createElement(x,{"data-test":"longitude"},i.convertDegToDMS(K,"longitude"))),k.map(function(re,de){var Ie=re.name,et=re.value,lt=re.color;return l.createElement("tr",{key:String(de)},l.createElement(T,{"data-test":"field-title"},lt?l.createElement(M,{"data-test":"field-color",color:lt}):null,Ie),l.createElement(x,{"data-test":"field-value"},et))}))))};i.default=D},395:function(s,i,n){"use strict";var l=n(7),c=this&&this.__rest||function(Y,G){var le={};for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&G.indexOf(K)<0&&(le[K]=Y[K]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,K=Object.getOwnPropertySymbols(Y);F<K.length;F++)G.indexOf(K[F])<0&&Object.prototype.propertyIsEnumerable.call(Y,K[F])&&(le[K[F]]=Y[K[F]]);return le};Object.defineProperty(i,"__esModule",{value:!0}),i.generateMarkerWrapperProps=i.MarkerIcon=void 0;var a=n(4),b=n(0),w=n(12),_=n(3),T=n(80),x=n(116),M=function(G){var le=G.theme,K=G.color,F=c(G,["theme","color"]),Q=le==="light"?.7:.15;return b.createElement("svg",Object.assign({width:22,height:28,fill:"none"},F),b.createElement("path",{d:"M11 .5C5.201.5.5 5.201.5 11c0 3.136 1.376 5.952 3.555 7.875 2.839 2.506 4.144 4.58 4.893 6.02.183.35.334.665.469.946l.014.03c.136.285.263.548.387.766.235.412.571.863 1.182.863.61 0 .947-.45 1.182-.863.124-.218.25-.48.387-.765l.014-.03c.135-.282.286-.597.469-.947.75-1.44 2.054-3.514 4.893-6.02A10.476 10.476 0 0 0 21.5 11C21.5 5.201 16.799.5 11 .5Z",fill:K}),b.createElement("path",{d:"M11 .5C5.201.5.5 5.201.5 11c0 3.136 1.376 5.952 3.555 7.875 2.839 2.506 4.144 4.58 4.893 6.02.183.35.334.665.469.946l.014.03c.136.285.263.548.387.766.235.412.571.863 1.182.863.61 0 .947-.45 1.182-.863.124-.218.25-.48.387-.765l.014-.03c.135-.282.286-.597.469-.947.75-1.44 2.054-3.514 4.893-6.02A10.476 10.476 0 0 0 21.5 11C21.5 5.201 16.799.5 11 .5Z",stroke:"#08090A"}),b.createElement("path",{d:"M11 .5C5.201.5.5 5.201.5 11c0 3.136 1.376 5.952 3.555 7.875 2.839 2.506 4.144 4.58 4.893 6.02.183.35.334.665.469.946l.014.03c.136.285.263.548.387.766.235.412.571.863 1.182.863.61 0 .947-.45 1.182-.863.124-.218.25-.48.387-.765l.014-.03c.135-.282.286-.597.469-.947.75-1.44 2.054-3.514 4.893-6.02A10.476 10.476 0 0 0 21.5 11C21.5 5.201 16.799.5 11 .5Z",stroke:K,strokeOpacity:Q}))};i.MarkerIcon=M;var A=b.memo(function(Y){var G=Y.latitude,le=Y.longitude,K=Y.color,F=Y.themeColorScheme,Q=Y.map,L=Y.additionalFields,k=Y.handleLayerClick,re=b.useMemo(function(){return b.createElement(i.MarkerIcon,{color:K,theme:F,onClick:k})},[K,k,F]);return b.createElement(D,{latitude:G,longitude:le,map:Q,additionalFields:L,"data-test-type":"marker"},re)});A.displayName="MapMarker";var D=a.default(x.default).withConfig({displayName:"MarkerLayer__StyledMarkerWrapper",componentId:"ej9u2l-0"})(["width:22px;height:28px;cursor:pointer;"]),E=function(G){for(var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.noop,K=G.latitude,F=G.longitude,Q=!G.dataColors,L=Math.min(K.length,F.length,G.resultLimit?G.resultLimit:T.DEFAULT_RESULT_LIMIT),k=[],re=function(et){var lt=G.seriesColors&&w.isColor(G.seriesColors[0])?G.seriesColors[0]:T.DEFAULT_CLUSTER_COLOR,tt=G.dataColors&&w.isColor(G.dataColors[et])?G.dataColors[et]:T.DEFAULT_CLUSTER_COLOR,je=Q?lt:tt,Ee=G.metadata?G.additionalTooltipFields.map(function(te){return{name:te,value:G.metadata[et][te]}}):[],_e=function(ce){var Ae,ke=(Ae=G==null?void 0:G.metadata[et])!==null&&Ae!==void 0?Ae:{},Ce=Object.keys(ke).reduce(function($e,Ke){var Ve="row.".concat(Ke,".value"),rt=String(ke[Ke]);return Object.assign(Object.assign({},$e),l({},Ve,rt))},{});le({e:ce,payload:Ce})};k.push({latitude:K[et],longitude:F[et],color:je,additionalFields:Ee,handleLayerClick:_e})},de=0;de<L;de+=1)re(de);return k};i.generateMarkerWrapperProps=E;var $=function(G){var le=G.map,K=G.themeColorScheme,F=G.markerLayer,Q=G.onMapClick;F.seriesColors=F.seriesColors||T.DEFAULT_SERIES_COLORS;var L=b.useMemo(function(){return i.generateMarkerWrapperProps(F,Q)},[F,Q]);return b.createElement(b.Fragment,null,L.map(function(k,re){return b.createElement(A,Object.assign({key:String(re),themeColorScheme:K,map:le},k))}))};i.default=$},396:function(s,i,n){"use strict";var l=n(51);Object.defineProperty(i,"__esModule",{value:!0}),i.cleanupChoropleth=i.compareChoropleth=void 0;var c=n(0),a=n(3),b=n(80),w=n(116),_=function(Y){return"shape-".concat(Y)},T=function(Y){return"source-".concat(Y)},x=function(Y,G){return Y.type===G.type&&a.isEqual(Y.coordinates,G.coordinates)},M=function(Y,G){return x(Y.geomData,G.geomData)&&Y.id===G.id&&Y.map===G.map&&Y.areaId===G.areaId&&Y.areaValue===G.areaValue&&Y.color===G.color&&Y.opacity===G.opacity&&Y.isThemeChanged===G.isThemeChanged&&a.isEqual(Y.additionalFields,G.additionalFields)&&Y.handleMapClick.toString()===G.handleMapClick.toString()};i.compareChoropleth=M;var A=function(Y,G,le){var K,F,Q,L;try{Q=(K=le==null?void 0:le.current)===null||K===void 0?void 0:K.getLayer(Y),L=(F=le==null?void 0:le.current)===null||F===void 0?void 0:F.getSource(G)}catch(k){return}Q&&le.current.removeLayer(Y),L&&le.current.removeSource(G)};i.cleanupChoropleth=A;var D=c.memo(function($){var Y=$.id,G=$.areaId,le=$.areaValue,K=$.geomData,F=$.map,Q=$.color,L=$.opacity,k=$.isThemeChanged,re=$.additionalFields,de=$.handleMapClick,Ie=T(Y),et=_(Y),lt=L&&L<b.DEFAULT_OPACITY?L:b.DEFAULT_OPACITY,tt={type:"Feature",geometry:K},je=c.useState(!1),Ee=l(je,2),_e=Ee[0],te=Ee[1],ce=c.useState(0),Ae=l(ce,2),ke=Ae[0],Ce=Ae[1],$e=c.useState(0),Ke=l($e,2),Ve=Ke[0],rt=Ke[1],it=c.useCallback(function(){te(!0)},[]),dt=c.useCallback(function(){te(!1)},[]),bt=c.useCallback(function(){i.cleanupChoropleth(et,Ie,F),F.current.addSource(Ie,{type:"geojson",data:tt}),F.current.addLayer({id:et,type:"fill",source:Ie,layout:{},paint:{"fill-opacity":lt,"fill-color":Q}}),F.current.on("mousemove",et,function(Wt){var Ht=Wt.lngLat;Ce(Ht.lat),rt(Ht.lng),it(),F.current.getCanvas().style.cursor="pointer"}),F.current.on("mouseleave",et,function(){dt(),F.current.getCanvas().style.cursor=""}),F.current.on("click",et,function(Wt){de(Wt)})},[et,Ie,F,Q,lt,tt]);return c.useEffect(function(){bt()},[F,K,Q,L,Y]),c.useEffect(function(){return function(){return i.cleanupChoropleth(et,Ie,F)}},[]),k&&bt(),c.createElement(w.default,{isChoroplethTooltipOpen:_e,additionalFields:re,latitude:ke,longitude:Ve,map:F,areaId:G,areaValue:le},c.createElement("div",{"data-test":"choropleth-anchor",style:{padding:"24px",visibility:"hidden"}}))},i.compareChoropleth);D.displayName="MapChoropleth";var E=function(Y){var G,le,K,F,Q,L,k,re,de=Y.map,Ie=Y.choroplethLayer,et=Y.isThemeChanged,lt=Y.setIsThemeChanged,tt=Y.onMapClick,je=(G=b.getScaledOpacities(Ie==null?void 0:Ie.dataColors))!==null&&G!==void 0?G:[],Ee=(le=Ie==null?void 0:Ie.dataColors)===null||le===void 0?void 0:le.map(function(Ce){return(Ce==null?void 0:Ce.length)>7?Ce.slice(0,7):Ce}),_e=Math.min((K=Ie==null?void 0:Ie.areaIds)===null||K===void 0?void 0:K.length,(F=Ie==null?void 0:Ie.areaValues)===null||F===void 0?void 0:F.length,(L=(Q=Ie==null?void 0:Ie.geom)===null||Q===void 0?void 0:Q.length)!==null&&L!==void 0?L:0,Ie!=null&&Ie.resultLimit?Ie.resultLimit:b.DEFAULT_RESULT_LIMIT),te=(re=(k=Ie==null?void 0:Ie.areaIds)===null||k===void 0?void 0:k.slice(0,_e))!==null&&re!==void 0?re:[],ce=a.uniq(te).length!==te.length?te.map(function(Ce,$e){return"".concat(Ce).concat($e)}):te,Ae=Ie!=null&&Ie.metadata?Ie.metadata.map(function(Ce){return Ie.additionalTooltipFields.map(function($e){return{name:$e,value:Ce[$e]}})}):[],ke=function($e,Ke){var Ve=b.formatMetadata(Ie,Ke);tt({e:$e,payload:Ve})};return!de||!Ie||!Ie.geom?c.createElement(c.Fragment,null):(et&&lt(!1),c.createElement("div",null,ce.map(function(Ce,$e){var Ke=te[$e],Ve=Ie.areaValues[$e];return c.createElement(D,{key:Ce,id:Ce,geomData:Ie.geom[$e],map:de,color:Ee[$e],opacity:je[$e],isThemeChanged:et,areaId:Ke,areaValue:Ve,additionalFields:Ae[$e],handleMapClick:function(it){return ke(it,$e)}})})))};i.default=E},397:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(47),c=n(44),a=n(16),b=n(46),w=n(69),_=n(2),T=n(6),x=n(31),M=n(17),A=n(80),D={colorRangeConfig:[{to:20,value:"#D41F1F"},{from:20,to:40,value:"#D94E17"},{from:40,to:60,value:"#CBA700"},{from:60,to:80,value:"#669922"},{from:80,value:"#118832"}]},E={requiredDataSources:[],optionalDataSources:[{name:"primary",description:"DataSource that powers the visualization."}],initialRequestParams:{primary:{offset:0,count:1e4}}},$={initialWidth:800,initialHeight:600},Y={backgroundColor:{default:"> themes.defaultBackgroundColor",description:'Specify a color for the background. You might use a dataSource to apply the color. The default for enterprise light is "#FFFFFF". The default for enterprise dark is "#000000". The default for prisma dark is "#0B0C0E".',pattern:a.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},center:{type:"array",description:"Specify the center of the map in coordinates, in the form of [latitude, longitude]. If you don\u2019t provide coordinates, the map automatically centers, based on available location data. If there is no available location data, the center of the map defaults to [37.7749, -122.4194].",items:{type:"number"}},layers:{default:[{type:A.LAYER_TYPE.Bubble,latitude:'> primary | seriesByName("latitude")',longitude:'> primary | seriesByName("longitude")',seriesColors:b.VIZ_CATEGORICAL,bubbleSize:'> primary | frameWithoutSeriesNames("geobin", "latitude", "longitude") | frameBySeriesTypes("number")',additionalTooltipFields:[],resultLimit:1e3},{type:A.LAYER_TYPE.Marker,latitude:'> primary | seriesByName("latitude")',longitude:'> primary | seriesByName("longitude")',seriesColors:b.VIZ_CATEGORICAL,additionalTooltipFields:[],resultLimit:1e3},{type:A.LAYER_TYPE.Choropleth,areaIds:'> primary | seriesByType("string")',areaValues:'> primary | seriesByType("number")',dataColors:"> areaValues | gradient()",additionalTooltipFields:[],resultLimit:1e3}],type:"array",description:"Specify the optional data visualization layers over the base map. If empty, only the base map appears.",items:{anyOf:[{type:"object",properties:{type:{description:'Specify the type of data layer method to display points on the map. For example, \u201Cbubble\u201D, \u201Cmarker\u201D, or "choropleth".',type:"string",pattern:a.getPattern([A.LAYER_TYPE.Marker,A.LAYER_TYPE.Bubble,A.LAYER_TYPE.Choropleth]),default:A.LAYER_TYPE.Marker},latitude:{description:'Specify a dataSource series to apply latitude coordinates for data points displayed on the map. This applies to layers where type: "bubble" or type: "marker".',type:["string","array"],items:{type:"number"},default:'> primary | seriesByName("latitude")'},longitude:{description:'Specify a dataSource series to apply longitude coordinates for data points displayed on the map. This applies to layers where type: "bubble" or type: "marker".',type:["string","array"],items:{type:"number"},default:'> primary | seriesByName("longitude")'},seriesColors:{description:'Specify the colors to use for data points. If the dataColors option is specified, the seriesColors option is ignored. The seriesColors option applies to layers where type: "bubble" or type: "marker".',type:"array",items:{type:"string",pattern:a.COLOR_OR_TOKEN_PATTERN_WITH_RGBA},default:b.VIZ_CATEGORICAL},dataColors:{description:'Specify the colors to use for data points. You can use an array of colors to be picked from, or you can use a dataSource to apply dynamic coloring. For example, \u201C> primary | seriesByName("status") | matchValue(colorMatchConfig)\u201D. When type: "choropleth", dataColors is defined by default, and the opacities are shown at 80% of maximum to allow textual information to be visible in the map. By default, the dataColors option is not defined for type "bubble" or "marker".',type:["string","array"],items:{type:"string"}},additionalTooltipFields:{description:"Specify the fields to add to the default set of tooltips. Tooltips appear when you hover over data points. These fields and their corresponding values are shown in addition to the ones displayed by default.",type:"array",items:{type:"string"},default:[]},resultLimit:{description:"Specify the maximum number of data points to render on the map. Adjust the value to improve performance.",type:"number",default:1e3}}},{type:"object",properties:{type:{description:'Specify the type of data layer method to display points on the map. For example, \u201Cbubble\u201D, \u201Cmarker\u201D, or "choropleth".',type:"string",pattern:a.getPattern([A.LAYER_TYPE.Marker,A.LAYER_TYPE.Bubble,A.LAYER_TYPE.Choropleth]),default:A.LAYER_TYPE.Choropleth},areaIds:{description:'Specify a dataSource series to identify each area in the choropleth map layer. This applies to layers where type: "choropleth".',type:"array",items:{type:"string"},default:'> primary | seriesByType("string")'},areaValues:{description:'Specify a dataSource series that indicates the values for the choropleth map areas. This applies to layers where type: "choropleth".',type:"array",items:{type:"number"},default:'> primary | seriesByType("number")'},dataColors:{description:'Specify the colors to use for data points. You can use an array of colors to be picked from, or you can use a dataSource to apply dynamic coloring. For example, \u201C> primary | seriesByName("status") | matchValue(colorMatchConfig)\u201D. When type: "choropleth", dataColors is defined by default, and the opacities are shown at 80% of maximum to allow textual information to be visible in the map. By default, the dataColors option is not defined for type "bubble" or "marker".',type:["string","array"],items:{type:"string"},default:"> areaValues | gradient()"},additionalTooltipFields:{description:"Specify the fields to add to the default set of tooltips. Tooltips appear when you hover over data points. These fields and their corresponding values are shown in addition to the ones displayed by default.",type:"array",items:{type:"string"},default:[]},resultLimit:{description:"Specify the maximum number of data points to render on the map. Adjust the value to improve performance.",type:"number",default:1e3}}},{type:"object",properties:{type:{description:'Specify the type of data layer method to display points on the map. For example, \u201Cbubble\u201D, \u201Cmarker\u201D, or "choropleth".',type:"string",pattern:a.getPattern([A.LAYER_TYPE.Marker,A.LAYER_TYPE.Bubble,A.LAYER_TYPE.Choropleth]),default:A.LAYER_TYPE.Bubble},bubbleSize:{description:'Specify the data column to encode bubble size. This applies to layers where type: "bubble".',type:["string","array"],items:{type:"number"},default:'> primary | frameWithoutSeriesNames("geobin", "latitude", "longitude") | frameBySeriesTypes("number")'},latitude:{description:'Specify a dataSource series to apply latitude coordinates for data points displayed on the map. This applies to layers where type: "bubble" or type: "marker".',type:["string","array"],items:{type:"number"},default:'> primary | seriesByName("latitude")'},longitude:{description:'Specify a dataSource series to apply longitude coordinates for data points displayed on the map. This applies to layers where type: "bubble" or type: "marker".',type:["string","array"],items:{type:"number"},default:'> primary | seriesByName("longitude")'},seriesColors:{description:'Specify the colors to use for data points. If the dataColors option is specified, the seriesColors option is ignored. The seriesColors option applies to layers where type: "bubble" or type: "marker".',type:"array",items:{type:"string",pattern:a.COLOR_OR_TOKEN_PATTERN_WITH_RGBA},default:b.VIZ_CATEGORICAL},dataColors:{description:'Specify the colors to use for data points. You can use an array of colors to be picked from, or you can use a dataSource to apply dynamic coloring. For example, \u201C> primary | seriesByName("status") | matchValue(colorMatchConfig)\u201D. When type: "choropleth", dataColors is defined by default, and the opacities are shown at 80% of maximum to allow textual information to be visible in the map. By default, the dataColors option is not defined for type "bubble" or "marker".',type:["string","array"],items:{type:"string"}},additionalTooltipFields:{description:"Specify the fields to add to the default set of tooltips. Tooltips appear when you hover over data points. These fields and their corresponding values are shown in addition to the ones displayed by default.",type:"array",items:{type:"string"},default:[]},resultLimit:{description:"Specify the maximum number of data points to render on the map. Adjust the value to improve performance.",type:"number",default:1e3}}}]}},scaleUnit:{default:"metric",type:"string",description:"Specify the scale unit to use.",pattern:a.getPattern(["metric","imperial"])},showScale:{default:!0,type:"boolean",description:"Specify whether to display the scale on the bottom left."},baseLayerTileServer:{type:"string",description:"Specify the URL for the set of tiles that make up the base map."},baseLayerTileServerType:{type:"string",description:"Specify the type of tile set for the base map.",pattern:a.getPattern(["vector","raster"])},zoom:{description:"Specify the zoom level of the map.",type:"number"}},G={defaultBackgroundColor:function(L){return w.pick({enterprise:{dark:w.variables.black(L),light:w.variables.backgroundColor(L)},prisma:w.variables.backgroundColorSidebar(L)})(L)},controlBackgroundColor:function(L){return w.pick({enterprise:{dark:w.variables.gray22(L),light:w.variables.white(L)},prisma:w.variables.backgroundColorPopup(L)})(L)},controlForegroundColor:function(L){return w.pick({enterprise:w.variables.textColor(L),prisma:w.variables.contentColorDefault(L)})(L)}},le=function(L){return L.layers&&L.layers.length&&L.layers[0].type===A.LAYER_TYPE.Choropleth},K=[{label:_._("Data layer formatting"),layout:[[{label:_._("Layer type"),option:"layers[0].type",editor:"editor.select",editorProps:{values:[{label:_._("Marker"),value:A.LAYER_TYPE.Marker},{label:_._("Bubble"),value:A.LAYER_TYPE.Bubble},{label:_._("Choropleth"),value:A.LAYER_TYPE.Choropleth}]}}],[{label:_._("Region area IDs"),option:"layers[0].areaIds",editor:"editor.columnSelector",showEditor:function(L){var k=L.options;return le(k)},editorProps:{dataSourceKey:"primary",shouldShowInternalFields:!1,filterByTypes:["string"]}}],[{label:_._("Values"),option:"layers[0].areaValues",editor:"editor.columnSelector",showEditor:function(L){var k=L.options;return le(k)},editorProps:{dataSourceKey:"primary",shouldShowInternalFields:!1,filterByTypes:["number"]}}],[{label:_._("Latitude"),option:"layers[0].latitude",editor:"editor.columnSelector",showEditor:function(L){var k=L.options;return!(k.layers&&k.layers.length&&k.layers[0].type==="choropleth")},editorProps:{dataSourceKey:"primary",shouldShowInternalFields:!1}}],[{label:_._("Longitude"),option:"layers[0].longitude",editor:"editor.columnSelector",showEditor:function(L){var k=L.options;return!(k.layers&&k.layers.length&&k.layers[0].type==="choropleth")},editorProps:{dataSourceKey:"primary",shouldShowInternalFields:!1}}],[{label:_._("Size"),option:"layers[0].bubbleSize",editor:"editor.columnMultiSelector",showEditor:function(L){var k=L.options;return!(k.layers&&k.layers.length&&(k.layers[0].type==="marker"||k.layers[0].type==="choropleth"))},editorProps:{dataSourceKey:"primary",shouldShowInternalFields:!1,excludeByNames:["latitude","longitude","geobin"]}}]]}],F={key:"splunk.map",name:"Map",category:x.VizCategory.CHOROPLETH,status:"preview",icon:l.Map,placeholderIcon:c.Map,dataContract:E,size:$,defaultContext:D,optionsSchema:Y,editorConfig:K,events:{"map.load":{description:"triggered when map is fully loaded"},"map.click":{description:"trigger when user clicks map layer"}},supports:[T.VizBehavior.DYNAMIC_OPTIONS,T.VizBehavior.EVENTS,T.VizBehavior.PLACEHOLDER],themes:G,requiredProps:[]};i.default=M.enhanceConfig(F)},398:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.columnsNullToZeros=void 0;var l=n(81),c=n(95),a=n(25),b=n(26),w=function(T,x,M){var A,D,E=x.primary,$=E.data,Y=$.columns,G=$.fields,le=Y,K=a.deepMergeWithArrayPrimitiveOverrides({},M,b.pickFieldFromJSONSchema(T.optionsSchema,"default"));if(((D=(A=K.layers)===null||A===void 0?void 0:A[0])===null||D===void 0?void 0:D.type)==="bubble"){var F=c.getFieldsFromDSL(K.layers[0].latitude,x)[0]||"",Q=c.getFieldsFromDSL(K.layers[0].longitude,x)[0]||"",L=[F,Q,"geobin"],k=new Set(G.reduce(function(de,Ie,et){var lt=typeof Ie=="string"?Ie:Ie.name.toString();return L.includes(lt)||de.push(et),de},[]));le=Y.map(function(de,Ie){return k.has(Ie)?de.map(function(et){return!et||!l.isNumber(et)?0:+et}):de})}var re=Object.assign(Object.assign({},x),{primary:Object.assign(Object.assign({},E),{data:Object.assign(Object.assign({},E.data),{columns:le})})});return re};i.columnsNullToZeros=w},4:function(s,i){s.exports=Qn()},40:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useDeepMemo=void 0;var l=n(0),c=n(3),a=function(w,_){var T=l.useRef();return(!T.current||!c.isEqual(_,T.current.dependencies))&&(T.current={dependencies:_,value:w()}),T.current.value};i.useDeepMemo=a},41:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MissingPropsMessage=i.missingKeys=i.isMissing=void 0;var l=n(0),c=n(1),a=n(2),b=n(10),w=n(13),_=function(D){return D==null};i.isMissing=_;var T=function(D,E){return D.filter(function($){return i.isMissing(E[$])})};i.missingKeys=T;var x={width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,missingProps:c.arrayOf(c.string)},M=function(D){var E=D.width,$=D.height,Y=D.missingProps;return l.createElement(b.default,{"data-test":"message",width:E,height:$,message:a._("Missing property: ".concat(Y.join(", ")))})};i.MissingPropsMessage=M,i.MissingPropsMessage.propTypes=x,i.MissingPropsMessage.defaultProps={width:"100%",height:250},i.default=w.default(i.MissingPropsMessage)},42:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(14),b=c.default.div.withConfig({displayName:"withEditModeCover__Cover",componentId:"sc-1gsbnxb-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;"]),w=c.default.div.attrs({"data-splunk-visualization-version":"25.3.6 - 6b2578d73"}).withConfig({displayName:"withEditModeCover__Blocker",componentId:"sc-1gsbnxb-1"})(["position:relative;width:100%;height:100%;"]),_=function(x,M){var A=function(E){var $=E.mode,Y=$==="edit"&&!M;return l.createElement(w,null,l.createElement(x,Object.assign({},E)),Y&&l.createElement(b,{"data-test":"edit-mode-cover"}))};return a.extendStaticWrapperProps({Wrapper:A,Visualization:x}),A};i.default=_},43:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(12),a=n(9),b=n(27),w=n(6),_=n(14),T=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.shouldShowIconPlaceholder,D=M.config,E=D.themes,$=function(G){var le,K,F=G.dataSources,Q=G.loading,L=G.options,k=G.height,re=G.width,de=A(F,Q,L),Ie=c.isColor(L==null?void 0:L.backgroundColor)?L==null?void 0:L.backgroundColor:(le=E==null?void 0:E.defaultBackgroundColor)===null||le===void 0?void 0:le.call(E,G),et=(K=D.placeholderIcon)!==null&&K!==void 0?K:D.icon,lt=a.default.contentColorActive(G);return D.supports.includes(w.VizBehavior.PLACEHOLDER)&&de?l.createElement(b.default,{"data-test":"icon-placeholder",icon:et,width:re,height:k,backgroundColor:Ie,iconColor:lt}):l.createElement(M,Object.assign({},G))};return _.extendStaticWrapperProps({Wrapper:$,Visualization:M}),$};i.default=T},44:function(s,i){s.exports=Td()},46:function(s,i){s.exports=s_()},47:function(s,i){s.exports=Ed()},51:function(s,i){s.exports=_d()},6:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizBehavior=void 0;var l;(function(c){c.DYNAMIC_OPTIONS="dynamic-options",c.EVENTS="events",c.PLACEHOLDER="placeholder",c.PAGE_AND_SORT="page-and-sort"})(l=i.VizBehavior||(i.VizBehavior={}))},69:function(s,i){s.exports=o_()},7:function(s,i){s.exports=_l()},79:function(s,i){s.exports=E1()},8:function(s,i){s.exports=Uu()},80:function(s,i,n){"use strict";var l=n(7),c=n(51),a=n(8);Object.defineProperty(i,"__esModule",{value:!0}),i.formatMetadata=i.compareBaseStyles=i.getScaledOpacities=i.getGlobalLayerBoundaries=i.isValidLatLon=i.bakeBubbleData=i.sanitizeValues=i.transposeArray=i.matchBubbleSize=i.getStaticColors=i.getZoomLevelFromGeobin=i.getZoomConstraintsFromTileConfig=i.getMapStyle=i.getTilePreset=i.LAYER_TYPE=i.DEFAULT_OPACITY=i.MAX_BUBBLE_RADIUS=i.MIN_BUBBLE_RADIUS=i.MAP_STYLE_VERSION_NUMBER=i.DEFAULT_SERIES_COLORS=i.DEFAULT_CLUSTER_COLOR=i.DEFAULT_RESULT_LIMIT=i.MIN_LONGITUDE=i.MAX_LONGITUDE=i.MIN_LATITUDE=i.MAX_LATITUDE=void 0;var b=n(3),w=n(79),_=n(140),T=n(12),x=n(46),M=n(81);i.MAX_LATITUDE=90,i.MIN_LATITUDE=-90,i.MAX_LONGITUDE=180,i.MIN_LONGITUDE=-180,i.DEFAULT_RESULT_LIMIT=1e3,i.DEFAULT_CLUSTER_COLOR="#909090",i.DEFAULT_SERIES_COLORS=x.VIZ_CATEGORICAL,i.MAP_STYLE_VERSION_NUMBER=8,i.MIN_BUBBLE_RADIUS=7.11,i.MAX_BUBBLE_RADIUS=45.26,i.DEFAULT_OPACITY=.8;var A="longitude",D="latitude",E;(function(je){je.Marker="marker",je.Bubble="bubble",je.Choropleth="choropleth"})(E=i.LAYER_TYPE||(i.LAYER_TYPE={}));var $=function(Ee){var _e=Ee.defaultTileConfig,te=_e===void 0?[]:_e,ce=Ee.customTileConfig,Ae=ce===void 0?[]:ce,ke,Ce,$e={},Ke={},Ve={},rt=[].concat(te).concat(Ae);return b.forEach(rt,function(it){var dt=it==null?void 0:it.key,bt=Object.assign(Object.assign({theme:"all"},it),{version:i.MAP_STYLE_VERSION_NUMBER});$e[dt]=bt}),te.length>0&&(Ke=(ke=te.find(function(it){return it.theme==="light"}))!==null&&ke!==void 0?ke:te.find(function(it){return it.theme===void 0}),Ve=(Ce=te.find(function(it){return it.theme==="dark"}))!==null&&Ce!==void 0?Ce:te.find(function(it){return it.theme===void 0})),{tilePreset:$e,defaultTileLight:Ke,defaultTileDark:Ve}};i.getTilePreset=$;var Y=function(Ee){var _e=Ee.baseLayerTileServer,te=_e===void 0?"":_e,ce=Ee.baseLayerTileServerType,Ae=ce===void 0?"":ce,ke=Ee.tilePreset,Ce=ke===void 0?{}:ke,$e=Ee.colorScheme,Ke=$e===void 0?"light":$e,Ve=Ee.defaultTileLight,rt=Ve===void 0?{}:Ve,it=Ee.defaultTileDark,dt=it===void 0?{}:it;if(te&&Ce[te]&&(Ce[te].theme===Ke||Ce[te].theme==="all"))return Ce[te];if(te&&Ae){var bt=[];te.match(/^(https?):\/\/{(s|S)}\../)?bt=[te.replace(/{(s|S)}/,"a"),te.replace(/{(s|S)}/,"b"),te.replace(/{(s|S)}/,"c")]:bt=[te];var Wt={version:i.MAP_STYLE_VERSION_NUMBER,sources:{"base-tiles":{type:Ae,tiles:bt,tileSize:256}},layers:[{id:"base-layer",type:"raster",source:"base-tiles",minzoom:0,maxzoom:24}]};return Wt}return Ke==="light"?rt:dt};i.getMapStyle=Y;var G=function(Ee,_e){for(var te=Ee.sources,ce=Ee.layers,Ae=!1,ke=Object.keys(te),Ce=0;Ce<ke.length;Ce+=1){var $e=te[ke[Ce]],Ke=$e.minzoom,Ve=$e.maxzoom;if(_e&&te[ke[Ce]].tiles.indexOf(_e)!==-1&&(Ae=!0),(_e&&Ae||!_e)&&b.isNumber(Ke)&&b.isNumber(Ve))return{minZoom:Ke,maxZoom:Ve}}for(var rt=0;rt<ce.length;rt+=1){var it=ce[rt],dt=it.minzoom,bt=it.maxzoom;if((_e&&Ae||!_e)&&b.isNumber(dt)&&b.isNumber(bt))return{minZoom:dt,maxZoom:bt}}return{minZoom:0,maxZoom:24}};i.getZoomConstraintsFromTileConfig=G;var le=function(Ee){var _e;if(!Ee)return null;var te=/bin_id_zl_([0-9]{0,2})?_y_/g,ce=te.exec(Ee);return(_e=(ce==null?void 0:ce.length)&&parseInt(ce[1],10))!==null&&_e!==void 0?_e:null};i.getZoomLevelFromGeobin=le;var K=function(Ee,_e){return Ee<0||!Ee?[i.DEFAULT_CLUSTER_COLOR]:!_e||!_e.length?a(Array(Ee).keys()).map(function(te){return i.DEFAULT_SERIES_COLORS[te]}):a(Array(Ee).keys()).map(function(te){return T.isColor(_e[te%_e.length])?_e[te%_e.length]:i.DEFAULT_CLUSTER_COLOR})};i.getStaticColors=K;var F=function(Ee,_e){var te=w.scalePow().exponent(.2).domain(Ee).range([i.MIN_BUBBLE_RADIUS,i.MAX_BUBBLE_RADIUS])(_e);return te>i.MAX_BUBBLE_RADIUS?i.MAX_BUBBLE_RADIUS:te<i.MIN_BUBBLE_RADIUS?i.MIN_BUBBLE_RADIUS:te};i.matchBubbleSize=F;var Q=function(Ee){return!Ee||!Ee.length||!Ee[0]||!Ee[0].length?[]:Ee[0].map(function(_e,te){return Ee.map(function(ce){return ce[te]})})};i.transposeArray=Q;var L=function(Ee){return Ee?Array.isArray(Ee)?Ee.map(function(_e){return i.sanitizeValues(_e)}):Ee>0?Ee:0:0};i.sanitizeValues=L;var k=function(Ee){var _e;if(!Ee||!(!((_e=Ee.bubbleSize)===null||_e===void 0)&&_e.length)||!Ee.geobin||!Ee.geobin.length||!Ee.latitude||!Ee.latitude.length||!Ee.longitude||!Ee.longitude.length)return null;var te=i.sanitizeValues(Ee.bubbleSize),ce,Ae,ke=!1;if(Array.isArray(Ee.bubbleSize[0])?(ce=i.transposeArray(Ee.bubbleSize),Ae=i.transposeArray(te),Ee.bubbleSize.length>1&&(ke=!0)):(ce=Ee.bubbleSize.map(function(Ve){return[Ve]}),Ae=te.map(function(Ve){return[Ve]})),!ce||!ce.length)return null;var Ce=Ee.latitude.map(function(Ve,rt){return{zoom:i.getZoomLevelFromGeobin(Ee.geobin[rt]),values:ce[rt],sanitizedValues:Ae[rt],coordinates:[Ee.longitude[rt],Ve],metadata:Ee.metadata?Ee.metadata[rt]:{}}}).filter(function(Ve){return Boolean(Ve.values)}),$e=b.sum(Ae[0]),Ke=b.sum(Ae[1]);return Ae.forEach(function(Ve){var rt=b.sum(Ve);Ke=rt>Ke?rt:Ke,$e=rt<$e?rt:$e}),{data:Ce,dataRange:[$e,Ke],isPie:ke,resultLimit:Ee.resultLimit,bubbleSizeFields:Ee.bubbleSizeFields}};i.bakeBubbleData=k;var re=function(Ee){if(!Ee||!Array.isArray(Ee)||Ee.length!==2)return!1;var _e=c(Ee,2),te=_e[0],ce=_e[1];return!(!M.isNumber(te)||!(te>=i.MIN_LATITUDE&&te<=i.MAX_LATITUDE)||!M.isNumber(ce)||!(ce>=i.MIN_LONGITUDE&&ce<=i.MAX_LONGITUDE))};i.isValidLatLon=re;var de=function(Ee,_e){var te=function(ke){return b.get(ke,_e,[]).slice(0,ke.type===E.Marker&&ke.resultLimit?ke.resultLimit:i.DEFAULT_RESULT_LIMIT)},ce=function(ke){var Ce=ke.geom.slice(0,ke.resultLimit),$e=Ce.flatMap(function(Ke){return Ke.coordinates.flat(2)});return $e.map(function(Ke){return Ke[_e===A?0:1]})};return Ee.type===E.Choropleth?ce(Ee):te(Ee)},Ie=function(Ee){var _e=function($e){return Ee.every(function(Ke){return Ke[$e]||Ke.geom})},te=function($e){return $e===A?i.MAX_LONGITUDE:i.MAX_LATITUDE},ce=function($e){return $e===A?i.MIN_LONGITUDE:i.MIN_LATITUDE};if(!Ee||!Array.isArray(Ee)||!Ee.length)return null;var Ae=function($e){return _e($e)?Ee.reduce(function(Ke,Ve){var rt=de(Ve,$e).map(function(it){return+it});return b.min([Ke].concat(a(rt)))},te($e)):ce($e)},ke=function($e){return _e($e)?Ee.reduce(function(Ke,Ve){var rt=de(Ve,$e).map(Number);return b.max([Ke].concat(a(rt)))},ce($e)):te($e)};return[[Ae(A),Ae(D)],[ke(A),ke(D)]]};i.getGlobalLayerBoundaries=Ie;var et=function(Ee){var _e=Ee==null?void 0:Ee.map(function(te){var ce;return(te==null?void 0:te.length)===9&&(ce=_(te).alpha())!==null&&ce!==void 0?ce:i.DEFAULT_OPACITY});return(_e==null?void 0:_e.filter(function(te){return te>i.DEFAULT_OPACITY}).length)>0?_e.map(function(te){return te*i.DEFAULT_OPACITY}):_e};i.getScaledOpacities=et;var lt=function(Ee,_e){var te,ce,Ae,ke,Ce=(te=Ee==null?void 0:Ee.layers)===null||te===void 0?void 0:te.find(function(rt){return(rt==null?void 0:rt.id)==="base-layer"}),$e=(ce=_e==null?void 0:_e.layers)===null||ce===void 0?void 0:ce.find(function(rt){return(rt==null?void 0:rt.id)==="base-layer"}),Ke=b.get(Ee==null?void 0:Ee.sources,(Ae=Ce==null?void 0:Ce.source)!==null&&Ae!==void 0?Ae:""),Ve=b.get(_e==null?void 0:_e.sources,(ke=$e==null?void 0:$e.source)!==null&&ke!==void 0?ke:"");return!Ce||!$e||!Ke||!Ve?!1:b.isEqual(Ce,$e)&&b.isEqual(Ke,Ve)};i.compareBaseStyles=lt;var tt=function(Ee,_e){if(!Ee||!Ee.areaIds||!Ee.areaValues)return{};if(_e>=Ee.areaIds.length)return{};var te=Ee.metadata?Ee.metadata[_e]:{},ce=Ee.areaIds[_e],Ae=Ee.areaValues[_e],ke={name:ce,value:String(Ae)};return Object.keys(te).reduce(function(Ce,$e){var Ke="row.".concat($e,".value"),Ve=b.isObject(te[$e])?JSON.stringify(te[$e]):String(te[$e]);return Object.assign(Object.assign({},Ce),l({},Ke,Ve))},ke)};i.formatMetadata=tt},81:function(s,i){s.exports=O1()},84:function(s,i){s.exports=Lc()},9:function(s,i){s.exports=Cd()},95:function(s,i){s.exports=v_()}})});var zf=Xt((pM,F1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */F1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=63)}({25:function(s,i){s.exports=d_()},43:function(s,i){s.exports=t_()},63:function(s,i,n){"use strict";n.r(i),n.d(i,"convertPropsToString",function(){return w}),n.d(i,"formatColor",function(){return _});var l=n(43),c=n.n(l),a=n(25),b=n.n(a),w=function(x){var M=x.vizProps,A=M===void 0?{}:M,D=x.propNames,E=D===void 0?[]:D,$={};return E.forEach(function(Y){var G=A[Y];Array.isArray(G)||c()(G)?$[Y]=JSON.stringify(G):G&&typeof G=="string"&&b.a.warn("The option type 'string' for '".concat(Y,"' has been deprecated."))}),$},_=function(x){return!x||typeof x!="string"?"":x.replace("0x","#")}}})});var kf=Xt((mM,V1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */V1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=61)}({14:function(s,i){s.exports=is()},27:function(s,i){s.exports=xd()},3:function(s,i){s.exports=zr()},61:function(s,i,n){"use strict";n.r(i),n.d(i,"isNumerialStr",function(){return $}),n.d(i,"isNumerial",function(){return Y}),n.d(i,"parseNumber",function(){return G}),n.d(i,"formatNumber",function(){return K});var l=n(27),c=n.n(l),a=n(14),b=n.n(a),w=n(3),_=n.n(w),T=n(7),x=n.n(T),M=/(^[-+]?[0-9]*[.]?[0-9]*$)|(^[-+]?[0-9][.]?[0-9]*e[-+]?[0-9][0-9]*$)/i,A=/(^[-+]?([0]|([1-9][0-9]{0,2})|(([1-9][0-9]{0,2}[,])([0-9]{3}[,])*[0-9]{3}))(([.][0-9]+)?)$)/;function D(F){return M.test(F)}function E(F){return A.test(F)}function $(F){return D(F)||E(F)}function Y(F){return Object(w.isFinite)(F)||Object(w.isString)(F)&&$(F)}function G(F){return Object(w.isFinite)(F)||Object(w.isString)(F)&&D(F)?parseFloat(F):Object(w.isString)(F)&&E(F)?parseFloat(F.replace(/,/g,"")):NaN}var le=Object(w.memoize)(function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Intl.NumberFormat(F,Q)},function(F,Q){return"".concat(F).concat(JSON.stringify(Q))});function K(F,Q){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k={},re=Q&&c()(Q)==="object"?Q:L,de=re.useThousandSeparators,Ie=de===void 0?!1:de,et=re.locale,lt=et===void 0?b.a.locale():et,tt=re.defaultPrecision,je=tt===void 0?0:tt,Ee=re.useTrendUnits,_e=Ee===void 0?!1:Ee;if(Object(w.isInteger)(Q)&&Q>=0){var te=Q>20?20:Q;k.minimumFractionDigits=te,k.maximumFractionDigits=te}else k.maximumFractionDigits=je;k.useGrouping=Ie===!0;var ce="",Ae=F,ke=[{letter:"T",power:12},{letter:"B",power:9},{letter:"M",power:6},{letter:"K",power:3}];if(_e){var Ce=ke.find(function(Ke){return Math.abs(Ae)>Math.pow(10,Ke.power)});Ce&&(Ae/=Math.pow(10,Ce.power),ce=Ce.letter,k.maximumFractionDigits=2,k.minimumFractionDigits=0)}var $e=le(lt,k);return"".concat($e.format(Ae)).concat(ce?Object(T._)(ce):"")}},7:function(s,i){s.exports=Ti()}})});var Lf=Xt((gM,B1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */B1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=58)}({42:function(s,i){s.exports=vd()},58:function(s,i,n){"use strict";n.r(i),n.d(i,"computeTextSize",function(){return a}),n.d(i,"getPropValue",function(){return b});var l=n(42),c=n.n(l),a=c()(function(w,_){var T=document.createElement("canvas"),x=T.getContext("2d");x.font=_;var M=x.measureText(w);return M.width},function(w,_){return"".concat(w).concat(_)});function b(w,_){return window.getComputedStyle(w).getPropertyValue(_)}}})});var Rf=Xt((yM,N1)=>{N1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=19)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=dg()},19:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Arrow Up"),viewBox:"0 0 1311 1500"},M),c.a.createElement("path",{d:"M0 655.48L655.48 0l655.48 656.507-134.59 133.56L750 363.7 748.973 1500h-189.04l1.026-1136.3-426.37 426.368"}))}},2:function(s,i){s.exports=fg()}})});var jf=Xt((vM,U1)=>{U1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=16)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=dg()},16:function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return x});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n.n(w);function T(){return T=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(M[E]=D[E])}return M},T.apply(this,arguments)}function x(M){return c.a.createElement(_.a,T({screenReaderText:Object(a._)("Arrow Down"),viewBox:"0 0 1311 1500"},M),c.a.createElement("path",{d:"M1310.96 844.52L655.48 1500 0 843.493l134.59-133.56L560.96 1136.3 561.985 0h189.04L750 1136.3l426.37-426.368"}))}},2:function(s,i){s.exports=fg()}})});var Vf=Xt((bM,$1)=>{"use strict";/*! https://mths.be/cssesc v3.0.0 by @mathias */var GS={},KS=GS.hasOwnProperty,ZS=function(i,n){if(!i)return n;var l={};for(var c in n)l[c]=KS.call(i,c)?i[c]:n[c];return l},YS=/[ -,\.\/:-@\[-\^`\{-~]/,XS=/[ -,\.\/:-@\[\]\^`\{-~]/,JS=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Ff=function s(i,n){n=ZS(n,s.options),n.quotes!="single"&&n.quotes!="double"&&(n.quotes="single");for(var l=n.quotes=="double"?'"':"'",c=n.isIdentifier,a=i.charAt(0),b="",w=0,_=i.length;w<_;){var T=i.charAt(w++),x=T.charCodeAt(),M=void 0;if(x<32||x>126){if(x>=55296&&x<=56319&&w<_){var A=i.charCodeAt(w++);(A&64512)==56320?x=((x&1023)<<10)+(A&1023)+65536:w--}M="\\"+x.toString(16).toUpperCase()+" "}else n.escapeEverything?YS.test(T)?M="\\"+T:M="\\"+x.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(T)?M="\\"+x.toString(16).toUpperCase()+" ":T=="\\"||!c&&(T=='"'&&l==T||T=="'"&&l==T)||c&&XS.test(T)?M="\\"+T:M=T;b+=M}return c&&(/^-[-\d]/.test(b)?b="\\-"+b.slice(1):/\d/.test(a)&&(b="\\3"+a+" "+b.slice(1))),b=b.replace(JS,function(D,E,$){return E&&E.length%2?D:(E||"")+$}),!c&&n.wrap?l+b+l:b};Ff.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};Ff.version="3.0.0";$1.exports=Ff});var H1=Xt((xM,W1)=>{W1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=5)}([function(s,i){s.exports=Un()},function(s,i){s.exports=Wr()},function(s,i){s.exports=zr()},function(s,i){s.exports=Qn()},function(s,i){s.exports=Lc()},function(s,i,n){"use strict";n.r(i),n.d(i,"default",function(){return Ee});var l=n(0),c=n.n(l),a=n(1),b=n.n(a),w=n(2),_=n(4),T=n.n(_),x=n(3),M=n.n(x);function A(){var _e=E([`
    padding: 3px 8px;
    font-size: 12px;
`]);return A=function(){return _e},_e}function D(){var _e=E([`
    /* For fixing IE11 shows overflow part line issue */
    overflow: hidden;
`]);return D=function(){return _e},_e}function E(_e,te){return te||(te=_e.slice(0)),Object.freeze(Object.defineProperties(_e,{raw:{value:Object.freeze(te)}}))}var $=M.a.svg(D()),Y=M.a.div(A());function G(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(ce){return typeof ce}:G=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},G(_e)}function le(){return le=Object.assign||function(_e){for(var te=1;te<arguments.length;te++){var ce=arguments[te];for(var Ae in ce)Object.prototype.hasOwnProperty.call(ce,Ae)&&(_e[Ae]=ce[Ae])}return _e},le.apply(this,arguments)}function K(_e,te){if(!(_e instanceof te))throw new TypeError("Cannot call a class as a function")}function F(_e,te){for(var ce=0;ce<te.length;ce++){var Ae=te[ce];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(_e,Ae.key,Ae)}}function Q(_e,te,ce){return te&&F(_e.prototype,te),ce&&F(_e,ce),_e}function L(_e,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(te&&te.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),te&&k(_e,te)}function k(_e,te){return k=Object.setPrototypeOf||function(Ae,ke){return Ae.__proto__=ke,Ae},k(_e,te)}function re(_e){var te=et();return function(){var Ae=lt(_e),ke;if(te){var Ce=lt(this).constructor;ke=Reflect.construct(Ae,arguments,Ce)}else ke=Ae.apply(this,arguments);return de(this,ke)}}function de(_e,te){return te&&(G(te)==="object"||typeof te=="function")?te:Ie(_e)}function Ie(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function et(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_e){return!1}}function lt(_e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},lt(_e)}function tt(_e,te,ce){return te in _e?Object.defineProperty(_e,te,{value:ce,enumerable:!0,configurable:!0,writable:!0}):_e[te]=ce,_e}var je=function(_e){L(ce,_e);var te=re(ce);function ce(Ae){var ke;K(this,ce);for(var Ce=arguments.length,$e=new Array(Ce>1?Ce-1:0),Ke=1;Ke<Ce;Ke++)$e[Ke-1]=arguments[Ke];return ke=te.call.apply(te,[this,Ae].concat($e)),tt(Ie(ke),"handleCursorMount",function(Ve){ke.setState({anchor:Ve})}),ke.state={anchor:null,currentPointX:null,open:!1,rectArea:null,tooltip:null},ke}return Q(ce,[{key:"getMax",value:function(){var ke=this,Ce=this.props,$e=Ce.data,Ke=Ce.acceptNull,Ve=Ce.yMax,rt=function(){return Ke?Object(w.max)(ke.fillNull($e)):Object(w.max)($e)};return Ve!==void 0?Ve:rt()}},{key:"getMin",value:function(){var ke=this,Ce=this.props,$e=Ce.data,Ke=Ce.acceptNull,Ve=Ce.yMin,rt=function(){return Ke?Object(w.min)(ke.fillNull($e)):Object(w.min)($e)};return Ve!==void 0?Ve:rt()}},{key:"getXUnit",value:function(ke){var Ce=this.props,$e=Ce.data,Ke=Ce.width,Ve=(Ke-ke*2)/($e.length>1?$e.length-1:1);return Math.max(0,Ve)}},{key:"getYUnit",value:function(ke){var Ce=this.props.height,$e=this.getMax(),Ke=this.getMin(),Ve=(Ce-ke*2)/($e-Ke||2);return Math.max(0,Ve)}},{key:"getSegmentSets",value:function(ke,Ce){var $e=this.props.acceptNull,Ke=[],Ve=[];return ke.forEach(function(rt,it){!$e&&Object(w.isNull)(rt)?(Ve.length>1&&Ke.push(Ve),Ve=[]):Ve.push(Ce[it])}),Ve.length>1&&Ke.push(Ve),Ke}},{key:"fillNull",value:function(){var ke=this.props.data;return ke.map(function(Ce){return Ce===null?0:Ce})}},{key:"dataToPoints",value:function(ke,Ce){var $e=this.props.data;if($e.length===0)return[];var Ke=this.getXUnit(ke),Ve=this.getYUnit(Ce),rt=this.getMax(),it=this.getMin();return $e.map(function(dt,bt){return{x:bt*Ke+ke,y:rt===it?Ve+Ce:(rt-dt)*Ve+Ce}}).map(function(dt){return[dt.x,dt.y]})}},{key:"renderRect",value:function(ke,Ce){var $e=this,Ke=this.props,Ve=Ke.data,rt=Ke.height,it=this.getXUnit(Ce);return ke.map(function(dt,bt){return b.a.createElement("rect",{key:"".concat(bt,"_").concat(dt[0]),"data-test":"rect-".concat(bt),x:dt[0]-it/2<=0?0:dt[0]-it/2,y:0,width:bt===0&&Ve.length!==1?it/2:it,height:rt,style:{fillOpacity:0},onMouseOver:function(Ht){$e.setState({open:Ve[bt]!==null,rectArea:Ve[bt]===null?null:Ht.target,tooltip:Ve[bt],currentPointX:dt[0]})}})})}},{key:"renderArea",value:function(ke){var Ce=this.props,$e=Ce.data,Ke=Ce.fillColor,Ve=Ce.fillOpacity,rt=Ce.height,it=Ce.isArea;if(!it||ke.length===0)return null;var dt=this.getSegmentSets($e,ke);return dt=dt.map(function(bt){return bt.concat([[bt[bt.length-1][0],rt],[bt[0][0],rt],bt[0]])}),b.a.createElement("g",{"data-test":"area"},dt.map(function(bt){return b.a.createElement("polyline",{key:"area".concat(bt.join("")),points:bt.join(" "),"data-test":"area-line",style:{fill:Ke,fillOpacity:Ve,strokeWidth:"0"}})}))}},{key:"renderCursor",value:function(){var ke=this.props,Ce=ke.cursorStroke,$e=ke.cursorStrokeWidth,Ke=ke.cursorStrokeLinecap,Ve=ke.cursorStrokeDasharray,rt=ke.height;return this.state.rectArea!==null&&b.a.createElement("line",{"data-test":"cursor",ref:this.handleCursorMount,x1:this.state.currentPointX,y1:0,x2:this.state.currentPointX,y2:rt,style:{stroke:Ce,strokeWidth:$e,strokeLinecap:Ke,strokeDasharray:Ve}})}},{key:"renderTooltip",value:function(){return this.state.anchor!==null&&b.a.createElement(T.a,{"data-test":"tooltip",open:this.state.open,anchor:this.state.anchor,"data-test-value":this.state.tooltip,appearance:"dark",defaultPlacement:"above",animation:!1},b.a.createElement(Y,null,this.state.anchor!==null?this.state.tooltip:void 0))}},{key:"renderEndDots",value:function(ke,Ce,$e){var Ke=this.props,Ve=Ke.endDotFillColor,rt=Ke.endDotRadius,it=Ke.endDotStroke,dt=Ke.endDotStrokeWidth;return b.a.createElement("g",null,ke.slice(-Ce).map(function(bt){return b.a.createElement("circle",{key:"end-dot".concat(bt[0]).concat(bt[1]),"data-test":"end-dot",cx:bt[0],cy:bt[1],r:rt===0?$e:rt,style:{fill:Ve,stroke:it,strokeWidth:dt}})}))}},{key:"renderPolyline",value:function(ke){var Ce=this.props,$e=Ce.data,Ke=Ce.lineColor,Ve=Ce.lineLength,rt=Ce.lineStrokeWidth,it=Object(w.isFinite)(Ve)&&Ve>0?Ve:ke.length,dt=this.getSegmentSets($e.slice(-it),ke.slice(-it));return b.a.createElement("g",{"data-test":"sparkline"},dt.map(function(bt){return b.a.createElement("polyline",{key:"line".concat(bt.join("")),"data-test":"polyline",style:{fill:"none",stroke:Ke,strokeWidth:rt,strokeLinejoin:"round",strokeLinecap:"round"},points:bt.join(" ")})}))}},{key:"render",value:function(){var ke=this,Ce=this.props,$e=Ce.data,Ke=Ce.elementRef,Ve=Ce.showTooltip,rt=Ce.showEndDot,it=Ce.endDotRadius,dt=Ce.endDotStrokeWidth,bt=Ce.endDotCount,Wt=Ce.height,Ht=Ce.isArea,Jt=Ce.lineStrokeWidth,Mt=Ce.width;if($e.length===0)return null;var oe=it+dt/2,Ye=Math.max(Jt/2,it+dt/2),st=this.dataToPoints(oe,Ye),_t=Math.max(rt&&1,Object(w.isFinite)(bt)&&bt>0&&bt);return b.a.createElement("div",le({"data-test":"line","data-test-type":Ht?"area":"line",onMouseOut:function(){ke.setState({open:!1,anchor:null,rectArea:null,currentPointX:null})},ref:Ke},Object(w.omit)(this.props,Object(w.keys)(ce.propTypes))),b.a.createElement($,{height:Wt,width:Mt},b.a.createElement("g",null,this.renderCursor(),this.renderPolyline(st),this.renderArea(st),_t&&this.renderEndDots(st,_t,oe),Ve?this.renderRect(st,oe):null,Ve?this.renderTooltip():null)))}}]),ce}(a.Component);tt(je,"propTypes",{acceptNull:c.a.bool,data:function(te){return Object(w.isArray)(te.data)?te.acceptNull&&!te.data.every(function(ce){return Object(w.isNull)(ce)||Object(w.isFinite)(ce)})?new Error("Data provided to Sparkline must be finite numbers or null."):!te.acceptNull&&!te.data.every(function(ce){return Object(w.isFinite)(ce)})?new Error("Data provided to Sparkline must be finite numbers."):null:new Error("Data provided to Sparkline must be an array.")},elementRef:c.a.oneOfType([c.a.func,c.a.object]),endDotCount:c.a.number,endDotFillColor:c.a.string,endDotRadius:c.a.number,endDotStroke:c.a.string,endDotStrokeWidth:c.a.number,fillColor:c.a.string,fillOpacity:c.a.string,cursorStroke:c.a.string,cursorStrokeWidth:c.a.number,cursorStrokeLinecap:c.a.oneOf(["butt","round","square"]),cursorStrokeDasharray:c.a.string,height:c.a.number.isRequired,isArea:c.a.bool,lineColor:c.a.string,lineLength:c.a.number,lineStrokeWidth:c.a.number,showEndDot:c.a.bool,showTooltip:c.a.bool,yMax:c.a.number,yMin:c.a.number,width:c.a.number.isRequired}),tt(je,"defaultProps",{acceptNull:!1,data:[],showTooltip:!0,endDotCount:0,showEndDot:!1,endDotRadius:0,endDotFillColor:"white",endDotStroke:"black",endDotStrokeWidth:0,fillColor:"#65a637",fillOpacity:".1",cursorStroke:"#5184AF",cursorStrokeWidth:3,cursorStrokeLinecap:"square",cursorStrokeDasharray:"1, 5",isArea:!1,lineColor:"#65a637",lineStrokeWidth:1});var Ee=je}])});var K1=Xt((_M,G1)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */G1.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=445)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Un()},10:function(s,i){s.exports=Rc()},11:function(s,i){s.exports=os()},118:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultContext=void 0,i.defaultContext={trendColorConfig:[{to:0,value:"#9E2520"},{from:0,value:"#1C6B2D"}],majorColorConfig:[{to:20,value:"#D41F1F"},{from:20,to:40,value:"#D94E17"},{from:40,to:60,value:"#CBA700"},{from:60,to:80,value:"#669922"},{from:80,value:"#118832"}],majorColorMatchConfig:[{match:"",value:"#5C33FF"}]}},119:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=[[{label:"Unit position",option:"unitPosition",editor:"editor.select",editorProps:{values:[{label:Object(l._)("Before"),value:"before"},{label:Object(l._)("After"),value:"after"}]},showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0}},{label:Object(l._)("Unit label"),option:"unit",editor:"editor.text",showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0}}],[{label:Object(l._)("Precision"),option:"numberPrecision",editor:"editor.number",editorProps:{min:0,max:20},showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0}},{label:Object(l._)("Major value size (px)"),option:"majorFontSize",editor:"editor.number",editorProps:{min:1},placeholder:Object(l._)("Auto"),showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0}}],[{label:Object(l._)("Trend display"),option:"trendDisplay",editor:"editor.select",editorProps:{values:[{label:Object(l._)("Percent"),value:"percent"},{label:Object(l._)("Absolute"),value:"absolute"},{label:Object(l._)("Off"),value:"off"}]},showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0}},{label:Object(l._)("Trend size (px)"),option:"trendFontSize",editor:"editor.number",editorProps:{min:1},placeholder:Object(l._)("Auto"),showEditor:function(w){var _=w.options;return _.showValue||_.showValue===void 0},isDisabled:function(w){var _=w.options;return _.trendDisplay==="off"}}]];i.default=a},12:function(s,i){s.exports=wl()},13:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(20),b=n(15),w=n(12),_=c.default.div.attrs(function(D){var E=D.width;return{style:{width:b.toPx(E)}}}).withConfig({displayName:"FixedSizeContainer__Item",componentId:"sc-1yhgpod-0"})(["position:relative;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),T=c.default.div.attrs(function(D){var E=D.width,$=D.height;return{style:Object.assign(Object.assign({},E&&{width:b.toPx(E)}),$&&{height:b.toPx($)})}}).withConfig({displayName:"FixedSizeContainer__FixSizeItem",componentId:"sc-1yhgpod-1"})(["position:relative;flex-direction:column;flex:1;display:flex;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),x=c.default.div.withConfig({displayName:"FixedSizeContainer__ItemContent",componentId:"sc-1yhgpod-2"})(["position:relative;min-height:100px;width:100%;"]),M=c.default.div.withConfig({displayName:"FixedSizeContainer__FixSizeItemContent",componentId:"sc-1yhgpod-3"})(["min-height:0px;flex:1;position:relative;box-sizing:border-box;"]),A=function(E){var $=function(G){var le=G.width,K=G.height,F=G.backgroundColor;return K?l.createElement(T,{"data-test":"fix-size-item","data-splunk-visualization-version":"25.3.6 - 6b2578d73",width:le,height:K,backgroundColor:F},l.createElement(M,null,l.createElement(a.default,null,function(Q){var L=Q.width,k=Q.height;return l.createElement(E,Object.assign({},G,{width:L,height:k}))}))):l.createElement(_,{"data-test":"item",width:le,backgroundColor:F},l.createElement(x,null,l.createElement(E,Object.assign({},G))))};return $.displayName="withFixedSizeContainer",$};i.default=A},14:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.extendStaticWrapperProps=void 0;var l=function(a){var b=a.Wrapper,w=a.Visualization,_=["propTypes","defaultProps","config"];_.forEach(function(T){w[T]&&(b[T]=w[T])})};i.extendStaticWrapperProps=l},15:function(s,i){s.exports=jc()},16:function(s,i){s.exports=Sd()},17:function(s,i,n){"use strict";var l=n(8),c=n(7),a=this&&this.__rest||function(K,F){var Q={};for(var L in K)Object.prototype.hasOwnProperty.call(K,L)&&F.indexOf(L)<0&&(Q[L]=K[L]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,L=Object.getOwnPropertySymbols(K);k<L.length;k++)F.indexOf(L[k])<0&&Object.prototype.propertyIsEnumerable.call(K,L[k])&&(Q[L[k]]=K[L[k]]);return Q};Object.defineProperty(i,"__esModule",{value:!0}),i.insertLayout=i.isDynamicOption=i.uncollapseEditorConfig=i.generatePrecisionValues=i.getInitialPreset=i.enhanceOptionsSchemaWithDynamicOptions=i.enhanceConfig=void 0;var b=n(3),w=n(16),_=n(6),T={type:"string",pattern:w.DYNAMIC_OPTIONS_DSL_PATTERN};function x(K){var F={};return Object.keys(K).forEach(function(Q){var L=K[Q],k=L.title,re=L.description,de=L.readOnly,Ie=L.writeOnly,et=L.examples,lt=L.default,tt=L.type,je=L.properties,Ee=L.patternProperties,_e=a(L,["title","description","readOnly","writeOnly","examples","default","type","properties","patternProperties"]),te=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k!==void 0&&{title:k}),re!==void 0&&{description:re}),de!==void 0&&{readOnly:de}),Ie!==void 0&&{writeOnly:Ie}),et!==void 0&&{examples:et}),lt!==void 0&&{default:lt});if(tt==="object"){if(F[Q]=Object.assign(Object.assign(Object.assign(Object.assign({},_e),te),{type:tt}),je&&{properties:x(je)}),Ee){var ce={};Object.keys(Ee).forEach(function(Ae){ce=Object.assign(Object.assign({},ce),x(c({},Ae,Ee[Ae])))}),F[Q].patternProperties=ce}}else F[Q]=Object.assign(Object.assign({},te),{anyOf:[Object.assign(Object.assign({},tt!==void 0&&{type:tt}),_e),T]})}),F}i.enhanceOptionsSchemaWithDynamicOptions=x;function M(K){var F=Object.assign({},K);return K.supports.indexOf(_.VizBehavior.DYNAMIC_OPTIONS)!==-1&&(F.optionsSchema=x(K.optionsSchema)),F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:Q.open||!1})}),F}i.enhanceConfig=M;function A(K){var F=Object.assign({},K);return F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:!0})}),F}i.uncollapseEditorConfig=A;function D(K){return K&&typeof K=="string"&&K.trim().startsWith(">")||!1}i.isDynamicOption=D;function E(K,F){var Q=Object.keys(F);return Q.every(function(L){return F[L]===void 0&&K[L]===void 0||F[L]!==void 0&&K[L]!==void 0})}function $(K,F){var Q=Object.keys(F);return Q.every(function(L){return D(F[L])===D(K[L])})}function Y(K,F,Q){return Q.find(function(L){var k=b.get(L,["value","context"],{}),re=b.get(L,["value","options"],{}),de=Object.keys(k),Ie=Object.keys(re);return de.length===0||Ie.length===0?!1:E(K,k)&&$(F,re)})}i.getInitialPreset=Y;function G(K){return b.range(0,K+1).map(function(F){return{label:"".concat(F," (0").concat(F>0?".":"").concat("0".repeat(F),")"),value:F}})}i.generatePrecisionValues=G;var le=function(F,Q){for(var L=arguments.length,k=new Array(L>2?L-2:0),re=2;re<L;re++)k[re-2]=arguments[re];return[].concat(l(F.slice(0,Q)),k,l(F.slice(Q)))};i.insertLayout=le},18:function(s,i){s.exports=sg()},19:function(s,i){s.exports=as()},2:function(s,i){s.exports=Ti()},20:function(s,i){s.exports=Fc()},21:function(s,i){s.exports=rg()},22:function(s,i,n){"use strict";n.r(i),n.d(i,"DEFAULT_FONT",function(){return G}),n.d(i,"DEFAULT_FONT_FAMILY",function(){return le}),n.d(i,"SVR_PADDING",function(){return K}),n.d(i,"shouldShowTrend",function(){return F}),n.d(i,"isLoadingOrNoColumns",function(){return Q}),n.d(i,"getFormattedColor",function(){return L}),n.d(i,"hasBackground",function(){return k}),n.d(i,"isIdenticalColor",function(){return re}),n.d(i,"getDefaultColorWithBg",function(){return de}),n.d(i,"getMajorColor",function(){return Ie}),n.d(i,"getTrendColor",function(){return et}),n.d(i,"computeColors",function(){return lt}),n.d(i,"computeText",function(){return tt}),n.d(i,"getMajorText",function(){return je}),n.d(i,"getTrendText",function(){return Ee}),n.d(i,"computeFontSize",function(){return _e}),n.d(i,"getMajorFontSize",function(){return te}),n.d(i,"getTrendFontSize",function(){return ce}),n.d(i,"getUnderLabelHeight",function(){return Ae}),n.d(i,"getUnderLabel",function(){return ke}),n.d(i,"getMajorAndTrend",function(){return Ce}),n.d(i,"updateVizInSmallSpace",function(){return $e}),n.d(i,"computeSingleValueContent",function(){return Ke}),n.d(i,"minimallyTruncateStringToWidth",function(){return Ve}),n.d(i,"computeSingleValueRadialContent",function(){return rt}),n.d(i,"getGraphColors",function(){return it}),n.d(i,"adjustRGB",function(){return dt}),n.d(i,"lighten",function(){return Wt}),n.d(i,"darken",function(){return Ht}),n.d(i,"handleValueClickCallback",function(){return Jt});var l=n(7),c=n.n(l),a=n(3),b=n.n(a),w=n(30),_=n.n(w),T=n(49),x=n.n(T),M=n(24),A=n.n(M),D=n(45),E=n.n(D);function $(Mt,oe){var Ye=Object.keys(Mt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Mt);oe&&(st=st.filter(function(_t){return Object.getOwnPropertyDescriptor(Mt,_t).enumerable})),Ye.push.apply(Ye,st)}return Ye}function Y(Mt){for(var oe=1;oe<arguments.length;oe++){var Ye=arguments[oe]!=null?arguments[oe]:{};oe%2?$(Object(Ye),!0).forEach(function(st){c()(Mt,st,Ye[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(Ye)):$(Object(Ye)).forEach(function(st){Object.defineProperty(Mt,st,Object.getOwnPropertyDescriptor(Ye,st))})}return Mt}var G=12,le='"Splunk Platform Sans", "Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif',K={top:12,bottom:12,left:16,right:16},F=function(oe){return oe==="absolute"||oe==="percent"},Q=function(oe,Ye){var st=Object(a.get)(oe,"primary.data.columns[0]",void 0),_t=st===void 0;return Ye||_t},L=function(oe,Ye){return Object(M.formatColor)(oe)||Object(M.formatColor)(Ye)},k=function(oe){return!!oe&&oe!=="transparent"},re=function(oe,Ye){return!!oe&&!!Ye&&Object(M.formatColor)(oe.toLowerCase())===Object(M.formatColor)(Ye.toLowerCase())},de=function(oe){var Ye=oe.backgroundColor,st=oe.defaultFontColor,_t=oe.defaultBlockFontColor;return re(Ye,_t)?st:_t},Ie=function(oe){var Ye=oe.majorColor,st=oe.backgroundColor,_t=oe.defaultFontColor,Ct=oe.defaultBlockFontColor;return k(st)&&!Ye?de({backgroundColor:st,defaultFontColor:_t,defaultBlockFontColor:Ct}):L(Ye,_t)},et=function(oe){var Ye=oe.trendColor,st=oe.trendValue,_t=oe.majorValue,Ct=oe.customizedBgColor,kt=oe.trendDisplay,ct=oe.defaultColors;if(Ye)return Ye;if(!Number.isNaN(Number(st))){var mt=ct.defaultFontColor,we=ct.defaultBlockFontColor,me=ct.defaultBackgroundColor;if(k(Ct)&&!re(Ct,me)&&!re(Ct,we))return we;var We=kt==="percent"&&st===parseFloat(_t);return st===0||We?mt:st>0?D.DELTA_GREEN:D.DELTA_RED}},lt=function(oe,Ye){var st=L(oe.backgroundColor,Ye.defaultBackgroundColor),_t=k(st),Ct=Ie({majorColor:oe.majorColor,backgroundColor:st,defaultFontColor:Ye.defaultFontColor,defaultBlockFontColor:Ye.defaultBlockFontColor}),kt=et({trendColor:oe.trendColor,trendValue:oe.trendValue,majorValue:oe.majorValue,customizedBgColor:oe.backgroundColor,trendDisplay:oe.trendDisplay,defaultColors:Ye}),ct=_t?Ct:Ye.defaultFontColor;return{backgroundColor:st,backgroundEnabled:_t,majorColor:Ct,trendColor:kt,underLabelColor:ct}},tt=function(oe){var Ye=oe.value,st=oe.numberPrecision,_t=oe.shouldUseThousandSeparators,Ct=oe.shouldAbbreviateTrendValue,kt=Object(w.isNumerial)(Ye)?Object(w.formatNumber)(Ye,st,{useThousandSeparators:_t,useTrendUnits:Ct}):Ye;return kt=kt||"",kt},je=function(oe){var Ye=oe.majorValue,st=oe.numberPrecision,_t=oe.shouldUseThousandSeparators;return tt({value:Ye===null?"N/A":Ye,numberPrecision:st,shouldUseThousandSeparators:_t,shouldAbbreviateTrendValue:!1})},Ee=function(oe){var Ye=oe.majorValue,st=oe.trendValue,_t=oe.trendDisplay,Ct=oe.numberPrecision,kt=oe.shouldUseThousandSeparators,ct=oe.shouldAbbreviateTrendValue,mt=function(fe){return tt({value:fe,numberPrecision:Ct,shouldUseThousandSeparators:kt,shouldAbbreviateTrendValue:ct})};if(st===""||!Object(w.isNumerial)(st))return"";var we=_t==="percent";if(!we)return mt(st);var me=Math.abs(st-Ye),We=Math.round(st/me*100);if(st===0&&me===0&&(We=0),!Number.isFinite(We))return"N/A";var Qe=mt(We);return"".concat(Qe,"%")},_e=function(oe,Ye){var st=Ye.width,_t=Ye.height,Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le,kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"normal",ct=Object(T.computeTextSize)(oe,"".concat(kt," ").concat(G,"px ").concat(Ct)),mt=Math.min(st/ct*G,_t/G*G);return parseInt(mt,10)},te=function(oe){var Ye=oe.width,st=oe.height,_t=oe.unit,Ct=oe.majorText,kt=oe.spaceRatio,ct=kt===void 0?1:kt,mt=_t?"".concat(_t).concat(Ct):Ct;return _e(mt,{width:Ye*ct,height:st})},ce=function(oe){var Ye=oe.width,st=oe.height,_t=oe.trendText,Ct=oe.spaceRatio,kt=Ct===void 0?1:Ct,ct=12;return kt>0&&(ct=_e(_t,{width:Ye*kt,height:st}),ct=parseInt(ct,10)*kt),ct},Ae=function(oe){return oe>G?G:oe},ke=function(oe){var Ye=oe.underLabel,st=oe.width,_t=oe.height;return _e(Ye,{width:st,height:_t})},Ce=function(oe){var Ye=oe.width,st=oe.height,_t=oe.majorValue,Ct=oe.trendValue,kt=oe.majorFontSize,ct=oe.trendFontSize,mt=oe.trendDisplay,we=oe.unit,me=oe.numberPrecision,We=oe.shouldUseThousandSeparators,Qe=oe.shouldAbbreviateTrendValue,He=Object(w.isNumerial)(Ct)&&F(mt)?.6:1,fe=Ye*.9,De=st*.9,ft=je({majorValue:_t,numberPrecision:me,shouldUseThousandSeparators:We}),Rt=kt||te({width:fe,height:De,unit:we,majorText:ft,spaceRatio:He}),Oe=Ee({majorValue:_t,trendValue:Ct,trendDisplay:mt,numberPrecision:me,shouldUseThousandSeparators:We,shouldAbbreviateTrendValue:Qe}),qe=ct||ce({width:fe,height:De,trendText:Oe,spaceRatio:1-He});return{majorText:ft,majorTextFontSize:Rt,trendText:Oe,trendTextFontSize:qe}},$e=function(oe){for(var Ye=oe.width,st=oe.height,_t=oe.toRemoveList,Ct=oe.majorValue,kt=oe.trendValue,ct=oe.majorFontSize,mt=oe.trendFontSize,we=oe.majorTextFontSize,me=oe.unit,We=oe.numberPrecision,Qe=oe.shouldUseThousandSeparators,He=oe.shouldAbbreviateTrendValue,fe=0,De={},ft={},Rt=we;Rt<12&&fe<_t.length;){var Oe=_t[fe];De=Y(Y({},De),c()({},Oe.key,Oe.value)),ft=Ce(Y({majorValue:Ct,trendValue:kt,majorFontSize:ct,trendFontSize:mt,width:Ye,height:st,unit:me,numberPrecision:We,shouldUseThousandSeparators:Qe,shouldAbbreviateTrendValue:He},De)),Rt=ft.majorTextFontSize,fe+=1}if(Rt<12){var qe="".concat(Ct.toString().slice(0,3),"...");ft=Ce(Y({majorValue:qe,trendValue:kt,majorFontSize:ct,trendFontSize:mt,width:Ye,height:st,unit:me,numberPrecision:We,shouldUseThousandSeparators:Qe,shouldAbbreviateTrendValue:He},De))}return{newMajorAndTrend:ft,updatedProps:De}},Ke=function(oe){var Ye=oe.contentWidth,st=oe.contentHeight,_t=oe.containerWidth,Ct=oe.containerHeight,kt=oe.majorValue,ct=oe.trendValue,mt=oe.majorFontSize,we=oe.trendFontSize,me=oe.trendDisplay,We=oe.unit,Qe=oe.numberPrecision,He=oe.shouldUseThousandSeparators,fe=oe.shouldAbbreviateTrendValue,De=oe.toRemoveList,ft=Ce({majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,trendDisplay:me,width:Ye,height:st,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),Rt=ft.majorText,Oe=ft.trendText,qe=ft.majorTextFontSize,H=ft.trendTextFontSize,ae=Rt,ve={};if(qe<12){var N=$e({width:_t,height:Ct,toRemoveList:De,majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,majorTextFontSize:qe,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),ie=N.newMajorAndTrend,Ze=N.updatedProps;Rt=ie.majorText,Oe=ie.trendText,qe=ie.majorTextFontSize,H=ie.trendTextFontSize,ve=Ze}return{majorText:Rt,trendText:Oe,majorTextFontSize:qe,trendTextFontSize:H,majorValueTitle:ae,smallVizProps:ve}},Ve=function(oe){var Ye=oe.text,st=oe.fontSize,_t=st===void 0?G:st,Ct=oe.fontFamily,kt=Ct===void 0?le:Ct,ct=oe.fontWeight,mt=ct===void 0?"normal":ct,we=oe.containerWidth,me=Object(T.computeTextSize)(Ye,"".concat(mt," ").concat(_t,"px ").concat(kt)),We=Ye,Qe=Object(T.computeTextSize)("...","".concat(mt," ").concat(_t,"px ").concat(kt));if(we-Qe>0&&me>we){for(;me+Qe>we&&We.length>1;)We=We.substring(0,We.length-1),me=Object(T.computeTextSize)(We,"normal ".concat(_t,"px ").concat(kt));We="".concat(We,"...")}return We},rt=function(oe){var Ye=oe.contentWidth,st=oe.contentHeight,_t=oe.containerWidth,Ct=oe.containerHeight,kt=oe.majorValue,ct=oe.trendValue,mt=oe.majorFontSize,we=oe.trendFontSize,me=oe.trendDisplay,We=oe.unit,Qe=oe.numberPrecision,He=oe.shouldUseThousandSeparators,fe=oe.shouldAbbreviateTrendValue,De=oe.smallViz,ft=Ce({majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,trendDisplay:me,width:Ye,height:st,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),Rt=ft.majorText,Oe=ft.trendText,qe=ft.majorTextFontSize,H=ft.trendTextFontSize,ae=Rt,ve={};if(De){var N=Ve({text:kt,fontWeight:"bold",fontSize:12,containerWidth:_t}),ie=Ce({majorValue:N,trendValue:ct,majorFontSize:mt,trendFontSize:we,width:_t,height:Ct,unit:We,trendDisplay:me,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe});Rt=ie.majorText,Oe=ie.trendText,qe=ie.majorTextFontSize,H=ie.trendTextFontSize,ve={trendDisplay:me,unit:We}}return{majorText:Rt,trendText:Oe,majorTextFontSize:qe,trendTextFontSize:H,majorValueTitle:ae,smallVizProps:ve}},it=function(oe){var Ye=oe.backgroundEnabled,st=oe.backgroundColor,_t=oe.defaultColors,Ct=oe.customColorFormatter;return Ye&&st&&typeof Ct=="function"?Ct(st):_t.none},dt=function(oe,Ye){return oe===255?oe-Ye:oe===0?oe+Ye:oe},bt=function(oe,Ye){var st=oe.replace(/(0x|#)/,""),_t=parseInt(st.substr(0,2),16),Ct=parseInt(st.substr(2,2),16),kt=parseInt(st.substr(4,2),16),ct=Math.max(Math.min(Math.floor(_t*Ye),255),0),mt=Math.max(Math.min(Math.floor(Ct*Ye),255),0),we=Math.max(Math.min(Math.floor(kt*Ye),255),0);return ct===_t&&mt===Ct&&we===kt&&(ct===0&&mt===0&&we===0?Ye>1?(ct=dt(ct,80),mt=dt(mt,80),we=dt(we,80)):(ct=dt(ct,40),mt=dt(mt,40),we=dt(we,40)):ct===255&&mt===255&&we===255?Ye>1?(ct=dt(ct,20),mt=dt(mt,20),we=dt(we,20)):(ct=dt(ct,80),mt=dt(mt,80),we=dt(we,80)):(ct=dt(ct,20),mt=dt(mt,20),we=dt(we,20))),"#".concat(ct.toString(16).padStart(2,0))+"".concat(mt.toString(16).padStart(2,0))+"".concat(we.toString(16).padStart(2,0))},Wt=function(oe){return bt(oe,1.3)},Ht=function(oe){return bt(oe,.5)},Jt=function(oe,Ye,st,_t,Ct){var kt={trendValue:_t,value:Ye,name:st};return Ct(Y(Y({},oe),{},{payload:kt}))}},23:function(s,i){s.exports=Vc()},24:function(s,i){s.exports=zf()},25:function(s,i){s.exports=Pd()},26:function(s,i){s.exports=Bc()},27:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shouldShowIconPlaceholder=void 0;var l=n(0),c=n(1),a=n(3),b=n(2),w=n(10),_=n(13),T=function(D){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$=a.get(D,"primary.data.columns[0]",void 0),Y=$===void 0,G=a.get(D,"primary.data.fields[0]",void 0),le=G===void 0;return E||Y||le};i.shouldShowIconPlaceholder=T;var x={icon:c.func,width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,iconColor:c.string},M=function(D){var E=D.width,$=D.height,Y=D.icon,G=D.iconColor;return Y?l.createElement(Y,{style:{left:"50%",top:"50%",color:G,opacity:.15,position:"absolute",transform:"translate(-50%, -50%)"},width:"50%",height:"50%"}):l.createElement(w.default,{width:E,height:$,level:"warning",message:b._("No DataSource Connected")})};M.propTypes=x,M.defaultProps={width:"100%",height:250},i.default=_.default(M)},28:function(s,i,n){"use strict";var l=n(7);Object.defineProperty(i,"__esModule",{value:!0}),i.getSortingParams=i.SortParamsPropTypes=void 0;var c=n(1),a=n(3),b=n(39);i.SortParamsPropTypes=c.shape({currentSortKey:c.string,currentSortDir:c.oneOf(b.validSortDirs),onSort:c.func});var w=function(T){var x=T.requestParams,M=T.onRequestParamsChange,A,D,E={asc:"desc",desc:"asc",none:"asc"},$;return a.isFunction(M)&&(x&&a.has(x,"sort")&&(A=Object.keys(x.sort).shift(),D=x.sort[A]),$=function(G,le){var K=le.sortKey,F=le.sortDir;if(typeof K=="string"){var Q=a.has(E,F)?E[F]:"none";M(Object.assign(Object.assign({},x),{offset:0,sort:l({},K,Q)}))}else M(x)}),{currentSortKey:A,currentSortDir:D,onSort:$}};i.getSortingParams=w},29:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPaginationParams=i.PaginatorParamsPropTypes=void 0;var l=n(1),c=n(3);i.PaginatorParamsPropTypes=l.shape({isPaging:l.bool,current:l.number,totalPages:l.number,onChange:l.func});var a=function(w){var _=w.requestParams,T=w.meta,x=w.onRequestParamsChange,M=T&&T.totalCount||0,A=_&&_.offset||0,D=_&&_.count,E=typeof D=="number"&&D>0?Math.ceil(M/D):0,$=typeof D=="number"&&D>0?Math.floor(A/D)+1:0,Y=E>1&&c.isFunction(x),G=function(K,F){var Q=F.page,L=F.count,k=c.cloneDeep(_);typeof L=="number"&&(k.count=L,k.offset=0);var re=typeof k.count=="number"?k.count:10;typeof Q=="number"&&Q>0&&(k.count=re,k.offset=(Q-1)*re),x(k)};return{isPaging:Y,current:$,totalPages:E,onChange:c.isFunction(x)?G:c.noop}};i.getPaginationParams=a},3:function(s,i){s.exports=zr()},30:function(s,i){s.exports=kf()},31:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizCategory=void 0;var l;(function(c){c.SINGLE_VALUE="Single Value",c.TRENDS="Trends",c.COMPARISONS="Comparisons",c.TABLE="Table",c.GAUGE="Gauge",c.DISTRIBUTIONS="Distributions",c.CHOROPLETH="Choropleth Maps",c.SHAPES="Shapes",c.MISC="misc",c.FLOW="Flow",c.CORRELATION="Correlation",c.SPATIAL="Spatial"})(l=i.VizCategory||(i.VizCategory={}))},32:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(3),a=n(33),b=n(34),w=n(35),_=n(23),T=n(36),x=n(4),M=n(25),A=n(26),D=n(37),E=n(6),$=n(28),Y=n(29),G=n(40),le=n(41),K=n(42),F=n(43),Q=function(k){var re=k.ReactViz,de=k.vizConfig,Ie=k.computeVizProps,et=Ie===void 0?function(){}:Ie,lt=k.disableEditModeCover,tt=k.useIconPlaceholder,je=w.withSanitizedProps(re),Ee=A.pickFieldFromJSONSchema(de.optionsSchema,"default"),_e=function(ce){var Ae=ce.mode,ke=ce.hasEventHandlers,Ce=ce.dataSources,$e=ce.options,Ke=ce.context,Ve=Ke===void 0?{}:Ke,rt=ce.width,it=ce.height,dt=ce.onComputedProps,bt=ce.onEventTrigger,Wt=ce.theme,Ht=ce.onRequestParamsChange,Jt=l.useContext(_.default),Mt=Jt.serializedTimezone;Mt&&(T.default.getDefaultSplunkTimezone()||T.default.setDefaultSplunkTimezone(Mt));var oe=function(ie){var Ze,X;return(X=(Ze=de.themes)[ie])===null||X===void 0?void 0:X.call(Ze,ce)},Ye=oe("defaultBackgroundColor"),st=a.default({theme:Wt}),_t=st.family,Ct=st.colorScheme,kt=st.density,ct={};ct=G.useDeepMemo(function(){try{return b.Options.evaluate({context:c.defaultsDeep({},Ve,de.defaultContext),options:M.deepMergeWithArrayPrimitiveOverrides({},$e,Ee)},Ce,oe)}catch(N){return console.error("unexpected error evaluating options:  + ".concat(N.message)),{}}},[_t,Ct,kt,$e,Ve,Ce,Mt]),l.useEffect(function(){dt(ct)});var mt=de.requiredProps,we=mt===void 0?[]:mt,me=de.supports,We=le.missingKeys(we,ct);if(We.length>0&&me.includes(E.VizBehavior.PLACEHOLDER)&&de.key!=="splunk.singlevalue")return l.createElement(le.default,{"data-test":"missing-props-message",width:rt,height:it,missingProps:We,backgroundColor:Ye});var Qe={};if(ke&&Ae==="view"&&de.supports.indexOf(E.VizBehavior.EVENTS)>-1){var He=de.events;Object.keys(He).forEach(function(N){var ie=c.camelCase("on.".concat(N));Qe[ie]=null;var Ze=He[N].payloadKeys,X={};Array.isArray(Ze)&&Ze.length&&Ze.forEach(function(Le){X[Le]=ct[Le]}),Qe[ie]=function(Le){return Le&&Le.payload&&(X=Le.payload),bt({originalEvent:Le,payload:X,type:N})}})}var fe=et(Object.assign(Object.assign(Object.assign(Object.assign({},ce),ct),Qe),{themeFunc:oe})),De={},ft="paginateDataSourceKey",Rt=c.has(ct,ft)&&ct[ft]||"primary";if(de.supports.indexOf(E.VizBehavior.PAGE_AND_SORT)>-1&&c.has(Ce,Rt)){var Oe=c.get(Ce,[Rt,"requestParams"],{}),qe=c.get(Ce,[Rt,"meta"],{}),H=function(ie){return Ht(Rt,ie)},ae=$.getSortingParams({requestParams:Oe,meta:qe,onRequestParamsChange:H}),ve=Y.getPaginationParams({requestParams:Oe,meta:qe,onRequestParamsChange:H});De={sortParams:ae,paginatorParams:ve}}return l.createElement(je,Object.assign({mode:Ae,width:rt,height:it},ct,fe,Qe,De))};return _e.propTypes=Object.assign(Object.assign({},D.default.propTypes),re.propTypes),_e.defaultProps=Object.assign(Object.assign(Object.assign({},D.default.defaultProps),re.defaultProps),{theme:{}}),_e.config=de,x.withTheme(F.default(K.default(_e,lt),tt))};i.default=Q},33:function(s,i){s.exports=wd()},34:function(s,i){s.exports=Nc()},35:function(s,i){s.exports=Uc()},36:function(s,i){s.exports=is()},37:function(s,i,n){"use strict";var l=n(11);Object.defineProperty(i,"__esModule",{value:!0}),i.INITIAL_HEIGHT=i.INITIAL_WIDTH=void 0;var c=n(1),a=n(3),b=n(38);i.INITIAL_WIDTH=250,i.INITIAL_HEIGHT=250;var w=function _(){l(this,_)};w.propTypes={mode:c.oneOf(["view","edit","export"]).isRequired,width:c.oneOfType([c.string,c.number]).isRequired,height:c.oneOfType([c.string,c.number]).isRequired,context:c.object,options:c.object,onOptionsChange:c.func,dataSources:c.objectOf(c.shape({requestParams:c.object,data:c.shape({fields:c.array,columns:c.array}),error:c.shape({level:c.string,message:c.string}),meta:c.object})),onEventTrigger:c.func,hasEventHandlers:c.bool,onComputedProps:c.func,vizActionHandlerRef:c.func,loading:c.bool,theme:c.object,onRequestParamsChange:c.func},w.defaultProps={width:"100%",height:i.INITIAL_HEIGHT,dataSources:{},onEventTrigger:function(){return{}},mode:"view",hasEventHandlers:!1,options:{},context:{},onOptionsChange:function(){return{}},vizActionHandlerRef:function(){return new b.DefaultVizActionHandler},onComputedProps:function(){return{}},loading:!1,onRequestParamsChange:a.noop},i.default=w},38:function(s,i,n){"use strict";var l=n(11),c=n(19);Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultVizActionHandler=void 0;var a=function(){function b(){l(this,b)}return c(b,[{key:"focus",value:function(){}},{key:"snapshot",value:function(){return null}}]),b}();i.DefaultVizActionHandler=a},39:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.validSortDirs=void 0,i.validSortDirs=["asc","desc","none"]},4:function(s,i){s.exports=Qn()},40:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useDeepMemo=void 0;var l=n(0),c=n(3),a=function(w,_){var T=l.useRef();return(!T.current||!c.isEqual(_,T.current.dependencies))&&(T.current={dependencies:_,value:w()}),T.current.value};i.useDeepMemo=a},41:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MissingPropsMessage=i.missingKeys=i.isMissing=void 0;var l=n(0),c=n(1),a=n(2),b=n(10),w=n(13),_=function(D){return D==null};i.isMissing=_;var T=function(D,E){return D.filter(function($){return i.isMissing(E[$])})};i.missingKeys=T;var x={width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,missingProps:c.arrayOf(c.string)},M=function(D){var E=D.width,$=D.height,Y=D.missingProps;return l.createElement(b.default,{"data-test":"message",width:E,height:$,message:a._("Missing property: ".concat(Y.join(", ")))})};i.MissingPropsMessage=M,i.MissingPropsMessage.propTypes=x,i.MissingPropsMessage.defaultProps={width:"100%",height:250},i.default=w.default(i.MissingPropsMessage)},42:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(14),b=c.default.div.withConfig({displayName:"withEditModeCover__Cover",componentId:"sc-1gsbnxb-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;"]),w=c.default.div.attrs({"data-splunk-visualization-version":"25.3.6 - 6b2578d73"}).withConfig({displayName:"withEditModeCover__Blocker",componentId:"sc-1gsbnxb-1"})(["position:relative;width:100%;height:100%;"]),_=function(x,M){var A=function(E){var $=E.mode,Y=$==="edit"&&!M;return l.createElement(w,null,l.createElement(x,Object.assign({},E)),Y&&l.createElement(b,{"data-test":"edit-mode-cover"}))};return a.extendStaticWrapperProps({Wrapper:A,Visualization:x}),A};i.default=_},43:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(12),a=n(9),b=n(27),w=n(6),_=n(14),T=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.shouldShowIconPlaceholder,D=M.config,E=D.themes,$=function(G){var le,K,F=G.dataSources,Q=G.loading,L=G.options,k=G.height,re=G.width,de=A(F,Q,L),Ie=c.isColor(L==null?void 0:L.backgroundColor)?L==null?void 0:L.backgroundColor:(le=E==null?void 0:E.defaultBackgroundColor)===null||le===void 0?void 0:le.call(E,G),et=(K=D.placeholderIcon)!==null&&K!==void 0?K:D.icon,lt=a.default.contentColorActive(G);return D.supports.includes(w.VizBehavior.PLACEHOLDER)&&de?l.createElement(b.default,{"data-test":"icon-placeholder",icon:et,width:re,height:k,backgroundColor:Ie,iconColor:lt}):l.createElement(M,Object.assign({},G))};return _.extendStaticWrapperProps({Wrapper:$,Visualization:M}),$};i.default=T},44:function(s,i){s.exports=Td()},445:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.themes=i.computeVizProps=i.PureSingleValue=i.config=void 0;var l=n(468),c=n(32),a=n(22),b=n(446);i.config=b.default,i.PureSingleValue=l.default;var w=function(x){var M=x.themeFunc,A=["defaultFontColor","defaultBackgroundColor","defaultBlockFontColor","defaultSparklineStrokeColor","sparklineSeverityColors"],D={};if(A.forEach(function(E){D[E]=M(E)}),typeof D.sparklineSeverityColors=="string")try{D.sparklineSeverityColors=JSON.parse(D.sparklineSeverityColors)}catch(E){}return D};i.computeVizProps=w;var _=c.default({ReactViz:l.default,vizConfig:b.default,computeVizProps:i.computeVizProps,useIconPlaceholder:function(x,M){return a.isLoadingOrNoColumns(x,M)}});i.themes=b.default.themes,i.default=_},446:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(2),c=n(16),a=n(54),b=n(447),w=n(21),_=n(9),T=n(47),x=n(44),M=n(118),A=n(6),D=n(88),E=n(89),$=n(90),Y=n(119),G=n(91),le=n(92),K=n(78),F=n(17),Q=n(31),L={requiredDataSources:[{name:"primary",description:"DataSource that powers the visualization"}],optionalDataSources:[],initialRequestParams:{primary:{offset:0,count:1e4}}},k={initialWidth:250,initialHeight:250},re={backgroundColor:{default:"> themes.defaultBackgroundColor",description:'Specify the color for the background. You may use a dataSource to apply the color. The default for enterprise light is "#ffffff". The default for enterprise dark is "#000000". The default for prisma dark is "#0b0c0e".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},majorColor:{default:"> themes.defaultFontColor",description:'Specify the color for the major value.  You may use a dataSource to apply the color. The hex value format should be \u201C#FFFFFF\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},majorFontSize:{description:"Specify the font size (px) for the major value. By default the major value font size is calculated dynamically based on the available space.",type:"number"},majorValue:{default:"> sparklineValues|lastPoint()",description:"The major value to display in the visualization.",type:["string","number"]},majorValueField:{default:"> majorValue | getField()",description:"The field name of major value.",type:"string"},numberPrecision:{default:0,maximum:20,minimum:0,description:"Specify the number of decimal places to display. For example, to display 3 decimal places, use a value of 3. The maximum value is 20.",type:"number"},shouldAbbreviateTrendValue:{default:!1,description:"Specify whether to abbreviate the trend value to 2 decimal points. A magnitude unit will be displayed.",type:"boolean"},shouldSparklineAcceptNullData:{default:!0,description:"Specify whether to convert null and non-numeric values in the sparkline to 0.",type:"boolean"},shouldUseThousandSeparators:{default:!0,description:"Specify whether numeric values use commas as thousandths separators.",type:"boolean"},showSparklineAreaGraph:{default:!1,description:"Specify whether to show the sparkline as an area graph rather than a line.",type:"boolean"},showSparklineTooltip:{default:!1,description:"Show a tooltip to display values on the sparkline.",type:"boolean"},sparklineAreaColor:{default:"> sparklineStrokeColor",description:"Specify the color for the sparkline area fill. You may use a dataSource to apply the color. The hex value format should be \u201C#FFFFFF\u201D. The graph area will have an opacity of 20% and will blend with the background color.",pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},sparklineDisplay:{default:"below",description:"Specify how to display a sparkline.",pattern:c.getPattern(["before","after","below","off"]),type:"string"},sparklineHighlightDots:{default:0,description:"Specify the number of markers, or dots, to display at the top of a sparkline area graph.",type:"number"},sparklineHighlightSegments:{default:0,description:"Specify the number of segments to be highlighted at the top of a sparkline area graph.",type:"number"},sparklineStrokeColor:{default:"> themes.defaultSparklineStrokeColor",description:'Specify the color for the sparkline stroke. You may use a dataSource to apply the color. The hex value format should be \u201C#FFFFFF\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},sparklineValues:{default:'> primary|seriesByPrioritizedTypes("number", "string", "time")',description:"List of numerical values to display on a sparkline. If the values are string type, the sparkline will not be shown.",type:"array",items:{type:["string","number"]}},trendColor:{default:"> themes.defaultFontColor",description:'Specify the color for the trend value. You may use a dataSource to apply the color. The hex value format should be \u201C#FFFFFF\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},trendDisplay:{default:"absolute",description:"Specify how to display the trend value.",pattern:c.getPattern(["percent","absolute","off"]),type:"string"},trendFontSize:{description:"Specify the font size (px) for the trend value. By default the trend value font size is calculated dynamically based on the available space.",type:"number"},trendValue:{default:"> sparklineValues|delta(-2)",description:"The trend value to display in the visualization.",type:"number"},underLabel:{description:"Specify the text that appears below the major value.",type:"string"},underLabelFontSize:{default:12,description:"Specify the font size (px) for the under label text.",type:"number"},unit:{description:"Specify text to show next to the major value.",type:"string"},unitPosition:{default:"after",description:"Specify whether the unit text should appear before or after the major value.",pattern:c.getPattern(["before","after"]),type:"string"}},de={majorColorEditorConfig:void 0,trendColorEditorConfig:void 0,backgroundColorEditorConfig:void 0},Ie={majorColor:void 0,trendColor:void 0,backgroundColor:void 0},et=[{label:l._("None"),name:"singleValue.none",value:{context:Object.assign({},de),options:Object.assign({},Ie)}},{label:l._("Major Value"),name:"singleValue.majorValue",value:{context:Object.assign(Object.assign({},de),{majorColorEditorConfig:M.defaultContext.majorColorConfig}),options:Object.assign(Object.assign({},Ie),{majorColor:"> majorValue | rangeValue(majorColorEditorConfig)"})}},{label:l._("Trend"),name:"singleValue.trend",value:{context:Object.assign(Object.assign({},de),{trendColorEditorConfig:M.defaultContext.trendColorConfig}),options:Object.assign(Object.assign({},Ie),{trendColor:"> trendValue | rangeValue(trendColorEditorConfig)"})}},{label:l._("Major Value & Trend"),name:"singleValue.majorValueAndTrend",value:{context:Object.assign(Object.assign({},de),{majorColorEditorConfig:M.defaultContext.majorColorConfig,trendColorEditorConfig:M.defaultContext.trendColorConfig}),options:Object.assign(Object.assign({},Ie),{majorColor:"> majorValue | rangeValue(majorColorEditorConfig)",trendColor:"> trendValue | rangeValue(trendColorEditorConfig)"})}},{label:l._("Background"),name:"singleValue.background",value:{context:Object.assign(Object.assign({},de),{backgroundColorEditorConfig:M.defaultContext.majorColorConfig}),options:Object.assign(Object.assign({},Ie),{backgroundColor:"> majorValue | rangeValue(backgroundColorEditorConfig)"})}}],lt="#171D21",tt="#FFFFFF",je={defaultFontColor:function(ce){return w.default({enterprise:{dark:_.default.textColor(ce),light:_.default.gray20(ce)},prisma:_.default.contentColorActive(ce)})(ce)},defaultBlockFontColor:function(ce){return w.default({enterprise:_.default.white(ce),prisma:_.default.contentColorActive(ce)})(ce)},defaultBackgroundColor:function(ce){return w.default({enterprise:{dark:_.default.black(ce),light:_.default.backgroundColor(ce)},prisma:_.default.backgroundColorSidebar(ce)})(ce)},defaultSparklineStrokeColor:function(ce){return w.default({enterprise:_.default.textColor(ce),prisma:_.default.contentColorActive(ce)})(ce)},sparklineSeverityColors:function(ce){return w.default({enterprise:{dark:JSON.stringify({none:{background:b.enterpriseDark.gray60,stroke:b.enterpriseDark.white},low:{background:b.enterpriseDark.successColorD50,stroke:b.enterpriseDark.white},guarded:{background:b.enterpriseDark.infoColorD50,stroke:b.enterpriseDark.white},elevated:{background:b.enterpriseDark.warningColorD50,stroke:b.enterpriseDark.white},high:{background:b.enterpriseDark.alertColorD50,stroke:b.enterpriseDark.white},severe:{background:b.enterpriseDark.errorColorD50,stroke:b.enterpriseDark.white}}),light:JSON.stringify({none:{background:b.enterprise.gray60,stroke:b.enterprise.gray20},low:{background:b.enterprise.successColorD50,stroke:b.enterprise.white},guarded:{background:b.enterprise.infoColorD50,stroke:b.enterprise.white},elevated:{background:b.enterprise.warningColorD50,stroke:b.enterprise.white},high:{background:b.enterprise.alertColorD50,stroke:b.enterprise.white},severe:{background:b.enterprise.errorColorD50,stroke:b.enterprise.white}})},prisma:JSON.stringify({none:{background:b.scp.gray52,stroke:b.scp.white},low:{background:b.scp.successColorD50,stroke:b.scp.white},guarded:{background:b.scp.infoColorD50,stroke:b.scp.white},elevated:{background:b.scp.warningColorD50,stroke:b.scp.white},high:{background:b.scp.alertColorD50,stroke:b.scp.white},severe:{background:b.scp.errorColorD50,stroke:b.scp.white}})})(ce)},sparklineFillColor:function(ce){return w.default({enterprise:{light:lt,dark:tt},prisma:tt})(ce)}},Ee=[{label:l._("Selected data field"),layout:[[{label:l._("Data field"),editor:"editor.columnSelector",option:"sparklineValues",context:"sparklineValuesContext",editorProps:{dataSourceKey:"primary",prepareValue:function(ce){var Ae=ce.options.sparklineValues;return{context:{},options:{majorValue:"> sparklineValues | lastPoint()",trendValue:"> sparklineValues | delta(-2)",sparklineValues:Ae}}}}}]]},{label:l._("Major value & trend"),layout:Y.default},{label:l._("Sparkline"),layout:[[{label:l._("Sparkline display"),option:"sparklineDisplay",editor:"editor.select",editorProps:{values:[{label:l._("Off"),value:"off"},{label:l._("Before"),value:"before"},{label:l._("Below"),value:"below"},{label:l._("After"),value:"after"}]}}]]},{label:l._("Coloring"),layout:[[{label:"Dynamic elements",key:"presetSelector",editor:"editor.presetSelector",editorProps:{presets:et,value:function(ce){var Ae=ce.context,ke=ce.options,Ce=F.getInitialPreset(Ae,ke,et);return Ce&&Ce.label||null}}}],[Object.assign(Object.assign({},G.default),{editorProps:{labelPosition:"left",themes:je}})],[D.getDynamicMajorColorEditor({defaultContext:M.defaultContext,defaultPalettesConfig:a.defaultPalettesConfig})],[Object.assign(Object.assign({},le.default),{editorProps:{labelPosition:"left",themes:je}})],[E.getDynamicTrendColorEditor({defaultContext:M.defaultContext,defaultPalettesConfig:a.defaultPalettesConfig})],[Object.assign(Object.assign({},K.default),{editorProps:{labelPosition:"left",themes:je}})],[$.getDynamicBackgroundColorEditor({defaultContext:M.defaultContext,defaultPalettesConfig:a.defaultPalettesConfig})]]}],_e={key:"splunk.singlevalue",name:"Single Value",category:Q.VizCategory.SINGLE_VALUE,icon:T.SingleValue,placeholderIcon:x.SingleValue,dataContract:L,size:k,defaultContext:M.defaultContext,optionsSchema:re,editorConfig:Ee,events:{"value.click":{description:"trigger when user clicks major value",payloadKeys:["majorValue","trendValue"]}},supports:[A.VizBehavior.DYNAMIC_OPTIONS,A.VizBehavior.EVENTS,A.VizBehavior.PLACEHOLDER],themes:je,requiredProps:["majorValue"]};i.default=F.enhanceConfig(_e)},447:function(s,i){s.exports=b_()},45:function(s,i){s.exports=pg()},468:function(s,i,n){"use strict";n.r(i),n.d(i,"CONTENT_OVERFLOW_FADEOUT_AREA_PX",function(){return kt}),n.d(i,"DEFAULT_CONTENT_HEIGHT_ALLOCATION_RATIO",function(){return ct});var l=n(48),c=n.n(l),a=n(0),b=n.n(a),w=n(1),_=n.n(w),T=n(4),x=n.n(T),M=n(71),A=n.n(M),D=n(72),E=n.n(D),$=n(15),Y=n(20),G=n.n(Y),le=n(63),K=n(7),F=n.n(K),Q=n(70),L=n(98),k=n.n(L),re=n(24),de=function(He){var fe=He.width,De=He.height,ft=He.data,Rt=He.fill,Oe=He.fillOpacity,qe=Oe===void 0?.2:Oe,H=He.stroke,ae=He.showTooltip,ve=He.isArea,N=He.lineLength,ie=N===void 0?0:N,Ze=He.endDotCount,X=Ze===void 0?0:Ze,Le=He.acceptNull,ze=Le===void 0?!0:Le;return b.a.createElement(k.a,{lineColor:Object(re.formatColor)(H),fillColor:Object(re.formatColor)(Rt),fillOpacity:qe.toString(10),data:ft,height:De,width:fe,showTooltip:ae,isArea:ve,lineStrokeWidth:1.5,lineLength:ve?ie:void 0,endDotCount:ve?X:void 0,endDotRadius:Math.min(fe,De)<15?1:3,endDotStroke:Object(re.formatColor)(H),endDotFillColor:Object(re.formatColor)(H),acceptNull:ze,style:{flex:"0 0 auto",justifyContent:"center",display:"flex",alignItems:"flex-end"}})};de.propTypes={acceptNull:_.a.bool,data:_.a.arrayOf(_.a.number),endDotCount:_.a.number,fill:_.a.string,fillOpacity:_.a.number,height:_.a.number,isArea:_.a.bool,lineLength:_.a.number,showTooltip:_.a.bool,stroke:_.a.string,width:_.a.number};var Ie=de,et=n(45),lt=n(30),tt=n(22),je=.4,Ee=1.2,_e=16,te=["below","before","after","off"],ce=function(He){var fe=He.underLabel,De=He.underLabelFontSize;return fe&&fe.length?De*Ee:0},Ae=function(He){var fe=He.hasSparkline,De=He.isSparklinePositionBelow,ft=He.containerWidth,Rt=He.overflowArea,Oe=2*Rt;return fe&&!De?je*ft-Oe:ft-Oe},ke=function(He){var fe=He.height,De=He.hasSparkline,ft=He.isSparklinePositionBelow,Rt=He.majorTextFontSize,Oe=He.underLabelHeight,qe=Oe===void 0?0:Oe;return De&&!ft?fe:Rt+_e+qe},Ce=function(He){return te.indexOf(He)>-1},$e=function(He){var fe=He.sparklineValues;return Array.isArray(fe)?fe.map(function(De){var ft=Object(lt.parseNumber)(De);return ft===0?null:ft||De}):void 0},Ke=function(He){var fe=He.showSparkline,De=He.sparklineValues;return fe&&Array.isArray(De)&&De.length>1&&De.every(function(ft){return ft===null||!Number.isNaN(Object(lt.parseNumber)(ft))})&&De.filter(function(ft){return ft!==null}).length>0},Ve=function(He){var fe=He.width,De=He.isSparklinePositionBelow,ft=De?1:.6;return fe*ft},rt=function(He){var fe=He.height,De=He.contentHeight,ft=He.isSparklinePositionBelow;return ft?fe-De:fe},it=function(He){var fe=He.hasSparkline,De=He.sparklineHighlightSegments;return fe&&typeof De=="number"&&De>0?De+1:0},dt=function(He){var fe=He.hasSparkline,De=He.sparklineHighlightDots;return!fe||typeof De=="string"||De<0?0:De},bt=function(He){var fe=He.backgroundEnabled,De=He.backgroundColor,ft=He.sparklineSeverityColors;return Object(tt.getGraphColors)({backgroundEnabled:fe,backgroundColor:De,defaultColors:ft,customColorFormatter:function(Oe){return Oe===et.SPARKLINE_WHITE?ft.none:{background:Object(tt.darken)(Oe),stroke:et.SPARKLINE_WHITE}}})},Wt=function(He){var fe=He.width,De=He.height,ft=He.contentHeight,Rt=He.hasSparkline,Oe=He.isSparklinePositionBelow,qe=He.sparklineHighlightSegments,H=He.sparklineHighlightDots,ae=Ve({width:fe,isSparklinePositionBelow:Oe}),ve=rt({height:De,contentHeight:ft,isSparklinePositionBelow:Oe}),N=it({hasSparkline:Rt,sparklineHighlightSegments:qe}),ie=dt({hasSparkline:Rt,sparklineHighlightDots:H});return{sparklineWidth:ae,sparklineHeight:ve,sparklineSegments:N,endDots:ie}};function Ht(Qe,He){var fe=Object.keys(Qe);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(Qe);He&&(De=De.filter(function(ft){return Object.getOwnPropertyDescriptor(Qe,ft).enumerable})),fe.push.apply(fe,De)}return fe}function Jt(Qe){for(var He=1;He<arguments.length;He++){var fe=arguments[He]!=null?arguments[He]:{};He%2?Ht(Object(fe),!0).forEach(function(De){F()(Qe,De,fe[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(fe)):Ht(Object(fe)).forEach(function(De){Object.defineProperty(Qe,De,Object.getOwnPropertyDescriptor(fe,De))})}return Qe}var Mt=16,oe=x.a.div.withConfig({displayName:"StandardLayout__Column",componentId:"isgrrp-0"})(["display:flex;flex-direction:column;height:100%;width:100%;justify-content:center;"]),Ye=x.a.div.withConfig({displayName:"StandardLayout__Row",componentId:"isgrrp-1"})(["display:flex;flex-direction:row;"]),st=x.a.div.attrs(function(){return{"data-test":"overflowWrapper"}}).withConfig({displayName:"StandardLayout__OverflowWrapper",componentId:"isgrrp-2"})(["box-sizing:border-box;padding-left:16px;padding-right:16px;width:100%;height:","px;position:relative;display:flex;align-items:start;justify-content:center;&:after,&:before{position:absolute;height:100%;width:","px;content:'';top:0;}&:after{right:0;background:linear-gradient( 90deg,","00,"," );}&:before{left:0;background:linear-gradient( -90deg,","00,"," );}"],function(Qe){return Qe.height},Mt,function(Qe){return Qe.overflowBackgroundColor},function(Qe){return Qe.overflowBackgroundColor},function(Qe){return Qe.overflowBackgroundColor},function(Qe){return Qe.overflowBackgroundColor}),_t=function(He){var fe=c()({},He),De=fe.backgroundColor,ft=fe.contentHeight,Rt=fe.majorColor,Oe=fe.majorText,qe=fe.majorTextFontSize,H=fe.majorValueTitle,ae=fe.trendColor,ve=fe.trendText,N=fe.trendTextFontSize,ie=fe.showTrendIndicator,Ze=fe.unit,X=fe.unitPosition,Le=fe.underLabel,ze=fe.underLabelFontSize,Je=fe.underLabelColor,ot=fe.onValueClick,gt=fe.showSparkline,yt=fe.sparklinePosition,Lt=fe.sparklineWidth,Vt=fe.sparklineHeight,zt=fe.sparklineValues,Se=fe.sparklineAreaColor,Xe=fe.sparklineStrokeColor,at=fe.showSparklineTooltip,Et=fe.showSparklineAreaGraph,pr=fe.shouldSparklineAcceptNullData,pe=fe.sparklineSegments,R=fe.endDots,Z=null;return Ke({showSparkline:gt,sparklineValues:zt})&&(Z=b.a.createElement(Ie,{width:Lt,height:Vt,data:zt,fill:Se,stroke:Xe,showTooltip:at,isArea:Et,acceptNull:pr,lineLength:pe,endDotCount:R})),b.a.createElement(oe,null,b.a.createElement(Ye,null,yt==="before"&&Z,b.a.createElement(st,{overflowBackgroundColor:De,height:ft},b.a.createElement(Q.default,{majorColor:Rt,majorText:Oe,majorTextFontSize:qe,majorValueTitle:H,trendColor:ae,trendText:ve,trendTextFontSize:N,showTrendIndicator:ie,unit:Ze,unitPosition:X,underLabel:Le,underLabelFontSize:ze,underLabelColor:Je,onValueClick:ot})),yt==="after"&&Z),yt==="below"&&Z)};_t.propTypes=Jt(Jt({},Q.default.propTypes),{},{contentHeight:_.a.number,backgroundColor:_.a.string,showSparkline:_.a.bool,sparklinePosition:_.a.oneOf(te),sparklineWidth:_.a.number,sparklineHeight:_.a.number,sparklineValues:_.a.arrayOf(_.a.oneOfType([_.a.string,_.a.number])),sparklineAreaColor:_.a.string,sparklineStrokeColor:_.a.string,showSparklineTooltip:_.a.bool,showSparklineAreaGraph:_.a.bool,shouldSparklineAcceptNullData:_.a.bool,sparklineSegments:_.a.number,endDots:_.a.number});var Ct=_t,kt=16,ct=.8,mt={none:{background:"#818d99",stroke:"#171d21"},low:{background:"#275126",stroke:"#FFFFFF"},guarded:{background:"#002b3e",stroke:"#FFFFFF"},elevated:{background:"#7d600f",stroke:"#FFFFFF"},high:{background:"#79401a",stroke:"#FFFFFF"},severe:{background:"#6f261d",stroke:"#FFFFFF"}},we=x.a.div.withConfig({displayName:"SingleValue__Container",componentId:"sc-19822k8-0"})(["overflow:hidden;",";"],function(Qe){return Object($.toDimension)(A()(Qe,["width","height"]))}),me=function(He){var fe=c()({},He),De=fe.width,ft=fe.height,Rt=ft===void 0?250:ft,Oe=fe.style,qe=fe.majorFontSize,H=fe.majorValue,ae=fe.majorValueField,ve=fe.trendValue,N=fe.trendFontSize,ie=fe.unitPosition,Ze=fe.underLabelFontSize,X=fe.numberPrecision,Le=fe.shouldUseThousandSeparators,ze=fe.shouldAbbreviateTrendValue,Je=fe.sparklineValues,ot=fe.sparklineHighlightSegments,gt=fe.sparklineHighlightDots,yt=fe.showSparklineAreaGraph,Lt=fe.showSparklineTooltip,Vt=fe.shouldSparklineAcceptNullData,zt=fe.onValueClick,Se=fe.defaultFontColor,Xe=fe.defaultBackgroundColor,at=fe.defaultBlockFontColor,Et=fe.sparklineSeverityColors,pr=Et===void 0?mt:Et,pe=fe.sparklineAreaColor,R={defaultFontColor:Se,defaultBackgroundColor:Xe,defaultBlockFontColor:at,sparklineSeverityColors:pr},Z=Object(a.useCallback)(function(Te){return Object(tt.handleValueClickCallback)(Te,H,ae,ve,zt)},[zt,H,ae,ve]),he=Object(tt.computeColors)(fe,R),xe=he.backgroundEnabled,Fe=he.backgroundColor,B=he.majorColor,V=he.trendColor,U=he.underLabelColor,ee=fe.sparklineStrokeColor||bt({backgroundEnabled:xe,backgroundColor:Fe,sparklineSeverityColors:pr}).stroke,ue=function(Ne){var Pt=Ne.width,At=Ne.height,jt=fe.sparklineDisplay,$t=jt===void 0?"below":jt,Zt=fe.trendDisplay,dr=Zt===void 0?"absolute":Zt,lr=fe.unit,yr=fe.underLabel,xr=$e({sparklineValues:Je}),Tr=Ke({showSparkline:Ce($t)&&$t!=="off",sparklineValues:xr});Tr&&(Ce($t)||($t="below"));var Zr=Tr&&$t==="below",Ar=Ae({hasSparkline:Tr,isSparklinePositionBelow:Zr,containerWidth:Pt,overflowArea:kt}),cn=[{key:"sparklineDisplay",value:"off"},{key:"underLabel",value:""},{key:"trendDisplay",value:"off"},{key:"unit",value:""}],In=Object(tt.computeSingleValueContent)({majorValue:H,trendValue:ve,majorFontSize:qe,trendFontSize:N,trendDisplay:dr,contentWidth:Ar,contentHeight:At*ct,containerWidth:Pt,containerHeight:At,unit:lr,numberPrecision:X,shouldUseThousandSeparators:Le,shouldAbbreviateTrendValue:ze,toRemoveList:cn}),Ai=In.majorText,Lr=In.trendText,Vi=In.majorTextFontSize,io=In.trendTextFontSize,To=In.majorValueTitle,vi=In.smallVizProps;E()(vi)||($t=vi.sparklineDisplay,dr=vi.trendDisplay,lr=vi.unit,yr=vi.underLabel,Tr=Ke({showSparkline:Ce($t)&&$t!=="off",sparklineValues:xr}));var Bi=ke({height:At,hasSparkline:Tr,isSparklinePositionBelow:Zr,majorTextFontSize:Vi,underLabelHeight:ce({underLabel:yr,underLabelFontSize:Ze})}),Ni=Wt({width:Pt,height:At,contentHeight:Bi,hasSparkline:Tr,isSparklinePositionBelow:Zr,sparklineHighlightSegments:ot,sparklineHighlightDots:gt}),Ui=Ni.sparklineWidth,oo=Ni.sparklineHeight,Eo=Ni.sparklineSegments,Po=Ni.endDots;return b.a.createElement(le.default,{backgroundColor:Fe,style:Oe,dataTestKey:"SingleValueWrapper"},b.a.createElement(Ct,{"data-test":"StandardLayout",backgroundColor:Fe,contentHeight:Bi,majorColor:B,majorText:Ai,majorTextFontSize:Vi,majorValueTitle:To,trendColor:V,trendText:Lr,trendTextFontSize:io,showTrendIndicator:Object(tt.shouldShowTrend)(dr),unit:lr,unitPosition:ie,underLabel:yr,underLabelFontSize:Ze,underLabelColor:U,onValueClick:Z,showSparkline:Tr,sparklinePosition:$t,sparklineWidth:Ui,sparklineHeight:oo,sparklineValues:xr,sparklineAreaColor:pe,sparklineStrokeColor:ee,showSparklineTooltip:Lt,showSparklineAreaGraph:yt,shouldSparklineAcceptNullData:Vt,sparklineSegments:Eo,endDots:Po}))};return b.a.createElement(we,{width:De,height:Rt},b.a.createElement(G.a,null,function(Te){return ue(Te)}))};me.propTypes={width:_.a.oneOfType([_.a.string,_.a.number]),height:_.a.oneOfType([_.a.string,_.a.number]),style:_.a.object,sparklineValues:_.a.arrayOf(_.a.oneOfType([_.a.string,_.a.number])),majorValue:_.a.oneOfType([_.a.string,_.a.number]),majorColor:_.a.string,majorFontSize:_.a.number,majorValueField:_.a.string,trendValue:_.a.oneOfType([_.a.string,_.a.number]),trendColor:_.a.string,trendFontSize:_.a.number,trendDisplay:_.a.oneOf(["absolute","percent","off"]),shouldAbbreviateTrendValue:_.a.bool,backgroundColor:_.a.string,unit:_.a.string,unitPosition:_.a.string,underLabel:_.a.string,underLabelFontSize:_.a.number,numberPrecision:_.a.number,shouldUseThousandSeparators:_.a.bool,showSparklineTooltip:_.a.bool,showSparklineAreaGraph:_.a.bool,sparklineDisplay:_.a.oneOf(te),sparklineAreaColor:_.a.string,sparklineStrokeColor:_.a.string,shouldSparklineAcceptNullData:_.a.bool,sparklineHighlightSegments:_.a.number,sparklineHighlightDots:_.a.number,onValueClick:_.a.func,defaultFontColor:_.a.string,defaultBackgroundColor:_.a.string,defaultBlockFontColor:_.a.string,sparklineSeverityColors:_.a.object},me.defaultProps={width:"100%",height:250,majorValue:"N/A",majorValueField:"",trendDisplay:"absolute",shouldAbbreviateTrendValue:!1,unitPosition:"after",underLabelFontSize:12,numberPrecision:0,shouldUseThousandSeparators:!0,showSparklineTooltip:!1,showSparklineAreaGraph:!1,sparklineDisplay:"below",shouldSparklineAcceptNullData:!0,sparklineHighlightSegments:0,sparklineHighlightDots:0,onValueClick:function(){}};var We=i.default=me},47:function(s,i){s.exports=Ed()},48:function(s,i){s.exports=ng()},49:function(s,i){s.exports=Lf()},54:function(s,i){s.exports=lg()},6:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizBehavior=void 0;var l;(function(c){c.DYNAMIC_OPTIONS="dynamic-options",c.EVENTS="events",c.PLACEHOLDER="placeholder",c.PAGE_AND_SORT="page-and-sort"})(l=i.VizBehavior||(i.VizBehavior={}))},63:function(s,i,n){"use strict";n.r(i);var l=n(4),c=n.n(l),a=c.a.div.attrs(function(b){var w=b.dataTestKey;return{"data-test":w}}).withConfig({displayName:"VizStyleWrapper",componentId:"sc-6rw6wv-0"})(["display:flex;justify-content:center;flex-direction:column;width:100%;height:100%;background-color:",";"],function(b){return b.backgroundColor});a.displayName="VizStyleWrapper",i.default=a},7:function(s,i){s.exports=_l()},70:function(s,i,n){"use strict";n.r(i),n.d(i,"SingleValueTrendValue",function(){return Ee});var l=n(48),c=n.n(l),a=n(0),b=n.n(a),w=n(1),_=n.n(w),T=n(4),x=n.n(T),M=n(22),A=n(73),D=n.n(A),E=n(74),$=n.n(E),Y=x.a.div.withConfig({displayName:"TrendValue__Column",componentId:"yd2lvy-0"})(["display:flex;flex-direction:row;justify-content:",";height:","px;",";"],function(te){return te.justify||"flex-end"},function(te){return te.size||12},function(te){return te.size?"margin: 0 ".concat(parseInt(te.size,10)*.2||5,"px;"):""}),G=x.a.div.withConfig({displayName:"TrendValue__Text",componentId:"yd2lvy-1"})(["white-space:nowrap;font-size:","px;color:",";font-family:",";height:","px;line-height:","px;display:flex;align-self:baseline;",";"],function(te){return te.size||12},function(te){return te.color||"#000"},M.DEFAULT_FONT_FAMILY,function(te){return te.size||12},function(te){return te.size||12},function(te){return te.size?"margin-left: ".concat(parseInt(te.size,10)*.2||5,"px;"):""}),le=function(ce){var Ae=ce.fontSize,ke=ce.color,Ce=ce.value,$e=ce.text,Ke=!1;return parseFloat(Ce,10)>0?Ke=D.a:parseFloat(Ce,10)<0&&(Ke=$.a),b.a.createElement(Y,{justify:"flex-end",size:Ae},b.a.createElement(G,{"data-test":"trendValueIndicator",size:Ae,color:ke},Ke&&b.a.createElement(Ke,null)),b.a.createElement(G,{"data-test":"trendValue",size:Ae,color:ke},"".concat($e)))};le.propTypes={fontSize:_.a.number,color:_.a.string,value:_.a.oneOfType([_.a.string,_.a.number]),text:_.a.string};var K=le,F=n(75),Q=n.n(F),L=x.a.div.withConfig({displayName:"MajorValue__Row",componentId:"shlzpv-0"})(["display:flex;flex-direction:row;align-items:flex-end;justify-content:left;height:","px;line-height:","px;"],function(te){return te.size},function(te){return te.size}),k=x.a.div.withConfig({displayName:"MajorValue__Text",componentId:"shlzpv-1"})(["white-space:nowrap;height:100%;font-size:","px;color:",";font-family:",";font-weight:bold;&:hover{text-decoration:",";cursor:",";}",""],function(te){return te.size||12},function(te){return te.color},M.DEFAULT_FONT_FAMILY,function(te){return te.showUnderline?"underline":"inherit"},function(te){return te.showUnderline?"pointer":"inherit"},function(te){return!te.pseudoContent||!te.pseudoContentPosition?"":"&:".concat(te.pseudoContentPosition,` {
            // by default this pseudo element would inherit text-decoration from main element
            // and text-decoration could not be overwritten.
            // adding display: inline-block makes text decoration independent from main element.
            // => the unit will not be underlined if a user hovers over the main value
            display: inline-block;
            font-size: `).concat(te.pseudoContentFontSize,`px;
            position: relative;
            font-weight: normal;
            content: `).concat(te.pseudoContent,`;
        }`)}),re=["before","after"],de=function(ce){var Ae=ce.color,ke=ce.fontSize,Ce=ce.unitPosition,$e=ce.title,Ke=ce.value,Ve=ce.onValueClick,rt=ce.unit,it,dt;typeof rt=="string"&&(it=Q()(rt,{wrap:!0,quotes:"double"}),typeof Ce=="string"&&re.includes(Ce)?dt=Ce:dt="after");var bt=function(Ht){Ht.keyCode===13&&(Ht.preventDefault(),Ve(Ht))};return b.a.createElement(L,{size:ke},b.a.createElement(k,{"data-test":"majorValue",color:Ae,onClick:function(Ht){return typeof Ve=="function"&&Ve(Ht)},showUnderline:!!Ve,size:ke,title:$e,pseudoContent:it,pseudoContentPosition:dt,pseudoContentFontSize:ke*.6,tabIndex:"0",role:"button",onKeyDown:bt},Ke))};de.propTypes={color:_.a.string,fontSize:_.a.number,unit:_.a.string,unitPosition:_.a.oneOf(re),value:_.a.oneOfType([_.a.string,_.a.number]),title:_.a.oneOfType([_.a.string,_.a.number]),onValueClick:_.a.func};var Ie=de,et=x.a.div.withConfig({displayName:"SingleValueBasic__Column",componentId:"k0nwrx-0"})(["display:flex;flex-direction:column;align-self:center;justify-content:center;"]),lt=x.a.div.withConfig({displayName:"SingleValueBasic__Row",componentId:"k0nwrx-1"})(["display:flex;flex-direction:row;align-items:",";justify-content:center;"],function(te){return te.align||"center"}),tt=x.a.div.withConfig({displayName:"SingleValueBasic__Text",componentId:"k0nwrx-2"})(["font-weight:normal;white-space:nowrap;font-size:","px;color:",";font-family:",";height:","px;line-height:1.2;"],function(te){return te.size||12},function(te){return te.color||"#000"},M.DEFAULT_FONT_FAMILY,function(te){return te.size||12}),je=function(ce){var Ae=c()({},ce),ke=Ae.majorColor,Ce=Ae.majorTextFontSize,$e=Ae.majorText,Ke=Ae.majorValueTitle,Ve=Ae.trendColor,rt=Ae.trendTextFontSize,it=Ae.trendText,dt=Ae.showTrendIndicator,bt=Ae.unit,Wt=Ae.unitPosition,Ht=Ae.underLabel,Jt=Ae.underLabelFontSize,Mt=Ae.underLabelColor,oe=Ae.onValueClick,Ye=it!==""&&dt;return b.a.createElement(et,null,b.a.createElement(lt,{align:"baseline"},b.a.createElement(Ie,{"data-test":"MajorValue",color:ke,fontSize:Ce,unit:bt,unitPosition:Wt,value:$e,title:Ke,onValueClick:oe}),Ye&&b.a.createElement(K,{"data-test":"TrendIndicator",fontSize:rt,color:Ve,value:it,text:it})),Ht&&b.a.createElement(lt,{justify:"center"},b.a.createElement(tt,{"data-test":"underLabel",size:Jt,color:Mt},Ht)))};je.propTypes={majorText:_.a.string,majorColor:_.a.string,majorTextFontSize:_.a.number,majorValueTitle:_.a.string,trendText:_.a.string,trendTextFontSize:_.a.number,trendColor:_.a.string,showTrendIndicator:_.a.bool,unit:_.a.string,unitPosition:_.a.oneOf(["before","after"]),underLabel:_.a.string,underLabelFontSize:_.a.number,underLabelColor:_.a.string,onValueClick:_.a.func};var Ee=K,_e=i.default=je},71:function(s,i){s.exports=Ad()},72:function(s,i){s.exports=tg()},73:function(s,i){s.exports=Rf()},74:function(s,i){s.exports=jf()},75:function(s,i){s.exports=Vf()},78:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static background"),option:"backgroundColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.backgroundColor)}};i.default=w},8:function(s,i){s.exports=Uu()},88:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicMajorColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic major value"),option:"majorColor",context:"majorColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.majorColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: major value"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{majorValue:x.majorColorConfig}},{label:Object(l._)("Matches"),value:"matchValue",defaults:{majorValue:x.majorColorMatchConfig}}],dataSelectors:[{label:Object(l._)("Major Value"),value:"majorValue"}],defaultPalettesConfig:M}}}},89:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicTrendColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic trend"),option:"trendColor",context:"trendColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.trendColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: trend"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{trendValue:x.trendColorConfig}}],dataSelectors:[{label:Object(l._)("Trend"),value:"trendValue"}],defaultPalettesConfig:M}}}},9:function(s,i){s.exports=Cd()},90:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicBackgroundColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic background"),option:"backgroundColor",context:"backgroundColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.backgroundColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: background"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{majorValue:x.majorColorConfig,trendValue:x.trendColorConfig}},{label:Object(l._)("Matches"),value:"matchValue",defaults:{majorValue:x.majorColorMatchConfig}}],dataSelectors:[{label:Object(l._)("Major Value"),value:"majorValue"},{label:Object(l._)("Trend"),value:"trendValue"}],defaultPalettesConfig:M}}}},91:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static major value"),option:"majorColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.majorColor)}};i.default=w},92:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static trend"),option:"trendColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.trendColor)},isDisabled:function(T){var x=T.options;return x.trendDisplay==="off"}};i.default=w},98:function(s,i){s.exports=H1()}})});var bv=Xt((w6,vv)=>{/*!
 * Copyright  2018 Splunk Inc.
 * SPLUNK CONFIDENTIAL  Use or disclosure of this material in whole or
 * in part without a valid written license from Splunk Inc. is PROHIBITED.
 */vv.exports=function(s){var i={};function n(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=s,n.c=i,n.d=function(l,c,a){n.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:a})},n.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,c){if(c&1&&(l=n(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var b in l)n.d(a,b,function(w){return l[w]}.bind(null,b));return a},n.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(c,"a",c),c},n.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},n.p="",n(n.s=453)}({0:function(s,i){s.exports=Wr()},1:function(s,i){s.exports=Un()},10:function(s,i){s.exports=Rc()},11:function(s,i){s.exports=os()},12:function(s,i){s.exports=wl()},13:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(20),b=n(15),w=n(12),_=c.default.div.attrs(function(D){var E=D.width;return{style:{width:b.toPx(E)}}}).withConfig({displayName:"FixedSizeContainer__Item",componentId:"sc-1yhgpod-0"})(["position:relative;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),T=c.default.div.attrs(function(D){var E=D.width,$=D.height;return{style:Object.assign(Object.assign({},E&&{width:b.toPx(E)}),$&&{height:b.toPx($)})}}).withConfig({displayName:"FixedSizeContainer__FixSizeItem",componentId:"sc-1yhgpod-1"})(["position:relative;flex-direction:column;flex:1;display:flex;background-color:","};"],function(D){return w.isColor(D.backgroundColor)&&D.backgroundColor||D.theme.defaultBackgroundColor}),x=c.default.div.withConfig({displayName:"FixedSizeContainer__ItemContent",componentId:"sc-1yhgpod-2"})(["position:relative;min-height:100px;width:100%;"]),M=c.default.div.withConfig({displayName:"FixedSizeContainer__FixSizeItemContent",componentId:"sc-1yhgpod-3"})(["min-height:0px;flex:1;position:relative;box-sizing:border-box;"]),A=function(E){var $=function(G){var le=G.width,K=G.height,F=G.backgroundColor;return K?l.createElement(T,{"data-test":"fix-size-item","data-splunk-visualization-version":"25.3.6 - 6b2578d73",width:le,height:K,backgroundColor:F},l.createElement(M,null,l.createElement(a.default,null,function(Q){var L=Q.width,k=Q.height;return l.createElement(E,Object.assign({},G,{width:L,height:k}))}))):l.createElement(_,{"data-test":"item",width:le,backgroundColor:F},l.createElement(x,null,l.createElement(E,Object.assign({},G))))};return $.displayName="withFixedSizeContainer",$};i.default=A},14:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.extendStaticWrapperProps=void 0;var l=function(a){var b=a.Wrapper,w=a.Visualization,_=["propTypes","defaultProps","config"];_.forEach(function(T){w[T]&&(b[T]=w[T])})};i.extendStaticWrapperProps=l},15:function(s,i){s.exports=jc()},16:function(s,i){s.exports=Sd()},17:function(s,i,n){"use strict";var l=n(8),c=n(7),a=this&&this.__rest||function(K,F){var Q={};for(var L in K)Object.prototype.hasOwnProperty.call(K,L)&&F.indexOf(L)<0&&(Q[L]=K[L]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,L=Object.getOwnPropertySymbols(K);k<L.length;k++)F.indexOf(L[k])<0&&Object.prototype.propertyIsEnumerable.call(K,L[k])&&(Q[L[k]]=K[L[k]]);return Q};Object.defineProperty(i,"__esModule",{value:!0}),i.insertLayout=i.isDynamicOption=i.uncollapseEditorConfig=i.generatePrecisionValues=i.getInitialPreset=i.enhanceOptionsSchemaWithDynamicOptions=i.enhanceConfig=void 0;var b=n(3),w=n(16),_=n(6),T={type:"string",pattern:w.DYNAMIC_OPTIONS_DSL_PATTERN};function x(K){var F={};return Object.keys(K).forEach(function(Q){var L=K[Q],k=L.title,re=L.description,de=L.readOnly,Ie=L.writeOnly,et=L.examples,lt=L.default,tt=L.type,je=L.properties,Ee=L.patternProperties,_e=a(L,["title","description","readOnly","writeOnly","examples","default","type","properties","patternProperties"]),te=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k!==void 0&&{title:k}),re!==void 0&&{description:re}),de!==void 0&&{readOnly:de}),Ie!==void 0&&{writeOnly:Ie}),et!==void 0&&{examples:et}),lt!==void 0&&{default:lt});if(tt==="object"){if(F[Q]=Object.assign(Object.assign(Object.assign(Object.assign({},_e),te),{type:tt}),je&&{properties:x(je)}),Ee){var ce={};Object.keys(Ee).forEach(function(Ae){ce=Object.assign(Object.assign({},ce),x(c({},Ae,Ee[Ae])))}),F[Q].patternProperties=ce}}else F[Q]=Object.assign(Object.assign({},te),{anyOf:[Object.assign(Object.assign({},tt!==void 0&&{type:tt}),_e),T]})}),F}i.enhanceOptionsSchemaWithDynamicOptions=x;function M(K){var F=Object.assign({},K);return K.supports.indexOf(_.VizBehavior.DYNAMIC_OPTIONS)!==-1&&(F.optionsSchema=x(K.optionsSchema)),F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:Q.open||!1})}),F}i.enhanceConfig=M;function A(K){var F=Object.assign({},K);return F.editorConfig=K.editorConfig.map(function(Q){return Object.assign(Object.assign({},Q),{open:!0})}),F}i.uncollapseEditorConfig=A;function D(K){return K&&typeof K=="string"&&K.trim().startsWith(">")||!1}i.isDynamicOption=D;function E(K,F){var Q=Object.keys(F);return Q.every(function(L){return F[L]===void 0&&K[L]===void 0||F[L]!==void 0&&K[L]!==void 0})}function $(K,F){var Q=Object.keys(F);return Q.every(function(L){return D(F[L])===D(K[L])})}function Y(K,F,Q){return Q.find(function(L){var k=b.get(L,["value","context"],{}),re=b.get(L,["value","options"],{}),de=Object.keys(k),Ie=Object.keys(re);return de.length===0||Ie.length===0?!1:E(K,k)&&$(F,re)})}i.getInitialPreset=Y;function G(K){return b.range(0,K+1).map(function(F){return{label:"".concat(F," (0").concat(F>0?".":"").concat("0".repeat(F),")"),value:F}})}i.generatePrecisionValues=G;var le=function(F,Q){for(var L=arguments.length,k=new Array(L>2?L-2:0),re=2;re<L;re++)k[re-2]=arguments[re];return[].concat(l(F.slice(0,Q)),k,l(F.slice(Q)))};i.insertLayout=le},18:function(s,i){s.exports=sg()},19:function(s,i){s.exports=as()},2:function(s,i){s.exports=Ti()},20:function(s,i){s.exports=Fc()},21:function(s,i){s.exports=rg()},22:function(s,i,n){"use strict";n.r(i),n.d(i,"DEFAULT_FONT",function(){return G}),n.d(i,"DEFAULT_FONT_FAMILY",function(){return le}),n.d(i,"SVR_PADDING",function(){return K}),n.d(i,"shouldShowTrend",function(){return F}),n.d(i,"isLoadingOrNoColumns",function(){return Q}),n.d(i,"getFormattedColor",function(){return L}),n.d(i,"hasBackground",function(){return k}),n.d(i,"isIdenticalColor",function(){return re}),n.d(i,"getDefaultColorWithBg",function(){return de}),n.d(i,"getMajorColor",function(){return Ie}),n.d(i,"getTrendColor",function(){return et}),n.d(i,"computeColors",function(){return lt}),n.d(i,"computeText",function(){return tt}),n.d(i,"getMajorText",function(){return je}),n.d(i,"getTrendText",function(){return Ee}),n.d(i,"computeFontSize",function(){return _e}),n.d(i,"getMajorFontSize",function(){return te}),n.d(i,"getTrendFontSize",function(){return ce}),n.d(i,"getUnderLabelHeight",function(){return Ae}),n.d(i,"getUnderLabel",function(){return ke}),n.d(i,"getMajorAndTrend",function(){return Ce}),n.d(i,"updateVizInSmallSpace",function(){return $e}),n.d(i,"computeSingleValueContent",function(){return Ke}),n.d(i,"minimallyTruncateStringToWidth",function(){return Ve}),n.d(i,"computeSingleValueRadialContent",function(){return rt}),n.d(i,"getGraphColors",function(){return it}),n.d(i,"adjustRGB",function(){return dt}),n.d(i,"lighten",function(){return Wt}),n.d(i,"darken",function(){return Ht}),n.d(i,"handleValueClickCallback",function(){return Jt});var l=n(7),c=n.n(l),a=n(3),b=n.n(a),w=n(30),_=n.n(w),T=n(49),x=n.n(T),M=n(24),A=n.n(M),D=n(45),E=n.n(D);function $(Mt,oe){var Ye=Object.keys(Mt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(Mt);oe&&(st=st.filter(function(_t){return Object.getOwnPropertyDescriptor(Mt,_t).enumerable})),Ye.push.apply(Ye,st)}return Ye}function Y(Mt){for(var oe=1;oe<arguments.length;oe++){var Ye=arguments[oe]!=null?arguments[oe]:{};oe%2?$(Object(Ye),!0).forEach(function(st){c()(Mt,st,Ye[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(Ye)):$(Object(Ye)).forEach(function(st){Object.defineProperty(Mt,st,Object.getOwnPropertyDescriptor(Ye,st))})}return Mt}var G=12,le='"Splunk Platform Sans", "Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif',K={top:12,bottom:12,left:16,right:16},F=function(oe){return oe==="absolute"||oe==="percent"},Q=function(oe,Ye){var st=Object(a.get)(oe,"primary.data.columns[0]",void 0),_t=st===void 0;return Ye||_t},L=function(oe,Ye){return Object(M.formatColor)(oe)||Object(M.formatColor)(Ye)},k=function(oe){return!!oe&&oe!=="transparent"},re=function(oe,Ye){return!!oe&&!!Ye&&Object(M.formatColor)(oe.toLowerCase())===Object(M.formatColor)(Ye.toLowerCase())},de=function(oe){var Ye=oe.backgroundColor,st=oe.defaultFontColor,_t=oe.defaultBlockFontColor;return re(Ye,_t)?st:_t},Ie=function(oe){var Ye=oe.majorColor,st=oe.backgroundColor,_t=oe.defaultFontColor,Ct=oe.defaultBlockFontColor;return k(st)&&!Ye?de({backgroundColor:st,defaultFontColor:_t,defaultBlockFontColor:Ct}):L(Ye,_t)},et=function(oe){var Ye=oe.trendColor,st=oe.trendValue,_t=oe.majorValue,Ct=oe.customizedBgColor,kt=oe.trendDisplay,ct=oe.defaultColors;if(Ye)return Ye;if(!Number.isNaN(Number(st))){var mt=ct.defaultFontColor,we=ct.defaultBlockFontColor,me=ct.defaultBackgroundColor;if(k(Ct)&&!re(Ct,me)&&!re(Ct,we))return we;var We=kt==="percent"&&st===parseFloat(_t);return st===0||We?mt:st>0?D.DELTA_GREEN:D.DELTA_RED}},lt=function(oe,Ye){var st=L(oe.backgroundColor,Ye.defaultBackgroundColor),_t=k(st),Ct=Ie({majorColor:oe.majorColor,backgroundColor:st,defaultFontColor:Ye.defaultFontColor,defaultBlockFontColor:Ye.defaultBlockFontColor}),kt=et({trendColor:oe.trendColor,trendValue:oe.trendValue,majorValue:oe.majorValue,customizedBgColor:oe.backgroundColor,trendDisplay:oe.trendDisplay,defaultColors:Ye}),ct=_t?Ct:Ye.defaultFontColor;return{backgroundColor:st,backgroundEnabled:_t,majorColor:Ct,trendColor:kt,underLabelColor:ct}},tt=function(oe){var Ye=oe.value,st=oe.numberPrecision,_t=oe.shouldUseThousandSeparators,Ct=oe.shouldAbbreviateTrendValue,kt=Object(w.isNumerial)(Ye)?Object(w.formatNumber)(Ye,st,{useThousandSeparators:_t,useTrendUnits:Ct}):Ye;return kt=kt||"",kt},je=function(oe){var Ye=oe.majorValue,st=oe.numberPrecision,_t=oe.shouldUseThousandSeparators;return tt({value:Ye===null?"N/A":Ye,numberPrecision:st,shouldUseThousandSeparators:_t,shouldAbbreviateTrendValue:!1})},Ee=function(oe){var Ye=oe.majorValue,st=oe.trendValue,_t=oe.trendDisplay,Ct=oe.numberPrecision,kt=oe.shouldUseThousandSeparators,ct=oe.shouldAbbreviateTrendValue,mt=function(fe){return tt({value:fe,numberPrecision:Ct,shouldUseThousandSeparators:kt,shouldAbbreviateTrendValue:ct})};if(st===""||!Object(w.isNumerial)(st))return"";var we=_t==="percent";if(!we)return mt(st);var me=Math.abs(st-Ye),We=Math.round(st/me*100);if(st===0&&me===0&&(We=0),!Number.isFinite(We))return"N/A";var Qe=mt(We);return"".concat(Qe,"%")},_e=function(oe,Ye){var st=Ye.width,_t=Ye.height,Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le,kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"normal",ct=Object(T.computeTextSize)(oe,"".concat(kt," ").concat(G,"px ").concat(Ct)),mt=Math.min(st/ct*G,_t/G*G);return parseInt(mt,10)},te=function(oe){var Ye=oe.width,st=oe.height,_t=oe.unit,Ct=oe.majorText,kt=oe.spaceRatio,ct=kt===void 0?1:kt,mt=_t?"".concat(_t).concat(Ct):Ct;return _e(mt,{width:Ye*ct,height:st})},ce=function(oe){var Ye=oe.width,st=oe.height,_t=oe.trendText,Ct=oe.spaceRatio,kt=Ct===void 0?1:Ct,ct=12;return kt>0&&(ct=_e(_t,{width:Ye*kt,height:st}),ct=parseInt(ct,10)*kt),ct},Ae=function(oe){return oe>G?G:oe},ke=function(oe){var Ye=oe.underLabel,st=oe.width,_t=oe.height;return _e(Ye,{width:st,height:_t})},Ce=function(oe){var Ye=oe.width,st=oe.height,_t=oe.majorValue,Ct=oe.trendValue,kt=oe.majorFontSize,ct=oe.trendFontSize,mt=oe.trendDisplay,we=oe.unit,me=oe.numberPrecision,We=oe.shouldUseThousandSeparators,Qe=oe.shouldAbbreviateTrendValue,He=Object(w.isNumerial)(Ct)&&F(mt)?.6:1,fe=Ye*.9,De=st*.9,ft=je({majorValue:_t,numberPrecision:me,shouldUseThousandSeparators:We}),Rt=kt||te({width:fe,height:De,unit:we,majorText:ft,spaceRatio:He}),Oe=Ee({majorValue:_t,trendValue:Ct,trendDisplay:mt,numberPrecision:me,shouldUseThousandSeparators:We,shouldAbbreviateTrendValue:Qe}),qe=ct||ce({width:fe,height:De,trendText:Oe,spaceRatio:1-He});return{majorText:ft,majorTextFontSize:Rt,trendText:Oe,trendTextFontSize:qe}},$e=function(oe){for(var Ye=oe.width,st=oe.height,_t=oe.toRemoveList,Ct=oe.majorValue,kt=oe.trendValue,ct=oe.majorFontSize,mt=oe.trendFontSize,we=oe.majorTextFontSize,me=oe.unit,We=oe.numberPrecision,Qe=oe.shouldUseThousandSeparators,He=oe.shouldAbbreviateTrendValue,fe=0,De={},ft={},Rt=we;Rt<12&&fe<_t.length;){var Oe=_t[fe];De=Y(Y({},De),c()({},Oe.key,Oe.value)),ft=Ce(Y({majorValue:Ct,trendValue:kt,majorFontSize:ct,trendFontSize:mt,width:Ye,height:st,unit:me,numberPrecision:We,shouldUseThousandSeparators:Qe,shouldAbbreviateTrendValue:He},De)),Rt=ft.majorTextFontSize,fe+=1}if(Rt<12){var qe="".concat(Ct.toString().slice(0,3),"...");ft=Ce(Y({majorValue:qe,trendValue:kt,majorFontSize:ct,trendFontSize:mt,width:Ye,height:st,unit:me,numberPrecision:We,shouldUseThousandSeparators:Qe,shouldAbbreviateTrendValue:He},De))}return{newMajorAndTrend:ft,updatedProps:De}},Ke=function(oe){var Ye=oe.contentWidth,st=oe.contentHeight,_t=oe.containerWidth,Ct=oe.containerHeight,kt=oe.majorValue,ct=oe.trendValue,mt=oe.majorFontSize,we=oe.trendFontSize,me=oe.trendDisplay,We=oe.unit,Qe=oe.numberPrecision,He=oe.shouldUseThousandSeparators,fe=oe.shouldAbbreviateTrendValue,De=oe.toRemoveList,ft=Ce({majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,trendDisplay:me,width:Ye,height:st,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),Rt=ft.majorText,Oe=ft.trendText,qe=ft.majorTextFontSize,H=ft.trendTextFontSize,ae=Rt,ve={};if(qe<12){var N=$e({width:_t,height:Ct,toRemoveList:De,majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,majorTextFontSize:qe,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),ie=N.newMajorAndTrend,Ze=N.updatedProps;Rt=ie.majorText,Oe=ie.trendText,qe=ie.majorTextFontSize,H=ie.trendTextFontSize,ve=Ze}return{majorText:Rt,trendText:Oe,majorTextFontSize:qe,trendTextFontSize:H,majorValueTitle:ae,smallVizProps:ve}},Ve=function(oe){var Ye=oe.text,st=oe.fontSize,_t=st===void 0?G:st,Ct=oe.fontFamily,kt=Ct===void 0?le:Ct,ct=oe.fontWeight,mt=ct===void 0?"normal":ct,we=oe.containerWidth,me=Object(T.computeTextSize)(Ye,"".concat(mt," ").concat(_t,"px ").concat(kt)),We=Ye,Qe=Object(T.computeTextSize)("...","".concat(mt," ").concat(_t,"px ").concat(kt));if(we-Qe>0&&me>we){for(;me+Qe>we&&We.length>1;)We=We.substring(0,We.length-1),me=Object(T.computeTextSize)(We,"normal ".concat(_t,"px ").concat(kt));We="".concat(We,"...")}return We},rt=function(oe){var Ye=oe.contentWidth,st=oe.contentHeight,_t=oe.containerWidth,Ct=oe.containerHeight,kt=oe.majorValue,ct=oe.trendValue,mt=oe.majorFontSize,we=oe.trendFontSize,me=oe.trendDisplay,We=oe.unit,Qe=oe.numberPrecision,He=oe.shouldUseThousandSeparators,fe=oe.shouldAbbreviateTrendValue,De=oe.smallViz,ft=Ce({majorValue:kt,trendValue:ct,majorFontSize:mt,trendFontSize:we,trendDisplay:me,width:Ye,height:st,unit:We,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe}),Rt=ft.majorText,Oe=ft.trendText,qe=ft.majorTextFontSize,H=ft.trendTextFontSize,ae=Rt,ve={};if(De){var N=Ve({text:kt,fontWeight:"bold",fontSize:12,containerWidth:_t}),ie=Ce({majorValue:N,trendValue:ct,majorFontSize:mt,trendFontSize:we,width:_t,height:Ct,unit:We,trendDisplay:me,numberPrecision:Qe,shouldUseThousandSeparators:He,shouldAbbreviateTrendValue:fe});Rt=ie.majorText,Oe=ie.trendText,qe=ie.majorTextFontSize,H=ie.trendTextFontSize,ve={trendDisplay:me,unit:We}}return{majorText:Rt,trendText:Oe,majorTextFontSize:qe,trendTextFontSize:H,majorValueTitle:ae,smallVizProps:ve}},it=function(oe){var Ye=oe.backgroundEnabled,st=oe.backgroundColor,_t=oe.defaultColors,Ct=oe.customColorFormatter;return Ye&&st&&typeof Ct=="function"?Ct(st):_t.none},dt=function(oe,Ye){return oe===255?oe-Ye:oe===0?oe+Ye:oe},bt=function(oe,Ye){var st=oe.replace(/(0x|#)/,""),_t=parseInt(st.substr(0,2),16),Ct=parseInt(st.substr(2,2),16),kt=parseInt(st.substr(4,2),16),ct=Math.max(Math.min(Math.floor(_t*Ye),255),0),mt=Math.max(Math.min(Math.floor(Ct*Ye),255),0),we=Math.max(Math.min(Math.floor(kt*Ye),255),0);return ct===_t&&mt===Ct&&we===kt&&(ct===0&&mt===0&&we===0?Ye>1?(ct=dt(ct,80),mt=dt(mt,80),we=dt(we,80)):(ct=dt(ct,40),mt=dt(mt,40),we=dt(we,40)):ct===255&&mt===255&&we===255?Ye>1?(ct=dt(ct,20),mt=dt(mt,20),we=dt(we,20)):(ct=dt(ct,80),mt=dt(mt,80),we=dt(we,80)):(ct=dt(ct,20),mt=dt(mt,20),we=dt(we,20))),"#".concat(ct.toString(16).padStart(2,0))+"".concat(mt.toString(16).padStart(2,0))+"".concat(we.toString(16).padStart(2,0))},Wt=function(oe){return bt(oe,1.3)},Ht=function(oe){return bt(oe,.5)},Jt=function(oe,Ye,st,_t,Ct){var kt={trendValue:_t,value:Ye,name:st};return Ct(Y(Y({},oe),{},{payload:kt}))}},23:function(s,i){s.exports=Vc()},24:function(s,i){s.exports=zf()},25:function(s,i){s.exports=Pd()},26:function(s,i){s.exports=Bc()},27:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shouldShowIconPlaceholder=void 0;var l=n(0),c=n(1),a=n(3),b=n(2),w=n(10),_=n(13),T=function(D){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$=a.get(D,"primary.data.columns[0]",void 0),Y=$===void 0,G=a.get(D,"primary.data.fields[0]",void 0),le=G===void 0;return E||Y||le};i.shouldShowIconPlaceholder=T;var x={icon:c.func,width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,iconColor:c.string},M=function(D){var E=D.width,$=D.height,Y=D.icon,G=D.iconColor;return Y?l.createElement(Y,{style:{left:"50%",top:"50%",color:G,opacity:.15,position:"absolute",transform:"translate(-50%, -50%)"},width:"50%",height:"50%"}):l.createElement(w.default,{width:E,height:$,level:"warning",message:b._("No DataSource Connected")})};M.propTypes=x,M.defaultProps={width:"100%",height:250},i.default=_.default(M)},28:function(s,i,n){"use strict";var l=n(7);Object.defineProperty(i,"__esModule",{value:!0}),i.getSortingParams=i.SortParamsPropTypes=void 0;var c=n(1),a=n(3),b=n(39);i.SortParamsPropTypes=c.shape({currentSortKey:c.string,currentSortDir:c.oneOf(b.validSortDirs),onSort:c.func});var w=function(T){var x=T.requestParams,M=T.onRequestParamsChange,A,D,E={asc:"desc",desc:"asc",none:"asc"},$;return a.isFunction(M)&&(x&&a.has(x,"sort")&&(A=Object.keys(x.sort).shift(),D=x.sort[A]),$=function(G,le){var K=le.sortKey,F=le.sortDir;if(typeof K=="string"){var Q=a.has(E,F)?E[F]:"none";M(Object.assign(Object.assign({},x),{offset:0,sort:l({},K,Q)}))}else M(x)}),{currentSortKey:A,currentSortDir:D,onSort:$}};i.getSortingParams=w},29:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPaginationParams=i.PaginatorParamsPropTypes=void 0;var l=n(1),c=n(3);i.PaginatorParamsPropTypes=l.shape({isPaging:l.bool,current:l.number,totalPages:l.number,onChange:l.func});var a=function(w){var _=w.requestParams,T=w.meta,x=w.onRequestParamsChange,M=T&&T.totalCount||0,A=_&&_.offset||0,D=_&&_.count,E=typeof D=="number"&&D>0?Math.ceil(M/D):0,$=typeof D=="number"&&D>0?Math.floor(A/D)+1:0,Y=E>1&&c.isFunction(x),G=function(K,F){var Q=F.page,L=F.count,k=c.cloneDeep(_);typeof L=="number"&&(k.count=L,k.offset=0);var re=typeof k.count=="number"?k.count:10;typeof Q=="number"&&Q>0&&(k.count=re,k.offset=(Q-1)*re),x(k)};return{isPaging:Y,current:$,totalPages:E,onChange:c.isFunction(x)?G:c.noop}};i.getPaginationParams=a},3:function(s,i){s.exports=zr()},30:function(s,i){s.exports=kf()},31:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizCategory=void 0;var l;(function(c){c.SINGLE_VALUE="Single Value",c.TRENDS="Trends",c.COMPARISONS="Comparisons",c.TABLE="Table",c.GAUGE="Gauge",c.DISTRIBUTIONS="Distributions",c.CHOROPLETH="Choropleth Maps",c.SHAPES="Shapes",c.MISC="misc",c.FLOW="Flow",c.CORRELATION="Correlation",c.SPATIAL="Spatial"})(l=i.VizCategory||(i.VizCategory={}))},32:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(3),a=n(33),b=n(34),w=n(35),_=n(23),T=n(36),x=n(4),M=n(25),A=n(26),D=n(37),E=n(6),$=n(28),Y=n(29),G=n(40),le=n(41),K=n(42),F=n(43),Q=function(k){var re=k.ReactViz,de=k.vizConfig,Ie=k.computeVizProps,et=Ie===void 0?function(){}:Ie,lt=k.disableEditModeCover,tt=k.useIconPlaceholder,je=w.withSanitizedProps(re),Ee=A.pickFieldFromJSONSchema(de.optionsSchema,"default"),_e=function(ce){var Ae=ce.mode,ke=ce.hasEventHandlers,Ce=ce.dataSources,$e=ce.options,Ke=ce.context,Ve=Ke===void 0?{}:Ke,rt=ce.width,it=ce.height,dt=ce.onComputedProps,bt=ce.onEventTrigger,Wt=ce.theme,Ht=ce.onRequestParamsChange,Jt=l.useContext(_.default),Mt=Jt.serializedTimezone;Mt&&(T.default.getDefaultSplunkTimezone()||T.default.setDefaultSplunkTimezone(Mt));var oe=function(ie){var Ze,X;return(X=(Ze=de.themes)[ie])===null||X===void 0?void 0:X.call(Ze,ce)},Ye=oe("defaultBackgroundColor"),st=a.default({theme:Wt}),_t=st.family,Ct=st.colorScheme,kt=st.density,ct={};ct=G.useDeepMemo(function(){try{return b.Options.evaluate({context:c.defaultsDeep({},Ve,de.defaultContext),options:M.deepMergeWithArrayPrimitiveOverrides({},$e,Ee)},Ce,oe)}catch(N){return console.error("unexpected error evaluating options:  + ".concat(N.message)),{}}},[_t,Ct,kt,$e,Ve,Ce,Mt]),l.useEffect(function(){dt(ct)});var mt=de.requiredProps,we=mt===void 0?[]:mt,me=de.supports,We=le.missingKeys(we,ct);if(We.length>0&&me.includes(E.VizBehavior.PLACEHOLDER)&&de.key!=="splunk.singlevalue")return l.createElement(le.default,{"data-test":"missing-props-message",width:rt,height:it,missingProps:We,backgroundColor:Ye});var Qe={};if(ke&&Ae==="view"&&de.supports.indexOf(E.VizBehavior.EVENTS)>-1){var He=de.events;Object.keys(He).forEach(function(N){var ie=c.camelCase("on.".concat(N));Qe[ie]=null;var Ze=He[N].payloadKeys,X={};Array.isArray(Ze)&&Ze.length&&Ze.forEach(function(Le){X[Le]=ct[Le]}),Qe[ie]=function(Le){return Le&&Le.payload&&(X=Le.payload),bt({originalEvent:Le,payload:X,type:N})}})}var fe=et(Object.assign(Object.assign(Object.assign(Object.assign({},ce),ct),Qe),{themeFunc:oe})),De={},ft="paginateDataSourceKey",Rt=c.has(ct,ft)&&ct[ft]||"primary";if(de.supports.indexOf(E.VizBehavior.PAGE_AND_SORT)>-1&&c.has(Ce,Rt)){var Oe=c.get(Ce,[Rt,"requestParams"],{}),qe=c.get(Ce,[Rt,"meta"],{}),H=function(ie){return Ht(Rt,ie)},ae=$.getSortingParams({requestParams:Oe,meta:qe,onRequestParamsChange:H}),ve=Y.getPaginationParams({requestParams:Oe,meta:qe,onRequestParamsChange:H});De={sortParams:ae,paginatorParams:ve}}return l.createElement(je,Object.assign({mode:Ae,width:rt,height:it},ct,fe,Qe,De))};return _e.propTypes=Object.assign(Object.assign({},D.default.propTypes),re.propTypes),_e.defaultProps=Object.assign(Object.assign(Object.assign({},D.default.defaultProps),re.defaultProps),{theme:{}}),_e.config=de,x.withTheme(F.default(K.default(_e,lt),tt))};i.default=Q},33:function(s,i){s.exports=wd()},34:function(s,i){s.exports=Nc()},35:function(s,i){s.exports=Uc()},36:function(s,i){s.exports=is()},37:function(s,i,n){"use strict";var l=n(11);Object.defineProperty(i,"__esModule",{value:!0}),i.INITIAL_HEIGHT=i.INITIAL_WIDTH=void 0;var c=n(1),a=n(3),b=n(38);i.INITIAL_WIDTH=250,i.INITIAL_HEIGHT=250;var w=function _(){l(this,_)};w.propTypes={mode:c.oneOf(["view","edit","export"]).isRequired,width:c.oneOfType([c.string,c.number]).isRequired,height:c.oneOfType([c.string,c.number]).isRequired,context:c.object,options:c.object,onOptionsChange:c.func,dataSources:c.objectOf(c.shape({requestParams:c.object,data:c.shape({fields:c.array,columns:c.array}),error:c.shape({level:c.string,message:c.string}),meta:c.object})),onEventTrigger:c.func,hasEventHandlers:c.bool,onComputedProps:c.func,vizActionHandlerRef:c.func,loading:c.bool,theme:c.object,onRequestParamsChange:c.func},w.defaultProps={width:"100%",height:i.INITIAL_HEIGHT,dataSources:{},onEventTrigger:function(){return{}},mode:"view",hasEventHandlers:!1,options:{},context:{},onOptionsChange:function(){return{}},vizActionHandlerRef:function(){return new b.DefaultVizActionHandler},onComputedProps:function(){return{}},loading:!1,onRequestParamsChange:a.noop},i.default=w},38:function(s,i,n){"use strict";var l=n(11),c=n(19);Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultVizActionHandler=void 0;var a=function(){function b(){l(this,b)}return c(b,[{key:"focus",value:function(){}},{key:"snapshot",value:function(){return null}}]),b}();i.DefaultVizActionHandler=a},39:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.validSortDirs=void 0,i.validSortDirs=["asc","desc","none"]},4:function(s,i){s.exports=Qn()},40:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useDeepMemo=void 0;var l=n(0),c=n(3),a=function(w,_){var T=l.useRef();return(!T.current||!c.isEqual(_,T.current.dependencies))&&(T.current={dependencies:_,value:w()}),T.current.value};i.useDeepMemo=a},41:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MissingPropsMessage=i.missingKeys=i.isMissing=void 0;var l=n(0),c=n(1),a=n(2),b=n(10),w=n(13),_=function(D){return D==null};i.isMissing=_;var T=function(D,E){return D.filter(function($){return i.isMissing(E[$])})};i.missingKeys=T;var x={width:c.oneOfType([c.string,c.number]),height:c.oneOfType([c.string,c.number]),backgroundColor:c.string,missingProps:c.arrayOf(c.string)},M=function(D){var E=D.width,$=D.height,Y=D.missingProps;return l.createElement(b.default,{"data-test":"message",width:E,height:$,message:a._("Missing property: ".concat(Y.join(", ")))})};i.MissingPropsMessage=M,i.MissingPropsMessage.propTypes=x,i.MissingPropsMessage.defaultProps={width:"100%",height:250},i.default=w.default(i.MissingPropsMessage)},42:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(4),a=n(14),b=c.default.div.withConfig({displayName:"withEditModeCover__Cover",componentId:"sc-1gsbnxb-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;"]),w=c.default.div.attrs({"data-splunk-visualization-version":"25.3.6 - 6b2578d73"}).withConfig({displayName:"withEditModeCover__Blocker",componentId:"sc-1gsbnxb-1"})(["position:relative;width:100%;height:100%;"]),_=function(x,M){var A=function(E){var $=E.mode,Y=$==="edit"&&!M;return l.createElement(w,null,l.createElement(x,Object.assign({},E)),Y&&l.createElement(b,{"data-test":"edit-mode-cover"}))};return a.extendStaticWrapperProps({Wrapper:A,Visualization:x}),A};i.default=_},43:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(0),c=n(12),a=n(9),b=n(27),w=n(6),_=n(14),T=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.shouldShowIconPlaceholder,D=M.config,E=D.themes,$=function(G){var le,K,F=G.dataSources,Q=G.loading,L=G.options,k=G.height,re=G.width,de=A(F,Q,L),Ie=c.isColor(L==null?void 0:L.backgroundColor)?L==null?void 0:L.backgroundColor:(le=E==null?void 0:E.defaultBackgroundColor)===null||le===void 0?void 0:le.call(E,G),et=(K=D.placeholderIcon)!==null&&K!==void 0?K:D.icon,lt=a.default.contentColorActive(G);return D.supports.includes(w.VizBehavior.PLACEHOLDER)&&de?l.createElement(b.default,{"data-test":"icon-placeholder",icon:et,width:re,height:k,backgroundColor:Ie,iconColor:lt}):l.createElement(M,Object.assign({},G))};return _.extendStaticWrapperProps({Wrapper:$,Visualization:M}),$};i.default=T},44:function(s,i){s.exports=Td()},45:function(s,i){s.exports=pg()},453:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PureSingleValueRadialThemes=i.PureSingleValueRadial=i.config=void 0;var l=n(470),c=n(32),a=n(454);i.config=a.default,i.PureSingleValueRadial=l.default,i.PureSingleValueRadialThemes={},i.default=c.default({ReactViz:l.default,vizConfig:a.default})},454:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(2),c=n(16),a=n(21),b=n(9),w=n(54),_=n(47),T=n(44),x=n(6),M=n(17),A=n(31),D=n(88),E=n(89),$=n(90),Y=n(91),G=n(92),le=n(78),K=n(455),F={requiredDataSources:[{name:"primary",description:"DataSource that powers the visualization"}],optionalDataSources:[],initialRequestParams:{primary:{offset:0,count:1e4}}},Q={initialWidth:250,initialHeight:250},L={trendColorConfig:[{to:0,value:"#9E2520"},{from:0,value:"#1C6B2D"}],majorColorConfig:[{to:20,value:"#D41F1F"},{from:20,to:40,value:"#D94E17"},{from:40,to:60,value:"#CBA700"},{from:60,to:80,value:"#669922"},{from:80,value:"#118832"}],majorColorMatchConfig:[{match:"",value:"#5C33FF"}]},k={backgroundColor:{default:"> themes.defaultBackgroundColor",description:'Specify the color for the background. The hex value format should be \u201C#ffffff\u201D. The default for enterprise light is "#ffffff". The default for enterprise dark is "#000000". The default for prisma dark is "#0b0c0e".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},majorColor:{default:"> themes.defaultFontColor",description:'Specify the color for the major value. You may use a dataSource to apply the color. The hex value format should be \u201C#ffffff\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},majorValue:{default:'> primary | seriesByPrioritizedTypes("number", "string", "time") | lastPoint()',description:"Specify the dataSource applied to the major value.",type:["string","number"]},majorValueField:{default:"> majorValue | getField()",description:"Specify the field that should be mapped to the major value.",type:"string"},maxValue:{default:100,description:"Specify the value the radial fills up to.",type:"number"},numberPrecision:{default:0,maximum:20,minimum:0,description:"Specify the number of decimal places to display. For example, to display 3 decimal places, use a value of 3. The maximum value is 20.",type:"number"},radialBackgroundColor:{default:"> themes.defaultRadialBackgroundColor",description:'Specify the color for the radial background. The hex value format should be \u201C#ffffff\u201D. The default for enterprise light is "rgba(0, 0, 0, 0.1)". The default for enterprise dark is "rgba(255, 255, 255, 0.15)". The default for prisma dark is "rgba(255, 255, 255, 0.15)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},radialStrokeColor:{default:"> majorColor",description:'Specify the color for the radial. You may use a dataSource to apply the color. The hex value format should be \u201C#ffffff\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},shouldAbbreviateTrendValue:{default:!1,description:"Specify whether to abbreviate the trend value to 2 decimal points. A magnitude unit will be displayed.",type:"boolean"},shouldUseThousandSeparators:{default:!0,description:"Specify whether numeric values use commas as thousandths separaters.",type:"boolean"},trendColor:{default:"> themes.defaultFontColor",description:'Specify the color for the trend value. You may use a dataSource to apply the color. The hex value format should be \u201C#FFFFFF\u201D. The default for enterprise light is "#000000". The default for enterprise dark is "#ffffff". The default for prisma dark is "rgba(255, 255, 255, 0.98)".',pattern:c.COLOR_OR_TOKEN_PATTERN_WITH_RGBA,type:"string"},trendDisplay:{default:"absolute",description:"Specify how to display the trend value.",pattern:c.getPattern(["percent","absolute","off"]),type:"string"},trendValue:{default:'> primary | seriesByPrioritizedTypes("number", "string", "time") | delta(-2)',description:"Specify the dataSource applied to the trend value.",type:"number"},underLabel:{description:"Specify the text that appears below the major value.",type:"string"},unit:{description:"Specify text to show next to the major value.",type:"string"},unitPosition:{default:"after",description:"Specify whether the unit text should appear before or after the major value.",pattern:c.getPattern(["before","after"]),type:"string"}},re={majorColorEditorConfig:void 0,trendColorEditorConfig:void 0,backgroundColorEditorConfig:void 0},de={majorColor:void 0,trendColor:void 0,backgroundColor:void 0},Ie=[{label:l._("None"),name:"singleValueRadial.none",value:{context:Object.assign({},re),options:Object.assign({},de)}},{label:l._("Major Value"),name:"singleValueRadial.majorValue",value:{context:Object.assign(Object.assign({},re),{majorColorEditorConfig:L.majorColorConfig}),options:Object.assign(Object.assign({},de),{majorColor:"> majorValue | rangeValue(majorColorEditorConfig)"})}},{label:l._("Major Value & Trend"),name:"singleValueRadial.majorValueAndTrend",value:{context:Object.assign(Object.assign({},re),{majorColorEditorConfig:L.majorColorConfig,trendColorEditorConfig:L.trendColorConfig}),options:Object.assign(Object.assign({},de),{majorColor:"> majorValue | rangeValue(majorColorEditorConfig)",trendColor:"> trendValue | rangeValue(trendColorEditorConfig)"})}},{label:l._("Trend"),name:"singleValueRadial.trend",value:{context:Object.assign(Object.assign({},re),{trendColorEditorConfig:L.trendColorConfig}),options:Object.assign(Object.assign({},de),{trendColor:"> trendValue | rangeValue(trendColorEditorConfig)"})}},{label:l._("Background"),name:"singleValueRadial.background",value:{context:Object.assign(Object.assign({},re),{backgroundColorEditorConfig:L.majorColorConfig}),options:Object.assign(Object.assign({},de),{backgroundColor:"> majorValue | rangeValue(backgroundColorEditorConfig)"})}}],et={defaultFontColor:function(Ee){return a.default({enterprise:{dark:b.default.white(Ee),light:b.default.black(Ee)},prisma:b.default.contentColorActive(Ee)})(Ee)},defaultBackgroundColor:function(Ee){return a.default({enterprise:{dark:b.default.black(Ee),light:b.default.white(Ee)},prisma:b.default.backgroundColorSidebar(Ee)})(Ee)},defaultRadialBackgroundColor:function(Ee){return a.default({enterprise:{dark:"rgba(255, 255, 255, 0.15)",light:"rgba(0, 0, 0, 0.1)"},prisma:b.default.interactiveColorBackgroundDisabled(Ee)})(Ee)}},lt=[{label:l._("Major value & trend"),layout:[[{label:"Unit position",option:"unitPosition",editor:"editor.select",editorProps:{values:[{label:l._("Before"),value:"before"},{label:l._("After"),value:"after"}]}},{label:l._("Unit label"),option:"unit",editor:"editor.text"}],[{label:l._("Precision"),option:"numberPrecision",editor:"editor.number",editorProps:{min:0,max:20}},{label:l._("Trend display"),option:"trendDisplay",editor:"editor.select",editorProps:{values:[{label:l._("Percent"),value:"percent"},{label:l._("Absolute"),value:"absolute"},{label:l._("Off"),value:"off"}]}}]]},{label:l._("Coloring"),layout:[[{label:"Dynamic elements",key:"presetSelector",editor:"editor.presetSelector",editorProps:{presets:Ie,value:function(Ee){var _e=Ee.context,te=Ee.options,ce=M.getInitialPreset(_e,te,Ie);return ce&&ce.label||null}}}],[Object.assign(Object.assign({},Y.default),{editorProps:{labelPosition:"left",themes:et}})],[D.getDynamicMajorColorEditor({defaultContext:L,defaultPalettesConfig:w.defaultPalettesConfig})],[Object.assign(Object.assign({},G.default),{editorProps:{labelPosition:"left",themes:et}})],[E.getDynamicTrendColorEditor({defaultContext:L,defaultPalettesConfig:w.defaultPalettesConfig})],K.default({labelPosition:"left",themes:et}),[Object.assign(Object.assign({},le.default),{editorProps:{labelPosition:"left",themes:et}})],[$.getDynamicBackgroundColorEditor({defaultContext:L,defaultPalettesConfig:w.defaultPalettesConfig})]]}],tt={key:"splunk.singlevalueradial",name:"Single Value Radial",category:A.VizCategory.SINGLE_VALUE,icon:_.SingleValueRadial,placeholderIcon:T.SingleValueRadial,dataContract:F,size:Q,defaultContext:L,optionsSchema:k,editorConfig:lt,events:{"value.click":{description:"trigger when user clicks major value",payloadKeys:["majorValue","trendValue"]}},supports:[x.VizBehavior.DYNAMIC_OPTIONS,x.VizBehavior.EVENTS,x.VizBehavior.PLACEHOLDER],themes:et};i.default=M.enhanceConfig(tt)},455:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=n(2),c=function(b){var w=b.label,_=b.themes,T=b.labelPosition;return[{label:l._(w||"Radial background"),option:"radialBackgroundColor",editor:"editor.color",editorProps:{labelPosition:T||"top",themes:_}}]};i.default=c},47:function(s,i){s.exports=Ed()},470:function(s,i,n){"use strict";n.r(i);var l=n(48),c=n.n(l),a=n(0),b=n.n(a),w=n(1),_=n.n(w),T=n(21),x=n.n(T),M=n(9),A=n.n(M),D=n(4),E=n.n(D),$=n(71),Y=n.n($),G=n(72),le=n.n(G),K=n(15),F=n(20),Q=n.n(F),L=n(63),k=n(7),re=n.n(k),de=n(70),Ie=n(45),et=function(we){var me=we.progress,We=we.strokeWidth,Qe=we.backgroundColor,He=Qe===void 0?Ie.RADIAL_BACKGROUND_COLOR:Qe,fe=we.progressColor,De=fe===void 0?Ie.RADIAL_STROKE_COLOR:fe,ft=we.width,Rt=ft===void 0?200:ft,Oe=we.height,qe=Oe===void 0?200:Oe,H=qe-We/2,ae=H*2*Math.PI,ve=.5*ae,N=me/100*50,ie=N/100*ae,Ze=ae*.5;return b.a.createElement("svg",{height:qe,width:Rt,"data-test":"radial-visualization"},b.a.createElement("g",null,b.a.createElement("circle",{"data-test":"background-radial",stroke:He,fill:"transparent",strokeWidth:We,strokeDasharray:"".concat(ve," ").concat(ae-ve),style:{strokeDashoffset:Ze},r:H,cx:Rt/2,cy:H+We/2}),b.a.createElement("circle",{"data-test":"progress-radial",stroke:De,fill:"transparent",strokeWidth:We,strokeDasharray:"".concat(ie," ").concat(ae-ie),style:{strokeDashoffset:Ze},r:H,cx:Rt/2,cy:H+We/2})))};et.propTypes={progress:_.a.number,strokeWidth:_.a.number,backgroundColor:_.a.string,progressColor:_.a.string,width:_.a.number,height:_.a.number},et.defaultProps={progress:0,strokeWidth:12};var lt=et,tt=n(22),je=["standard","below","outside"],Ee=25,_e=12,te=16,ce=6,Ae=function(we){var me=we.backgroundEnabled,We=we.backgroundColor;return Object(tt.getGraphColors)({backgroundEnabled:me,backgroundColor:We,defaultColors:Ie.RADIAL_SEVERITY_COLORS,customColorFormatter:function(He){return{background:Object(tt.lighten)(He),stroke:Object(tt.darken)(He)}}})},ke=function(we){var me=we.width,We=we.height,Qe=Math.min(me,We*2)/2;return{width:me-tt.SVR_PADDING.left-tt.SVR_PADDING.right,height:Qe-tt.SVR_PADDING.top-tt.SVR_PADDING.bottom}},Ce=function(we){var me=we.height,We=we.strokeWidth,Qe=We===void 0?te:We,He=me-Qe/2,fe=He*.9,De=fe*.7,ft=Math.floor(Math.sqrt(Math.pow(fe,2)-Math.pow(De,2)));return{contentWidth:De*2,contentHeight:ft,helperArcRadius:fe,semicircleRadius:He}},$e=function(we){var me=we.graphSize,We=we.radialStrokeWidth,Qe=me-We;return Math.floor(Math.sqrt(Math.pow(Qe,2)/2))},Ke=function(we){return we>=90?te:ce},Ve=function(we){return je.indexOf(we)>-1},rt=function(we){var me=we.showTrendIndicator,We=we.position;return me&&We==="standard"},it=function(we){var me=we.showTrendIndicator,We=we.position;return me&&We==="below"},dt=function(we){var me=we.showTrendIndicator,We=we.position;return me&&We==="outside"},bt=function(we,me){return Number.isNaN(Number(we))||Number.isNaN(Number(me))||we<0&&we<me?0:we/me*100};function Wt(mt,we){var me=Object.keys(mt);if(Object.getOwnPropertySymbols){var We=Object.getOwnPropertySymbols(mt);we&&(We=We.filter(function(Qe){return Object.getOwnPropertyDescriptor(mt,Qe).enumerable})),me.push.apply(me,We)}return me}function Ht(mt){for(var we=1;we<arguments.length;we++){var me=arguments[we]!=null?arguments[we]:{};we%2?Wt(Object(me),!0).forEach(function(We){re()(mt,We,me[We])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(me)):Wt(Object(me)).forEach(function(We){Object.defineProperty(mt,We,Object.getOwnPropertyDescriptor(me,We))})}return mt}var Jt=E.a.div.withConfig({displayName:"RadialLayout__TextContainer",componentId:"sc-13x2rjt-0"})(["position:",";left:0;bottom:0;width:100%;display:flex;align-items:",";justify-content:center;flex-direction:column;[data-test='majorValue']{","::before{font-size:inherit;vertical-align:unset;top:unset;}::after{font-size:inherit;vertical-align:unset;top:unset;}}[data-test='trendValueIndicator']{align-items:flex-end;","}[data-test='trendValue']{","}div[class^='TrendValue__Column']{","}"],function(mt){return mt.smallViz?"relative":"absolute"},function(mt){return mt.align||"center"},function(mt){return!mt.smallViz&&{lineHeight:"normal"}},function(mt){return mt.smallViz&&{marginLeft:"1px"}},function(mt){return mt.smallViz&&{marginLeft:"1px"}},function(mt){return mt.smallViz&&{margin:"0 1px"}}),Mt=E.a.div.withConfig({displayName:"RadialLayout__GraphContainer",componentId:"sc-13x2rjt-1"})(["position:relative;margin:0 auto;width:","px;height:","px;display:flex;justify-content:center;align-items:center;flex-direction:column;"],function(mt){return mt.width},function(mt){return mt.height}),oe=E.a.div.withConfig({displayName:"RadialLayout__UnderLabelContainer",componentId:"sc-13x2rjt-2"})(["display:flex;flex:0 0 ","px;align-items:flex-end;"],function(mt){return mt.underLabelHeight}),Ye=E.a.span.withConfig({displayName:"RadialLayout__UnderLabelText",componentId:"sc-13x2rjt-3"})(["color:",";-webkit-text-stroke:0.5px ",";font-size:12px;max-width:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],function(mt){return mt.color},function(mt){return mt.strokeColor},function(mt){return mt.maxWidth}),st=function(we){var me=c()({},we),We=me.majorColor,Qe=me.majorText,He=me.majorTextFontSize,fe=me.majorValueTitle,De=me.trendColor,ft=me.trendText,Rt=me.trendTextFontSize,Oe=me.showTrendIndicator,qe=me.unit,H=me.unitPosition,ae=me.underLabelColor,ve=me.underLabel,N=me.onValueClick,ie=me.showRadialGraph,Ze=me.progress,X=me.radialBackgroundColor,Le=me.radialStrokeColor,ze=me.radialStrokeWidth,Je=me.graphWidth,ot=me.graphHeight,gt=me.underLabelStrokeColor,yt=Ce({height:ot,strokeWidth:ze}),Lt=yt.semicircleRadius,Vt=yt.helperArcRadius,zt=Lt<50||!ie,Se=zt?0:Math.max(Vt*.2,20),Xe=Vt*2,at=b.a.createElement(de.default,{majorColor:We,majorText:Qe,majorTextFontSize:He,majorValueTitle:fe,trendColor:De,trendText:ft,trendTextFontSize:Rt,showTrendIndicator:Oe,unit:qe,unitPosition:H,onValueClick:N}),Et=ie?b.a.createElement(lt,{progress:Ze,backgroundColor:X,progressColor:Le,strokeWidth:ze,width:Je,height:ot}):null,pr=b.a.createElement(oe,{underLabelHeight:Se},!zt&&ve&&b.a.createElement(Ye,{"data-test":"underLabel",maxWidth:Xe*.9,color:ae,strokeColor:gt,title:ve},ve));return b.a.createElement(Mt,{width:Je,height:ot},Et,b.a.createElement(Jt,{smallViz:!ie,height:ot},at,pr))};st.propTypes=Ht(Ht({},de.default.propTypes),{},{trendPosition:_.a.string,showRadialGraph:_.a.bool,progress:_.a.number,radialBackgroundColor:_.a.string,radialStrokeColor:_.a.string,radialStrokeWidth:_.a.number,graphWidth:_.a.number,graphHeight:_.a.number,underLabelStrokeColor:_.a.string});var _t=st,Ct=E.a.div.withConfig({displayName:"SingleValueRadial__Container",componentId:"sc-404dvw-0"})(["overflow:hidden;",";"],function(mt){return Object(K.toDimension)(Y()(mt,["width","height"]))}),kt=function(we){var me=c()({},we),We=me.width,Qe=me.height,He=Qe===void 0?250:Qe,fe=me.style,De=me.majorFontSize,ft=me.majorValue,Rt=me.majorValueField,Oe=me.maxValue,qe=me.trendValue,H=me.trendFontSize,ae=me.unitPosition,ve=me.numberPrecision,N=me.shouldUseThousandSeparators,ie=me.shouldAbbreviateTrendValue,Ze=me.onValueClick,X={defaultFontColor:x()({enterprise:{dark:A.a.textColor(me),light:A.a.gray20(me)},prisma:A.a.contentColorActive(me)})(me),defaultBlockFontColor:x()({enterprise:A.a.white(me),prisma:A.a.contentColorActive(me)})(me)},Le=Object(tt.computeColors)(me,X),ze=Le.backgroundEnabled,Je=Le.backgroundColor,ot=Le.majorColor,gt=Le.trendColor,yt=Le.underLabelColor,Lt=Ae({backgroundEnabled:ze,backgroundColor:Je}),Vt=me.radialBackgroundColor||Lt.background,zt=me.radialStrokeColor||Lt.stroke,Se=ze?Je:"transparent",Xe=Object(a.useCallback)(function(Et){return Object(tt.handleValueClickCallback)(Et,ft,Rt,qe,Ze)},[Ze,ft,Rt,qe]),at=function(pr){var pe=pr.width,R=pr.height,Z=me.underLabel,he=me.trendDisplay,xe=me.unit,Fe=ke({width:pe,height:R}),B=Fe.width,V=Fe.height,U=Ke(V),ee=Ce({height:V-U/2,strokeWidth:U}),ue=ee.contentWidth,Te=ee.contentHeight,Ne=V-U/2,Pt=Ne>=20;Pt||(B=pe,ue=pe,V=R,Te=R);var At=Object(tt.computeSingleValueRadialContent)({majorValue:ft,trendValue:qe,majorFontSize:De,trendFontSize:H,trendDisplay:he,contentWidth:ue,contentHeight:Te,containerWidth:pe*.9,containerHeight:R*.9,unit:xe,numberPrecision:ve,shouldUseThousandSeparators:N,shouldAbbreviateTrendValue:ie,smallViz:!Pt}),jt=At.majorText,$t=At.trendText,Zt=At.majorTextFontSize,dr=At.trendTextFontSize,lr=At.majorValueTitle,yr=At.smallVizProps;le()(yr)||(he=yr.trendDisplay,xe=yr.unit);var xr=bt(ft,Oe);return b.a.createElement(L.default,{backgroundColor:Je,style:fe,dataTestKey:"SingleValueRadialWrapper"},b.a.createElement(_t,{"data-test":"RadialLayout",majorColor:ot,majorText:jt,majorTextFontSize:Zt,majorValueTitle:lr,trendColor:gt,trendText:$t,trendTextFontSize:dr,showTrendIndicator:Object(tt.shouldShowTrend)(he),unit:xe,unitPosition:ae,underLabelColor:yt,underLabel:Z,onValueClick:Xe,showRadialGraph:Pt,progress:xr,radialBackgroundColor:Vt,radialStrokeColor:zt,radialStrokeWidth:U,graphWidth:B,graphHeight:V,underLabelStrokeColor:Se}))};return b.a.createElement(Ct,{width:We,height:He},b.a.createElement(Q.a,null,function(Et){return at(Et)}))};kt.propTypes={width:_.a.oneOfType([_.a.string,_.a.number]),height:_.a.oneOfType([_.a.string,_.a.number]),style:_.a.object,majorValue:_.a.oneOfType([_.a.string,_.a.number]),majorValueField:_.a.string,majorColor:_.a.string,majorFontSize:_.a.number,maxValue:_.a.number,trendValue:_.a.oneOfType([_.a.string,_.a.number]),trendColor:_.a.string,trendFontSize:_.a.number,trendDisplay:_.a.string,trendIndicatorPosition:_.a.oneOf(["standard","below","outside"]),shouldAbbreviateTrendValue:_.a.bool,backgroundColor:_.a.string,unit:_.a.string,unitPosition:_.a.string,underLabel:_.a.string,numberPrecision:_.a.number,shouldUseThousandSeparators:_.a.bool,radialBackgroundColor:_.a.string,radialStrokeColor:_.a.string,onValueClick:_.a.func},kt.defaultProps={width:"100%",height:250,majorValue:"N/A",majorValueField:"",maxValue:100,trendDisplay:"absolute",trendIndicatorPosition:"standard",shouldAbbreviateTrendValue:!1,unitPosition:"after",numberPrecision:0,shouldUseThousandSeparators:!0,onValueClick:function(){}};var ct=i.default=Object(D.withTheme)(kt)},48:function(s,i){s.exports=ng()},49:function(s,i){s.exports=Lf()},54:function(s,i){s.exports=lg()},6:function(s,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VizBehavior=void 0;var l;(function(c){c.DYNAMIC_OPTIONS="dynamic-options",c.EVENTS="events",c.PLACEHOLDER="placeholder",c.PAGE_AND_SORT="page-and-sort"})(l=i.VizBehavior||(i.VizBehavior={}))},63:function(s,i,n){"use strict";n.r(i);var l=n(4),c=n.n(l),a=c.a.div.attrs(function(b){var w=b.dataTestKey;return{"data-test":w}}).withConfig({displayName:"VizStyleWrapper",componentId:"sc-6rw6wv-0"})(["display:flex;justify-content:center;flex-direction:column;width:100%;height:100%;background-color:",";"],function(b){return b.backgroundColor});a.displayName="VizStyleWrapper",i.default=a},7:function(s,i){s.exports=_l()},70:function(s,i,n){"use strict";n.r(i),n.d(i,"SingleValueTrendValue",function(){return Ee});var l=n(48),c=n.n(l),a=n(0),b=n.n(a),w=n(1),_=n.n(w),T=n(4),x=n.n(T),M=n(22),A=n(73),D=n.n(A),E=n(74),$=n.n(E),Y=x.a.div.withConfig({displayName:"TrendValue__Column",componentId:"yd2lvy-0"})(["display:flex;flex-direction:row;justify-content:",";height:","px;",";"],function(te){return te.justify||"flex-end"},function(te){return te.size||12},function(te){return te.size?"margin: 0 ".concat(parseInt(te.size,10)*.2||5,"px;"):""}),G=x.a.div.withConfig({displayName:"TrendValue__Text",componentId:"yd2lvy-1"})(["white-space:nowrap;font-size:","px;color:",";font-family:",";height:","px;line-height:","px;display:flex;align-self:baseline;",";"],function(te){return te.size||12},function(te){return te.color||"#000"},M.DEFAULT_FONT_FAMILY,function(te){return te.size||12},function(te){return te.size||12},function(te){return te.size?"margin-left: ".concat(parseInt(te.size,10)*.2||5,"px;"):""}),le=function(ce){var Ae=ce.fontSize,ke=ce.color,Ce=ce.value,$e=ce.text,Ke=!1;return parseFloat(Ce,10)>0?Ke=D.a:parseFloat(Ce,10)<0&&(Ke=$.a),b.a.createElement(Y,{justify:"flex-end",size:Ae},b.a.createElement(G,{"data-test":"trendValueIndicator",size:Ae,color:ke},Ke&&b.a.createElement(Ke,null)),b.a.createElement(G,{"data-test":"trendValue",size:Ae,color:ke},"".concat($e)))};le.propTypes={fontSize:_.a.number,color:_.a.string,value:_.a.oneOfType([_.a.string,_.a.number]),text:_.a.string};var K=le,F=n(75),Q=n.n(F),L=x.a.div.withConfig({displayName:"MajorValue__Row",componentId:"shlzpv-0"})(["display:flex;flex-direction:row;align-items:flex-end;justify-content:left;height:","px;line-height:","px;"],function(te){return te.size},function(te){return te.size}),k=x.a.div.withConfig({displayName:"MajorValue__Text",componentId:"shlzpv-1"})(["white-space:nowrap;height:100%;font-size:","px;color:",";font-family:",";font-weight:bold;&:hover{text-decoration:",";cursor:",";}",""],function(te){return te.size||12},function(te){return te.color},M.DEFAULT_FONT_FAMILY,function(te){return te.showUnderline?"underline":"inherit"},function(te){return te.showUnderline?"pointer":"inherit"},function(te){return!te.pseudoContent||!te.pseudoContentPosition?"":"&:".concat(te.pseudoContentPosition,` {
            // by default this pseudo element would inherit text-decoration from main element
            // and text-decoration could not be overwritten.
            // adding display: inline-block makes text decoration independent from main element.
            // => the unit will not be underlined if a user hovers over the main value
            display: inline-block;
            font-size: `).concat(te.pseudoContentFontSize,`px;
            position: relative;
            font-weight: normal;
            content: `).concat(te.pseudoContent,`;
        }`)}),re=["before","after"],de=function(ce){var Ae=ce.color,ke=ce.fontSize,Ce=ce.unitPosition,$e=ce.title,Ke=ce.value,Ve=ce.onValueClick,rt=ce.unit,it,dt;typeof rt=="string"&&(it=Q()(rt,{wrap:!0,quotes:"double"}),typeof Ce=="string"&&re.includes(Ce)?dt=Ce:dt="after");var bt=function(Ht){Ht.keyCode===13&&(Ht.preventDefault(),Ve(Ht))};return b.a.createElement(L,{size:ke},b.a.createElement(k,{"data-test":"majorValue",color:Ae,onClick:function(Ht){return typeof Ve=="function"&&Ve(Ht)},showUnderline:!!Ve,size:ke,title:$e,pseudoContent:it,pseudoContentPosition:dt,pseudoContentFontSize:ke*.6,tabIndex:"0",role:"button",onKeyDown:bt},Ke))};de.propTypes={color:_.a.string,fontSize:_.a.number,unit:_.a.string,unitPosition:_.a.oneOf(re),value:_.a.oneOfType([_.a.string,_.a.number]),title:_.a.oneOfType([_.a.string,_.a.number]),onValueClick:_.a.func};var Ie=de,et=x.a.div.withConfig({displayName:"SingleValueBasic__Column",componentId:"k0nwrx-0"})(["display:flex;flex-direction:column;align-self:center;justify-content:center;"]),lt=x.a.div.withConfig({displayName:"SingleValueBasic__Row",componentId:"k0nwrx-1"})(["display:flex;flex-direction:row;align-items:",";justify-content:center;"],function(te){return te.align||"center"}),tt=x.a.div.withConfig({displayName:"SingleValueBasic__Text",componentId:"k0nwrx-2"})(["font-weight:normal;white-space:nowrap;font-size:","px;color:",";font-family:",";height:","px;line-height:1.2;"],function(te){return te.size||12},function(te){return te.color||"#000"},M.DEFAULT_FONT_FAMILY,function(te){return te.size||12}),je=function(ce){var Ae=c()({},ce),ke=Ae.majorColor,Ce=Ae.majorTextFontSize,$e=Ae.majorText,Ke=Ae.majorValueTitle,Ve=Ae.trendColor,rt=Ae.trendTextFontSize,it=Ae.trendText,dt=Ae.showTrendIndicator,bt=Ae.unit,Wt=Ae.unitPosition,Ht=Ae.underLabel,Jt=Ae.underLabelFontSize,Mt=Ae.underLabelColor,oe=Ae.onValueClick,Ye=it!==""&&dt;return b.a.createElement(et,null,b.a.createElement(lt,{align:"baseline"},b.a.createElement(Ie,{"data-test":"MajorValue",color:ke,fontSize:Ce,unit:bt,unitPosition:Wt,value:$e,title:Ke,onValueClick:oe}),Ye&&b.a.createElement(K,{"data-test":"TrendIndicator",fontSize:rt,color:Ve,value:it,text:it})),Ht&&b.a.createElement(lt,{justify:"center"},b.a.createElement(tt,{"data-test":"underLabel",size:Jt,color:Mt},Ht)))};je.propTypes={majorText:_.a.string,majorColor:_.a.string,majorTextFontSize:_.a.number,majorValueTitle:_.a.string,trendText:_.a.string,trendTextFontSize:_.a.number,trendColor:_.a.string,showTrendIndicator:_.a.bool,unit:_.a.string,unitPosition:_.a.oneOf(["before","after"]),underLabel:_.a.string,underLabelFontSize:_.a.number,underLabelColor:_.a.string,onValueClick:_.a.func};var Ee=K,_e=i.default=je},71:function(s,i){s.exports=Ad()},72:function(s,i){s.exports=tg()},73:function(s,i){s.exports=Rf()},74:function(s,i){s.exports=jf()},75:function(s,i){s.exports=Vf()},78:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static background"),option:"backgroundColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.backgroundColor)}};i.default=w},8:function(s,i){s.exports=Uu()},88:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicMajorColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic major value"),option:"majorColor",context:"majorColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.majorColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: major value"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{majorValue:x.majorColorConfig}},{label:Object(l._)("Matches"),value:"matchValue",defaults:{majorValue:x.majorColorMatchConfig}}],dataSelectors:[{label:Object(l._)("Major Value"),value:"majorValue"}],defaultPalettesConfig:M}}}},89:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicTrendColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic trend"),option:"trendColor",context:"trendColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.trendColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: trend"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{trendValue:x.trendColorConfig}}],dataSelectors:[{label:Object(l._)("Trend"),value:"trendValue"}],defaultPalettesConfig:M}}}},9:function(s,i){s.exports=Cd()},90:function(s,i,n){"use strict";n.r(i),n.d(i,"getDynamicBackgroundColorEditor",function(){return w});var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w=function(T){var x=T.defaultContext,M=T.defaultPalettesConfig;return{label:Object(l._)("Dynamic background"),option:"backgroundColor",context:"backgroundColorEditorConfig",editor:"editor.dynamicColor",showEditor:function(D){var E=D.options;return Object(a.isDynamicOption)(E.backgroundColor)},editorProps:{labelPosition:"left",flyoutTitle:Object(l._)("Dynamic coloring: background"),formatters:[{label:Object(l._)("Ranges"),value:"rangeValue",defaults:{majorValue:x.majorColorConfig,trendValue:x.trendColorConfig}},{label:Object(l._)("Matches"),value:"matchValue",defaults:{majorValue:x.majorColorMatchConfig}}],dataSelectors:[{label:Object(l._)("Major Value"),value:"majorValue"},{label:Object(l._)("Trend"),value:"trendValue"}],defaultPalettesConfig:M}}}},91:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static major value"),option:"majorColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.majorColor)}};i.default=w},92:function(s,i,n){"use strict";n.r(i);var l=n(2),c=n.n(l),a=n(18),b=n.n(a),w={label:Object(l._)("Static trend"),option:"trendColor",editor:"editor.color",showEditor:function(T){var x=T.options;return!Object(a.isDynamicOption)(x.trendColor)},isDisabled:function(T){var x=T.options;return x.trendDisplay==="off"}};i.default=w}})});var ip=Xt((iD,Kv)=>{"use strict";var h3=Object.create,oh=Object.defineProperty,d3=Object.getOwnPropertyDescriptor,f3=Object.getOwnPropertyNames,p3=Object.getPrototypeOf,m3=Object.prototype.hasOwnProperty,Mv=(s,i)=>{for(var n in i)oh(s,n,{get:i[n],enumerable:!0})},ih=(s,i,n,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of f3(i))!m3.call(s,c)&&c!==n&&oh(s,c,{get:()=>i[c],enumerable:!(l=d3(i,c))||l.enumerable});return s},g3=(s,i,n)=>(ih(s,i,"default"),n&&ih(n,i,"default")),y3=(s,i,n)=>(n=s!=null?h3(p3(s)):{},ih(i||!s||!s.__esModule?oh(n,"default",{value:s,enumerable:!0}):n,s)),v3=s=>ih(oh({},"__esModule",{value:!0}),s),Dv={};Mv(Dv,{DEFAULT_CANVAS_HEIGHT:()=>_3,DEFAULT_CANVAS_WIDTH:()=>x3,DEFAULT_INPUT_ON_CANVAS_HEIGHT:()=>zv,DEFAULT_INPUT_ON_CANVAS_WIDTH:()=>Iv,DEFAULT_SCALE_FACTOR:()=>Ma,VIZ_DEFAULT_HEIGHT_PX:()=>Av,collides:()=>kv,computeLocationPort:()=>Lv,computeMaxHeight:()=>Gv,computeNewAbsoluteStructureItem:()=>w3,computeNewBlockItemPosition:()=>$v,computeNewGridStructureItem:()=>C3,computeNewInputPosition:()=>Hv,computeNewLinePosition:()=>Wv,computeNextAvailablePosition:()=>ah,convertLineToBlockItem:()=>Rv,convertToBlockItem:()=>jv,convertToBlockItems:()=>Fv,getDefaultPosition:()=>Uv,getFirstCollision:()=>Bv,getPositionByType:()=>Nv,getScrollbarWidth:()=>S3,isBlockItem:()=>T3,sortLayoutItems:()=>Vv,toCoordinate:()=>np});Kv.exports=v3(Dv);var kl={};Mv(kl,{default:()=>b3});var rp=y3(zr());g3(kl,zr());var b3="default"in rp?rp.default:rp,Ma=3,Av=400,x3=1200,_3=900,Iv=198,zv=82,kv=(s,i)=>!(s.item===i.item||s.position.x+s.position.w<=i.position.x||s.position.x>=i.position.x+i.position.w||s.position.y+s.position.h<=i.position.y||s.position.y>=i.position.y+i.position.h),Lv=(s,i)=>{let n=s.item,l=i.map(a=>a.item).indexOf(n),c;if(l>=0)c=(0,kl.cloneDeep)(i[l].position);else return null;switch(s.port){case"n":return{x:c.x+c.w/2,y:c.y};case"e":return{x:c.x+c.w,y:c.y+c.h/2};case"s":return{x:c.x+c.w/2,y:c.y+c.h};case"w":return{x:c.x,y:c.y+c.h/2};default:return null}},np=(s,i)=>{var n;let l={x:0,y:0};return s.item&&s.port?(n=Lv({item:s.item,port:s.port},i))!=null?n:l:typeof s.x=="number"&&typeof s.y=="number"?{x:s.x,y:s.y}:l},Rv=(s,i)=>{let n=np(s.from,i),l=np(s.to,i);return{x:Math.min(n.x,l.x),y:Math.min(n.y,l.y),w:Math.abs(n.x-l.x),h:Math.abs(n.y-l.y)}},jv=(s,i)=>{let n={item:s.item,type:"block",position:{x:0,y:0,w:0,h:0}};return s.type==="line"?n.position=Rv(s.position,i):(s.type==="input"&&(n.type="input"),n.position=(0,kl.cloneDeep)(s.position)),n},Fv=s=>s.map(i=>jv(i,s)),Vv=s=>(0,kl.cloneDeep)(s).sort((i,n)=>{let l=-1;return i.position.y>n.position.y||i.position.y===n.position.y&&i.position.x>n.position.x?l=1:i.position.y===n.position.y&&i.position.x===n.position.x&&(l=0),l}),Bv=(s,i)=>s.find(n=>kv(n,i)),Nv=({col:s,row:i,width:n,height:l,type:c})=>c==="line"?{from:{x:s,y:i+l},to:{x:s+n,y:i+l/2}}:{x:s,y:i,w:n,h:l},Uv=({canvasWidth:s,canvasHeight:i,width:n,height:l,type:c})=>c==="line"?{from:{x:Math.round(s/Ma),y:Math.round(i/Ma)},to:{x:Math.round(s/Ma+n),y:Math.round(i/Ma+l)}}:{x:Math.round(s/Ma),y:Math.round(i/Ma),w:n,h:l},ah=({width:s,height:i,canvasHeight:n,canvasWidth:l,items:c,type:a})=>{let b={item:"__canvas__",position:{x:0,y:0,w:s,h:i}},w,_=Fv(c),T=Vv(_),x=0,M;for(;x<n;x+=1){for(w=n-1,M=0;M<l;M+=1){b.position.x=M,b.position.y=x;let A=b.position.x+b.position.w-1,D=b.position.y+b.position.h-1;if(A>l||D>n)break;{let E=Bv(T,b);if(E)w=Math.min(w,E.position.y+E.position.h-1),M=E.position.x+E.position.w-1;else return Nv({col:M,row:x,width:s,height:i,type:a})}}x=w}return Uv({canvasWidth:l,canvasHeight:n,width:s,height:i,type:a})},$v=({canvasWidth:s,canvasHeight:i,vizContract:n,config:l,items:c})=>{var a,b,w,_,T,x,M,A;let D=(_=(w=(a=n==null?void 0:n.initialDimension)==null?void 0:a.width)!=null?w:(b=l==null?void 0:l.size)==null?void 0:b.initialWidth)!=null?_:Math.round(s/3),E=(A=(M=(T=n==null?void 0:n.initialDimension)==null?void 0:T.height)!=null?M:(x=l==null?void 0:l.size)==null?void 0:x.initialHeight)!=null?A:Math.round(i/3);return ah({width:D,height:E,canvasHeight:i,canvasWidth:s,items:c,type:"block"})},Wv=({canvasWidth:s,canvasHeight:i,items:n})=>ah({width:150,height:20,canvasHeight:i,canvasWidth:s,items:n,type:"line"}),Hv=({canvasWidth:s,canvasHeight:i,items:n})=>ah({width:Iv,height:zv,canvasHeight:i,canvasWidth:s,items:n,type:"input"}),Gv=(s,i=0)=>s.length>0?Math.max(...s.map(n=>n.position.y+n.position.h),1):i,w3=({itemId:s,type:i="block",canvasWidth:n,canvasHeight:l,vizContract:c,layoutItems:a,config:b})=>i==="line"?{item:s,type:"line",position:Wv({canvasWidth:n,canvasHeight:l,items:a})}:i==="input"?{item:s,type:"input",position:Hv({canvasWidth:n,canvasHeight:l,items:a})}:{item:s,type:i,position:$v({canvasWidth:n,canvasHeight:l,vizContract:c,config:b,items:a})},C3=({itemId:s,layoutItems:i,canvasWidth:n,type:l="block"})=>({item:s,type:l,position:{x:0,y:Gv(i),w:n,h:Av}}),S3=()=>{let s=document.createElement("div");s.setAttribute("style","width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;"),document.body.appendChild(s);let i=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),i},T3=s=>s.type===void 0||s.type==="block"||s.type==="input"});var Jv=Xt((oD,Xv)=>{"use strict";var E3=Object.create,lh=Object.defineProperty,P3=Object.getOwnPropertyDescriptor,O3=Object.getOwnPropertyNames,M3=Object.getPrototypeOf,D3=Object.prototype.hasOwnProperty,Zv=(s,i)=>{for(var n in i)lh(s,n,{get:i[n],enumerable:!0})},sh=(s,i,n,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of O3(i))!D3.call(s,c)&&c!==n&&lh(s,c,{get:()=>i[c],enumerable:!(l=P3(i,c))||l.enumerable});return s},A3=(s,i,n)=>(sh(s,i,"default"),n&&sh(n,i,"default")),I3=(s,i,n)=>(n=s!=null?E3(M3(s)):{},sh(i||!s||!s.__esModule?lh(n,"default",{value:s,enumerable:!0}):n,s)),z3=s=>sh(lh({},"__esModule",{value:!0}),s),Yv={};Zv(Yv,{absoluteLayoutOptions:()=>L3,gridLayoutOptions:()=>R3});Xv.exports=z3(Yv);var Ll={};Zv(Ll,{default:()=>k3});var op=I3(ip());A3(Ll,ip());var k3="default"in op?op.default:op,L3={width:Ll.DEFAULT_CANVAS_WIDTH,height:Ll.DEFAULT_CANVAS_HEIGHT,display:"auto"},R3={width:Ll.DEFAULT_CANVAS_WIDTH,gutterSize:8}});var ib=Xt(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.getEntry=U3;function U3(s){if(typeof document=="undefined")return null;var i=new RegExp("(^|; ?)".concat(s,"=([^;]+)")),n=null;try{var l=document.cookie.match(i);n=l?l[2]:null}catch(c){}return n}});var ch=Xt(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.extractAppName=ob;Kr.versionLabel=Kr.username=Kr.splunkdPath=Kr.serverTimezoneInfo=Kr.rootPath=Kr.portNumber=Kr.locale=Kr.config=Kr.buildPushNumber=Kr.buildNumber=Kr.appBuild=Kr.app=Kr.isAvailable=Kr.CSRFToken=void 0;var up=zr(),$3=ib(),cp=typeof window=="undefined"?self:window;function Mi(s){return(0,up.get)(cp,["$C",s])}var W3=(0,$3.getEntry)("splunkweb_csrf_token_".concat(Mi("MRSPARKLE_PORT_NUMBER")));Kr.CSRFToken=W3;var H3=!!Mi("SPLUNKD_PATH");Kr.isAvailable=H3;function ob(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,up.get)(cp,["document","location","pathname"],""),i=s.match(/\w\w.\w\w\/(app|manager)\/([^/]+)/);return i?i[2]:void 0}var G3=ob();Kr.app=G3;var K3=Mi("APP_BUILD");Kr.appBuild=K3;var Z3=Mi("BUILD_NUMBER");Kr.buildNumber=Z3;var Y3=Mi("BUILD_PUSH_NUMBER");Kr.buildPushNumber=Y3;var X3=(0,up.get)(cp,"$C");Kr.config=X3;var J3=Mi("LOCALE");Kr.locale=J3;var q3=Mi("MRSPARKLE_PORT_NUMBER");Kr.portNumber=q3;var Q3=Mi("MRSPARKLE_ROOT_PATH");Kr.rootPath=Q3;var e4=Mi("SERVER_ZONEINFO");Kr.serverTimezoneInfo=e4;var t4=Mi("SPLUNKD_PATH");Kr.splunkdPath=t4;var r4=Mi("USERNAME");Kr.username=r4;var n4=Mi("VERSION_LABEL");Kr.versionLabel=n4});var hp=Xt(ri=>{"use strict";function hh(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hh=function(n){return typeof n}:hh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hh(s)}Object.defineProperty(ri,"__esModule",{value:!0});ri.withConfig=ub;ri.insertCacheBuster=ri.createURL=ri.createStaticURL=ri.createRESTURL=ri.createDocsURL=ri.createAppDocsURL=void 0;var i4=X2(),o4=a4(ch());function lb(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return lb=function(){return s},s}function a4(s){if(s&&s.__esModule)return s;if(s===null||hh(s)!=="object"&&typeof s!="function")return{default:s};var i=lb();if(i&&i.has(s))return i.get(s);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var a=l?Object.getOwnPropertyDescriptor(s,c):null;a&&(a.get||a.set)?Object.defineProperty(n,c,a):n[c]=s[c]}return n.default=s,i&&i.set(s,n),n}function ab(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function sb(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?ab(Object(n),!0).forEach(function(l){s4(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ab(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}function s4(s,i,n){return i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function ub(s){var i=s.appBuild,n=s.buildNumber,l=s.buildPushNumber,c=s.locale,a=s.rootPath,b=s.splunkdPath;function w(E){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=sb({appBuild:i,buildPushNumber:l,buildNumber:n},$),G=E.match(/(^|\w\w-\w\w\/)static\//);if(!G)return E;var le=G.index+G[0].length-1,K=E.match(/(^|\w\w-\w\w|)static\/app/),F=K?":".concat(Y.appBuild||0):"",Q=Y.buildPushNumber?".".concat(Y.buildPushNumber):"",L="/@".concat(Y.buildNumber).concat(Q).concat(F),k=E.substr(0,le),re=E.substr(le);return"".concat(k).concat(L).concat(re)}function _(E,$){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},G=sb({appBuild:i,buildPushNumber:l,buildNumber:n,rootPath:a,locale:c},Y),le=E||"/",K=$?"?".concat((0,i4.stringify)($)):"";return le.charAt(0)!=="/"&&(le="/".concat(le)),le="".concat(G.rootPath||"","/").concat(G.locale).concat(le).concat(K),w(le,G)}function T(E){for(var $=arguments.length,Y=new Array($>1?$-1:0),G=1;G<$;G++)Y[G-1]=arguments[G];return _.apply(void 0,["static/".concat(E)].concat(Y))}function x(E){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(/^http[s]?:\/\//.test(E))return E;var G=Y.splunkdPath||b||"";if(/^\/.*/.test(E))return/^\/services/.test(E)?"".concat(G).concat(E):E;if(!$.app&&!$.owner)return"".concat(G,"/services/").concat(E);var le;$.sharing?le="nobody":$.owner?le=encodeURIComponent($.owner):le="-";var K;return $.sharing==="system"?K="system":$.app?K=encodeURIComponent($.app):K="-","".concat(G,"/servicesNS/").concat(le,"/").concat(K,"/").concat(E)}function M(E,$){return _("/help",E,$)}function A(E,$){return M({location:E},$)}function D(E,$,Y){var G=$.appName,le=$.appVersion;return M({location:"[".concat(G,":").concat(le,"]").concat(E)},Y)}return{createAppDocsURL:D,createDocsURL:A,createRESTURL:x,createStaticURL:T,createURL:_,insertCacheBuster:w}}var Es=ub(o4),l4=Es.createAppDocsURL,u4=Es.createDocsURL,c4=Es.createRESTURL,h4=Es.createStaticURL,d4=Es.createURL,f4=Es.insertCacheBuster;ri.insertCacheBuster=f4;ri.createURL=d4;ri.createStaticURL=h4;ri.createRESTURL=c4;ri.createDocsURL=u4;ri.createAppDocsURL=l4});var dp=Xt((OD,cb)=>{var p4=e_(),m4=1,g4=4;function y4(s){return p4(s,m4|g4)}cb.exports=y4});var db=Xt((MD,hb)=>{var v4=r_();function b4(s){return typeof s=="function"?s:v4}hb.exports=b4});var pb=Xt((DD,fb)=>{var x4=Q2(),_4=x_(),w4=db(),C4=J2();function S4(s,i){var n=C4(s)?x4:_4;return n(s,w4(i))}fb.exports=S4});var fp=Xt((AD,mb)=>{mb.exports=pb()});var pp=Xt((ID,gb)=>{var T4=yg();function E4(s,i){return s==null?!0:T4(s,i)}gb.exports=E4});var vb=Xt((zD,yb)=>{var P4=yg(),O4=q2(),M4=Array.prototype,D4=M4.splice;function A4(s,i){for(var n=s?i.length:0,l=n-1;n--;){var c=i[n];if(n==l||c!==a){var a=c;O4(c)?D4.call(s,c,1):P4(s,c)}}return s}yb.exports=A4});var mp=Xt((kD,bb)=>{var I4=h_(),z4=vb();function k4(s,i){var n=[];if(!(s&&s.length))return n;var l=-1,c=[],a=s.length;for(i=I4(i,3);++l<a;){var b=s[l];i(b,l,s)&&(n.push(b),c.push(l))}return z4(s,c),n}bb.exports=k4});var yp=Xt(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.gettext=L4;Ps._=R4;Ps.setSharedTranslator=xb;Ps.resetSharedTranslator=_b;var gp;function L4(){return gp.apply(void 0,arguments)}function R4(){return gp.apply(void 0,arguments)}function xb(s){gp=s}function _b(){xb(typeof window!="undefined"&&window.gettext||function(s){return s})}_b()});var bp=br(zr(),1),$4=br(zr(),1);var Ss=br(zr(),1),ap=br(n_(),1),Rl=br(Od(),1),tb=br(vg(),1);var Gu=br(P_(),1),Dg=br(O_(),1),Ag=br(M_(),1);var B_="data/ui/panels",Ig=({id:s,app:i=Gu.app,owner:n=Gu.username})=>{let l=(0,Dg.createRESTURL)(`${B_}/${s}?output_mode=json`,{app:i,owner:n});return xg(l,{customErrors:{404:(0,Ag._)("The panel you selected does not exist.")}})};var rb=br(zg(),1);var Ku=s=>{let i=typeof s=="string"?s.toLowerCase():s;return i===!0||i===1||i==="true"||i==="1"||i==="on"||i==="yes"},Zu=s=>{let i=typeof s=="string"?s.toLowerCase():s;return i===!1||i===0||i==="false"||i==="0"||i==="off"||i==="no"};var Dr=(s,i)=>{var n;return(n=s.childNamed(i))==null?void 0:n.val},xo=({value:s,defaultValue:i=!1})=>Ku(s)?!0:Zu(s)?!1:i;var Yu=br(zr(),1),Hr=(s,i)=>{let n=i?s:!(0,Yu.isEmpty)(s),l=i||s;return n?(0,Yu.isFunction)(l)?l():l:[]};var U_={dashboard:"Global",form:"Global",panel:"Panel","splunk.singlevalue":"Single value","splunk.table":"Table","splunk.events":"Events","viz.error":"Unsupported visualization"},Lg=Xr(Gt({"splunk.area":"Area chart","splunk.bar":"Bar chart","splunk.column":"Column chart","splunk.line":"Line chart","splunk.pie":"Pie chart","splunk.scatter":"Scatter chart","splunk.bubble":"Bubble chart","splunk.fillerGauge":"Filler gauge","splunk.markerGauge":"Marker gauge",cluster:"Cluster map",choropleth:"Choropleth map"},U_),{"splunk.sankey":"Sankey","splunk.parallelcoordinates":"Parallel coordinates","splunk.punchcard":"Punchcard","splunk.singlevalueradial":"Single value radial"}),$_=s=>(s==null?void 0:s.name)==="search",W_=s=>s.attr.base?"ds.chain":s.attr.ref?"ds.savedSearch":"ds.search",H_=s=>{let i={ref:s.attr.ref};return s.attr.app&&(i.app=s.attr.app),Dr(s,"refresh")&&(i.refresh=Dr(s,"refresh")),Dr(s,"refreshType")&&(i.refreshType=Dr(s,"refreshType")),i},G_=s=>{let i={query:Dr(s,"query")},n=Dr(s,"earliest");n&&(i.queryParameters={earliest:n==="$earliest$"?"0":n});let l=Dr(s,"latest");return l&&(i.queryParameters=Xr(Gt({},i.queryParameters),{latest:l==="$latest$"?"":l})),Dr(s,"refresh")&&(i.refresh=Dr(s,"refresh")),Dr(s,"refreshType")&&(i.refreshType=Dr(s,"refreshType")),i},K_=s=>({query:Dr(s,"query"),extend:`ds_${s.attr.base}`}),kg={"ds.chain":K_,"ds.savedSearch":H_,"ds.search":G_},Z_=({node:s})=>{var i,n;let l=W_(s),c=(n=(i=kg[l])==null?void 0:i.call(kg,s))!=null?n:{};return{definition:Gt({type:l,options:c},Hr(s.attr.id,{name:`ds_${s.attr.id}`}))}},Cl=(s,i,{dsIdsWithSearchId:n})=>{let l={};return s.children.filter($_).forEach(c=>{let{definition:a}=Z_({node:c}),{id:b}=c.attr,w=`ds_${b}`,_=w;b&&!i.getDataSource(w)?n.add(_):_=i.nextDataSourceId(),i.addDataSource(_,a);let{type:T}=c.attr;if(T?l[T]=_:l.primary=_,s.name==="event"){let x=i.nextDataSourceId(),M={type:"ds.chain",options:{query:"| fieldsummary maxvals=10",extend:_}};i.addDataSource(x,M),l.fieldsummary=x}}),l},Y_=(s,i)=>{let{attr:{panelTitle:n=""}}=s,l=["form","input"].includes(s.name)?Dr(s,"label"):Dr(s,"title"),c=l||Lg[i];return n?`${n} - ${c}`:c},Xu=(s,i,{dsIdsWithSearchId:n,searchNameToIds:l},c)=>{c in Lg&&Object.values(i).filter(a=>!n.has(a)).forEach(a=>{let b=Y_(s,c);b in l?l[b].push(a):l[b]=[a]})},zd=({searchNameToIds:s},i)=>{Object.entries(s).forEach(([n,l])=>{l.forEach((c,a)=>{i.updateDataSource(c,Xr(Gt({},i.getDataSource(c)),{name:`${n} ${l.length>1?`${a+1} `:""}search`}))})})};var jg=s=>s.name==="fieldset",Rd=s=>s.name==="input",X_=s=>s==="time"?"input.timerange":s==="link"||s==="radio"?"input.dropdown":s==="checkbox"?"input.multiselect":`input.${s}`,J_=s=>Gt(Gt(Gt(Gt({token:s.attr.token},Hr(Dr(s,"default"),{defaultValue:Dr(s,"default")})),Hr(Dr(s,"initialValue"),{placeholder:Dr(s,"initialValue")})),Hr(Dr(s,"prefix"),{prefix:Dr(s,"prefix")})),Hr(Dr(s,"suffix"),{suffix:Dr(s,"suffix")})),q_=s=>{var i,n;let l={token:s.attr.token||"global_time"},c=s.childNamed("default");if(c){let a=(i=Dr(c,"earliest"))!=null?i:"-24h",b=(n=Dr(c,"latest"))!=null?n:"now";l.defaultValue=`${a},${b}`}return l},Fg=s=>{var i,n,l;let c,a=!1,b=Dr(s,"default"),w=(i=Dr(s,"selectFirstChoice"))!=null?i:"",_=s.childrenNamed("choice").map(T=>({value:T.attr.value||T.val,label:T.val||T.attr.value}));if(b){let T=(n=_.find(({value:x})=>x===b))!=null?n:_.find(({label:x})=>x===b);c=(l=T==null?void 0:T.value)!=null?l:b}else xo({value:w})&&(a=!0);return Gt(Gt({items:_},Hr(a,{selectFirstSearchResult:a})),Hr(c,{defaultValue:c}))},Rg=s=>Gt({token:s.attr.token},Fg(s)),kd=s=>Gt(Gt(Gt({token:s.attr.token},Fg(s)),Hr(Dr(s,"prefix"),{prefix:Dr(s,"prefix")})),Hr(Dr(s,"suffix"),{suffix:Dr(s,"suffix")})),Ld={text:J_,link:kd,radio:kd,dropdown:kd,checkbox:Rg,multiselect:Rg,time:q_},Vg=({node:s})=>{var i,n,l;let{type:c}=s.attr,a=c&&c in Ld?c:"text",b=(n=(i=Ld[a])==null?void 0:i.call(Ld,s))!=null?n:{token:s.attr.token};return{definition:{type:X_(a),options:b,title:(l=Dr(s,"label"))!=null?l:s.attr.token}}};var So=br(zr(),1);var nf=br(S_(),1),of=br(zr(),1),oc=br(mg(),1);var ls=br(zr(),1);var Bg=br(zr(),1),Ng=s=>{try{return(0,Bg.isEmpty)(s)?[]:JSON.parse(s)}catch(i){throw new Error(`not able to parse string: '${String(s)}' into array`)}};var Q_=/^\s*\[\s*((("*)(?:0x|0X|#)?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})(\3))+(?:\s*,\s*(("*)(?:0x|0X|#)?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})(\7))+)*\s*)\]\s*$/,Ug="(((?:0x|0X|#)?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})))",pi=(s="")=>{let i=new RegExp(`^${Ug}$`);return i.exec(s)?`#${s.replace(i,"$3")}`:s},ew=s=>{for(let i=0;i<s.length-1;i+=1)if(!(0,ls.isNumber)(s[i])||!(0,ls.isNumber)(s[i+1])||s[i]>s[i+1])return!1;return!0},Sl=s=>{let i=[],n=new RegExp(`\\b${Ug}\\b`,"g"),l=n.exec(s);for(;l!=null;)i.push(l[0]),l=n.exec(s);return i},Ca=s=>s.map(pi),Sa=(s="",i="[0, 30, 70, 100]",n=!0,l=!1,c=!1)=>{let a=[];s&&(Array.isArray(s)?a=Ca(s):Q_.exec(s)?a=Ca(Sl(s)):console.error(`Error: Unable to parse string '${s}'. Skipping conversion for range values and colors`));let b=[];if(Array.isArray(i))b=i;else try{b=Ng(i).map(_=>parseFloat(_))}catch(_){return[]}if(!xo({value:n})||(0,ls.isEmpty)(a)||!ew(b))return[];let w=[...b.map((_,T)=>{let x=l?T-1:T;return c&&(x=x%a.length),Gt(Gt({},Hr(T>0,{from:b[T-1]})),Hr(!l||T>0,{to:b[T],value:a[x]||"#3C444D"}))})].filter(_=>!(0,ls.isEmpty)(_));if(!l){let _=b.length;c&&(_=_%a.length),w.push({from:b[b.length-1],value:a[_]||"#3C444D"})}return w},jd=s=>{let i=s.childWithAttribute("name","charting.gaugeColors"),n=s.childWithAttribute("name","charting.chart.rangeValues");return i&&n?Sa(i.val,n.val,!0,!0):null};var rc=br(zr(),1);var ec=br(Vd(),1),$o=br(Md(),1);var An=class{constructor(i,n){this.type=i,this.logArgs=n,Ur(this,"convertedId"),Ur(this,"dismissed"),Ur(this,"vizType")}serialize(){return Gt(Gt({type:this.type,convertedId:this.convertedId,vizType:this.vizType},Hr(this.dismissed,{dismissed:this.dismissed})),this.logArgs)}},Bd=s=>s.map(i=>i.serialize()),Nd=s=>s.map(i=>i.toMessage());var Xg=class extends An{constructor(s){super(Xg.WARNING_TYPE,s)}toMessage(){return{message:(0,$o._)("Dashboard Studio only supports color formatting for columns with explicitly specified fields."),line:this.logArgs.line}}},Ud=Xg;Ur(Ud,"WARNING_TYPE","fieldsRequiredForColumnColorFormatting");var Jg=class extends An{constructor(s){super(Jg.WARNING_TYPE,s)}toMessage(){return{message:(0,$o._)('Dashboard Studio does not support formatting tables using a color palette of type "expression".'),line:this.logArgs.line}}},$d=Jg;Ur($d,"WARNING_TYPE","expressionColorPaletteNotSupported");var qg=class extends An{constructor(s){super(qg.WARNING_TYPE,s),this.logArgs=s}toMessage(){return{message:(0,ec.sprintf)((0,$o._)('Dashboard Studio does not support table format scales of type "%(scaleType)s".'),{scaleType:this.logArgs.scaleType}),line:this.logArgs.line}}},Wd=qg;Ur(Wd,"WARNING_TYPE","scaleTypeNotSupported");var Qg=class extends An{constructor(s){super(Qg.WARNING_TYPE,s),this.logArgs=s}toMessage(){return{message:(0,$o._)('Dashboard Studio only supports the "number" segment type for minMidMax color formatting in table columns.'),line:this.logArgs.line}}},Hd=Qg;Ur(Hd,"WARNING_TYPE","scaleTypeNotSupported");var e0=class extends An{constructor(s){super(e0.WARNING_TYPE,s),this.logArgs=s}toMessage(){return{message:(0,ec.sprintf)((0,$o._)('Dashboard Studio does not support table sparklines of type "%(sparklineType)s".'),{sparklineType:this.logArgs.sparklineType}),line:this.logArgs.line}}},Gd=e0;Ur(Gd,"WARNING_TYPE","sparklineTypeUnsupported");var t0=class extends An{constructor(s){super(t0.WARNING_TYPE,s),this.logArgs=s}toMessage(){return{message:(0,ec.sprintf)((0,$o._)('The option "%(optionName)s" with value "%(optionValue)s" is not supported in Dashboard Studio.'),{optionName:this.logArgs.optionName,optionValue:this.logArgs.optionValue}),line:this.logArgs.line}}},Kd=t0;Ur(Kd,"WARNING_TYPE","unsupportedOptionGeneric");var r0=class extends An{constructor(s){super(r0.WARNING_TYPE,s),this.logArgs=s}toMessage(){return{message:(0,$o._)("Dashboard Studio does not support divergent colors in Choropleth Maps."),line:this.logArgs.line}}},Zd=r0;Ur(Zd,"WARNING_TYPE","divergentColorsNotSupported");var n0=br(Vd(),1),qi=br(Md(),1);var i0={error:(0,qi._)("Dashboard Studio does not support the selected visualization type."),fix:(0,qi._)("To continue, select another visualization such as 'Statistics Table'.")},o0=class extends An{constructor(s){super(o0.ERROR_TYPE,s)}toMessage(){return i0}},Yd=o0;Ur(Yd,"ERROR_TYPE","unsupportedVizType");var a0=class extends An{constructor(s){super(a0.ERROR_TYPE,s)}toMessage(){return i0}},Xd=a0;Ur(Xd,"ERROR_TYPE","nonSplunkSupportedCustomVizType");var s0=class extends An{constructor(s){super(s0.ERROR_TYPE,s)}toMessage(){return{error:(0,qi._)("Dashboard Studio does not support Trellis."),fix:(0,qi._)("To continue, remove Trellis.")}}},Jd=s0;Ur(Jd,"ERROR_TYPE","unsupportedTrellis");var l0=class extends An{constructor(s){super(l0.ERROR_TYPE,s)}toMessage(){return{error:(0,qi._)("Dashboard Studio does not support categorical colors in Choropleth Maps."),fix:(0,qi._)("To continue, remove categorical colors or select another visualization such as 'Statistics Table'.")}}},qd=l0;Ur(qd,"ERROR_TYPE","categoricalColorsNotSupported");var u0=class extends An{constructor(s){super(u0.ERROR_TYPE,s),this.logArgs=s}toMessage(){return{error:(0,n0.sprintf)((0,qi._)('Dashboard panel "%(ref)s" not found.'),{ref:this.logArgs.ref})}}},Qd=u0;Ur(Qd,"ERROR_TYPE","prebuiltPanelNotFound");var c0=class extends An{constructor(s){super(c0.ERROR_TYPE,s),this.logArgs=s}toMessage(){return{error:(0,qi._)("An error occurred while converting a visualization of type ${vizType}.").replace("${vizType}",this.logArgs.vizType)}}},ef=c0;Ur(ef,"ERROR_TYPE","genericVizError");var h0=class extends An{constructor(s){super(h0.ERROR_TYPE,s),this.logArgs=s}toMessage(){return{error:(0,qi._)("Dashboard Studio does not support html panels")}}},tf=h0;Ur(tf,"ERROR_TYPE","unsupportedHtml");var d0={"link.openSearch.viewTarget":!0,"link.openSearch.search":!0,"link.openSearch.searchEarliestTime":!0,"link.openSearch.searchLatestTime":!0,"refresh.display":!0,"refresh.time.visible":!0,"link.visible":!1,"link.openSearch.visible":!1,"link.openPivot.visible":!1,"link.openSearch.text":!1,"link.exportResults.visible":!1,"link.inspectSearch.visible":!1,"link.stopSearch.visible":!1,"refresh.link.visible":!1,"refresh.auto.interval":!1,displayview:!1},_o={"trellis.enabled":!1,"trellis.size":!1,"trellis.splitBy":!1,"trellis.scales.shared":!1},fw=s=>{var i;if(!s||typeof s!="string")return null;let n=s.split(".");return n.length>1?(i=n[1])==null?void 0:i.length:0},tc=s=>Ku(s)?!0:Zu(s)?!1:null,pw={numberPrecision:fw,showTrendIndicator:tc,useThousandSeparators:tc,shouldUseThousandSeparators:tc,showSparkline:tc},mw=(s,i)=>{let n=pw[s];return n?n(i):null};var cs=(s,i="")=>{let n=mw(i,s),l=n===null?s:n;if((l==="null"||l==="true"||l==="false"||!Number.isNaN(Number(l)))&&i!=="chart.overlayFields")try{return JSON.parse(l)}catch(c){return l}else return typeof l=="string"?l.trim():l},on=({node:s,parseFunc:i=null,additionalOptions:n={},xmlToUDFValidOptionsMap:l=null})=>{let c={},a={},b=Gt(Gt({},l),d0);for(let w of s.childrenNamed("option")){let _=w.attr.name;if(!!_){if(l){if(b[_]===void 0)continue;if(b[_]===!1){a[_]={line:w.line,value:w.val};continue}}_ in d0||(typeof i=="function"?c=i(c,w):c[_]=cs(w.val,_))}}return{options:Gt(Gt({},c),n),unsupportedOptions:a}},Wo=s=>Gt({type:"viz.error",options:{}},Hr(!(0,rc.isEmpty)(s),{dataSources:s})),Ei=s=>{let i=[];for(let[n,{value:l,line:c}]of Object.entries(s))i.push(new Kd({optionName:n,optionValue:l,line:c}));return i},Ho=s=>{var i;let n=[],l=Gt({},s),{value:c,line:a}=(i=s["trellis.enabled"])!=null?i:{};if(xo({value:c}))n.push(new Jd({line:a}));else for(let b of Object.keys(_o))delete l[b];return{conversionErrors:n,unsupportedOptions:l}},hs=(s,i)=>{let{optionsSchema:n}=i,l=Gt({},s),c={};return Object.keys(l).forEach(a=>{a in n||(c[a]=l[a],delete l[a])}),{options:l,droppedOptions:c}},Pi=({xmlToUDFKeyMap:s={},xmlToUDFValueMap:i={},prefix:n=""})=>(l,c)=>{let a=c.attr.name,b=n?a.replace(n,""):a,w=s[b]||b,_=(0,rc.get)(i[b],[c.val],c.val);return Xr(Gt({},l),{[w]:cs(_,w)})};var ds=br(zr(),1);var nc=s=>(0,ds.has)(s,"annotation"),ic=s=>{let i,n=(0,ds.get)(s,"annotation.categoryColors");if(n)try{let l=JSON.parse(n),c=(0,ds.mapValues)(l,pi),a=Object.keys(c).map(b=>({match:b,value:c[b]}));i={field:"annotation.annotation_category",format:{type:"matchvalue",defaultValue:"#000000",matches:a}}}catch(l){i="annotation.annotation_color"}else i="annotation.annotation_color";return{annotationX:"annotation._time",annotationLabel:"annotation.annotation_label",annotationColor:i}};var af=Xr(Gt({},_o),{"charting.backgroundColor":!0,"charting.fieldColors":!0,"charting.legend.labels":!0,"charting.legend.labelStyle.overflowMode":!0,"charting.seriesColors":!0,height:!0,"charting.fieldDashStyles":!1,"charting.data.count":!1,"charting.data.fieldListMode":!1,"charting.data.fieldShowList":!1,"charting.data.fieldHideList":!1,"charting.drilldown":!1,"charting.fontColor":!1,"charting.foregroundColor":!1}),f0=Xr(Gt({},af),{"charting.axisLabelsX.axisVisibility":!0,"charting.axisLabelsY.axisVisibility":!0,"charting.axisLabelsX.extendsAxisRange":!0,"charting.axisLabelsY.extendsAxisRange":!0,"charting.axisLabelsX.integerUnits":!0,"charting.axisLabelsX.majorLabelStyle.rotation":!0,"charting.axisLabelsX.majorLabelVisibility":!0,"charting.axisLabelsY.majorLabelVisibility":!0,"charting.axisLabelsX.majorTickSize":!0,"charting.axisLabelsY.majorTickSize":!0,"charting.axisLabelsX.minorTickSize":!0,"charting.axisLabelsY.minorTickSize":!0,"charting.axisLabelsX.majorTickVisibility":!0,"charting.axisLabelsY.majorTickVisibility":!0,"charting.axisLabelsX.majorUnit":!0,"charting.axisLabelsY.majorUnit":!0,"charting.axisLabelsX.minorTickVisibility":!0,"charting.axisLabelsY.minorTickVisibility":!0,"charting.axisX.abbreviation":!0,"charting.axisY.abbreviation":!0,"charting.axisX.includeZero":!0,"charting.axisY.includeZero":!0,"charting.axisX.maximumNumber":!0,"charting.axisY.maximumNumber":!0,"charting.axisX.minimumNumber":!0,"charting.axisY.minimumNumber":!0,"charting.axisX.scale":!0,"charting.axisY.scale":!0,"charting.axisTitleX.text":!0,"charting.axisTitleY.text":!0,"charting.axisTitleX.visibility":!0,"charting.axisTitleY.visibility":!0,"charting.chart.resultTruncationLimit":!0,"charting.gridLinesY.showMajorLines":!0,"charting.gridLinesX.showMinorLines":!0,"charting.gridLinesY.showMinorLines":!0,"charting.layout.splitSeries":!0,"charting.legend.placement":!0,"charting.axisLabelsX.majorLabelStyle.overFlowMode":!1}),ac=Xr(Gt({},f0),{"charting.axisLabelsY2.axisVisibility":!0,"charting.axisLabelsY2.majorLabelVisibility":!0,"charting.axisLabelsY2.majorTickVisibility":!0,"charting.axisLabelsY2.majorTickSize":!0,"charting.axisLabelsY2.majorUnit":!0,"charting.axisLabelsY2.minorTickSize":!0,"charting.axisLabelsY2.minorTickVisibility":!0,"charting.axisTitleY2.text":!0,"charting.axisTitleY2.visibility":!0,"charting.axisY2.abbreviation":!0,"charting.gridLinesX.showMajorLines":!0,"charting.gridLinesY2.showMajorLines":!0,"charting.gridLinesY2.showMinorLines":!0,"charting.layout.splitSeries.allowIndependentYRanges":!0}),sc="charting.",Ea=Pi({prefix:sc}),gw=Xr(Gt({},ac),{"charting.annotation.categoryColors":!0,"charting.areaFillOpacity":!0,"charting.axisLabelsY2.integerUnits":!0,"charting.axisY2.enabled":!0,"charting.axisY2.fields":!0,"charting.axisY2.includeZero":!0,"charting.axisY2.maximumNumber":!0,"charting.axisY2.minimumNumber":!0,"charting.axisY2.scale":!0,"charting.chart.overlayFields":!0,"charting.chart.showDataLabels":!0,"charting.chart.nullValueMode":!0,"charting.chart.showLines":!0,"charting.chart.stackMode":!0,"charting.legend.mode":!0,"charting.axisLabelsX.integerUnits":!1}),yw=(s,i)=>{let{options:n,unsupportedOptions:l}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:gw}),c={};return nc(i)&&(c=ic(n)),{options:n,unsupportedOptions:l,encoding:Gt({},c)}},vw=(0,nf.default)(Xr(Gt({},ac),{"charting.axisLabelsY2.integerUnits":!0,"charting.chart.barSpacing":!0,"charting.chart.seriesSpacing":!0,"charting.chart.showDataLabels":!0,"charting.chart.stackMode":!0,"charting.axisLabelsY.integerUnits":!1,"charting.axisLabelsX.integerUnits":!1}),["charting.axisLabelsX.majorLabelStyle.overFlowMode","charting.axisLabelsX.majorLabelStyle.rotation"]),bw=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:vw});return{options:i,unsupportedOptions:n,strippedPrefix:sc}},xw=Xr(Gt({},ac),{"charting.annotation.categoryColors":!0,"charting.axisLabelsY2.integerUnits":!0,"charting.axisY2.enabled":!0,"charting.axisY2.fields":!0,"charting.axisY2.includeZero":!0,"charting.axisY2.maximumNumber":!0,"charting.axisY2.minimumNumber":!0,"charting.axisY2.scale":!0,"charting.chart.columnSpacing":!0,"charting.chart.overlayFields":!0,"charting.chart.seriesSpacing":!0,"charting.chart.showDataLabels":!0,"charting.chart.stackMode":!0,"charting.axisLabelsX.integerUnits":!1}),_w=(s,i)=>{let{options:n,unsupportedOptions:l}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:xw}),c={};return nc(i)&&(c=ic(n)),{options:n,unsupportedOptions:l,encoding:Gt({},c)}},ww=Xr(Gt({},ac),{"charting.fieldDashStyles":!0,"charting.annotation.categoryColors":!0,"charting.axisLabelsY2.integerUnits":!0,"charting.axisY2.enabled":!0,"charting.axisY2.fields":!0,"charting.axisY2.includeZero":!0,"charting.axisY2.maxiumNumber":!0,"charting.axisY2.minimumNumber":!0,"charting.axisY2.scale":!0,"charting.chart.nullValueMode":!0,"charting.chart.overlayFields":!0,"charting.chart.showDataLabels":!0,"charting.chart.showMarkers":!0,"charting.chart.stackMode":!0,"charting.legend.mode":!0,"charting.lineDashStyle":!0,"charting.lineWidth":!0,"charting.axisLabelsY.integerUnits":!1,"charting.axisLabelsX.integerUnits":!1}),Cw=(s,i)=>{let{options:n,unsupportedOptions:l}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:ww}),c={};return nc(i)&&(c=ic(n)),{options:n,unsupportedOptions:l,encoding:Gt({},c)}},p0=(0,nf.default)(f0,["charting.data.fieldListMode","charting.data.fieldShowList","charting.data.fieldHideList","charting.legend.labels"]),Sw=Xr(Gt({},p0),{"charting.chart.bubbleMaximumSize":!0,"charting.chart.bubbleMinimumSize":!0,"charting.chart.bubbleSizeBy":!0}),Tw=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:Sw});return{options:i,unsupportedOptions:n,encoding:{x:"primary[1]",y:"primary[2]",size:"primary[3]",category:"primary[0]"},strippedPrefix:sc}},Ew=Xr(Gt({},p0),{"charting.chart.markerSize":!0}),Pw=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:Ew});return{options:i,unsupportedOptions:n,encoding:{x:"primary[1]",y:"primary[2]",category:"primary[0]"}}},Ow=Xr(Gt({},af),{"charting.chart.sliceCollapsingLabel":!0,"charting.chart.sliceCollapsingThreshold":!0,"charting.chart.showLabels":!0,"charting.chart.showPercent":!0}),Mw=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:Ea,xmlToUDFValidOptionsMap:Ow});return{options:i,unsupportedOptions:n,strippedPrefix:sc}},m0=Xr(Gt({},af),{"charting.chart.majorUnit":!0,"charting.chart.orientation":!0,"charting.chart.rangeValues":!0,"charting.chart.showLabels":!0,"charting.chart.showValue":!0,"charting.chart.usePercentageRange":!0,"charting.chart.usePercentageValue":!0,"charting.gaugeColors":!0,"charting.chart.showMajorTicks":!1,"charting.chart.showMinorTicks":!1,"charting.chart.style":!1,"charting.seriesColors":!1,"charting.fieldColors":!1,"charting.legend.labels":!1,"charting.legend.labelStyle.overflowMode":!1}),Dw={orientation:{x:"horizontal",y:"vertical"}},Aw="charting.chart.",g0=Pi({xmlToUDFValueMap:Dw,prefix:Aw}),Iw=Gt({},m0),zw=s=>{let i=jd(s),n=(0,of.isEmpty)(i)?{}:{ranges:i},{options:l,unsupportedOptions:c}=on({node:s,parseFunc:g0,additionalOptions:n,xmlToUDFValidOptionsMap:Iw});return{options:l,unsupportedOptions:c}},kw=Xr(Gt({},m0),{"charting.chart.showRangeBand":!1}),Lw=s=>{let i=jd(s),n=(0,of.isEmpty)(i)?{}:{ranges:i},{options:l,unsupportedOptions:c}=on({node:s,parseFunc:g0,additionalOptions:n,xmlToUDFValidOptionsMap:kw});return{options:l,unsupportedOptions:c}},rf={area:yw,bar:bw,bubble:Tw,column:_w,fillergauge:zw,line:Cw,markergauge:Lw,pie:Mw,scatter:Pw},Rw=new Set(["area","bar","bubble","column","fillergauge","line","markergauge","pie","radialgauge","scatter"]),sf=s=>{var i;let n=(i=s.childWithAttribute("name","charting.chart"))==null?void 0:i.val.toLowerCase().trim();return n&&Rw.has(n)?n:"column"},y0=(s,i)=>{var n;let l=sf(s);if(!(l in rf))return Wo();let{options:c,unsupportedOptions:a,encoding:b={}}=(n=rf[l])==null?void 0:n.call(rf,s,i),{conversionErrors:w,unsupportedOptions:_}=Ho(a),T=`viz.${l}`,x=`splunk.${l}`,M=Ei(_),A={type:T,options:c,encoding:b};return(0,oc.canMigrate)({fromType:A.type,toType:x})&&(A=(0,oc.migrate)({definition:A,toType:x}),A.options||(A.options={})),{type:x,options:A.options,context:A.context,conversionErrors:w,warnings:M}};var z1=br(D1(),1);var jS="#ffffff",FS="#db5800",A1=s=>{var i;let n=(i=s["mapping.choroplethLayer.maximumColor"])!=null?i:FS;return[jS,n]};var Xc=["#7b56db","#cb2196","#008c80","#9d6300","#f6540b","#ff969e","#99b100","#f4b649","#ae8cff","#8cbcff","#813193","#0051b5","#009ceb","#00cdaf","#00490a","#dd9900","#465d00","#ff677b","#ff6ace","#00689d"];var k1="raster",VS={"mapping.map.center":"center","mapping.map.zoom":"zoom","mapping.tileLayer.url":"baseLayerTileServer"},I1={"mapping.seriesColors":s=>Ca(Sl(s)),"mapping.map.center":s=>JSON.parse(s.replace("(","[").replace(")","]")),"mapping.choroplethLayer.maximumColor":s=>pi(s)},L1=(s,i)=>{var n;let l=i.attr.name,c=Gt({},s);try{let a=(n=VS[l])!=null?n:l,b=I1[l]?I1[l](i.val):i.val;typeof b=="string"?c[a]=cs(b,a):c[a]=b}catch(a){}return c},R1={height:!0,drilldown:!0,"mapping.type":!0,"mapping.map.center":!0,"mapping.map.zoom":!0,"mapping.tileLayer.url":!0,"mapping.legend.placement":!1,"mapping.map.scrollZoom":!1,"mapping.map.panning":!1,"mapping.map.fitBounds":!1,"mapping.showTiles":!1,"mapping.tileLayer.tileOpacity":!1,"mapping.tileLayer.subdomains":!1,"mapping.tileLayer.minZoom":!1,"mapping.tileLayer.maxZoom":!1,"mapping.tileLayer.invertY":!1,"mapping.tileLayer.attribution":!1},BS=Xr(Gt(Gt({},R1),_o),{"mapping.choroplethLayer.maximumColor":!0,"mapping.choroplethLayer.colorMode":!0,"mapping.choroplethLayer.colorBins":!1,"mapping.choroplethLayer.minimumColor":!1,"mapping.choroplethLayer.neutralPoint":!1,"mapping.choroplethLayer.shapeOpacity":!1,"mapping.choroplethLayer.showBorder":!1,"mapping.fieldColors":!1,"mapping.seriesColors":!1}),NS=(s,i)=>{let l={dataColorsGradientConfig:{colors:A1(i)}};return{options:Xr(Gt({},i),{layers:[{type:"choropleth",dataColors:"> areaValues | gradient(dataColorsGradientConfig)"}]}),context:l}},US=s=>{var i;let{options:n,unsupportedOptions:l}=on({node:s,parseFunc:L1,xmlToUDFValidOptionsMap:BS});n.baseLayerTileServer&&(n.baseLayerTileServerType=k1);let{options:c,context:a}=NS(s,n),{conversionErrors:b,unsupportedOptions:w}=Ho(l),_=[];if("mapping.choroplethLayer.colorMode"in n){let T=n["mapping.choroplethLayer.colorMode"],x=(i=s.childWithAttribute("name","mapping.choroplethLayer.colorMode"))==null?void 0:i.line;T==="categorical"?b.push(new qd({line:x})):T==="divergent"&&_.push(new Zd({line:x}))}return{options:c,context:a,unsupportedOptions:w,conversionErrors:b,warnings:_}},$S=Xr(Gt({},R1),{"mapping.seriesColors":!0,"mapping.fieldColors":!1,"mapping.markerLayer.markerOpacity":!1,"mapping.markerLayer.markerMinSize":!1,"mapping.markerLayer.markerMaxSize":!1,"mapping.data.maxClusters":!1}),WS=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:L1,xmlToUDFValidOptionsMap:$S});i.baseLayerTileServer&&(i.baseLayerTileServerType=k1);let l=i["mapping.seriesColors"],c=Array.isArray(l)&&l.length>0?l:Xc;return{options:Xr(Gt({},i),{layers:[{type:"bubble",latitude:"> primary | seriesByName('latitude')",longitude:"> primary | seriesByName('longitude')",bubbleSize:"> primary | frameWithoutSeriesNames('_geo_bounds_east', '_geo_bounds_west', '_geo_bounds_north', '_geo_bounds_south', 'latitude', 'longitude') | frameBySeriesTypes('number')",seriesColors:c}]}),unsupportedOptions:n}},HS={choropleth:US,cluster:WS},If=s=>{var i;return((i=s.childrenNamed("option").find(c=>c.attr.name==="mapping.type"))==null?void 0:i.val.toLowerCase().trim())==="choropleth"?"choropleth":"cluster"},j1=s=>{let i=If(s),{options:n,unsupportedOptions:l,context:c={},warnings:a=[],conversionErrors:b=[]}=HS[i](s);a.push(...Ei(l));let{options:w}=hs(n,z1.config);return{type:"splunk.map",options:w,context:c,conversionErrors:b,warnings:a}};var Z1=br(zr(),1),Y1=br(K1(),1);var qS=Gt({colorBy:!0,colorMode:!0,drilldown:!0,field:!0,height:!0,numberPrecision:!0,rangeColors:!0,rangeValues:!0,showSparkline:!0,showTrendIndicator:!0,trendColorInterpretation:!0,trendDisplayMode:!0,underLabel:!0,unit:!0,unitPosition:!0,useColors:!0,useThousandSeparators:!0,additionalClass:!1,afterLabel:!1,beforeLabel:!1,classField:!1,linkFields:!1,linkSearch:!1,linkView:!1,trendInterval:!1},_o),QS={showSparkline:"sparklineDisplay",sparklinePosition:"sparklineDisplay",showTrendIndicator:"trendDisplay",trendDisplayMode:"trendDisplay",useThousandSeparators:"shouldUseThousandSeparators"},eT={showSparkline:{0:"off",false:"off",off:"off",no:"off",1:"below",true:"below",on:"below",yes:"below"},showTrendIndicator:{0:"off",false:"off",off:"off",no:"off",1:"absolute",true:"absolute",on:"absolute",yes:"absolute"}},tT=s=>[{to:0,value:s?"#1C6B2D":"#9E2520"},{from:0,value:s?"#9E2520":"#1C6B2D"}],rT=Pi({xmlToUDFKeyMap:QS,xmlToUDFValueMap:eT}),nT=s=>{let{options:i,unsupportedOptions:n}=on({node:s,parseFunc:rT,xmlToUDFValidOptionsMap:qS});i.field&&(i.sparklineValues=`> primary | seriesByName('${i.field}')`,i.majorValue="> sparklineValues | lastPoint()",i.trendValue="> sparklineValues | delta(-2)");let{conversionErrors:l,unsupportedOptions:c}=Ho(n),a=Ei(c);return{options:i,conversionErrors:l,warnings:a}},iT=s=>{let i=Gt({},s),n=s.colorBy==="trend"?"trendValue":"majorValue",l=s.trendColorInterpretation==="inverse",c=n==="trendValue"?tT(l):Sa(s.rangeColors,s.rangeValues,s.useColors).reverse();if((0,Z1.isEmpty)(c))return{options:i,context:{}};let a={convertedColorRange:[...c]},b=`> ${n} | rangeValue(convertedColorRange)`;return s.colorMode==="block"?i.backgroundColor=b:n==="trendValue"?i.trendColor=b:i.majorColor=b,{options:i,context:a}},X1=s=>{let{options:i,conversionErrors:n,warnings:l}=nT(s),{options:c,context:a}=iT(i),{options:b}=hs(c,Y1.config);return{type:"splunk.singlevalue",options:b,context:a,conversionErrors:n,warnings:l}};var oT={count:!1,"list.drilldown":!1,"list.wrap":!1,maxLines:!1,"raw.drilldown":!1,rowNumbers:!1,showPager:!1,"table.sortColumn":!1,"table.sortDirection":!1,"table.drilldown":!1,"table.wrap":!1,type:!1,drilldown:!1,entityName:!1,segmentation:!1,softWrap:!1},J1=s=>{let{options:i,unsupportedOptions:n}=on({node:s,xmlToUDFValidOptionsMap:oT});return{type:"splunk.events",options:i,warnings:Ei(n)}};var Xo=br(zr(),1);var aT=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,sT=/^["']|["|']$/g,Bf=s=>{try{if(s[0]==="["&&s.slice(-1)==="]")return JSON.parse(s);{let i=s.match(aT);if(i)return i.map(n=>n.replace(sT,""))}}catch(i){return}},Jc=({field:s,fields:i})=>{if(i){let n=Bf(i);if(n)return n}if(s)return[s]};function qc(s,i,n){s.prototype=i.prototype=n,n.constructor=s}function Nf(s,i){var n=Object.create(s.prototype);for(var l in i)n[l]=i[l];return n}function Il(){}var Dl=.7,eh=1/Dl,bs="\\s*([+-]?\\d+)\\s*",Al="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",eo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lT=/^#([0-9a-f]{3,8})$/,uT=new RegExp("^rgb\\("+[bs,bs,bs]+"\\)$"),cT=new RegExp("^rgb\\("+[eo,eo,eo]+"\\)$"),hT=new RegExp("^rgba\\("+[bs,bs,bs,Al]+"\\)$"),dT=new RegExp("^rgba\\("+[eo,eo,eo,Al]+"\\)$"),fT=new RegExp("^hsl\\("+[Al,eo,eo]+"\\)$"),pT=new RegExp("^hsla\\("+[Al,eo,eo,Al]+"\\)$"),q1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qc(Il,to,{copy:function(s){return Object.assign(new this.constructor,this,s)},displayable:function(){return this.rgb().displayable()},hex:Q1,formatHex:Q1,formatHsl:mT,formatRgb:ev,toString:ev});function Q1(){return this.rgb().formatHex()}function mT(){return ov(this).formatHsl()}function ev(){return this.rgb().formatRgb()}function to(s){var i,n;return s=(s+"").trim().toLowerCase(),(i=lT.exec(s))?(n=i[1].length,i=parseInt(i[1],16),n===6?tv(i):n===3?new yi(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):n===8?Qc(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):n===4?Qc(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=uT.exec(s))?new yi(i[1],i[2],i[3],1):(i=cT.exec(s))?new yi(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=hT.exec(s))?Qc(i[1],i[2],i[3],i[4]):(i=dT.exec(s))?Qc(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=fT.exec(s))?iv(i[1],i[2]/100,i[3]/100,1):(i=pT.exec(s))?iv(i[1],i[2]/100,i[3]/100,i[4]):q1.hasOwnProperty(s)?tv(q1[s]):s==="transparent"?new yi(NaN,NaN,NaN,0):null}function tv(s){return new yi(s>>16&255,s>>8&255,s&255,1)}function Qc(s,i,n,l){return l<=0&&(s=i=n=NaN),new yi(s,i,n,l)}function gT(s){return s instanceof Il||(s=to(s)),s?(s=s.rgb(),new yi(s.r,s.g,s.b,s.opacity)):new yi}function xs(s,i,n,l){return arguments.length===1?gT(s):new yi(s,i,n,l==null?1:l)}function yi(s,i,n,l){this.r=+s,this.g=+i,this.b=+n,this.opacity=+l}qc(yi,xs,Nf(Il,{brighter:function(s){return s=s==null?eh:Math.pow(eh,s),new yi(this.r*s,this.g*s,this.b*s,this.opacity)},darker:function(s){return s=s==null?Dl:Math.pow(Dl,s),new yi(this.r*s,this.g*s,this.b*s,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rv,formatHex:rv,formatRgb:nv,toString:nv}));function rv(){return"#"+Uf(this.r)+Uf(this.g)+Uf(this.b)}function nv(){var s=this.opacity;return s=isNaN(s)?1:Math.max(0,Math.min(1,s)),(s===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(s===1?")":", "+s+")")}function Uf(s){return s=Math.max(0,Math.min(255,Math.round(s)||0)),(s<16?"0":"")+s.toString(16)}function iv(s,i,n,l){return l<=0?s=i=n=NaN:n<=0||n>=1?s=i=NaN:i<=0&&(s=NaN),new Qi(s,i,n,l)}function ov(s){if(s instanceof Qi)return new Qi(s.h,s.s,s.l,s.opacity);if(s instanceof Il||(s=to(s)),!s)return new Qi;if(s instanceof Qi)return s;s=s.rgb();var i=s.r/255,n=s.g/255,l=s.b/255,c=Math.min(i,n,l),a=Math.max(i,n,l),b=NaN,w=a-c,_=(a+c)/2;return w?(i===a?b=(n-l)/w+(n<l)*6:n===a?b=(l-i)/w+2:b=(i-n)/w+4,w/=_<.5?a+c:2-a-c,b*=60):w=_>0&&_<1?0:b,new Qi(b,w,_,s.opacity)}function av(s,i,n,l){return arguments.length===1?ov(s):new Qi(s,i,n,l==null?1:l)}function Qi(s,i,n,l){this.h=+s,this.s=+i,this.l=+n,this.opacity=+l}qc(Qi,av,Nf(Il,{brighter:function(s){return s=s==null?eh:Math.pow(eh,s),new Qi(this.h,this.s,this.l*s,this.opacity)},darker:function(s){return s=s==null?Dl:Math.pow(Dl,s),new Qi(this.h,this.s,this.l*s,this.opacity)},rgb:function(){var s=this.h%360+(this.h<0)*360,i=isNaN(s)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*i,c=2*n-l;return new yi($f(s>=240?s-240:s+120,c,l),$f(s,c,l),$f(s<120?s+240:s-120,c,l),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var s=this.opacity;return s=isNaN(s)?1:Math.max(0,Math.min(1,s)),(s===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(s===1?")":", "+s+")")}}));function $f(s,i,n){return(s<60?i+(n-i)*s/60:s<180?n:s<240?i+(n-i)*(240-s)/60:i)*255}function Wf(s,i,n,l,c){var a=s*s,b=a*s;return((1-3*s+3*a-b)*i+(4-6*a+3*b)*n+(1+3*s+3*a-3*b)*l+b*c)/6}function sv(s){var i=s.length-1;return function(n){var l=n<=0?n=0:n>=1?(n=1,i-1):Math.floor(n*i),c=s[l],a=s[l+1],b=l>0?s[l-1]:2*c-a,w=l<i-1?s[l+2]:2*a-c;return Wf((n-l/i)*i,b,c,a,w)}}function lv(s){var i=s.length;return function(n){var l=Math.floor(((n%=1)<0?++n:n)*i),c=s[(l+i-1)%i],a=s[l%i],b=s[(l+1)%i],w=s[(l+2)%i];return Wf((n-l/i)*i,c,a,b,w)}}var Hf=s=>()=>s;function yT(s,i){return function(n){return s+n*i}}function vT(s,i,n){return s=Math.pow(s,n),i=Math.pow(i,n)-s,n=1/n,function(l){return Math.pow(s+l*i,n)}}function uv(s){return(s=+s)==1?th:function(i,n){return n-i?vT(i,n,s):Hf(isNaN(i)?n:i)}}function th(s,i){var n=i-s;return n?yT(s,n):Hf(isNaN(s)?i:s)}var _s=function s(i){var n=uv(i);function l(c,a){var b=n((c=xs(c)).r,(a=xs(a)).r),w=n(c.g,a.g),_=n(c.b,a.b),T=th(c.opacity,a.opacity);return function(x){return c.r=b(x),c.g=w(x),c.b=_(x),c.opacity=T(x),c+""}}return l.gamma=s,l}(1);function cv(s){return function(i){var n=i.length,l=new Array(n),c=new Array(n),a=new Array(n),b,w;for(b=0;b<n;++b)w=xs(i[b]),l[b]=w.r||0,c[b]=w.g||0,a[b]=w.b||0;return l=s(l),c=s(c),a=s(a),w.opacity=1,function(_){return w.r=l(_),w.g=c(_),w.b=a(_),w+""}}}var bT=cv(sv),xT=cv(lv);var _T=/\\([.\n\r]?)/g,hv=s=>{s=s.trim();let i=s.length;return i<2||s.charAt(0)!=='"'||s.charAt(i-1)!=='"'||(s=s.substring(1,i-1),!s)||(s=s.replace(_T,"$1")),s},dv=(s,i,n)=>{let l="",c=i,a=s.length,b,w=!1,_=0,T,x;for(;c<a;){if(b=s.charAt(c),w)b==='"'?w=!1:b==="\\"&&(l+=b,c++,b=s.charAt(c));else if(_>0)b===x?_--:b===T?_++:b==='"'&&(w=!0);else if(b!==n)b==="["?(_=1,T="[",x="]"):b==="{"?(_=1,T="{",x="}"):b==="("?(_=1,T="(",x=")"):b==='"'&&(w=!0);else break;l+=b,c++}return l},fv=s=>{if(!s)return null;s=s.trim();let i=s.length;if(i<2||s.charAt(0)!=="{"||s.charAt(i-1)!=="}")return null;s=s.substring(1,i-1),i=s.length;let n={},l=0,c,a;for(;l<i&&(c=dv(s,l,":"),l+=c.length+1,!(l>i));)a=dv(s,l,","),l+=a.length+1,c=hv(c),c&&(n[c]=hv(a));return n};var Gf=s=>s!==null&&s!==""&&!Array.isArray(s)&&!Number.isNaN(Number(s)),pv=s=>s.filter(Gf).map(i=>Number(i));var wT="ColorConfig",CT="#00CC00",ST="#CC0000",zl=({targetFields:s,dslFormatter:i,formatConfig:n})=>Kf({targetFields:s,formatConfig:n,dslFormatter:i,optionName:"rowBackgroundColors",suffix:wT}),TT=({targetFields:s,colors:i})=>(i.length<2&&(i=[i[0],i[0]]),zl({targetFields:s,dslFormatter:"gradient",formatConfig:{colors:i}})),ET=({targetFields:s,colors:i,scaleNode:n})=>{let l=Bf(n.val);if(l){let c=pv(l);if(c.length>0){let _=Sa(i,c,!0,!1,!0);return zl({targetFields:s,dslFormatter:"rangeValue",formatConfig:_})}}return{}},PT=({targetFields:s,colors:i,scaleNode:n})=>{i.length<2&&(i=[i[0],i[0]]);let l=[],{minType:c,minValue:a,midType:b,midValue:w,maxType:_,maxValue:T}=n.attr,x=[{segmentType:c,segmentValue:a},{segmentType:b,segmentValue:w},{segmentType:_,segmentValue:T}],M=[];if(x.forEach(({segmentType:$,segmentValue:Y})=>{if($&&$!=="number"){l.push(new Hd({line:n.line}));return}Gf(Y)&&M.push(Number(Y))}),M.length>i.length){let $=to(_s(i[0],i[1])(.5)).formatHex();i=[i[0],$,i[1]]}let A=Gt({colors:i},Hr(M.length===i.length,{stops:M})),{options:D,context:E}=zl({targetFields:s,dslFormatter:"gradient",formatConfig:A});return{options:D,context:E,conversionWarnings:l}},OT=({formatNode:s,targetFields:i,colors:n})=>{var l;if(n.length===0)return{context:{},options:{}};let c=s.childNamed("scale"),a=(l=c==null?void 0:c.attr)==null?void 0:l.type,b=[],w,_;switch(a){case"linear":({options:w,context:_}=TT({targetFields:i,colors:n}));break;case"threshold":({options:w,context:_}=ET({targetFields:i,colors:n,scaleNode:c}));break;case"minMidMax":({options:w,context:_,conversionWarnings:b}=PT({targetFields:i,colors:n,scaleNode:c}));break;default:a&&b.push(new Wd({scaleType:a,line:c.line}));break}if(!w){let T=[n[0]];({options:w,context:_}=zl({targetFields:i,dslFormatter:"pick",formatConfig:T}))}return{options:w,context:_,conversionWarnings:b}},mv=({formatNode:s})=>{let i=Jc(s.attr);if(!i){let _=[new Ud({line:s.line})];return{options:{},context:{},conversionWarnings:_}}let n=s.childNamed("colorPalette"),l=[],c=[];if(n){let{type:_}=n.attr;switch(_){case"list":c=Ca(Sl(n.val));break;case"minMidMax":let{minColor:T=CT,midColor:x,maxColor:M=ST}=n.attr,A=[T,x,M].filter(E=>!!E);c=Ca(A);break;case"sharedList":c=Xc;break;case"map":let D=fv(n.val);if(D){let E=[];return Object.keys(D).forEach($=>{E.push({match:$,value:pi(D[$])})}),zl({targetFields:i,dslFormatter:"matchValue",formatConfig:E})}break;case"expression":l.push(new $d({line:n.line}))}}let{options:a,context:b,conversionWarnings:w=[]}=OT({formatNode:s,targetFields:i,colors:c});return{options:a,context:b,conversionWarnings:[...l,...w]}};var MT="NumberConfig",DT="SparklineLineColorConfig",AT="SparklineAreaColorConfig",IT="SparklineTypeConfig",zT=s=>{let i=s;return s.match(/^\d/)&&(i=`_${i}`),`${i.replace(/[^a-zA-Z\d]/g,"_")}`},Zf=(s,i)=>s?`${zT(s)}Column${i}`:`table${i}`,Kf=({targetFields:s,formatConfig:i,dslFormatter:n,optionName:l,suffix:c})=>{let a={},b={};if(s)s.forEach(w=>{let _=Zf(w,c);a[_]=i,(0,Xo.set)(b,`columnFormat.${w}.${l}`,`> table | seriesByName("${w}") | ${n}(${_})`)});else{let w=Zf(void 0,c);a[w]=i,(0,Xo.set)(b,`tableFormat.${l}`,`> table | ${n}(${w})`)}return{context:a,options:b}},kT=({targetFields:s,formatConfig:i})=>Kf({targetFields:s,formatConfig:i,dslFormatter:"formatByType",optionName:"data",suffix:MT}),LT=({formatNode:s})=>{let i=Jc(s.attr),l=Pi({xmlToUDFKeyMap:{useThousandSeparators:"thousandSeparated"}}),c={precision:2,thousandSeparated:!0,unitPosition:"after"},{options:a}=on({node:s,parseFunc:l}),b={number:Gt(Gt({},c),a)};return kT({targetFields:i,formatConfig:b})},RT=({formatNode:s})=>{var i,n;let{field:l}=s.attr,c=[],a={},b={},w=({formatConfig:_,suffix:T,optionName:x})=>{let M=Zf(l,T);b[M]=_,(0,Xo.set)(a,`columnFormat.${l}.${x}`,`> table | seriesByName("${l}") | pick(${M})`)};if(l){let{options:_}=on({node:s}),T="line",{type:x,fillColor:M,lineColor:A}=_;if(x&&x!=="line"){let D=(n=(i=s.childWithAttribute("type",x))==null?void 0:i.line)!=null?n:s.line;c.push(new Gd({sparklineType:x,line:D}))}if(M){T="area";let D=pi(M);w({formatConfig:[D],suffix:AT,optionName:"sparklineAreaColors"})}if(A){let D=pi(A);w({formatConfig:[D],suffix:DT,optionName:"sparklineColors"})}w({formatConfig:[T],suffix:IT,optionName:"sparklineTypes"})}return{options:a,context:b,conversionWarnings:c}},gv=s=>{let i={},n={},l=[];for(let c of s.childrenNamed("format")){let{type:a}=c.attr;switch(a){case"number":let{options:b,context:w}=LT({formatNode:c});n=(0,Xo.merge)(n,b),i=Gt(Gt({},i),w);break;case"sparkline":let{options:_,context:T,conversionWarnings:x}=RT({formatNode:c});n=(0,Xo.merge)(n,_),i=Gt(Gt({},i),T),l.push(...x);break;case"color":let{options:M,context:A,conversionWarnings:D=[]}=mv({formatNode:c});n=(0,Xo.merge)(n,M),i=Gt(Gt({},i),A),l.push(...D);break}}return{options:n,context:i,conversionWarnings:l}};var jT={rowNumbers:"showRowNumbers",overlay:"dataOverlayMode"},FT={showInternalFields:!1},VT={count:!0,rowNumbers:!0,overlay:!0,totalsRow:!1,percentagesRow:!1,showPager:!1,drilldown:!0,fields:!1,wrap:!1,dataOverlayMode:!0},BT=Pi({xmlToUDFKeyMap:jT}),NT=s=>on({node:s,parseFunc:BT,additionalOptions:FT,xmlToUDFValidOptionsMap:VT}),yv=s=>{let{options:i,unsupportedOptions:n}=NT(s),{options:l,context:c,conversionWarnings:a}=gv(s),b=[...a,...Ei(n)];return{type:"splunk.table",options:Gt(Gt({},i),l),context:c,warnings:b}};var Xf=br(zr(),1),rh=br(mg(),1),_v=br(bv(),1);var Yf=({maxValue:s,percentage:i})=>s*i/100;var UT=Gt({"horseshoe_meter_app.horseshoe_meter.backgroundColor":!0,"horseshoe_meter_app.horseshoe_meter.caption":!0,"horseshoe_meter_app.horseshoe_meter.dialColor":!0,"horseshoe_meter_app.horseshoe_meter.maxRangeColor":!0,"horseshoe_meter_app.horseshoe_meter.maxRangeThreshold":!0,"horseshoe_meter_app.horseshoe_meter.maxValue":!0,"horseshoe_meter_app.horseshoe_meter.midRangeColor":!0,"horseshoe_meter_app.horseshoe_meter.midRangeThreshold":!0,"horseshoe_meter_app.horseshoe_meter.minRangeColor":!0,"horseshoe_meter_app.horseshoe_meter.thresholdStyle":!0,"horseshoe_meter_app.horseshoe_meter.useRangemap":!0,"horseshoe_meter_app.horseshoe_meter.valueColor":!0,"horseshoe_meter_app.horseshoe_meter.minValue":!1},_o),$T={backgroundColor:"#fff",underLabel:"> majorValueField",majorColor:"#555",midRangeThreshold:55,midRangeColor:"#fbcd2f",minRangeColor:"#3fc77a",maxRangeThreshold:80,maxRangeColor:"#b44441",maxValue:100,radialBackgroundColor:"#d0d5d9",thresholdStyle:"percentage",useRangemap:!1},WT=s=>{let i={},n=Gt(Gt({},$T),s),{maxValue:l,thresholdStyle:c,minRangeColor:a,midRangeColor:b,maxRangeColor:w,midRangeThreshold:_,maxRangeThreshold:T,useRangemap:x}=n,M=c==="percentage";if(xo({value:x})){let A=M?Yf({maxValue:l,percentage:_}):_,D=M?Yf({maxValue:l,percentage:T}):T;i.majorColorEditorConfig=[{to:A,value:a},{from:A,to:D,value:b},{from:D,value:w}],n.majorColor="> majorValue | rangeValue(majorColorEditorConfig)"}return{options:n,context:i}},HT=s=>{let l=Pi({xmlToUDFKeyMap:{caption:"underLabel",dialColor:"radialBackgroundColor",valueColor:"majorColor"},prefix:"horseshoe_meter_app.horseshoe_meter."}),{options:c,unsupportedOptions:a}=on({node:s,parseFunc:l,xmlToUDFValidOptionsMap:UT}),{conversionErrors:b,unsupportedOptions:w}=Ho(a),_=Ei(w),{options:T,context:x}=WT(c),{options:M}=hs(T,_v.config);return{type:"splunk.singlevalueradial",options:M,warnings:_,context:x,conversionErrors:b}},wv=(s,i)=>{var n;let l=(n=i[`${s}colorMode`])!=null?n:"categorical",c=pi(i[`${s}minColor`]||"#D93F3C"),a=pi(i[`${s}maxColor`]||"#3FC77A");return{colorMode:l,minColor:c,maxColor:a}},GT=s=>{let i="punchcard_app.punchcard.",n={radiusScale:"bubbleRowScale"},l={radiusScale:{local:"row"}},c={x:"primary[0]",y:"primary[1]",size:"primary[2]",category:"primary[3]"},a=Pi({xmlToUDFKeyMap:n,xmlToUDFValueMap:l,prefix:i}),{options:b}=on({node:s,parseFunc:a,additionalOptions:{bubbleColor:"#0877a6",useDefaultSort:!0}}),w={type:"viz.punchcard",options:b,encoding:c};return(0,rh.canMigrate)({fromType:"viz.punchcard",toType:"splunk.punchcard"})?(0,rh.migrate)({definition:w,toType:"splunk.punchcard"}):w},KT=s=>{let i="sankey_diagram_app.sankey_diagram.",n={},l=on({node:s}).options,c={},a=xo({value:l[`${i}useColors`],defaultValue:!0}),{colorMode:b,minColor:w,maxColor:_}=wv(i,l),T=Math.min(Number(l[`${i}numBins`]||6),7);if(a)if(b==="sequential"){let x=_s(w,_),M=[],A=[];for(let D=1;D<=T;D++)A.push(Math.round(D/T*100)),M.push(to(x(D/T)).formatHex());c.colorMode="dynamic",n.linkColorRangeConfig=Sa(M,A)}else c.colorMode="categorical";else c.colorMode="categorical",c.seriesColors=["#1E93C6"];return{type:"splunk.sankey",options:Gt(Gt({},(0,Xf.pickBy)(l,(x,M)=>!M.startsWith(i))),c),context:n}},ZT=s=>{let i="parallel_coordinates_app.parallel_coordinates.",n=on({node:s}).options,l={showNullAxis:!1},{colorMode:c,minColor:a,maxColor:b}=wv(i,n);return c==="sequential"&&(l.lineColor=to(_s(a,b)(.5)).formatHex()),{type:"splunk.parallelcoordinates",options:Gt(Gt({},(0,Xf.pickBy)(n,(w,_)=>!_.startsWith(i))),l)}},xv={"punchcard_app.punchcard":GT,"parallel_coordinates_app.parallel_coordinates":ZT,"sankey_diagram_app.sankey_diagram":KT,"horseshoe_meter_app.horseshoe_meter":HT},YT=new Set(["bullet_graph_app.bullet_graph","calendar_heatmap_app.calendar_heatmap","horizon_chart_app.horizon_chart","horseshoe_meter_app.horseshoe_meter","location_tracker_app.location_tracker","parallel_coordinates_app.parallel_coordinates","punchcard_app.punchcard","sankey_diagram_app.sankey_diagram","status_indicator_app.status_indicator","timeline_app.timeline","treemap_app.treemap"]),nh=s=>{var i,n;return(n=(i=s.attr.type)==null?void 0:i.trim())!=null?n:s.name},Cv=s=>s.name==="viz"&&!YT.has(nh(s)),Sv=s=>{var i,n;let l=nh(s);return(n=(i=xv[l])==null?void 0:i.call(xv,s))!=null?n:Wo()};var ws=br(zr(),1),XT=s=>/^search\?q=.*/.test(s),JT=s=>/^(\/app\/[^/]+\/)?report\?s=.*/.test(s),qT=s=>/^https?:\/\//.test(s),QT=s=>!XT(s)&&!JT(s)&&!qT(s),e3=/^(?:link\.openSearch\.)([A-Za-z]+)$/,t3=/^(viewTarget|search|searchEarliestTime|searchLatestTime)$/,r3=s=>s.attr.name&&e3.exec(s.attr.name),n3=s=>{let[i="",n=""]=s.split("?"),l=(0,ws.trim)(i,"/").split("/"),c=[];if(l.length!==3)return{app:"",dashboard:"",tokens:c};let[,a="",b=""]=l,w=new URLSearchParams(n);for(let[_,T]of w.entries())c.push({token:_,value:T});return{app:a,dashboard:b,tokens:c}},Tv=(s,i)=>{let n=i!=="_self";if(QT(s)){let{app:l,dashboard:c,tokens:a}=n3(s);return{type:"drilldown.linkToDashboard",options:{app:l,dashboard:c,tokens:a,newTab:n}}}return{type:"drilldown.customUrl",options:{url:s,newTab:n}}},i3=s=>{let i=[];return s.forEach(n=>{let{token:l}=n.attr,c;n.val==="$click.name2$"?c="name":n.val==="$click.value2$"?c="value":n.val.startsWith("$row.")&&(c=`${n.val.substring(1,n.val.length-1)}.value`),l&&c&&i.push({token:l,key:c})}),i.length?{type:"drilldown.setToken",options:{tokens:i}}:void 0},o3=s=>{let i=s.childrenNamed("set");if(i.length)return i3(i);let n=s.childNamed("link"),l=(0,ws.get)(n,["attr","target"],"_blank");return n&&Tv(n.val,l)},Ev=s=>{let i=[],n=[],l={},c={val:""},a={val:""},b={val:""};if(s.children.forEach(w=>{var _,T,x;if(w.name==="drilldown"){let M=o3(w);M&&n.push(M)}else if(w.name==="option"){let M=r3(w);M&&t3.test(M[1])&&(l[M[1]]=w.val)}else w.name==="search"&&(c=(_=w.childNamed("earliest"))!=null?_:{val:""},a=(T=w.childNamed("latest"))!=null?T:{val:""},b=(x=w.childNamed("query"))!=null?x:{val:""})}),n.length)return n;if(!(0,ws.isEmpty)(l)){let w=[];w.push(`earliest=${encodeURIComponent(l.searchEarliestTime||(c==null?void 0:c.val))}`),w.push(`latest=${encodeURIComponent(l.searchLatestTime||(a==null?void 0:a.val))}`),w.push(`q=${encodeURIComponent(l.search||(b==null?void 0:b.val))}`);let _=`/app/search/${l.viewTarget||"search"}${w.length?`?${w.join("&")}`:""}`;_&&i.push(Tv(_,"_blank"))}return i};var Pv=250,a3={"punchcard_app.punchcard":!0,"parallel_coordinates_app.parallel_coordinates":!0,"sankey_diagram_app.sankey_diagram":!0,"horseshoe_meter_app.horseshoe_meter":!0},K6=Xr(Gt({},a3),{line:!0,area:!0,column:!0,bar:!0,pie:!0,scatter:!0,bubble:!0,singlevalue:!0,fillerGauge:!0,markerGauge:!0,choropleth:!0,event:!0,statistics:!0}),s3=s=>!!(s.name==="viz"&&s.attr.type),qf=s=>{let{name:i}=s;return["table","single","chart","event","map"].indexOf(i)>=0||s3(s)},Jf={chart:y0,single:X1,map:j1,viz:Sv,table:yv,event:J1},Ov={chart:sf,viz:nh},Qf=(s,{type:i})=>i==="splunk.map"?If(s):i,ep=({node:s,dataSources:i})=>{var n,l,c,a,b,w,_;let T=[],x=[],{name:M,line:A}=s,D=(l=(n=Ov[M])==null?void 0:n.call(Ov,s))!=null?l:M;try{let{options:E={},context:$,encoding:Y,type:G="",warnings:le=[],conversionErrors:K=[]}=Jf[M]?(c=Jf[M])==null?void 0:c.call(Jf,s,i):Wo(),F=(b=(a=s.childWithAttribute("name","height"))==null?void 0:a.val)!=null?b:"",Q=F.length>0?Number(F):Pv;if(delete E.height,G==="viz.error")return Cv(s)?x.push(new Xd({vizType:D,line:A})):x.push(new Yd({vizType:D,line:A})),{definition:Wo(i),warnings:T,conversionErrors:x,meta:{vizHeight:Q},type:G};let L=Dr(s,"title"),k=s.attr.firstVizInPanel==="true"&&s.attr.panelTitle;k&&(L=L?`${k} - ${L}`:k);let re=Dr(s,"description"),de=(w=s.childWithAttribute("name","refresh.time.visible"))==null?void 0:w.val,Ie=(_=s.childWithAttribute("name","refresh.display"))==null?void 0:_.val,et=Ev(s);return{definition:Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt({type:G,options:E},Hr(!(0,So.isEmpty)($),{context:$})),Hr(!(0,So.isEmpty)(Y),{encoding:Y})),Hr(!(0,So.isEmpty)(i),{dataSources:i})),Hr(!(0,So.isEmpty)(et),{eventHandlers:et})),Hr(!(0,So.isEmpty)(L),{title:L})),Hr(!(0,So.isEmpty)(re),{description:re})),Hr(!(0,So.isEmpty)(de),{showLastUpdated:cs(de)})),Hr(!(0,So.isEmpty)(Ie),{showProgressBar:Ie!=="none"})),warnings:[...T,...le],conversionErrors:[...x,...K],meta:{vizHeight:Q}}}catch(E){return console.error(E),x.push(new ef({vizType:D,line:A})),{definition:Wo(),warnings:T,conversionErrors:x,meta:{vizHeight:Pv},type:"viz.error"}}};var l3=br(zr(),1),u3=br(Od(),1),c3=br(vg(),1);var tp=s=>s.name==="panel"&&!!s.attr.ref;var uh=br(w_(),1),qv=br(Jv(),1);var Qv=({panelWidth:s,defaultInputWidth:i})=>Math.min(s,i),j3=({parsedPanels:s,panelWidth:i,defaultInputWidth:n,inputHeight:l})=>{if(!s.length)return 0;let c=0,a=Qv({panelWidth:i,defaultInputWidth:n}),b=Math.floor(i/a);return s.forEach(({inputIds:w})=>{let T=Math.ceil(w.length/b)*l;c=Math.max(T,c)}),c},F3=({xOffset:s,yOffset:i,panelWidth:n,inputIds:l,layoutType:c,defaultInputWidth:a,inputHeight:b})=>{let w=[],_=[],T=0;if(!l.length)return{panelInputsHeight:T,inputStructureItems:w,fillerRectangleDefs:_};let x=s,M=s+n,A=Qv({panelWidth:n,defaultInputWidth:a}),D=l.length-1;return l.forEach((E,$)=>{if(w.push({item:E,type:"input",position:{x:s,y:i,w:A,h:b}}),s+=A,A+s>M||$===D){let Y=M-s;c==="grid"&&Y>0&&_.push({type:"block",position:{x:s,y:i,w:Y,h:b}}),s=x,i+=b,T+=b}}),{panelInputsHeight:T,inputStructureItems:w,fillerRectangleDefs:_}},V3=({vizIds:s,xOffset:i,startingVizYOffset:n,panelWidth:l,panelVizHeight:c,layoutType:a})=>{let b=[],w=[],_=s.length>0?Math.floor(c/s.length):c,T=n,x=s.length-1;return s.forEach((M,A)=>{A===x&&(_=c-_*x),b.push({item:M,type:"block",position:{x:i,y:T,w:l,h:_}}),T+=_}),b.length===0&&a==="grid"&&_>0&&w.push({type:"block",position:{x:i,y:T,w:l,h:_}}),{vizStructureItems:b,fillerRectangleDefs:w}},eb=({parsedPanels:s,maxRowVizHeight:i,yOffset:n,layoutType:l,defaultInputWidth:c=uh.DEFAULT_INPUT_ON_CANVAS_WIDTH,inputHeight:a=uh.DEFAULT_INPUT_ON_CANVAS_HEIGHT,canvasWidth:b=Wu})=>{let w=l==="grid"?qv.gridLayoutOptions.gutterSize+a:a,_=s.length,T=Math.floor(b/(_||1)),M=j3({parsedPanels:s,panelWidth:T,defaultInputWidth:c,inputHeight:w})+i,A=[],D=[],E=0;return s.forEach(($,Y)=>{let{inputIds:G,vizIds:le}=$;E=Y*T;let{panelInputsHeight:K,inputStructureItems:F,fillerRectangleDefs:Q}=F3({xOffset:E,yOffset:n,panelWidth:T,inputIds:G,layoutType:l,defaultInputWidth:c,inputHeight:w}),L=M-K,k=n+K,{vizStructureItems:re,fillerRectangleDefs:de}=V3({vizIds:le,xOffset:E,panelVizHeight:L,startingVizYOffset:k,panelWidth:T,layoutType:l});D=[...D,...Q,...de],A=[...A,...F,...re]}),{structureItems:A,rowHeight:M,fillerRectangleDefs:D}};var Cs=class{constructor({simpleXml:i,layout:n="absolute",sourceApp:l=ap.app}){Ur(this,"definition"),Ur(this,"simpleXml"),Ur(this,"root"),Ur(this,"sourceApp"),Ur(this,"layoutType"),Ur(this,"errors",[]),Ur(this,"conversionWarnings",[]),Ur(this,"conversionErrors",[]),Ur(this,"prebuiltPanelCache",{}),Ur(this,"dsIdMap"),this.definition=new tb.DashboardDefinition((0,Ss.cloneDeep)($u)),this.simpleXml=i,this.layoutType=n,this.sourceApp=l,this.dsIdMap={searchNameToIds:{},dsIdsWithSearchId:new Set}}parseTitleDescription(){this.definition.updateDashboard({title:Dr(this.root,"label"),desc:Dr(this.root,"description")})}parseDashboardDefaults(){if(this.root.attr.refresh||this.root.attr.onunloadCancelJobs){let i={global:{options:Gt(Gt({},this.root.attr.onunloadCancelJobs&&{cancelJobsOnFocusLoss:!0}),this.root.attr.refresh&&{refresh:`${this.root.attr.refresh}s`})}},n=i,l=this.definition.getDefaults();l.dataSources&&(n=(0,Ss.merge)({},l.dataSources,i)),this.definition.definition=Xr(Gt({},this.definition),{defaults:Xr(Gt({},l),{dataSources:n})})}}parseGlobalSearches(){let i=Cl(this.root,this.definition,this.dsIdMap);Xu(this.root,i,this.dsIdMap,this.root.name)}parseInputNode({input:i,isPanelInput:n}){let l=Cl(i,this.definition,this.dsIdMap),{definition:c}=Vg({node:i}),a=i.attr.id&&!this.definition.getInput(i.attr.id)?`input_${i.attr.id}`:this.definition.nextInputId();return this.definition.addInput(a,c),this.definition.connectDataSourceToInput({inputId:a,dataSourceType:"primary",dataSourceId:l.primary}),n||this.definition.addInputToLayout(a),a}parsePanelInput(i){return this.parseInputNode({input:i,isPanelInput:!0})}parseGlobalInput(i){return this.parseInputNode({input:i,isPanelInput:!1})}parseGlobalInputs(){var i;let n=this.root.children.find(jg);n&&(this.definition.updateLayoutOptions({submitButton:((i=n.attr.submitButton)!=null?i:"true")==="true"}),n.children.filter(Rd).forEach(this.parseGlobalInput.bind(this)))}static prebuiltPanelCacheKey(i,n){return`${n}/${i}`}fetchPrebuiltPanels(i){return ss(this,null,function*(){let n=i.flatMap(c=>c.childrenNamed("panel").filter(a=>tp(a))),l=(0,Ss.uniqWith)(n,(c,a)=>{let{ref:b,app:w=this.sourceApp}=c.attr,{ref:_,app:T=this.sourceApp}=a.attr;return b===_&&w===T});yield Promise.allSettled(l.map(this.fetchPrebuiltPanel.bind(this)))})}fetchPrebuiltPanel(i){return ss(this,null,function*(){let n=i.attr.ref,{app:l=this.sourceApp}=i.attr;try{let a=(yield Ig({id:n,app:l})).entry[0].content["eai:data"],b=new Rl.XmlDocument(a),w=Cs.prebuiltPanelCacheKey(n,l);return this.prebuiltPanelCache[w]=b,b}catch(c){return Promise.reject(c)}})}resolveToInlinePanel(i){if(tp(i)){let n=i.attr.ref,{app:l=this.sourceApp}=i.attr,c=Cs.prebuiltPanelCacheKey(n,l);return this.prebuiltPanelCache[c]}return i}addVizConversionLogs({viz:i,vizId:n,vizErrors:l,vizWarnings:c,type:a}){var b,w;if(i.attr.errorType==="prebuiltPanel"){let _=parseInt((b=i.attr.line)!=null?b:"");l.push(new Qd({ref:(w=i.attr.ref)!=null?w:"",line:isNaN(_)?void 0:_}))}c.forEach(_=>{_.convertedId=n,_.vizType||(_.vizType=a)}),l.forEach(_=>{_.convertedId=n,_.vizType||(_.vizType=a)}),this.conversionWarnings.push(...c),this.conversionErrors.push(...l)}parseContentsOfRowPanels(i){let n=[],l=[];return i.forEach(c=>{var a;let b=this.resolveToInlinePanel(c);if(!b){n.push({vizNodes:[new Rl.XmlDocument(`<error 
                            errorType="prebuiltPanel" ref="${(a=c.attr.ref)!=null?a:""}" line="${c.line}">
                        </error>`)],inputNodes:[]});return}let w=b.children,_=w.filter(Rd);l=[...l,...c.childrenNamed("html")];let T=w.filter(qf),x=Dr(b,"title");T.length?(T.forEach(M=>M.attr.panelTitle=x),T[0].attr.firstVizInPanel="true"):_.length||T.push(new Rl.XmlDocument("<error></error>")),n.push({vizNodes:T,inputNodes:_})}),{rowContents:n,htmlNodes:l}}parseRow(i){let n=i.children.filter(qf).map(T=>({vizNodes:[T],inputNodes:[]})),l=i.childrenNamed("html"),c=i.childrenNamed("panel");!n.length&&c.length&&({rowContents:n,htmlNodes:l}=this.parseContentsOfRowPanels(c)),l.forEach(T=>{this.conversionErrors.push(new tf({line:T.line}))});let a=0,b=0,w=[];return n.forEach(({vizNodes:T,inputNodes:x})=>{let M=[];T.length&&b++,T.forEach(D=>{let E=Cl(D,this.definition,this.dsIdMap),{definition:$,warnings:Y=[],conversionErrors:G=[],meta:le={}}=ep({node:D,dataSources:E});Xu(D,E,this.dsIdMap,Qf(D,$)),a+=le==null?void 0:le.vizHeight;let K=D.attr.id&&!this.definition.getVisualization(`viz_${D.attr.id}`)?`viz_${D.attr.id}`:this.definition.nextVisualizationId();this.addVizConversionLogs({viz:D,vizId:K,vizErrors:G,vizWarnings:Y,type:$.type}),this.definition.addVisualization(K,$),Object.keys(E).map(F=>{this.definition.connectDataSourceToVisualization({vizId:K,dataSourceType:F,dataSourceId:E[F]})}),M.push(K)});let A=x.map(this.parsePanelInput.bind(this));w.push({inputIds:A,vizIds:M})}),{maxRowVizHeight:Math.floor(b?a/b:0),parsedPanels:w}}addFillerRectangles(i){return i.map(n=>{let l=this.definition.nextVisualizationId();return this.definition.addVisualization(l,_g),Xr(Gt({},n),{item:l})})}parseLayout(){return ss(this,null,function*(){let i=[],n=0,l=this.root.childrenNamed("row");yield this.fetchPrebuiltPanels(l),this.root.childrenNamed("row").forEach(a=>{let{maxRowVizHeight:b,parsedPanels:w}=this.parseRow(a);if(w.length){let{structureItems:_,rowHeight:T,fillerRectangleDefs:x}=eb({parsedPanels:w,maxRowVizHeight:b,yOffset:n,layoutType:this.layoutType});n+=T;let M=this.addFillerRectangles(x);i=[...i,..._,...M]}}),this.definition.updateLayoutStructure(i);let c=this.root.attr.hideTitle&&(0,rb.normalizeBoolean)(this.root.attr.hideTitle);this.definition.updateLayoutType(this.layoutType),this.definition.updateLayoutOptions(Gt(Gt({height:n,width:Wu},Hr(c,{showTitleAndDescription:!c})),Hr(this.layoutType==="absolute",{display:wg})))})}parseDefinition(){return ss(this,null,function*(){try{return this.root=new Rl.XmlDocument(this.simpleXml),this.parseTitleDescription(),this.parseDashboardDefaults(),this.parseGlobalSearches(),this.parseGlobalInputs(),yield this.parseLayout(),zd(this.dsIdMap,this.definition),{status:Hu.SUCCESS,message:Cg,response:{theme:this.root.attr.theme||"light",definition:this.definition.toJSON(),assets:{},errors:this.errors,warnings:Nd(this.conversionWarnings),conversionReport:{conversionErrors:Bd(this.conversionErrors),conversionWarnings:Bd(this.conversionWarnings)}}}}catch({message:i,line:n}){return{status:Hu.FAIL,message:Dd,response:{theme:"light",definition:{},assets:{},warnings:[],errors:[{message:i,line:n}]}}}})}},sp=(s,...i)=>ss(void 0,[s,...i],function*(n,l="absolute",c=ap.app){return new Cs({layout:l,simpleXml:n,sourceApp:c}).parseDefinition()});var nb=br(Od(),1),Ts=br(zr(),1),N3=s=>{try{let i=new nb.XmlDocument(s),n;if(i.attr.hiddenElements)n=JSON.parse(i.attr.hiddenElements);else{let b=i.childWithAttribute("type","hiddenElements");n=b&&JSON.parse(b.val)}let l=new Blob([s]).size,c=i.childNamed("definition").val,a=!!c.match(/^\n\s*{\n/g);return{assets:JSON.parse((0,Ts.get)(i.childNamed("assets"),"val","{}")),tags:(0,Ts.get)(i.childNamed("tags"),"val",void 0),definition:JSON.parse(c),theme:i.attr.theme,hideEdit:(0,Ts.get)(n,"hideEdit",!1),hideOpenInSearch:(0,Ts.get)(n,"hideOpenInSearch",!1),hideExport:(0,Ts.get)(n,"hideExport",!1),dashboardSize:l,isJsonFormatted:a}}catch(i){return{definition:{},errors:[i.message]}}};var xp=br(hp(),1),H4=br(hp(),1),_p=br(ch(),1),K4=br(ch(),1),wp=br(dp(),1),Y4=br(dp(),1),Cp=br(fp(),1),X4=br(fp(),1),Sp=br(gg(),1),J4=br(gg(),1),Tp=br(ag(),1),Q4=br(ag(),1);var Ep=br(pp(),1),eE=br(pp(),1),Pp=br(mp(),1),tE=br(mp(),1),Op=br(yp(),1),nE=br(yp(),1),Mp=Object.defineProperty,j4=Object.defineProperties,F4=Object.getOwnPropertyDescriptor,V4=Object.getOwnPropertyDescriptors,B4=Object.getOwnPropertyNames,wb=Object.getOwnPropertySymbols,Kb=Object.prototype.hasOwnProperty,N4=Object.prototype.propertyIsEnumerable,Cb=(s,i,n)=>i in s?Mp(s,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[i]=n,vp=(s,i)=>{for(var n in i||(i={}))Kb.call(i,n)&&Cb(s,n,i[n]);if(wb)for(var n of wb(i))N4.call(i,n)&&Cb(s,n,i[n]);return s},U4=(s,i)=>j4(s,V4(i)),ro=(s,i)=>{for(var n in i)Mp(s,n,{get:i[n],enumerable:!0})},Sb=(s,i,n,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of B4(i))!Kb.call(s,c)&&c!==n&&Mp(s,c,{get:()=>i[c],enumerable:!(l=F4(i,c))||l.enumerable});return s},no=(s,i,n)=>(Sb(s,i,"default"),n&&Sb(n,i,"default")),Dp=(s,i,n)=>new Promise((l,c)=>{var a=_=>{try{w(n.next(_))}catch(T){c(T)}},b=_=>{try{w(n.throw(_))}catch(T){c(T)}},w=_=>_.done?l(_.value):Promise.resolve(_.value).then(a,b);w((n=n.apply(s,i)).next())}),fh={};ro(fh,{default:()=>W4});no(fh,$4);var Tb,Eb,W4=(Eb=(Tb=bp.default)==null?void 0:Tb.default)!=null?Eb:bp.default,Ap={};ro(Ap,{default:()=>G4});no(Ap,H4);var Pb,Ob,G4=(Ob=(Pb=xp.default)==null?void 0:Pb.default)!=null?Ob:xp.default,Os={};ro(Os,{default:()=>Z4});no(Os,K4);var Mb,Db,Z4=(Db=(Mb=_p.default)==null?void 0:Mb.default)!=null?Db:_p.default,Zb=s=>typeof s=="string"&&!!s.match(/^[0-9a-zA-Z_-]+$/),Da=class{constructor({action:s,status:i,message:n,response:l,request:c}){this.action=s,this.status=i,this.message=n,this.response=l,this.request=c}},Yb={};ro(Yb,{default:()=>Xb});no(Yb,Y4);var Ab,Ib,Xb=(Ib=(Ab=wp.default)==null?void 0:Ab.default)!=null?Ib:wp.default,Jb={};ro(Jb,{default:()=>qb});no(Jb,X4);var zb,kb,qb=(kb=(zb=Cp.default)==null?void 0:zb.default)!=null?kb:Cp.default,Qb={};ro(Qb,{default:()=>q4});no(Qb,J4);var Lb,Rb,q4=(Rb=(Lb=Sp.default)==null?void 0:Lb.default)!=null?Rb:Sp.default,ex={};ro(ex,{default:()=>Fl});no(ex,Q4);var jb,Fb,Fl=(Fb=(jb=Tp.default)==null?void 0:jb.default)!=null?Fb:Tp.default,tx={};ro(tx,{default:()=>dh});no(tx,eE);var Vb,Bb,dh=(Bb=(Vb=Ep.default)==null?void 0:Vb.default)!=null?Bb:Ep.default,rx={};ro(rx,{default:()=>nx});no(rx,tE);var Nb,Ub,nx=(Ub=(Nb=Pp.default)==null?void 0:Nb.default)!=null?Ub:Pp.default;var $b=s=>!!Fl($u,["inputs",s]);var rE=s=>Fl(s,"options.token","")==="global_time",ix=s=>{let i=Xb(s),n=Fl(i,"layout.globalInputs",[]);nx(n,a=>$b(a));let l=Fl(i,"inputs",{});return qb(l,(a,b)=>{$b(b)&&dh(i,["inputs",b])}),Object.values(l).filter(rE).length===0&&(dh(i,'defaults.dataSources["ds.search"].options.queryParameters.earliest'),dh(i,'defaults.dataSources["ds.search"].options.queryParameters.latest')),i};var Di={};ro(Di,{default:()=>iE});no(Di,nE);var Wb,Hb,iE=(Hb=(Wb=Op.default)==null?void 0:Wb.default)!=null?Hb:Op.default,jl="fail",oE="success",ZD=(0,Di._)("Successfully added to existing dashboard"),YD=(0,Di._)("Failed to add to existing dashboard"),XD=(0,Di._)("Successfully saved to dashboard"),JD=(0,Di._)("Failed to save to dashboard"),aE=(0,Di._)("Successfully cloned dashboard"),sE=(0,Di._)("Failed to clone dashboard"),qD=(0,Di._)("Missing required parameters: id, simpleXmlVizDef"),Gb=(0,Di._)('Invalid layout field, requires "absolute" or "grid"'),lE=(0,Di._)("Missing required parameters: id, simpleXmlDefinition"),ph=(0,Di._)("Dashboard ID can only use letters, numbers, dashes, & underscores.");var QD=s=>Dp(void 0,[s],function*({simpleXmlString:i,layout:n="absolute",app:l}){let c=yield sp(i,n,l);return c.response.definition=ix(c.response.definition),new Da(vp({action:"convertDashboard",request:{simpleXmlString:i}},c))}),uE=s=>Dp(void 0,null,function*(){let{id:i,definition:n={},title:l=n.title,description:c=n.description,app:a=Os.app,action:b="cloneUdfDashboard",owner:w=Os.username,sharing:_,theme:T,assets:x,viewOptions:M,conversionReport:A}=s;if(!Zb(i))return new Da({action:b,status:jl,message:ph,response:{errors:[{error:ph}]},request:s});let D=U4(vp({},n),{title:l,description:c});try{yield Sg(vp({id:i,app:a,owner:w,definition:D,sharing:_,theme:T,assets:x},M));let E=(0,Ap.createURL)(`app/${a}/${i}`);return new Da({action:b,status:oE,message:aE,response:{id:i,title:l,dashboardURL:E,conversionReport:A},request:s})}catch(E){return new Da({action:b,status:jl,message:E.message,response:{errors:[{error:E.message}],conversionReport:A},request:s})}}),eA=s=>Dp(void 0,null,function*(){var i;let{id:n,title:l,description:c,app:a=Os.app,owner:b=Os.username,layout:w,sharing:_,assets:T,simpleXmlDefinition:x}=s,M="cloneSimpleXmlToUdf";if(!w||w!=="absolute"&&w!=="grid")return new Da({action:M,status:jl,message:Gb,response:{errors:[{error:Gb}]},request:s});if(!n||!x)return new Da({action:M,status:jl,message:sE,response:{errors:[{error:lE}]},request:s});if(!Zb(n))return new Da({action:M,status:jl,message:ph,response:{errors:[{error:ph}]},request:s});let A=yield sp(x,w),D=(0,fh.get)(A,"response.definition"),E=(i=A==null?void 0:A.response)==null?void 0:i.conversionReport;D=ix(D);let $=(0,fh.get)(A,"response.theme");return uE({id:n,title:l,description:c,app:a,action:M,owner:b,definition:D,sharing:_,theme:$,assets:T,conversionReport:E})});export{dp as a,Vc as b,p1 as c,Ad as d,db as e,fp as f,ty as g,uy as h,dy as i,ys as j,Cf as k,Sf as l,Ty as m,Py as n,My as o,Ay as p,zy as q,Lc as r,Ef as s,Pf as t,Oa as u,Vy as v,Ny as w,$y as x,Hy as y,Ky as z,Jy as A,t1 as B,n1 as C,Nc as D,vb as E,ip as F,jc as G,kf as H,Rc as I,Fc as J,Uc as K,H1 as L,zf as M,Bc as N,Df as O,y1 as P,b1 as Q,E1 as R,Lf as S,Rf as T,jf as U,Vf as V,K1 as W,O1 as X,D1 as Y,bv as Z,N3 as _,jl as $,oE as aa,QD as ba,uE as ca,eA as da};
